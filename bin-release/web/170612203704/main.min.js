var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Dictionary=function(){function t(){this._count=0,this._maps={},this._objKeys=[],this._objDatum=[]}return t.prototype.add=function(t,e){if("string"==typeof t||"number"==typeof t)this._maps[t]||this._count++,this._maps[t]=e;else{var i=this._objKeys.lastIndexOf(t);-1==i?(this._objKeys.push(t),this._objDatum.push(e),this._count++):this._objDatum[i]=e}},t.prototype.del=function(t){var e;"string"==typeof t||"number"==typeof t?this._maps[t]&&(delete this._maps[t],this._count--):(e=this._objKeys.lastIndexOf(t),-1!=e&&(this._objKeys.splice(e,1),this._objDatum.splice(e,1),this._count--))},t.prototype.get=function(t){if("string"==typeof t||"number"==typeof t)return this._maps[t]?this._maps[t]:null;var e=this._objKeys.lastIndexOf(t);return-1!=e?this._objDatum[e]:null},t.prototype.has=function(t){if("string"==typeof t||"number"==typeof t)return this._maps[t]?!0:!1;var e=this._objKeys.lastIndexOf(t);return-1!=e?!0:null},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i in this._maps)t(i,this._maps[i]);for(var n=0;n<this._objKeys.length;n++){var a=this._objKeys[n];t(this._objKeys[n],this._objDatum[n]),a!=this._objKeys[n]&&n--}},Object.defineProperty(t.prototype,"elements",{get:function(){var t=[];for(var e in this._maps)t.push({key:e,data:this._maps[e]});for(var i=this._objKeys.length,n=0;i>n;n++)t.push({key:this._objKeys[n],data:this._objDatum[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){var t=[];for(var e in this._maps)t.push(e);for(var i=this._objKeys.length,n=0;i>n;n++)t.push(this._objKeys[n]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datum",{get:function(){var t=[];for(var e in this._maps)t.push(this._maps[e]);for(var i=this._objKeys.length,n=0;i>n;n++)t.push(this._objDatum[n]);return t},enumerable:!0,configurable:!0}),t.prototype.dump=function(){for(var t in this._maps)console.log("key:",t,"---> data:",this._maps[t]);for(var e=this._objKeys.length,i=0;e>i;i++)console.log("key:",typeof this._objKeys[i]," ---> data:",this._objDatum[i])},t}();__reflect(Dictionary.prototype,"Dictionary");var ActivityPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/activity/ActivitySkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),GlobalData.isHasShowActive=!0,EventManage.addButtonEvent(this,this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnTurn,egret.TouchEvent.TOUCH_TAP,this.onpenLottery.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),this.arr=[],this.data=[],this.createItems()},e.prototype.createItems=function(){for(var t=[{stt:"游戏更新公告",state:"",content:"gengxin"},{stt:"开服活动",state:"hd.hot",content:"kaifu"},{stt:"首充活动公告",state:"hd.hot",content:"shouchong"},{stt:"月卡终身卡",state:"hd.new",content:"yueka"},{stt:"免费金币活动",state:"",content:"free"},{stt:"法律声明",state:"",content:"shengming"}],e=t.length,i=0;e>i;i++){var n=ObjManage.getObj("ActivityItemPanel");n.x=0,n.y=56*i,this.itemGroup.addChild(n),n.setData(t[i]),EventManage.addButtonEvent(this,n,egret.TouchEvent.TOUCH_TAP,this.clickItem.bind(this,n,t[i].content)),this.data.push(n),this.arr.push(n)}this.clickItem(this.arr[0],"gengxin")},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("ActivityItemPanel",this.arr[e]));this.arr=[]},e.prototype.clickItem=function(t,e){this.txtScroller.viewport.validateNow(),egret.Tween.get(this.txtScroller.viewport).to({scrollV:0},200);for(var i=this.data.length,n=0;i>n;n++){var a=this.data[n];a.click(!1)}t.click(!0),this.txtContent.text=GlobalData.configData.huodong[""+e],"kaifu"==e?this.btnTurn.visible=!0:this.btnTurn.visible=!1},e.prototype.onpenLottery=function(){PanelManage.openLottery()},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ActivityPanel.prototype,"ActivityPanel",["fany.IDispose"]);var EventData;!function(t){t.HIDE_LOADING_TXT="HIDE_LOADING_TXT",t.LOGIN_REG_ROLE="LOGIN_REG_ROLE",t.CREATE_ROLE="CREATE_ROLE",t.UPDATE_MAIN="UPDATE_MAIN",t.UI_LOADING_COM="UI_LOADING_COM",t.UI_COM_OPEN="UI_COM_OPEN",t.TXT_SCROLL_COMPLETE="txtscrollcomplete",t.CREATE_SEX="CREATE_SEX",t.ADD_CHAT_PLAYER="ADD_CHAT_PLAYER",t.ADD_FRIEND_PLAYER="ADD_FRIEND_PLAYER",t.INTOBLACk_FRIEND_PLAYER="INTOBLACk_FRIEND_PLAYER",t.OUTBLACk_FRIEND_PLAYER="OUTBLACk_FRIEND_PLAYER",t.SHOW_BOTTOM="SHOW_BOTTOM",t.FIGHT_OVER="FIGHT_OVER",t.STORY_OVER="STORY_OVER",t.GET_CHAT_PLAYERINFO="GET_CHAT_PLAYERINFO",t.MAIL_UPDATA="MAIL_UPDATA",t.GO_ON="GO_ON",t.DASHANG_NOTICE_PUBLISH="DASHANG_NOTICE_PUBLISH",t.TASK_AFTER_COMPLETE="TASK_AFTER_COMPLETE",t.OPERTE_REDBOX_COMPLETE="OPERTE_REDBOX_COMPLETE",t.UPDATE_PAY="UPDATE_PAY",t.CHAT_GAME_RESULT="CHAT_GAME_RESULT",t.GIFT_ON_EXCHANGE="GIFT_ON_EXCHANGE",t.GET_FOLLOW_GOLD="GET_FOLLOW_GOLD",t.CLOWN_CHOOSE_CLOSE="CLOWN_CHOOSE_CLOSE"}(EventData||(EventData={}));var GlobalData;!function(t){t.openid="",t.isJoin="",t.otheruserid="",t.otheridd="",t.token="",t.tableState="0",t.isSign=!1,t.platform="my2016",t.userfrom="",t.version="",t.account="",t.huancun=null,t.connectIP="211.149.207.220",t.connectPort=7010,t.cdnResUrl="",t.curData=[],t.cacheChat={},t.configData={},t.resurl="",t.channelExt="",t.isFirstShowSign=!0,t.isHasShowActive=!1,t.isLodingComUI=!1,t.isLodingComJinSha=!1,t.isLodingComNiuNiu=!1,t.isLodingComJinHua=!1,t.isLodingComBlackJack=!1,t.isLodingComPK=!1,t.isLodingComDDZ=!1,t.isLodingComClown=!1,t.isLodingComFruit=!1,t.hallNotice=-1,t.isMusic=!0,t.isDebug=!1,t.isLogin=!1,t.isComplete=!1,t.isLoadingMcCom=!1,t.isLoadingThemCom=!1,t.isLoadingResCom=!1}(GlobalData||(GlobalData={}));var MessageData;!function(t){t.IO_ERROR="io-error",t.CLOSE="close",t.DWC_MONEY="dwc_money",t.GOLDEN_EVENT="golden_event",t.NIUNIU_EVENT="niuniu_event",t.NOTICE_MESSAGE="notice_message",t.PK_EVENT="pk_event",t.RESULT_JINSHA="result",t.START_BET="startBet",t.STOP_BET="stopBet",t.UP_BANKER="upBanker",t.DOWN_BANKER="downBanker",t.CHANGE_BANKER="changeBanker",t.COLLECT="collect",t.GLOBALCHAT="globalChat",t.REDPACK="redpack",t.DWC_PAY="dwc_pay",t.GAME_CHAT="gameChat",t.JOIN="join",t.LEAVE="leave",t.READY="ready",t.CALLDIZHU="calldizhu",t.JIAOFEN="jiaofen",t.MAKEDIZHU="makedizhu",t.START="start",t.SENDCARD="sendCard",t.OPENCARD="openCard",t.CONCLUDE="complete",t.CHANGEOWNER="changeOwner",t.CURBET="curbet",t.CHUPAI="chupai",t.CHANGECHUPAI="changechupai",t.PARAERR="paraerr",t.PAY="pay",t.CLOWN_EVENT="clown_event",t.FRUIT_RESULT="fruit_result",t.FRUIT_START_BET="fruit_startBet",t.FRUIT_STOP_BET="fruit_stopBet",t.FRUIT_COLLECT="fruit_collect"}(MessageData||(MessageData={}));var PlatformData;!function(t){t.USER_FROM_PLATFORM="platform",t.USER_FROM_SELF="self",t.USER_FROM_WEIXIN="weixin",t.PLATFORM_QUNHEI="qunhei",t.PLATFORM_JIUYAOWAN="jiuyaowan",t.PLATFORM_BAIDU="baidu",t.PLATFORM_YOUXIDOU="youxidou"}(PlatformData||(PlatformData={}));var RES;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._dataFormat=egret.URLLoaderDataFormat.TEXT,t}return __extends(i,e),i.prototype.getRes=function(e){var i=t.AnalyzerBase.getStringTail(e);return this.fileDic[i]},i.prototype.analyzeData=function(t,e){if(e)for(var i=e,n=i.split(new RegExp("\r\n","gi")),a=n.length,s=0;a>s;s++){var o=n[s].indexOf("=");o>1&&(this.fileDic[n[s].substring(0,o)]=n[s].substring(o+1))}},i}(t.BinAnalyzer);e.TYPE="prop",t.PropertiesAnalyzer=e,__reflect(e.prototype,"RES.PropertiesAnalyzer")}(RES||(RES={}));var Protocol;!function(t){t.GAME_GOLD_REDBOX="golden.goldenHandler.redPack",t.GAME_NIUNIU_REDBOX="niuniu.niuniuHandler.redPack",t.GAME_CLOWN_REDBOX="clown.clownHandler.redPack",t.GET_SHOP_LIST="hall.hallHandler.getShopList",t.GET_RANK_LIST="hall.hallHandler.getRankList",t.GET_BANK="hall.hallHandler.getBank",t.INTO_BANK="hall.hallHandler.intoBank",t.OUT_BANK="hall.hallHandler.outBank",t.GAME_GET_REDBOX="hall.hallHandler.grabRedPack",t.HALL_GET_GOLD="hall.hallHandler.getGold",t.JOIN_GOLDEN_GAME="golden.goldenHandler.joinGame",t.GOLDEN_GET_BETS="golden.goldenHandler.getBets",t.GOLDEN_BET_GOLD="golden.goldenHandler.betGold",t.GOLDEN_UP_BANKER="golden.goldenHandler.upToBanker",t.GOLDEN_DOWN_BANKER="golden.goldenHandler.downBanker",t.GOLDEN_BANKER_LIST="golden.goldenHandler.listBanker",t.GOLDEN_LEAVE_GAME="golden.goldenHandler.leaveGame",t.GOLDEN_SEAT_DOWN="golden.goldenHandler.downSeat",t.GOLDEN_GAME_RECORD="golden.goldenHandler.getGameRecord",t.JINHUA_GET_GOLD="golden.goldenHandler.getGold",t.JOIN_NIUNIU_GAME="niuniu.niuniuHandler.joinGame",t.NIUNIU_GET_BETS="niuniu.niuniuHandler.getBets",t.NIUNIU_BET_GOLD="niuniu.niuniuHandler.betGold",t.NIUNIU_UP_BANKER="niuniu.niuniuHandler.upToBanker",t.NIUNIU_DOWN_BANKER="niuniu.niuniuHandler.downBanker",t.NIUNIU_BANKER_LIST="niuniu.niuniuHandler.listBanker",t.NIUNIU_LEAVE_GAME="niuniu.niuniuHandler.leaveGame",t.NIUNIU_SEAT_DOWN="niuniu.niuniuHandler.downSeat",t.NIUNIU_GAME_RECORD="niuniu.niuniuHandler.getGameRecord",t.NIUNIU_GET_GOLD="niuniu.niuniuHandler.getGold",t.GAME_ANIMAL_REDBOX="animal.animalHandler.redPack",t.JOIN_JINSHA_GAME="animal.animalHandler.joinGame",t.XIA_ZHU_JINSHA="animal.animalHandler.betGold",t.JIN_SHA_LEAVE="animal.animalHandler.leaveGame",t.JIN_SHA_TONGBU="animal.animalHandler.getBets",t.JIN_SHA_SHANGZHUANG="animal.animalHandler.upToBanker",t.JIN_SHA_XIAZHUANG="animal.animalHandler.downBanker",t.JIN_SHA_ZHUANGLIST="animal.animalHandler.listBanker",t.JINSHA_GET_GOLD="animal.animalHandler.getGold",t.BLACK_JACK_JOIN="to.toHandler.joinGame",t.BLACK_JACK_START="to.toHandler.startGame",t.BLACK_JACK_SETCARD="to.toHandler.setCard",t.BLACK_JACK_LEAVE="to.toHandler.leaveGame",t.BLACK_JACK_RANK="to.toHandler.getToList",t.BLACK_JACK_CHOOSE="to.toHandler.changeDiFen",t.BLACK_JACK_REWARD="to.toHandler.getWin",t.HALL_TASK_LIST="hall.hallHandler.getTaskList",t.HALL_TASK_GET="hall.hallHandler.getTaskGift",t.HALL_REWARD_LIST="hall.hallHandler.getRewardList",t.HALL_RELEASE_REWARD="hall.hallHandler.releaseReward",t.HALL_GIVE_REWARD="hall.hallHandler.giveReward",t.HALL_MONEYTREE_LIST="hall.hallHandler.getMoneyTree",t.HALL_MONEYTREE_GET="hall.hallHandler.getMoneyFromTree",t.HALL_SET_PROPOSAL="hall.hallHandler.setProposal",t.GET_MAIL_LIST="hall.hallHandler.getMails",t.HALL_GIFT_LOTTERY_INFO="hall.hallHandler.getLotteryInfo",t.HALL_GIFT_GET_LOTTERY="hall.hallHandler.getLottery",t.HALL_GIFT_LIST="hall.hallHandler.getGiftList",t.HALL_GIFT_EXCHANGE="hall.hallHandler.exchangeGift",t.HALL_GIFT_SELF_RECORD="hall.hallHandler.getSelfExchangeRecord",t.HALL_GIFT_ALL_RECORD="hall.hallHandler.getExchangeRecord",t.HALL_SIGN_GET="hall.hallHandler.getSignCount",t.HALL_SIGN_SIGN="hall.hallHandler.sign",t.GAME_GONGGAO="hall.hallHandler.broadcast",t.YAO_QING="hall.hallHandler.spreadInfo",t.YUE_KA="hall.hallHandler.getMonthCard",t.GET_YUE="hall.hallHandler.getCardEveryDay",t.GET_ALMS="hall.hallHandler.getAlms",t.JINSHA_SEND_CHAT="animal.animalHandler.broadcast",t.NIUNIU_SEND_CHAT="niuniu.niuniuHandler.broadcast",t.JINHUA_SEND_CHAT="golden.goldenHandler.broadcast",t.FRUIT_SEND_CHAT="fruit.fruitHandler.broadcast",t.GET_VIPS="hall.hallHandler.getVips",t.PK_CREATE="pk.pkHandler.createGame",t.PK_JOIN="pk.pkHandler.joinGame",t.PK_SETHAND="pk.pkHandler.setHand",t.PK_LEAVE="pk.pkHandler.leaveGame",t.JOIN_DDZ_GAME="hall.hallHandler.queryDDZTable",t.DDZ_CREATE_TABLE="ddz.ddzHandler.createTable",t.DDZ_JIAO_FEN="ddz.ddzHandler.jiaofen",t.DDZ_CHU_PAI="ddz.ddzHandler.chupai",t.DDZ_JOIN_TABLE="ddz.ddzHandler.joinTable",t.DDZ_READY_GAME="ddz.ddzHandler.gameReady",t.DDZ_START_GAME="ddz.ddzHandler.startGame",t.DDZ_COMMIT_CARD="ddz.ddzHandler.commitCard",t.DDZ_QUIT_GAME="ddz.ddzHandler.leaveTable",t.DDZ_AGAIN_GAME="ddz.ddzHandler.againGame",t.DIAL_GET_INFO="hall.hallHandler.getDialInfo",t.DIAL_GET_AWARD="hall.hallHandler.getDialAward",t.HALL_GET_FOLLOW_GOLD="hall.hallHandler.getFollowGold",t.GET_JINGCAI_HISTORY_LIST="hall.hallHandler.getCompetitionRecordList",t.GET_JINGCAI_LIST="hall.hallHandler.getCompetitionList",t.SEND_JINGCAI="hall.hallHandler.competition",t.GAME_USER_LOGIN="connector.entryHandler.usernamelogin",t.GAME_REG="connector.entryHandler.reg",t.UPDATE_NAME="hall.hallHandler.updateName",t.UPDATE_ADDRESS="hall.hallHandler.updateAddress",t.GET_ADDRESS="hall.hallHandler.getAddress",t.GET_RANK_LIST2="hall.hallHandler.getWinRank",t.CLOWN_CLOWNHANDLER_JOINGAME="clown.clownHandler.joinGame",t.CLOWN_CLOWNHANDLER_LEAVEGAME="clown.clownHandler.leaveGame",t.CLOWN_CLOWNHANDLER_RANDRESULT="clown.clownHandler.randResult",t.CLOWN_CLOWNHANDLER_CHOOSECLOWN="clown.clownHandler.chooseClown",t.CLOWN_CLOWNHANDLER_ENDCHOOSE="clown.clownHandler.endChoose",t.CLOWN_GET_GIFT="clown.clownHandler.getGift",t.CLOWN_QUIT="clown.clownHandler.endChoose",t.CLOWN_RANK_DAY="clown.clownHandler.getDayRank",t.CLOWN_RANK_WEEK="clown.clownHandler.getWeekRank",t.CLOWN_GET_MESSAGES="clown.clownHandler.getMessages",t.FRUIT_XIA_ZHU="fruit.fruitHandler.betGold",t.FRUIT_LEAVE="fruit.fruitHandler.leaveGame",t.FRUIT_TONGBU="fruit.fruitHandler.getBets",t.FRUIT_GET_GOLD="fruit.fruitHandler.getGold",t.FRUIT_JOIN_GAME="fruit.fruitHandler.joinGame",t.FRUIT_GAME_REDBOX="fruit.fruitHandler.redPack",t.FRUIT_GET_MAX="fruit.fruitHandler.getMaxWinner"}(Protocol||(Protocol={}));var NumEffect=function(){function t(t,e,i){this.txt=null,this.result=0,this.txt=t,this.result=e,this.cb=i,this.tweenNum()}return Object.defineProperty(t.prototype,"num",{get:function(){var t="";return this.txt&&(t=this.txt.text),QuickManage.moneyStr2number(t)},set:function(t){this.txt&&(this.txt.text=QuickManage.moneyStr(Math.ceil(t))),t==this.result&&(this.cb&&this.cb(),this.dispose())},enumerable:!0,configurable:!0}),t.prototype.tweenNum=function(){egret.Tween.get(this).to({num:this.result},1e3)},t.prototype.dispose=function(){egret.Tween.removeTweens(this),this.txt=null,this.result=0,this.cb=null},t}();__reflect(NumEffect.prototype,"NumEffect");var MarketingType;!function(t){t[t.REWARD=0]="REWARD",t[t.QUAN=1]="QUAN",t[t.FROM=2]="FROM",t[t.SHARE=3]="SHARE"}(MarketingType||(MarketingType={}));var OnNotice;!function(t){t[t.REWARD=0]="REWARD",t[t.QUAN=1]="QUAN",t[t.FROM=2]="FROM",t[t.SHARE=3]="SHARE"}(OnNotice||(OnNotice={}));var TemplateType;!function(t){t[t.PPT=1]="PPT",t[t.GAME=0]="GAME",t[t.HELP=2]="HELP"}(TemplateType||(TemplateType={}));var fany;!function(t){var e=function(){function t(){}return t.prototype.init=function(){this.setShare(),this.start()},t.prototype.setShare=function(){if("weixin"==GlobalData.userfrom){var t=new JSSDK;t.init(),GlobalData.jssdk=t}},t.prototype.start=function(){GlobalData.otheridd=QuickManage.$GET("fid"),PanelManage.openHall(),ResManage.init("ui",!0,this.uiloadingcallback.bind(this))},t.prototype.uiloadingcallback=function(){GlobalData.isLodingComUI=!0,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UI_LOADING_COM)),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UI_COM_OPEN,{num:0,from:2}))},t}();t.GameData=e,__reflect(e.prototype,"fany.GameData")}(fany||(fany={}));var GameListen=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setOn=function(){fany.SocketManage.pomelo.on(MessageData.RESULT_JINSHA,this.manageOn.bind(this,2)),fany.SocketManage.pomelo.on(MessageData.START_BET,this.manageOn.bind(this,3)),fany.SocketManage.pomelo.on(MessageData.STOP_BET,this.manageOn.bind(this,4)),fany.SocketManage.pomelo.on(MessageData.UP_BANKER,this.manageOn.bind(this,5)),fany.SocketManage.pomelo.on(MessageData.DOWN_BANKER,this.manageOn.bind(this,6)),fany.SocketManage.pomelo.on(MessageData.CHANGE_BANKER,this.manageOn.bind(this,7)),fany.SocketManage.pomelo.on(MessageData.COLLECT,this.manageOn.bind(this,8)),this.setDdz(),this.setPk(),this.setNiuniu(),this.setZjh(),this.setClown(),this.setFruit()},t.prototype.setFruit=function(){fany.SocketManage.pomelo.on(MessageData.FRUIT_RESULT,this.manageOnFruit.bind(this,2)),fany.SocketManage.pomelo.on(MessageData.FRUIT_START_BET,this.manageOnFruit.bind(this,3)),fany.SocketManage.pomelo.on(MessageData.FRUIT_STOP_BET,this.manageOnFruit.bind(this,4)),fany.SocketManage.pomelo.on(MessageData.FRUIT_COLLECT,this.manageOnFruit.bind(this,8))},t.prototype.setClown=function(){fany.SocketManage.pomelo.on(MessageData.CLOWN_EVENT,this.manageOnClown.bind(this,1))},t.prototype.setDdz=function(){fany.SocketManage.pomelo.on(MessageData.JOIN,this.manageOnDdz.bind(this,1)),fany.SocketManage.pomelo.on(MessageData.READY,this.manageOnDdz.bind(this,2)),fany.SocketManage.pomelo.on(MessageData.LEAVE,this.manageOnDdz.bind(this,3)),fany.SocketManage.pomelo.on(MessageData.SENDCARD,this.manageOnDdz.bind(this,5)),fany.SocketManage.pomelo.on(MessageData.OPENCARD,this.manageOnDdz.bind(this,6)),fany.SocketManage.pomelo.on(MessageData.CONCLUDE,this.manageOnDdz.bind(this,7)),fany.SocketManage.pomelo.on(MessageData.CHANGEOWNER,this.manageOnDdz.bind(this,8)),fany.SocketManage.pomelo.on(MessageData.CALLDIZHU,this.manageOnDdz.bind(this,9)),fany.SocketManage.pomelo.on(MessageData.MAKEDIZHU,this.manageOnDdz.bind(this,10)),fany.SocketManage.pomelo.on(MessageData.CURBET,this.manageOnDdz.bind(this,11)),fany.SocketManage.pomelo.on(MessageData.CHUPAI,this.manageOnDdz.bind(this,12)),fany.SocketManage.pomelo.on(MessageData.CHANGECHUPAI,this.manageOnDdz.bind(this,13)),fany.SocketManage.pomelo.on(MessageData.PARAERR,this.manageOnDdz.bind(this,14)),fany.SocketManage.pomelo.on(MessageData.PAY,this.manageOnDdz.bind(this,15))},t.prototype.setNiuniu=function(){fany.SocketManage.pomelo.on(MessageData.NIUNIU_EVENT,function(t){PanelManage.niuniu&&PanelManage.niuniu.onMsgListen(t)})},t.prototype.setZjh=function(){fany.SocketManage.pomelo.on(MessageData.GOLDEN_EVENT,function(t){PanelManage.zhajinhua&&PanelManage.zhajinhua.onMsgListen(t)})},t.prototype.setPk=function(){fany.SocketManage.pomelo.on(MessageData.PK_EVENT,function(t){PanelManage.pk&&PanelManage.pk.messageOn(t)})},t.prototype.manageOn=function(t,e){switch(t){case 2:PanelManage.jinsha&&PanelManage.jinsha.resultcome(e);break;case 3:PanelManage.jinsha&&PanelManage.jinsha.betcome(e);break;case 4:PanelManage.jinsha&&PanelManage.jinsha.betstop(e);break;case 5:PanelManage.jinsha&&PanelManage.jinsha.someonupzhuang(e);break;case 6:PanelManage.jinsha&&PanelManage.jinsha.someondownzhuang(e);break;case 7:PanelManage.jinsha&&PanelManage.jinsha.someonshangzhuang(e);break;case 8:PanelManage.jinsha&&PanelManage.jinsha.collect(e)}},t.prototype.manageOnFruit=function(t,e){switch(t){case 2:PanelManage.fruit&&PanelManage.fruit.resultcome(e);break;case 3:PanelManage.fruit&&PanelManage.fruit.betcome(e);break;case 4:PanelManage.fruit&&PanelManage.fruit.betstop(e);break;case 8:PanelManage.fruit&&PanelManage.fruit.collect(e)}},t.prototype.manageOnClown=function(t,e){switch(t){case 1:PanelManage.clown&&PanelManage.clown.changeClownKing(e);break;case 2:}},t.prototype.manageOnDdz=function(t,e){switch(t){case 1:PanelManage.ddz&&PanelManage.ddz.someonejoin(e);break;case 2:PanelManage.ddz&&PanelManage.ddz.someoneready(e);break;case 3:PanelManage.ddz&&PanelManage.ddz.someoneleave(e);break;case 5:PanelManage.ddz&&PanelManage.ddz.someonesendcard(e);break;case 6:PanelManage.ddz&&PanelManage.ddz.someoneopencard(e);break;case 7:PanelManage.ddz&&PanelManage.ddz.someoneconclude(e);break;case 8:PanelManage.ddz&&PanelManage.ddz.someonechangeowner(e);break;case 9:PanelManage.ddz?PanelManage.ddz.someonecalldizhu(e):GlobalData.huancun=e;break;case 10:PanelManage.ddz&&PanelManage.ddz.someonemakedizhu(e);break;case 11:PanelManage.ddz&&PanelManage.ddz.someonecurbet(e);break;case 12:PanelManage.ddz&&PanelManage.ddz.someonechupai(e);break;case 13:PanelManage.ddz&&PanelManage.ddz.someonechangechupai(e);break;case 14:PanelManage.ddz&&PanelManage.ddz.someonequit(e);break;case 15:}},t}();GameListen.instance=null,__reflect(GameListen.prototype,"GameListen");var UserInfo=function(){function t(){this._sex="1",this._seat="-1"}return Object.defineProperty(t.prototype,"rate",{get:function(){return this._rate},set:function(t){this._rate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"difen",{get:function(){return this._difen},set:function(t){this._difen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"idd",{get:function(){return this._idd},set:function(t){this._idd=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasRecharge",{get:function(){return this._hasRecharge},set:function(t){this._hasRecharge=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOneLogin",{get:function(){return this._isOneLogin},set:function(t){this._isOneLogin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"taskstate",{get:function(){return this._taskstate},set:function(t){this._taskstate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"emailstate",{get:function(){return this._vip},set:function(t){this._emailstate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vip",{get:function(){return this._vip},set:function(t){this._vip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gold",{get:function(){return this._gold},set:function(t){this._gold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quan",{get:function(){return this._quan},set:function(t){this._quan=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seat",{get:function(){return this._seat},set:function(t){this._seat=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headurl",{get:function(){return this._headurl},set:function(t){this._headurl=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nickname",{get:function(){return this._nickname},set:function(t){this._nickname=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sex",{get:function(){return this._sex},set:function(t){this._sex=t},enumerable:!0,configurable:!0}),t}();__reflect(UserInfo.prototype,"UserInfo");var Net;!function(t){function e(){fany.SocketManage.connectServer()}function i(){fany.SocketManage.login()}function n(){fany.SocketManage.pomelo.on(MessageData.GLOBALCHAT,t.manageOn.bind(this,9)),fany.SocketManage.pomelo.on(MessageData.NOTICE_MESSAGE,t.manageOn.bind(this,10)),fany.SocketManage.pomelo.on(MessageData.REDPACK,t.manageOn.bind(this,11)),fany.SocketManage.pomelo.on(MessageData.DWC_PAY,t.manageOn.bind(this,12)),fany.SocketManage.pomelo.on(MessageData.GAME_CHAT,t.manageOn.bind(this,14)),fany.SocketManage.pomelo.on(MessageData.DWC_MONEY,t.manageOn.bind(this,15)),GameListen.getInstance().setOn()}function a(e,i,n,a){if(void 0===a&&(a=!0),fany.SocketManage.isConnect){if(a&&t.oldpro==e){var s=egret.getTimer();if(s-t.oldtime<200)return TipsManage.showTips("您的操作太频繁！"),void(t.oldtime=s);t.oldtime=s}fany.SocketManage.pomelo.request(e,i,function(t){n(t)}),t.oldpro=e}else TipsManage.showTips("服务器未连接！")}function s(t,e,i,n){if(fany.SocketManage.isConnect){var a=DataManage.getPool(n);a?i(a):fany.SocketManage.pomelo.request(t,e,function(t){DataManage.addPool(n,t),i(t)})}else TipsManage.showTips("服务端已经关闭！")}function o(t,e){fany.SocketManage.isConnect?fany.SocketManage.pomelo.notify(t,e):TipsManage.showTips("服务端已经关闭！")}function r(t,e){switch(t){case 9:PanelManage.hall&&PanelManage.notice.gonggao(e);break;case 10:PanelManage.hall?PanelManage.hall.redNotice(e.msg,!0):GlobalData.hallNotice=e.msg;break;case 11:if(e.msg.name==GlobalData.user.nickname)return;PanelManage.openRedBox(-1,0,e.msg);break;case 12:lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_PAY,e));break;case 14:PanelManage.chat&&PanelManage.chat.setChat(e);break;case 15:PanelManage.yao&&PanelManage.yao.updateData(e)}}t.oldtime=0,t.oldpro="",t.connectServer=e,t.login=i,t.setOn=n,t.send=a,t.sendNeedSave=s,t.sendVoid=o,t.manageOn=r}(Net||(Net={}));var BasePanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(BasePanel.prototype,"BasePanel",["fany.IDispose"]);var ButtonMusic=function(t){function e(e){void 0===e&&(e="btnMusic_png");var i=t.call(this)||this;return i.createMusic(e),i}return __extends(e,t),e.prototype.createMusic=function(t){this.btnMusic=new egret.Bitmap,this.btnMusic.texture=RES.getRes(t),PanelManage.tipsLayer.addChild(this.btnMusic),EnterFrameManage.add(this.gogo.bind(this),"ButtonMusic.gogo"),EventManage.addEvent(this,this.btnMusic,egret.TouchEvent.TOUCH_TAP,this.click),MusicManage.playBgMuisc(1),this.btnMusic.anchorOffsetX=this.btnMusic.width/2,this.btnMusic.anchorOffsetY=this.btnMusic.height/2,this.btnMusic.y+=this.btnMusic.width/2,this.btnMusic.x=this.btnMusic.height/2},e.prototype.click=function(){EnterFrameManage.checkExist("ButtonMusic.gogo")?(EnterFrameManage.remove("ButtonMusic.gogo"),MusicManage.closeBgMuisc()):(EnterFrameManage.add(this.gogo.bind(this),"ButtonMusic.gogo"),MusicManage.playBgMuisc(1))},e.prototype.gogo=function(){this.btnMusic.rotation+=2},e}(egret.Sprite);__reflect(ButtonMusic.prototype,"ButtonMusic");var ScrollPanel=function(t){function e(e,i){var n=t.call(this)||this;return n.ww=0,n.hh=0,n.xx=0,n.yy=0,n.time=0,n.ww=e,n.hh=i,n}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.bgGroup=new eui.Group,this.bgGroup.width=this.ww,this.bgGroup.height=this.hh,this.addChild(this.bgGroup),EventManage.addEvent(this,this.bgGroup,egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin.bind(this)),EventManage.addEvent(this,this.bgGroup,egret.TouchEvent.TOUCH_END,this.onTouchEend.bind(this)),EventManage.addEvent(this,this.bgGroup,egret.TouchEvent.TOUCH_MOVE,this.onTouchMove.bind(this));var t=new eui.Label("ssssssssssssssssss");this.bgGroup.addChild(t),this.view=new YuePanel,this.view.touchEnabled=!1,this.view.touchChildren=!1,this.bgGroup.addChild(this.view);var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawRect(0,0,this.ww,this.hh),e.graphics.endFill(),this.addChild(e),this.mask=e},e.prototype.onTouchEend=function(t){var e=(egret.getTimer()-this.time,this.hh-this.view.height);this.bgGroup.y>0&&(this.bgGroup.y=0),this.bgGroup.y<e&&(this.bgGroup.y=e)},e.prototype.onTouchBegin=function(t){this.yy=t.stageY+this.bgGroup.y,this.time=egret.getTimer()},e.prototype.onTouchMove=function(t){var e=this.hh-this.view.height;this.bgGroup.y<=0&&this.bgGroup.y>=e&&(this.bgGroup.y=-(t.stageY-this.yy))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ScrollPanel.prototype,"ScrollPanel",["fany.IDispose"]);var ChatManage=function(){function t(){if(this.state="0",t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.send=function(t,e){switch(this.state){case"10001":Net.send(Protocol.JINSHA_SEND_CHAT,t,e);break;case"10002":Net.send(Protocol.JINHUA_SEND_CHAT,t,e);break;case"10003":Net.send(Protocol.NIUNIU_SEND_CHAT,t,e);break;case"10004":break;case"10006":Net.send(Protocol.FRUIT_SEND_CHAT,t,e)}},t.prototype.setState=function(t){this.state=t},t.prototype.transition=function(t,e){void 0===e&&(e=!0);var i=t.split(":"),n='<font color="#ffd375">V'+i[1]+"</font>",a='<font color="#ffffff">'+i[4]+"</font>",s='<font color="#e938f2">'+this.getGameName(i[2])+"</font>",o="";switch(i[0]){case"1":o=""+n+a+"在"+s+"中赢得了"+QuickManage.moneyStr(parseInt(i[3]+""));break;case"2":o=i[1];break;case"3":o=n+a+"闪亮登场!";break;case"5":o=e?"土豪玩家"+a+"刚刚发放<font color=#f11300>"+QuickManage.moneyStr(parseInt(i[3]+""))+"</font>红包,赶快去抢吧！":"恭喜玩家"+a+"刚刚抢到了最大的红包<font color=#f11300>"+QuickManage.moneyStr(parseInt(i[3]+""))+"</font>,运气爆表！";break;case"6":o=i[1];break;case"7":o="恭喜玩家"+i[1]+"升级到<font color=#f11300>VIP"+i[2]+"!</font>"}return o=o.replace(/[\n]/gi,""),o=o.replace(/[\r]/gi,"")},t.prototype.getGameName=function(t){var e="";switch(t){case"10001":e="金鲨银鲨";break;case"10002":e="百人金花";break;case"10003":e="百人牛牛";break;case"10004":e="决战21点";break;case"10006":e="经典水果机"}return e},t}();ChatManage.instance=null,__reflect(ChatManage.prototype,"ChatManage");var DataManage;!function(t){function e(t,e){var i={num:0,key:t,value:e};null==this.data&&(this.data=[]),this.data[t]=i}function i(t){return null==this.data?(this.data=[],null):null==this.data[t]?null:this.getValue(t)}function n(t){var e=this.data[t];return e.num>10?null:(this.data[t].num+=1,e.value)}function a(t){this.data[t]=null}function s(t){t.msg.friend&&"1"==t.msg.friend,t.msg.bag&&"1"==t.msg.bag&&(this.data.bag=null)}t.addPool=e,t.getPool=i,t.getValue=n,t.updateByKey=a,t.update=s}(DataManage||(DataManage={}));var EnterFrameManage;!function(t){function e(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];null==this.sp&&(this.sp=new egret.Sprite,this.eventArr=[]),null==this.checkExist(e)&&(this.eventArr.push({key:e,fun:t,para:i}),this.sp.hasEventListener(egret.Event.ENTER_FRAME)||this.sp.addEventListener(egret.Event.ENTER_FRAME,this.gogo))}function i(t){for(var e=this.eventArr.length,i=0;e>i;i++)if(this.eventArr[i].key==t)return this.eventArr[i];return null}function n(t){var e=this.checkExist(t);if(null!=e){var i=this.eventArr.indexOf(e);i>-1&&(this.eventArr.splice(i,1),0==this.eventArr.length&&this.sp.removeEventListener(egret.Event.ENTER_FRAME,this.gogo))}}function a(e){for(var i=t.eventArr.length,n=0;i>n;n++){var a=t.eventArr[n];if(null!=a&&null!=a.fun)a.fun.apply(null,a.para);else if(t.eventArr.splice(n,1),n--,i--,0==i)return void t.sp.removeEventListener(egret.Event.ENTER_FRAME,t.gogo,this)}}t.add=e,t.checkExist=i,t.remove=n,t.gogo=a}(EnterFrameManage||(EnterFrameManage={}));var EventManage=function(){function t(){}return t.addEvent=function(e,i,n,a,s,o,r){void 0===s&&(s=!1),void 0===o&&(o=0),void 0===r&&(r=!1),"touchEnabled"in i&&(i.touchEnabled=!0),i.addEventListener(n,a,e,s,o,r),t.instances.push([e,i,n,a,s,o,r])},t.addOnceEvent=function(e,i,n,a,s,o,r){void 0===s&&(s=!1),void 0===o&&(o=0),void 0===r&&(r=!1),t.addEvent(e,i,n,a,s,o,r);var h=function(o){t.removeEvent(e,i,n,h,s),t.removeEvent(e,i,n,a,s)};t.addEvent(e,i,n,h,s,o,r)},t.addButtonEvent=function(e,i,n,a,s,o,r,h){void 0===s&&(s="button_click_sound"),void 0===o&&(o=!1),void 0===r&&(r=0),void 0===h&&(h=!1);var l=function(r){t.removeEvent(e,i,n,l,o),EffectUtils.playButtonEffect(i,c.bind(e,r,a)),GlobalData.isMusic&&""!=s&&MusicManage.playMuisc(s)},c=function(a,s){t.addEvent(e,i,n,l,o,r,h),s(a)};t.addEvent(e,i,n,l,o,r,h)},t.removeEvent=function(e,i,n,a,s){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=!1),!e)return void console.log("监听者参数不能为空！");var o,r,h,l,c=t.instanceslib,u=0,d=!0;i?u|=4:0,n?u|=2:0,a?u|=1:0;var p,g,f=function(){switch(d=!0,u){case 0:o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]);break;case 1:o[t.FUNCTION]==a?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;
break;case 2:o[t.EVENT]==n?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 3:o[t.EVENT]==n&&o[t.FUNCTION]==a?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 4:o[t.DISPATHCH]==i?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 5:o[t.DISPATHCH]==i&&o[t.FUNCTION]==a?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 6:o[t.DISPATHCH]==i&&o[t.EVENT]==n?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 7:o[t.DISPATHCH]==i&&o[t.EVENT]==n&&o[t.FUNCTION]==a?o[t.DISPATHCH].removeEventListener(n,a,e,s):d=!1}};if(r=c.get(e)){for(p=r.length,g=p-1;g>=0;g--)o=r[g],f(),d&&r.splice(g,1);r.length||c.del(e)}for(r=t.instances,p=r.length,r=r.reverse(),g=p-1;g>=0;g--)o=r[g],o[t.KEY]==e?f():d=!1,d?r.pop():h==o[t.KEY]?l.push(r.pop()):(h=r[r.length-1][t.KEY],l=c.get(h),l?l.push(r.pop()):(l=[r.pop()],c.add(o[t.KEY],l)))},t}();EventManage.instanceslib=new Dictionary,EventManage.instances=[],EventManage.KEY=0,EventManage.DISPATHCH=1,EventManage.EVENT=2,EventManage.FUNCTION=3,EventManage.USECAPTURE=4,EventManage.PRIORITY=5,EventManage.USEWEAKREFERENCE=6,EventManage.isclick=!1,__reflect(EventManage.prototype,"EventManage");var GameManage;!function(t){function e(){t.game=new fany.GameData,t.game.init()}function i(){}t.init=e,t.shareSucc=i}(GameManage||(GameManage={}));var MusicManage;!function(t){function e(){var t=GlobalData.configData;this.bg=document.createElement("audio"),this.bg.src=t.data.musicurl,document.body.appendChild(this.bg)}function i(e){void 0===e&&(e=1),GlobalData.isMusic&&(t.bg.loop=!0,t.bg.volume=.4,this.bg.play(-1))}function n(){t.bg.pause()}function a(e,i,n){if(void 0===i&&(i=1),void 0===n&&(n=1),GlobalData.isMusic){if(this.sound=RES.getRes(e+"_mp3"),null==this.sound)return;this.closeClickMuisc(),this.channel=t.sound.play(0,n),this.channel.volume=i}}function s(){this.channel&&(this.channel.stop(),this.channel=null)}function o(){this.closeClickMuisc(),this.closeGameBgMuisc()}function r(e,i,n){if(void 0===i&&(i=1),void 0===n&&(n=1),GlobalData.isMusic){if(this.sound1=RES.getRes(e+"_mp3"),null==this.sound1)return;this.closeBgMuisc(),this.closeGameBgMuisc(),this.channel1=t.sound1.play(0,n),this.channel1.volume=i}}function h(){this.channel1&&(this.channel1.stop(),this.channel1=null)}t.initMusic=e,t.playBgMuisc=i,t.closeBgMuisc=n,t.playMuisc=a,t.closeClickMuisc=s,t.closeMuisc=o,t.playGameBgMuisc=r,t.closeGameBgMuisc=h}(MusicManage||(MusicManage={}));var NoticeManage=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.send=function(t,e,i){},t}();NoticeManage.instance=null,__reflect(NoticeManage.prototype,"NoticeManage");var ObjManage;!function(t){function e(t){void 0===t&&(t=10),this.pokers=this.pokers||[];var e;return e=this.pokers.length>0?this.pokers.shift():new PokerPanel,e.setHui(),EventManage.removeEvent(e),e.touchEnabled=!1,e.visible=!0,e.rotation=0,e}function i(t){t.x=0,t.y=0,t.anchorOffsetX=0,t.anchorOffsetX=0,t.rotation=0,this.pokers=this.pokers||[],EventManage.removeEvent(t),this.pokers.push(t)}function n(t){this.imgs=this.imgs||[];var e;return e=this.imgs.length>0?this.imgs.shift():new eui.Image,e.source=t,e.scaleX=1,e.scaleY=1,EventManage.removeEvent(e),e}function a(t){t.x=0,t.y=0,this.imgs=this.imgs||[],EventManage.removeEvent(t),this.imgs.push(t)}function s(t){this.objs=this.objs||[];var e=null;if(e=this.getObjByKey(t),!e){var i=egret.getDefinitionByName(t);e=new i}return e}function o(t){for(var e=null,i=this.objs.length,n=0;i>n;n++)if(this.objs[n].key==t){e=this.objs[n].value,this.objs.splice(n,1);break}return e}function r(t,e){this.objs=this.objs||[],this.objs.push({key:t,value:e})}t.getPoker=e,t.addPoker=i,t.getImage=n,t.addImage=a,t.getObj=s,t.getObjByKey=o,t.addObj=r}(ObjManage||(ObjManage={}));var PageManage;!function(t){function e(t){void 0===t&&(t=["ClassName1","ClassName2"]);for(var e=t.length,i=0;e>i;i++)this.data[t[i]]=null;this.dataRes=t}function i(t,e){void 0===e&&(e="up");var i=egret.getTimer(),n=i-this.oldtime;if(this.oldtime=i,!(600>n&&""!=this.oldpage)&&(this.oldpage=this.page,this.page=t,this.oldpage!=this.page)){this.data[t]&&(EventManage.removeEvent(this.data[t]),this.data[t].parent&&this.data[t].parent.removeChild(this.data[t]),this.data[t].dispose(),this.data[t]=null);var a=egret.getDefinitionByName(t);this.data[t]=new a,EventManage.addEvent(this,this.data[t],egret.TouchEvent.TOUCH_BEGIN,this.onTouchStart),EventManage.addEvent(this,this.data[t],egret.TouchEvent.TOUCH_MOVE,this.onTouchMove),EventManage.addEvent(this,this.data[t],egret.TouchEvent.TOUCH_END,this.onTouchEnd),PanelManage.euiLayer.addChild(this.data[t]),"up"==e?this.playUp(this.data[t]):"down"==e&&this.playDown(this.data[t])}}function n(t){t.visible=!0,t.y=1008,egret.Tween.get(t).to({y:0},400).call(this.disposePage.bind(this))}function a(t){t.visible=!0,t.y=-1008,egret.Tween.get(t).to({y:0},400).call(this.disposePage.bind(this))}function s(){""!=this.oldpage&&this.oldpage!=this.page&&this.data[this.oldpage]&&(this.data[this.oldpage].parent&&this.data[this.oldpage].parent.removeChild(this.data[this.oldpage]),this.data[this.oldpage].dispose(),this.data[this.oldpage]=null)}function o(t){var e=t.currentTarget;this.xx=t.stageX-e.x,this.yy=t.stageY-e.y}function r(t){var e=(t.currentTarget,t.stageY-this.yy);Math.abs(e)>10?this.isMove=!0:this.isMove=!1,0>=e&&Math.abs(e)<280,0>e?this.isUp=!1:this.isUp=!0}function h(e){e.currentTarget;this.isMove&&(this.isUp?t.openPage(this.getUp(this.page),"down"):t.openPage(this.getNext(this.page),"up"),this.isMove=!1)}function l(t){for(var e=this.dataRes.length,i=0;e>i;i++)if(this.dataRes[i]==t)return i==e-1?this.dataRes[i]:this.dataRes[i+1]}function c(t){for(var e=this.dataRes.length,i=0;e>i;i++)if(this.dataRes[i]==t)return 0>i-1?this.dataRes[i]:this.dataRes[i-1]}t.data=[],t.dataRes=[],t.page="",t.oldpage="",t.xx=0,t.yy=0,t.isUp=!1,t.isMove=!1,t.oldtime=0,t.initPage=e,t.openPage=i,t.playUp=n,t.playDown=a,t.disposePage=s,t.onTouchStart=o,t.onTouchMove=r,t.onTouchEnd=h,t.getNext=l,t.getUp=c}(PageManage||(PageManage={}));var PanelManage;!function(t){function e(){new ButtonMusic}function i(t){this.notice&&(this.notice.dispose(),this.notice=null),this.notice=new NoticePanel(t),this.tipsLayer.addChild(this.notice)}function n(t){void 0===t&&(t=!1),this.login&&(this.login.dispose(),this.login=null),this.login=new LoginPanel(t),PopUpManager.addPopUp(this.login,1)}function a(){this.clownrank&&(this.clownrank.dispose(),this.clownrank=null),this.clownrank=new ClownRankPanel,PopUpManager.addPopUp(this.clownrank,2)}function s(){this.kefu&&(this.kefu.dispose(),this.kefu=null),this.kefu=new KeFuPanel,PopUpManager.addPopUp(this.kefu,1)}function o(){this.user&&(this.user.dispose(),this.user=null),this.user=new UserPanel,PopUpManager.addPopUp(this.user,1)}function r(){this.jingcai&&(this.jingcai.dispose(),this.jingcai=null),this.jingcai=new JingCaiPanel,PopUpManager.addPopUp(this.jingcai,1)}function h(t){this.ddz&&(this.ddz.dispose(),this.ddz=null),this.ddz=new DdzPanel(t),PopUpManager.addPopUp(this.ddz,1)}function l(t,e,i,n){this.chat?this.chat.parent&&this.chat.parent.removeChild(this.chat):this.chat=new ChatPanel,this.chat.clearItems(),ChatManage.getInstance().setState(n),this.chat.x=e,this.chat.y=i,t.addChildAt(this.chat,2)}function c(){this.email&&(this.email.dispose(),this.email=null),this.email=new EmailPanel,PopUpManager.addPopUp(this.email,1)}function u(){this.tehui&&(this.tehui.dispose(),this.tehui=null),this.tehui=new TeHuiPanel,PopUpManager.addPopUp(this.tehui,1)}function d(){this.yue&&(this.yue.dispose(),this.yue=null),this.yue=new YuePanel,PopUpManager.addPopUp(this.yue,1)}function p(t){this.resloading&&(this.resloading.dispose(),this.resloading=null),this.resloading=new ResLoading,PopUpManager.addPopUp(this.resloading,1),this.resloading.init(t)}function g(t){this.resloading2?this.resloading2.visible=!0:(this.resloading2=new ResLoading2(t),PopUpManager.addPopUp(this.resloading2,1))}function f(){this.bank&&(this.bank.dispose(),this.bank=null),PopUpManager.removePopUp(GameConfig.curPanel,1,!1)}function b(e,i){void 0===i&&(i=null),this.gameresult&&(this.gameresult.dispose(),this.gameresult=null),this.gameresult=new GameResultPanel(e,i),PopUpManager.addPopUp(this.gameresult,3,1,t.tipsLayer)}function v(){this.rank&&(this.rank.dispose(),this.rank=null),this.rank=new RankPanel,PopUpManager.addPopUp(this.rank,1)}function m(t){void 0===t&&(t=1),this.shop&&(this.shop.dispose(),this.shop=null),this.shop=new ShopPanel,PopUpManager.addPopUp(this.shop,t)}function y(){this.yao&&(this.yao.dispose(),this.yao=null),this.yao=new YaoQingPanel,PopUpManager.addPopUp(this.yao,1)}function T(t){this.jinsha&&(this.jinsha.dispose(),this.jinsha=null),this.jinsha=new JinShaPanel(t),PopUpManager.addPopUp(this.jinsha,1)}function E(t){this.fruit&&(this.fruit.dispose(),this.fruit=null),this.fruit=new FruitPanel(t),PopUpManager.addPopUp(this.fruit,1)}function _(){this.money&&(this.money.dispose(),this.money=null),this.money=new MoneyTreePanel,PopUpManager.addPopUp(this.money,1)}function M(){this.da&&(this.da.dispose(),this.da=null),this.da=new DaShangPanel,PopUpManager.addPopUp(this.da,1)}function C(e){this.daTips&&(this.daTips.dispose(),this.daTips=null),this.daTips=new DaShangTips(e),PopUpManager.addPopUp(this.daTips,2,0,t.tipsLayer)}function k(){this.task&&(this.task.dispose(),this.task=null),this.task=new TaskPanel,PopUpManager.addPopUp(this.task,1)}function x(){this.sign&&(this.sign.dispose(),this.sign=null),this.sign=new SignPanel,PopUpManager.addPopUp(this.sign,1)}function P(){this.active&&(this.active.dispose(),this.active=null),this.active=new ActivityPanel,PopUpManager.addPopUp(this.active,1)}function I(){this.set&&(this.set.dispose(),this.set=null),this.set=new SetPanel,PopUpManager.addPopUp(this.set,1)}function A(){this.lottery&&(this.lottery.dispose(),this.lottery=null),this.lottery=new LotteryPanel,PopUpManager.addPopUp(this.lottery,1)}function w(){this.award&&(this.award.dispose(),this.award=null),this.award=new AwardPanel,PopUpManager.addPopUp(this.award,1)}function G(t){}function D(){this.hall&&(this.hall.dispose(),this.hall=null),this.hall=new HallPanel,PopUpManager.addPopUp(this.hall,0),GlobalData.isSign?t.openActive():t.openSign()}function S(t){this.zhajinhua&&(this.zhajinhua.dispose(),this.zhajinhua=null),this.zhajinhua=new ZhaJinHuaPanel(t),PopUpManager.addPopUp(this.zhajinhua,1)}function O(t){this.niuniu&&(this.niuniu.dispose(),this.niuniu=null),this.niuniu=new NiuNiuPanel(t),PopUpManager.addPopUp(this.niuniu,1)}function N(t){this.blackJack&&(this.blackJack.dispose(),this.blackJack=null),this.blackJack=new BlackJackPanel(t),PopUpManager.addPopUp(this.blackJack,1)}function L(t){this.pk&&(this.pk.dispose(),this.pk=null),this.pk=new PkPanel(t),PopUpManager.addPopUp(this.pk,1)}function R(e){this.serverError&&(this.serverError.dispose(),this.serverError=null),this.serverError=new ServerErrorPanel(e),PopUpManager.addPopUp(this.serverError,1,1,t.tipsLayer)}function B(e,i,n){void 0===n&&(n=null),this.redBox&&(this.redBox.dispose(),this.redBox=null),this.redBox=new RedBoxPanel(e,i,n),PopUpManager.addPopUp(this.redBox,2,0,t.tipsLayer)}function H(){this.freeCoin&&(this.freeCoin.dispose(),this.freeCoin=null),this.freeCoin=new FreeCoinPanel,PopUpManager.addPopUp(this.freeCoin,2,0)}function U(){this.vip&&(this.vip.dispose(),this.vip=null),this.vip=new VipPanel,PopUpManager.addPopUp(this.vip,2,0)}function j(t){this.clown&&(this.clown.dispose(),this.clown=null),this.clown=new ClownPanel(t),PopUpManager.addPopUp(this.clown,2,0)}t.createButtonMusic=e,t.openNotice=i,t.openLogin=n,t.openClownrank=a,t.openKefu=s,t.openUser=o,t.openJingCai=r,t.openDdz=h,t.openChat=l,t.openEmail=c,t.openTeHui=u,t.openYue=d,t.openResLoading=p,t.openResLoading2=g,t.openMainPage=f,t.openGameResult=b,t.openRank=v,t.openShop=m,t.openYaoQing=y,t.openJinSha=T,t.openFruit=E,t.openMoney=_,t.openDa=M,t.openDaTips=C,t.openTask=k,t.openSign=x,t.openActive=P,t.openSet=I,t.openLottery=A,t.openAward=w,t.openResult=G,t.openHall=D,t.openZhaJinHua=S,t.openNiuNiu=O,t.openBlackJack=N,t.openPk=L,t.openServerErrorPanel=R,t.openRedBox=B,t.openFreeCoin=H,t.openVip=U,t.openClown=j}(PanelManage||(PanelManage={}));var PayManage=function(){function t(){if(this.url="http://"+GlobalData.connectIP+":82/paytest.nd",t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.pay=function(t,e,i){void 0===e&&(e=""),void 0===i&&(i=""),window.pay(this.url,{userid:GlobalData.openid+"@"+GlobalData.platform,shopid:t,total_fee:i},this.payBack1.bind(this))},t.prototype.payBack1=function(t){},t.prototype.pay1=function(t,e,i){if(this.wupin={shopid:t,gname:e,price:i},GlobalData.userfrom==PlatformData.USER_FROM_WEIXIN){var n=GlobalData.configData.data.payurl+"?shopid="+t+"&goods="+e+"&userid="+(GlobalData.openid+"@"+GlobalData.platform)+"&price="+i+"&url="+encodeURIComponent(GlobalData.configData.data.link)+"&time="+(new Date).getTime();window.location.href=n}else if(GlobalData.userfrom==PlatformData.USER_FROM_SELF){var n=GlobalData.configData.data.regapi+"?service=user.existuser&token="+GlobalData.openid;window.regLogin(n,{},this.checkBind.bind(this))}else if(GlobalData.platform==PlatformData.PLATFORM_QUNHEI){var n="http://"+GlobalData.connectIP+":82/createQunheiData.nd?playerId="+(GlobalData.openid+"@"+GlobalData.platform)+"&shopId="+t+"&username="+GlobalData.openid;console.log(n),window.getPayInfo(n,{},this.qunheipayBack.bind(this))}else if(GlobalData.platform==PlatformData.PLATFORM_JIUYAOWAN){var n="http://"+GlobalData.connectIP+":82/nopCreateData.nd?playerId="+(GlobalData.openid+"@"+GlobalData.platform)+"&shopId="+t+"&user_id="+GlobalData.openid+"&channelExt="+GlobalData.channelExt;console.log(n),window.getPayInfo(n,{},this.jiuyaowanpayBack.bind(this))}else if(GlobalData.platform==PlatformData.PLATFORM_YOUXIDOU){var n="http://"+GlobalData.connectIP+":82/yxdCreatePay.nd?playerId="+(GlobalData.openid+"@"+GlobalData.platform)+"&shopId="+t;console.log(n),window.getPayInfo(n,{},this.youxidoupayBack.bind(this))}},t.prototype.youxidoupayBack=function(t){"fail"==t?TipsManage.showTips("参数错误!"):window.youxidoupay(JSON.parse(t))},t.prototype.jiuyaowanpayBack=function(t){"fail"==t?TipsManage.showTips("参数错误!"):(console.log(t),top.location.href=t)},t.prototype.qunheipayBack=function(t){"fail"==t?TipsManage.showTips("参数错误!"):window.qunheipay(JSON.parse(t))},t.prototype.checkBind=function(t){if(200==t.ret)if(200==t.data.code){if(GlobalData.platform==PlatformData.PLATFORM_BAIDU){var e="";e=egret.MainContext.deviceType==egret.MainContext.DEVICE_PC?"1":"2",window.getPayInfo("http://"+GlobalData.connectIP+":82/baiduCreateOrder.nd?playerId="+(GlobalData.openid+"@"+GlobalData.platform)+"&shopId="+this.wupin.shopid,{},this.payBack.bind(this))+"&paytype="+e}}else PanelManage.openLogin(!0);else TipsManage.showTips("请求异常,请稍后再试!")},t.prototype.payBack=function(t){"notreg"==t?PanelManage.openLogin(!0):"fail"==t?TipsManage.showTips("充值失败,请重新再试!"):window.location.href=t},t.prototype.getPayback=function(t){var e=JSON.parse(t);window.location.href=e.url},t}();PayManage.instance=null,__reflect(PayManage.prototype,"PayManage");var PokerManage;!function(t){function e(t,e){e=e||[];for(var i=t.length,n=0;i>n;n++){var a=null;if(t[n]+""=="15")a={k:0,v:16,y:t[n]};else if(t[n]+""=="16")a={k:0,v:17,y:t[n]};else if("0"==(t[n]+"").charAt(1)){var s=(t[n]+"").charAt(2)+"";"1"==s?s="14":"2"==s&&(s="15"),a={k:(t[n]+"").charAt(0)+"",v:s+"",y:t[n]+""}}else a={k:(t[n]+"").charAt(0)+"",v:(t[n]+"").charAt(1)+(t[n]+"").charAt(2)+"",y:t[n]+""};a.k+""=="1"?a.v=4*(parseInt(a.v)-1)+4:a.k+""=="2"?a.v=4*(parseInt(a.v)-1)+3:a.k+""=="3"?a.v=4*(parseInt(a.v)-1)+2:a.v=4*(parseInt(a.v)-1)+1,e.push(a)}return e.sort(QuickManage.sortMoreFun(["v"],[1])),e}function i(t,e){for(var i=t.length,n=e.length,a=0;i>a;a++)for(var s=0;n>s;s++)if(t[a]==e[s].y){e.splice(s,1);break}e.sort(QuickManage.sortMoreFun(["v"],[1]))}function n(t,e){for(var i=t.length,n=e.length,a=0;i>a;a++)for(var s=0;n>s;s++)if(t[a]==e[s].y){e.splice(s,1);break}e.sort(QuickManage.sortMoreFun(["v"],[1]))}function a(t,e){for(var i=t.length,n=e.length,a=0;i>a;a++)for(var s=0;n>s;s++)t[a]==e[s]&&e.splice(a,1);e.sort(QuickManage.sortMoreFun(["v"],[1]))}t.paixu=e,t.chupai=i,t.chupai2=n,t.jia3zhang=a}(PokerManage||(PokerManage={}));var PopUpManager;!function(t){function e(e){switch(t.data=t.data||[],e.isAlway){case 0:t.del();break;case 1:t.del();break;case 2:break;case 3:}t.isHave(e)||t.data.push(e),t.data.push(e)}function i(e){for(var i=t.data.length,n=0;i>n;n++){var a=null;t.data[n]&&t.data[n].panel==e.panel&&(a=t.data[n])}return a?!0:!1}function n(){for(var e=t.data.length,i=0;e>i;i++)t.data[i]&&(0!=t.data[i].isAlway?(t.removePopUp(t.data[i].panel,0,!1),t.data[i]=null,t.data.splice(i,1)):t.data[i].panel!=PanelManage.hall&&(t.data[i].panel.visible=!1));return!0}function a(e,i,n,a){if(void 0===n&&(n=1),void 0===a&&(a=PanelManage.euiLayer),GameConfig.curPanel!=e||!GameConfig.curPanel||!GameConfig.curPanel.visible){t.managePanel({panel:e,isAlway:i}),GameConfig.curPanelData={panel:e,isAlway:i},e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,a.contains(e)||a.addChild(e),e.visible=!0,GameConfig.curPanel=e;var s=0,o=0;0!=s?(e.x=GameConfig.curWidth()/2-s/2,e.y=GameConfig.curHeight()/2-o/2):(s=e.width,o=e.height);GameConfig.curWidth()/2-s/2,GameConfig.curHeight()/2-o/2;switch(n){case 0:break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+s/4,e.y=e.y+o/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-s/4,y:e.y-o/4},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+s/4,e.y=e.y+o/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-s/4,y:e.y-o/4},600,egret.Ease.elasticOut);break;case 3:e.x=-s,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut);break;case 4:e.x=s,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut);break;case 5:e.y=-o,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut);break;case 6:e.y=o,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut)}}}function s(e,i,n,a){void 0===i&&(i=0),void 0===n&&(n=!0),void 0===a&&(a=PanelManage.euiLayer);for(var s=t.data.length,o=0;s>o;o++){var r=t.data[o];r&&0!=o&&(r.visible=!1)}if(null!=e){switch(i){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var h=500;0==i?(h=0,n?(EventManage.removeEvent(e),e.parent&&(e.parent.removeChild(e),e.removeChildren()),e.removeChildren()):(e.alpha=1,e.scaleX=1,e.scaleY=1,e.visible=!1)):egret.setTimeout(function(){n?(EventManage.removeEvent(e),e.parent&&(e.parent.removeChild(e),e.removeChildren()),e.removeChildren()):(e.alpha=1,e.scaleX=1,e.scaleY=1,e.visible=!1)},this,h)}}t.managePanel=e,t.isHave=i,t.del=n,t.addPopUp=a,t.removePopUp=s}(PopUpManager||(PopUpManager={}));var QuickManage;!function(t){function e(t){var e=RES.getRes(t+"_json"),i=RES.getRes(t+"_png"),n=new egret.MovieClipDataFactory(e,i),a=new egret.MovieClip(n.generateMovieClipData(t));return a}function i(t){var e=document.getElementById("gameDiv");this.myImg=document.createElement("img"),this.myImg.src=t,this.myImg.style.width="100%",this.myImg.style.height="100%",this.myImg.style.position="absolute",e.appendChild(this.myImg),this.myImg.onclick=this.clickc.bind(this)}function n(){var t=document.getElementById("gameDiv");t.removeChild(this.myImg),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.GET_FOLLOW_GOLD))}function a(t,e){var i=new egret.ByteArray;return i.writeUTFBytes(t),i.length<e?t:(i.position=0,i.readUTFBytes(e)+"...")}function s(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)}function o(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=location.search.substr(1).match(e);return null!=i?decodeURI(decodeURIComponent(decodeURI(i[2]))):""}function r(e){return e>=1e4&&1e8>e?t.get2Num(e/1e4)+"万":e>=1e8?t.get2Num(e/1e8)+"亿":e+""}function h(t){var e=t.toFixed(3);e=e.substr(0,e.length-1);var i=e.split(".");return i[1]+""=="00"?i[0]+"":e+""}function l(t){var e=0;return e=-1!=t.indexOf("万")?1e4*parseInt(t.replace("万","")):-1!=t.indexOf("亿")?1e8*parseInt(t.replace("亿","")):parseInt(t)}function c(t,e,i){return t[e]=t.splice(i,1,t[e])[0],t}function u(t,e){if(egret.Capabilities.runtimeType==egret.MainContext.RUNTIME_NATIVE)return null;var i=e||location.href;if(-1!=i.indexOf("?")){var n="&"+i.split("?")[1],a=new RegExp("&"+t+"=.*?(?:&|$)"),s=a.exec(n);if(s){var o=s[0];return o.split("&")[1].split("=")[1]}}return null}function d(t,e,i){var n=i||location.href,a="&"+n.split("?")[1];if(-1==n.indexOf("?"))return n+="?"+t+"="+e;var a=n.split("?")[1];if(""==a)return n+=t+"="+e;var s=new RegExp("(?:^|&)"+t+"=.*?(?:&|$)"),o=s.exec(a);if(o&&""!=o[0]){var r=o[0],h=new RegExp("=.*$"),l=r.replace(h,"="+e);return n.replace(r,l)}return n+="&"+t+"="+e}function p(t,e){var i=e||location.href,n="&"+i.split("?")[1];return-1!=n.indexOf("&"+t+"=")}function g(t){for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n&&(n.touchEnabled=!1)}}function f(t){}function b(t,e){return void 0===e&&(e=null),function(i,n){var a=0;e&&(a=e.length);var s;for(var o in t){var r=parseInt(o);if(s=parseInt(i[t[r]])-parseInt(n[t[r]]),0!=s)return a>r&&0==e[r]?s:-s}return 0}}function v(t,e){if(void 0===e&&(e=0),/[^0-9\.]/.test(t))return"0";if(null==t||""==t)return"0";t=t.toString().replace(/^(\d*)$/,"$1."),t=(t+"00").replace(/(\d*\.\d\d)\d*/,"$1"),t=t.replace(".",",");for(var i=/(\d)(\d{3},)/;i.test(t);)t=t.replace(i,"$1,$2");if(t=t.replace(/,(\d\d)$/,".$1"),0==e){var n=t.split(".");"00"==n[1]&&(t=n[0])}return t}t.createMc=e,t.openEr=i,t.clickc=n,t.getChar=a,t.getRandomNum=s,t.$GET=o,t.moneyStr=r,t.get2Num=h,t.moneyStr2number=l,t.swapArr=c,t.getPara=u,t.setProperty=d,t.hasProperty=p,t.setTouchEnabled=g,t.tiaoshi=f,t.sortMoreFun=b,t.formatMoney=v}(QuickManage||(QuickManage={}));var ResManage;!function(t){function e(e,i,n){t.resName=e,t.isLoading=i,t.cb=n,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(GlobalData.cdnResUrl+"resource/"+e+".res.json?v="+GlobalData.version,GlobalData.cdnResUrl+"resource/")}function i(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(t.resName)}function n(e){e.groupName==this.resName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),t.cb())}function a(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)}function s(t){t.groupName==this.resName&&(PanelManage.resloading&&PanelManage.resloading.setProgress(t.itemsLoaded,t.itemsTotal),PanelManage.resloading2&&PanelManage.resloading2.setProgress(t.itemsLoaded,t.itemsTotal))}t.resName="",t.isLoading=!0,t.init=e,t.onConfigComplete=i,t.onResourceLoadComplete=n,t.onResourceLoadError=a,t.onResourceProgress=s}(ResManage||(ResManage={}));var ResourceManage;!function(t){function e(){this._configs=new Array,this._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)}function i(t,e){this._configs.push([t,e])}function n(t,e){this._onConfigComplete=t,this._onConfigCompleteTarget=e,this.loadNextConfig()}function a(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var t=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(t[0],t[1])}function s(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()}function o(t,e,i,n){this._groups[t]=[e,i,n],RES.loadGroup(t)}function r(t,e,i,n,a){RES.createGroup(t,e,!0),this.loadGroup(t,i,n,a)}function h(t,e){void 0===e&&(e=null);var i="pilferer_"+t;e||(e=[t]),RES.createGroup(i,e,!0),RES.loadGroup(i,-1)}function l(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][0],n=this._groups[e][2];null!=i&&i.call(n),this._groups[e]=null,delete this._groups[e]}}function c(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][1],n=this._groups[e][2];null!=i&&i.call(n,t.itemsLoaded,t.itemsTotal)}}function u(t){this.onResourceLoadComplete(t)}function d(t,e,i,n,a){void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null);var s=t.concat(e),o="loadGroup"+this._groupIndex++;RES.createGroup(o,s,!0),this._groups[o]=[i,n,a],RES.loadGroup(o)}t._groupIndex=0,t.init=e,t.addConfig=i,t.loadConfig=n,t.loadNextConfig=a,t.onConfigCompleteHandle=s,t.loadGroup=o,t.loadGroups=r,t.pilfererLoadGroup=h,t.onResourceLoadComplete=l,t.onResourceLoadProgress=c,t.onResourceLoadError=u,t.loadResource=d}(ResourceManage||(ResourceManage={}));var SkillManage=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.playSkill=function(e,i,n,a){void 0===a&&(a=null),this.skills=this.skills||[];var s;s=this.skills[e]?this.skills[e]:QuickManage.createMc(e),s.x=i,s.y=n,s.gotoAndStop(1),s.play(1),PanelManage.tipsLayer.addChild(s),EventManage.addEvent(this,s,egret.Event.COMPLETE,function(){s.parent&&s.parent.removeChild(s),t.getInstance().skills[e]=s,a()})},t}();SkillManage.instance=null,__reflect(SkillManage.prototype,"SkillManage");var fany;!function(t){var e=function(){function e(){}return e.connectServer=function(){this.gateServer||(this.gateServer=new Pomelo),this.gateServer.init({host:GlobalData.connectIP,port:GlobalData.connectPort},t.SocketManage.onConnectServerListHandle)},e.onConnectServerListHandle=function(e){t.SocketManage.gateServer.request("gate.gateHandler.getConnector",{},function(e){200==e.code&&t.SocketManage.connectGameServer(e.data.host,e.data.port)})},e.connectGameServer=function(e,i){t.SocketManage.gateServer.disconnect(),t.SocketManage.gateServer=null,this.isConnect=!1,this.pomelo||(this.pomelo=new Pomelo),t.SocketManage.pomelo.init({host:e,port:i},t.SocketManage.onConnectHandle),t.SocketManage.setOn()},e.setOn=function(){t.SocketManage.pomelo.on(MessageData.CLOSE,t.SocketManage.onDisconnect.bind(this)),t.SocketManage.pomelo.on(MessageData.IO_ERROR,t.SocketManage.onDisconnect.bind(this)),Net.setOn()},e.onDisconnect=function(e){t.SocketManage.isConnect=!1,PanelManage.openServerErrorPanel("服务器连接异常,请刷新重试！"+JSON.stringify(e))},e.onConnectHandle=function(e){t.SocketManage.isConnect=!0,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.HIDE_LOADING_TXT))},e.login=function(){if(1==t.SocketManage.isConnect){var e=QuickManage.$GET("yid"),i=GlobalData.openid+"@"+GlobalData.platform;t.SocketManage.pomelo.request("connector.entryHandler.login",{_id:i,name:GlobalData.user.nickname,sex:GlobalData.user.sex,headurl:GlobalData.user.headurl,spread:e},function(t){200==t.code?lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CREATE_ROLE,t.data.player)):alert("错误的登录,请刷新页面!")})}else TipsManage.showTips("请等待服务器连接成功!")},e}();e.isConnect=!1,t.SocketManage=e,__reflect(e.prototype,"fany.SocketManage")}(fany||(fany={}));var TimerManage;!function(t){function e(){this.secondHash=[],this.notSecondHash=[],this.timerHash=[]}function i(t){for(var e in this.secondHash){var i=this.secondHash[e];0==i.isStop&&this.objTickHandle(i)}}function n(t){if(null!=t.onTimer){var e=t.onTimer;e()}if(t.repeatCount>=0&&t.repeatCount--,0==t.repeatCount){if(null!=t.onComplete){var i=t.onComplete;i()}this.secondHash[t.key]=null,delete this.secondHash[t.key]}}function a(e,n,a,s,o,r){if(void 0===s&&(s=null),void 0===o&&(o=0),void 0===r&&(r=""),0==o&&(o=-1),1e3==n){var h=egret.getQualifiedClassName(e),l=h+r,c={key:l,object:e,isStop:!1,onTimer:a,onComplete:s,repeatCount:o,flag:r};t.secondHash[l]=c,null==this._timer&&(this.secondHash=[],this.notSecondHash=[],this.timerHash=[],this._timer=new egret.Timer(1e3),this._timer.addEventListener(egret.TimerEvent.TIMER,i),this._timer.start())}else this.addDifferentTimer(e,n,a,s,o,r)}function s(e,i,n,a,s,o){void 0===a&&(a=null),void 0===s&&(s=-1),void 0===o&&(o="");var r=!1;for(var h in this.notSecondHash){var l=this.notSecondHash[h];if(l.delay==i){r=!0;break}}if(!r){var c=new egret.Timer(i);c.addEventListener(egret.TimerEvent.TIMER,this.notSecondTimer,this),c.start(),t.timerHash[i]=c}var u=egret.getQualifiedClassName(e),d=u+o,p={key:d,delay:i,isStop:!1,object:e,onTimer:n,onComplete:a,repeatCount:s,flag:o};this.notSecondHash[d]=p}function o(t){var e=t.currentTarget,i=e.delay;for(var n in this.notSecondHash){var a=this.notSecondHash[n];a.delay==i&&0==a.isStop&&this.notSecondTickHandle(a)}}function r(t){var e=t.onTimer;if(null!=e&&e(),t.repeatCount>=0&&t.repeatCount--,0==t.repeatCount){if(null!=t.onComplete){var i=t.onComplete;i()}this.notSecondTimerComplete(t)}}function h(e){if(null!=e){this.notSecondHash[e.key]=null,delete this.notSecondHash[e.key];for(var i in this.notSecondHash){var n=this.notSecondHash[i];if(n.delay==e.delay)return}var a=this.timerHash[e.delay];a&&(a.removeEventListener(egret.TimerEvent.TIMER,o,this),t.timerHash[e.delay],delete t.timerHash[e.delay])}}function l(t,e){void 0===e&&(e="");var i=egret.getQualifiedClassName(t),n=i+e;this.notSecondTimerComplete(this.notSecondHash[n]),this.secondHash[n]=null,this.notSecondHash[n]=null,delete this.secondHash[n],delete this.notSecondHash[n]}function c(t,e){void 0===e&&(e="");var i=egret.getQualifiedClassName(t),n=i+e,a=this.secondHash[n];null==a&&(a=this.notSecondHash[n]),a&&(a.isStop=!0)}function u(t,e){void 0===e&&(e="");var i=egret.getQualifiedClassName(t),n=i+e,a=this.secondHash[n];null==a&&(a=this.notSecondHash[n]),a&&(a.isStop=!1)}t.init=e,t.timerHandle=i,t.objTickHandle=n,t.addTimer=a,t.addDifferentTimer=s,t.notSecondTimer=o,t.notSecondTickHandle=r,t.notSecondTimerComplete=h,t.removeTimer=l,t.stopTimer=c,t.startTimer=u}(TimerManage||(TimerManage={}));var TipsManage;!function(t){function e(e,i,n){this.hurts=this.hurts||[];var a;this.hurts.length>0?a=this.hurts.shift():(a=new eui.BitmapLabel,a.font="attackFont_fnt"),a.x=i,a.y=n,a.text=e,PanelManage.tipsLayer.addChild(a),egret.Tween.get(a).to({y:n-50},200).call(function(){egret.Tween.get(a).to({alpha:0},1e3).call(function(){a.parent&&a.parent.removeChild(a),a.alpha=1,t.hurts.push(a)},this)},this)}function i(e,i,n){this.bloods=this.bloods||[];var a;this.bloods.length>0?a=this.bloods.shift():(a=new eui.BitmapLabel,a.font="recoverFont_fnt"),a.x=i,a.y=n,a.text=e,PanelManage.tipsLayer.addChild(a),egret.Tween.get(a).to({y:n-50},200).call(function(){egret.Tween.get(a).to({alpha:0},1e3).call(function(){a.parent&&a.parent.removeChild(a),a.alpha=1,t.bloods.push(a)},this)},this)}function n(e,i,n){this.imgs=this.imgs||[];var a;a=this.imgs.length>0?this.imgs.shift():new eui.Image,a.source=e,a.x=i,a.y=n,PanelManage.tipsLayer.addChild(a),egret.Tween.get(a).to({y:n-50},200).call(function(){egret.Tween.get(a).to({alpha:0},1e3).call(function(){a.parent&&a.parent.removeChild(a),a.alpha=1,t.imgs.push(a)
},this)},this)}function a(e){0==t.isJianTing&&(TimerManager.getInstance().setFrame("TipsManage.gogo",t.gogo.bind(this),this),t.isJianTing=!0),t.arr=t.arr||[];var i;i=t.arr.length>0?t.arr.shift():new TipsShowPanel,i.setStr(e),i.alpha=0,i.anchorOffsetX=320,i.anchorOffsetY=40,i.x=320,i.y=490,PanelManage.tipsLayer.addChild(i),EffectUtils.playEffect5(i,800),t.tipsDel=t.tipsDel||[],t.tipsDel.push({time:1,obj:i})}function s(){for(var e=t.tipsDel.length,i=0;e>i;i++){var n=t.tipsDel[i];n&&(n.time>40?(t.tipsDel.splice(i,1),t.showTipsCom(n.obj)):n.time+=1)}}function o(e){e.parent&&e.parent.removeChild(e),t.arr.length>5?(e.dispose(),e=null):t.arr.push(e)}function r(t){for(var e=0;e<t.length;e++){var i=new TipsShowPanel;i.setStr(t[e]),i.anchorOffsetX=320,i.anchorOffsetY=40,i.x=320,i.y=490+e*i.height,PanelManage.tipsLayer.addChild(i),EffectUtils.playEffect5(i,200+200*e,this.showTipsTween.bind(this,i))}}function h(t){egret.Tween.get(t).to({y:t.y-600},700).call(this.removeItem.bind(this,t))}function l(t){t.parent&&(t.parent.removeChild(t),t.dispose())}t.isJianTing=!1,t.showHurtNum=e,t.showAddBloodNum=i,t.showImg=n,t.showTips=a,t.gogo=s,t.showTipsCom=o,t.showEffect=r,t.showTipsTween=h,t.removeItem=l}(TipsManage||(TipsManage={}));var Network;!function(t){function e(t,e,i,n){void 0===t&&(t=""),void 0===e&&(e=""),void 0===i&&(i=function(){}),void 0===n&&(n=egret.URLRequestMethod.POST),this.netArr.push({key:t,fun:i});var a=new egret.URLLoader;a.dataFormat=egret.URLLoaderDataFormat.TEXT,a.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this);var s=new egret.URLRequest(t);s.method=n,s.data=new egret.URLVariables(e),a.load(s)}function i(t){var e=t.target;e.dataFormat=egret.URLLoaderDataFormat.TEXT;var i=e.data,n=e._request.url,a=e._request.method;a&&"post"!=a&&"get"!=a||(a="");for(var s=(this.netArr.length,0);s<this.netArr.length;s++)if(this.netArr[s].key==n+a){this.netArr[s].fun.apply(null,[i]),this.netArr.splice(s,1);break}}t.netArr=[],t.sendInfo=e,t.onGetComplete=i}(Network||(Network={}));var BaseSingle=function(){function t(){}return t.getInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;if(!i._instance){var n=t.length;0==n?i._instance=new i:1==n?i._instance=new i(t[0]):2==n?i._instance=new i(t[0],t[1]):3==n?i._instance=new i(t[0],t[1],t[2]):4==n?i._instance=new i(t[0],t[1],t[2],t[3]):5==n&&(i._instance=new i(t[0],t[1],t[2],t[3],t[4]))}return i._instance},t}();__reflect(BaseSingle.prototype,"BaseSingle");var ObjectPool=function(){function t(){this._objs=new Array}return t.prototype.push=function(t){this._objs.push(t)},t.prototype.pop=function(t){if(0==this._objs.length)return null;if(t)for(var e=this._objs.length-1,i=void 0;e>-1;e--)if(i=this._objs[e],i.extraKey==t)return this._objs.splice(e,1),i;return this._objs.pop()},t.prototype.execute=function(t){if(null!=t)for(var e=this._objs.length-1,i=void 0;e>-1;e--)i=this._objs[e],i[t]()},t.prototype.clear=function(t){for(var e=void 0;this._objs.length>0;)e=this._objs.pop(),t&&e[t]()},t.pop=function(e,i){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];var s=t._pools[e];null==s&&(s=new t,t._pools[e]=s);var o=s.pop(i);if(o)return o;if(i){var r=egret.getDefinitionByName(e);o=new r(i),o.extraKey=i,o.ObjectPoolKey=e}else{var r=egret.getDefinitionByName(e),h=n.length;0==h?o=new r:1==h?o=new r(n[0]):2==h?o=new r(n[0],n[1]):3==h?o=new r(n[0],n[1],n[2]):4==h?o=new r(n[0],n[1],n[2],n[3]):5==h&&(o=new r(n[0],n[1],n[2],n[3],n[4])),o.ObjectPoolKey=e}return o},t.push=function(e){if(null==e)return!1;var i=e.ObjectPoolKey;if(null==i)return!1;var n=t._pools[i];return null==n?!1:(n.push(e),!0)},t.clear=function(){var e;for(var i in t._pools)e=t._pools[i],e.clear();t._pools={}},t.erase=function(e,i){var n=t._pools[e];null==n&&n.clear(i),delete t._pools[e]},t.execute=function(e,i){var n=t._pools[e];null==n&&n.execute(i)},t}();ObjectPool._pools={},__reflect(ObjectPool.prototype,"ObjectPool");var TimerManager=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist");this._handlers={},this._currTime=egret.getTimer(),this._lastTime=this._currTime,this._totalTime=0,this._currFrame=0,this._timeScale=1,this._realRate=30,egret.MainContext.instance.stage.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setTimeScale=function(t){this._timeScale=t},t.prototype.setTimer=function(t,e,i,n,a,s,o){void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=null),void 0===o&&(o=null),this.create(t,!1,n,a,e,i,s,o)},t.prototype.setFrame=function(t,e,i,n,a,s,o){void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=null),void 0===o&&(o=null),this.create(t,!0,n,a,e,i,s,o)},t.prototype.remove=function(t){var e=this._handlers[t];null!=e&&(e.dispose(),ObjectPool.push(e),delete this._handlers[t])},Object.defineProperty(t.prototype,"realRate",{get:function(){return this._realRate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this._currFrame},enumerable:!0,configurable:!0}),t.prototype.create=function(t,e,i,n,a,s,o,r){if(!(0>i||0>n||null==a)){this.remove(t);var h=ObjectPool.pop("TimerHandler");h.userFrame=e,h.repeat=0==n,h.repeatCount=n,h.delay=i,h.method=a,h.methodObj=s,h.complateMethod=o,h.complateMethodObj=r,h.exeTime=i+(e?this._currFrame:this._currTime),h.dealTime=this._currTime,this._handlers[t]=h}},t.prototype.onEnterFrame=function(t){this._currFrame++,this._currTime=egret.getTimer(),this._totalTime+=this._currTime-this._lastTime,this._realRate=1e3*this._currFrame/this._totalTime,this._lastTime=this._currTime;var e,i;for(var n in this._handlers)e=this._handlers[n],i=e.userFrame?this._currFrame:this._currTime,i>=e.exeTime&&(e.method.call(e.methodObj,(this._currTime-e.dealTime)*this._timeScale),e.dealTime=this._currTime,e.exeTime+=e.delay,e.repeat||(e.repeatCount>1?e.repeatCount--:(e.complateMethod&&e.complateMethod.apply(e.complateMethodObj),this.remove(n))))},t}();TimerManager.instance=null,__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function t(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return t.prototype.dispose=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();__reflect(TimerHandler.prototype,"TimerHandler");var DateUtils;!function(t){function e(t,e){void 0===e&&(e=1);var i="";switch(e){case 1:i=this.getFormatBySecond1(t);break;case 2:i=this.getFormatBySecond2(t);break;case 3:i=this.getFormatBySecond3(t);break;case 4:i=this.getFormatBySecond4(t);break;case 5:i=this.getFormatBySecond5(t)}return i}function i(t){void 0===t&&(t=0);var e,i=Math.floor(t/3600);e=0==i?"00":10>i?"0"+i:""+i;var n,a,s=Math.floor((t-3600*i)/60),o=Math.floor((t-3600*i)%60);return n=0==s?"00":10>s?"0"+s:""+s,a=0==o?"00":10>o?"0"+o:""+o,e+":"+n+":"+a}function n(t){void 0===t&&(t=0);var e,i,n=Math.floor(t/3600),a=Math.floor((t-3600*n)/60),s=Math.floor((t-3600*n)%60);return e=0==a?"00":10>a?"0"+a:""+a,i=0==s?"00":10>s?"0"+s:""+s,e+":"+i}function a(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),s=e.getHours(),o=e.getMinutes(),r=e.getSeconds();return i+"-"+n+"-"+a+" "+s+":"+o+":"+r}function s(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"}function o(t){var e=86400,i=3600,n=60,a=Math.floor(t/e),s=Math.floor(t%e/i),o=Math.floor((t-s*i)/n),r=Math.floor((t-s*i)%n),h="",l="",c="",u="";return t>0?0==a?(h="",0==s?(l="",0==o?(c="",u=0==r?"":10>r?"0"+r+"秒":""+r+"秒"):(c=""+o+"分",u=0==r?"":10>r?"0"+r+"秒":""+r+"秒",c+u)):(l=s+"小时",0==o?(c="",u=0==r?"":10>r?"0"+r+"秒":""+r+"秒"):(c=10>o?"0"+o+"分":""+o+"分",l+c))):(h=a+"天",l=0==s?"":10>s?"0"+s+"小时":""+s+"小时",h+l):""}t.getFormatBySecond=e,t.getFormatBySecond1=i,t.getFormatBySecond3=n,t.getFormatBySecond2=a,t.getFormatBySecond4=s,t.getFormatBySecond5=o}(DateUtils||(DateUtils={}));var GameConfig;!function(t){function e(){var t=window.navigator.userAgent.toLowerCase(),e=""+t.match(/MicroMessenger/i);return"null"==e?!1:"micromessenger"==e?!0:void 0}function i(){return document.body.clientHeight/document.body.clientWidth>1.32}function n(){var t=window.navigator.userAgent.toLowerCase();""+t.match(/MicroMessenger/i);return""+t.match(/windows nt/i)=="windows nt"?"windows":""+t.match(/iphone/i)=="iphone"?"ios":""+t.match(/android/i)=="android"?"android":""+t.match(/ipad/i)=="ipad"?"ipad":""+t.match(/linux/i)=="linux"?"linux":""+t.match(/mac/i)=="mac"?"mac":""+t.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function a(){var t=window.navigator.userAgent.toLowerCase();return""+t.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+t.match(/qzone/i)=="qzone"?"qzone":""+t.match(/weibo/i)=="weibo"?"weibo":""+t.match(/qq/i)=="qq"?"qq":""+t.match(/renren/i)=="renren"?"renren":""+t.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+t.match(/douban/i)=="douban"?"douban":"other"}function s(){return egret.MainContext.instance.stage}function o(){return egret.MainContext.instance.stage.stageWidth}function r(){return egret.MainContext.instance.stage.stageHeight}function h(){var t=window.orientation;return 90==t?!1:!0}t.isDebug=!1,t.isOnLine=navigator.onLine,t.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},t.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},t.isWeiXin=e,t.isBigScreen=i,t.systemType=n,t.platformType=a,t.curStage=s,t.curWidth=o,t.curHeight=r,t.isVertical=h}(GameConfig||(GameConfig={}));var EffectUtils;!function(t){function e(t,e,i){void 0===i&&(i=null);var n="";t&&(n=t.text);var a=QuickManage.moneyStr2number(n);if(a!=e){new NumEffect(t,e,i)}}function i(t,e){if(void 0===e&&(e=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[t.hashCode]){null!=this.rotationArr[t.hashCode]&&this.rotationArr[t.hashCode]||(this.rotationArr[t.hashCode]=!0);var i=function(){this.rotationArr[t.hashCode]&&null!=t&&(t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this))};t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this)}}function n(t,e){void 0===e&&(e=1e3);var i=function(){egret.Tween.get(t).to({alpha:0},e).call(n)},n=function(){egret.Tween.get(t).to({alpha:1},e).call(i)};egret.Tween.get(t).to({alpha:0},e).call(n)}function a(t){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[t.hashCode]=!1}function s(t){var e=80,i=t.x;egret.Tween.get(t).to({x:t.x-10},e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,2*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},e)},this,3*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,4*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:i},e)},this,5*e)}function o(t){void 0===t&&(t=1);var e=GameConfig.curPanel,i=40,n=e.x,a=e.y;1==t?(egret.Tween.get(e).to({x:e.x-10},i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:n},i)},this,5*i)):(egret.Tween.get(e).to({x:e.x-10,y:e.y},i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20,y:e.y},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+15},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y-20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+10},i)},this,5*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:n,y:a},i)},this,6*i))}function r(t,e,i){switch(void 0===t&&(t=""),void 0===e&&(e=1),void 0===i&&(i=!1),e){case 1:TipsUtils.showTipsDownToUp(t,i);break;case 2:TipsUtils.showTipsLeftOrRight(t,i,!0);break;case 3:TipsUtils.showTipsLeftOrRight(t,i,!1);break;case 4:TipsUtils.showTipsFromCenter(t,i);break;case 5:TipsUtils.showTipsBigToSmall(t,i)}}function h(t,e){if(void 0===e&&(e=null),!this.isPlayEffectPlay){var i=t.anchorOffsetX,n=t.anchorOffsetY;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;var a=t.anchorOffsetX-i,s=t.anchorOffsetY-n;t.x+=a,t.y+=s;var o=function(){this.isPlayEffectPlay=!1,t.anchorOffsetX=i,t.anchorOffsetY=n,t.x-=a,t.y-=s,t.scaleX=1,t.scaleY=1,null!=e&&e()},r=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},100).call(o,this)};egret.Tween.get(t).to({scaleX:.8,scaleY:.8},100,egret.Ease.sineIn).call(r,this)}}function l(t,e,i){if(void 0===e&&(e=1),void 0===i&&(i=null),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var n=function(){this.isPlayEffectPlay=!1,i()},a=function(){1==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(n,this):2==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.backOut).call(n,this):3==e&&egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100).call(n,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(a,this)}}function c(t,e){void 0===e&&(e=function(){});var i=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(e,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(i,this)}function u(t,e,i){void 0===e&&(e=800),void 0===i&&(i=function(){}),t.alpha=0,t.scaleX=4,t.scaleY=4;var n=function(){i()};egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){n()},this,e)}function d(t,e){void 0===e&&(e=function(){}),t.scaleX=.1,t.scaleY=.1;var i=function(){e()};egret.Tween.get(t).to({scaleX:1,scaleY:1},800,egret.Ease.elasticOut).call(i,this)}function p(t,e,i,n,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=function(){}),void 0===a&&(a=200);var s=t.x,o=t.y;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY-10,t.parent&&t.parent.setChildIndex(t,t.parent.numChildren-1);var r=function(){egret.Tween.get(t).to({x:s,y:o},a),n()},h=function(){t.anchorOffsetX=0,t.anchorOffsetY=0,t.x-=t.width/2,t.y-=t.height/2-10,t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({x:e-10,y:i},a).call(r,this)};egret.Tween.get(t).to({scaleX:1.2,scaleY:1.2},a).call(h,this)}function g(t,e,i){void 0===e&&(e=function(){}),void 0===i&&(i=400);t.x,t.y;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY-10,t.parent&&t.parent.setChildIndex(t,t.parent.numChildren-1);var n=function(){t.anchorOffsetX=0,t.anchorOffsetY=0,t.x-=t.width/2,t.y-=t.height/2-10,t.scaleX=1,t.scaleY=1,e()};egret.Tween.get(t).to({scaleX:1.4,scaleY:1.4},i).call(n,this)}function f(t,e,i){void 0===e&&(e=800),void 0===i&&(i=function(){}),t.alpha=0,t.scaleX=4,t.scaleY=4;var n=function(){i()},a=function(){egret.Tween.get(t).to({alpha:0},800).call(n,this)};egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){a()},this,e)}function b(t){var e=function(){if(null!=t){var i=function(){t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({alpha:1},1e3).call(e,self)};t.alpha=1,egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(i,self)}};e()}function v(t,e,i){void 0===i&&(i=50);var n=function(){if(null!=t){var a=function(){egret.Tween.get(t).to({y:t.y-i},e).call(n,this)};egret.Tween.get(t).to({y:t.y+i},e).call(a,this)}};n()}function m(t,e,i){void 0===i&&(i=20);var n=function(){if(null!=t){var a=function(){egret.Tween.get(t).to({rotation:-i},e).call(n,this)};egret.Tween.get(t).to({rotation:i},e).call(a,this)}};n()}function y(t,e,i){void 0===e&&(e=""),void 0===i&&(i=200);for(var n=e.split(""),a=n.length,s=0;a>s;s++)egret.setTimeout(function(){t.appendText(n[Number(this)])},s,i*s)}function T(t,e){for(var i=[[20,300],[15,300],[10,300],[5,300]],n="egret.Tween.get("+t+")",a=0,s=i.length;s>a;a++)n+=".to({'y':"+e+"-"+i[a][0]+"}, "+i[a][1]+")",n+=".to({'y':"+e+"}, "+i[a][1]+")";return n+=";"}function E(t,e){t.alpha=1,egret.Tween.get(t).to({alpha:0},e).to({alpha:1},e).call(this.startFlicker,this,[t])}function _(t){egret.Tween.removeTweens(t)}function M(t,e,i,n,a){void 0===n&&(n=140),void 0===a&&(a=64);var s=0,o=0,r=function(){if(o>8)return clearInterval(s),void(o=0);o++;var r=new eui.Image("gold");r.x=e,r.y=i,r.scaleX=.6,r.scaleY=.6,t.addChild(r),egret.Tween.get(r).to({x:n,y:a,scaleX:1.1,scaleY:1.1},600).wait(100).call(function(){t.removeChild(r)},[t,r])};s=setInterval(r.bind(this),100)}t.numEffect=e,t.rotationEffect=i,t.blinkEffect=n,t.removeRotationEffect=a,t.shakeObj=s,t.shakeScreen=o,t.showTips=r,t.playButtonEffect=h;t.playEffect=l,t.playEffect2=c,t.playEffect3=u,t.playEffect4=d,t.playRoleActionEffect1=p,t.playRoleActionEffect2=g,t.playEffect5=f,t.playScaleEffect=b,t.flyObj=v,t.rockObj=m,t.typerEffect=y,t.macIconShake=T,t.startFlicker=E,t.stopFlicker=_,t.coinsFly=M}(EffectUtils||(EffectUtils={}));var Global;!function(t){function e(t,e,i,n){return void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1),new lcp.LEvent(t,e,i,n)}function i(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var a=new lcp.LEvent(t,e,i,n);lcp.LListener.getInstance().dispatchEvent(a)}function n(t,e,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=0),lcp.LListener.getInstance().addEventListener(t,e,i,n,a)}function a(t,e,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=0),lcp.LListener.getInstance().removeEventListener(t,e,i,n)}function s(t){}function o(t){void 0===t&&(t=!1),t?(window.rootContainer.rotation=90,window.rootContainer.x=egret.MainContext.instance.stage.stageWidth):(window.rootContainer.rotation=0,window.rootContainer.x=0)}function r(t,e,i,n){void 0===t&&(t=""),void 0===e&&(e=""),void 0===i&&(i=null),void 0===n&&(n=1),null==this._alert}function h(t,e,i,n,a){void 0===t&&(t=""),void 0===e&&(e=""),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=1),null==this._alert}function l(){null!=this._alert&&(this._alert=null)}function c(){}function u(){null!=this._share&&(this._share=null)}t.Event=e,t.dispatchEvent=i,t.addEventListener=n,t.removeEventListener=a,t.shareUtils=s,t.rotationResize=o,t.alert=r,t.confirm=h,t.closeAlertPanel=l,t.share=c,t.closeSharePanel=u}(Global||(Global={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var n=Array(16),a=Array(16),s=0;16>s;s++)n[s]=909522486^i[s],a[s]=1549556828^i[s];var o=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(a.concat(o),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",s=0;s<t.length;s++)i=t.charCodeAt(s),a+=n.charAt(i>>>4&15)+n.charAt(15&i);return a},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",a=t.length,s=0;a>s;s+=3)for(var o=t.charCodeAt(s)<<16|(a>s+1?t.charCodeAt(s+1)<<8:0)|(a>s+2?t.charCodeAt(s+2):0),r=0;4>r;r++)n+=8*s+6*r>8*t.length?this.b64pad:i.charAt(o>>>6*(3-r)&63);return n},t.prototype.rstr2any=function(t,e){var i,n,a,s,o,r=e.length,h=Array(Math.ceil(t.length/2));for(i=0;i<h.length;i++)h[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(l);for(n=0;l>n;n++){for(o=Array(),s=0,i=0;i<h.length;i++)s=(s<<16)+h[i],a=Math.floor(s/r),s-=a*r,(o.length>0||a>0)&&(o[o.length]=a);c[n]=s,h=o}var u="";for(i=c.length-1;i>=0;i--)u+=e.charAt(c[i]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",a=-1;++a<t.length;)e=t.charCodeAt(a),i=a+1<t.length?t.charCodeAt(a+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),a++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,a=-1732584194,s=271733878,o=0;o<t.length;o+=16){var r=i,h=n,l=a,c=s;i=this.md5_ff(i,n,a,s,t[o+0],7,-680876936),s=this.md5_ff(s,i,n,a,t[o+1],12,-389564586),a=this.md5_ff(a,s,i,n,t[o+2],17,606105819),n=this.md5_ff(n,a,s,i,t[o+3],22,-1044525330),i=this.md5_ff(i,n,a,s,t[o+4],7,-176418897),s=this.md5_ff(s,i,n,a,t[o+5],12,1200080426),a=this.md5_ff(a,s,i,n,t[o+6],17,-1473231341),n=this.md5_ff(n,a,s,i,t[o+7],22,-45705983),i=this.md5_ff(i,n,a,s,t[o+8],7,1770035416),s=this.md5_ff(s,i,n,a,t[o+9],12,-1958414417),a=this.md5_ff(a,s,i,n,t[o+10],17,-42063),n=this.md5_ff(n,a,s,i,t[o+11],22,-1990404162),i=this.md5_ff(i,n,a,s,t[o+12],7,1804603682),s=this.md5_ff(s,i,n,a,t[o+13],12,-40341101),a=this.md5_ff(a,s,i,n,t[o+14],17,-1502002290),n=this.md5_ff(n,a,s,i,t[o+15],22,1236535329),i=this.md5_gg(i,n,a,s,t[o+1],5,-165796510),s=this.md5_gg(s,i,n,a,t[o+6],9,-1069501632),a=this.md5_gg(a,s,i,n,t[o+11],14,643717713),n=this.md5_gg(n,a,s,i,t[o+0],20,-373897302),i=this.md5_gg(i,n,a,s,t[o+5],5,-701558691),s=this.md5_gg(s,i,n,a,t[o+10],9,38016083),a=this.md5_gg(a,s,i,n,t[o+15],14,-660478335),n=this.md5_gg(n,a,s,i,t[o+4],20,-405537848),i=this.md5_gg(i,n,a,s,t[o+9],5,568446438),s=this.md5_gg(s,i,n,a,t[o+14],9,-1019803690),a=this.md5_gg(a,s,i,n,t[o+3],14,-187363961),n=this.md5_gg(n,a,s,i,t[o+8],20,1163531501),i=this.md5_gg(i,n,a,s,t[o+13],5,-1444681467),s=this.md5_gg(s,i,n,a,t[o+2],9,-51403784),a=this.md5_gg(a,s,i,n,t[o+7],14,1735328473),n=this.md5_gg(n,a,s,i,t[o+12],20,-1926607734),i=this.md5_hh(i,n,a,s,t[o+5],4,-378558),s=this.md5_hh(s,i,n,a,t[o+8],11,-2022574463),a=this.md5_hh(a,s,i,n,t[o+11],16,1839030562),n=this.md5_hh(n,a,s,i,t[o+14],23,-35309556),i=this.md5_hh(i,n,a,s,t[o+1],4,-1530992060),s=this.md5_hh(s,i,n,a,t[o+4],11,1272893353),a=this.md5_hh(a,s,i,n,t[o+7],16,-155497632),n=this.md5_hh(n,a,s,i,t[o+10],23,-1094730640),i=this.md5_hh(i,n,a,s,t[o+13],4,681279174),s=this.md5_hh(s,i,n,a,t[o+0],11,-358537222),a=this.md5_hh(a,s,i,n,t[o+3],16,-722521979),n=this.md5_hh(n,a,s,i,t[o+6],23,76029189),i=this.md5_hh(i,n,a,s,t[o+9],4,-640364487),s=this.md5_hh(s,i,n,a,t[o+12],11,-421815835),a=this.md5_hh(a,s,i,n,t[o+15],16,530742520),n=this.md5_hh(n,a,s,i,t[o+2],23,-995338651),i=this.md5_ii(i,n,a,s,t[o+0],6,-198630844),s=this.md5_ii(s,i,n,a,t[o+7],10,1126891415),a=this.md5_ii(a,s,i,n,t[o+14],15,-1416354905),n=this.md5_ii(n,a,s,i,t[o+5],21,-57434055),i=this.md5_ii(i,n,a,s,t[o+12],6,1700485571),s=this.md5_ii(s,i,n,a,t[o+3],10,-1894986606),a=this.md5_ii(a,s,i,n,t[o+10],15,-1051523),n=this.md5_ii(n,a,s,i,t[o+1],21,-2054922799),i=this.md5_ii(i,n,a,s,t[o+8],6,1873313359),s=this.md5_ii(s,i,n,a,t[o+15],10,-30611744),a=this.md5_ii(a,s,i,n,t[o+6],15,-1560198380),n=this.md5_ii(n,a,s,i,t[o+13],21,1309151649),i=this.md5_ii(i,n,a,s,t[o+4],6,-145523070),s=this.md5_ii(s,i,n,a,t[o+11],10,-1120210379),a=this.md5_ii(a,s,i,n,t[o+2],15,718787259),n=this.md5_ii(n,a,s,i,t[o+9],21,-343485551),i=this.safe_add(i,r),n=this.safe_add(n,h),a=this.safe_add(a,l),s=this.safe_add(s,c)}return[i,n,a,s]},t.prototype.md5_cmn=function(t,e,i,n,a,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,s)),a),i)},t.prototype.md5_ff=function(t,e,i,n,a,s,o){return this.md5_cmn(e&i|~e&n,t,e,a,s,o)},t.prototype.md5_gg=function(t,e,i,n,a,s,o){return this.md5_cmn(e&n|i&~n,t,e,a,s,o)},t.prototype.md5_hh=function(t,e,i,n,a,s,o){return this.md5_cmn(e^i^n,t,e,a,s,o)},t.prototype.md5_ii=function(t,e,i,n,a,s,o){return this.md5_cmn(i^(e|~n),t,e,a,s,o)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var NativeApi;!function(t){function e(t,e){egret.localStorage.setItem(t,e)}function i(t){return egret.localStorage.getItem(t)}function n(t){egret.localStorage.removeItem(t)}function a(){egret.localStorage.clear()}function s(e){if("undefined"!=typeof FileReader&&/image/i.test(e.type)){var i=new FileReader;i.onload=function(){alert("数据读取完成");var e=document.getElementById("result");e.innerHTML='<img id="photoImg" src="'+this.result+'" alt="" />';var i=new egret.Texture;t.srcImg.texture=i},i.readAsDataURL(e)}}function o(t){"undefined"!=typeof t&&t.length>0?s(t[0]):alert("抱歉！当前系统不支持此功能！")}function r(t){}function h(){}function l(){}function c(t){window.open("tel:"+t,"_self")}function u(t){window.open("sms:"+t,"_self")}function d(){return window.location.href}function p(t){void 0===t&&(t=!1)}function g(){}t.setLocalData=e,t.getLocalData=i,t.deleteLocalData=n,t.clearLocalData=a,t.srcImg=new egret.Bitmap,t.uploadFile=s,t.traverseFiles=o,t.fileUpload=r,t.getMic=h,t.getScreen=l,t.callPhone=c,t.sendMessage=u,t.getCurUrl=d,t.showVerticalTips=p,t.removeVerticalTips=g}(NativeApi||(NativeApi={}));var RandomUtils=function(){function t(){}return t.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var i=e-t;return t+Math.random()*i},t.limitInteger=function(t,e){return Math.round(this.limit(t,e))},t.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t.randomArray2=function(t){var e=Math.floor(Math.random()*t.length),i=t[e];return t.splice(e,1),i},t}();__reflect(RandomUtils.prototype,"RandomUtils");var RegUtils;!function(t){function e(t){var e=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return e.test(t)?!0:(alert("您输入的Email地址格式不正确！"),!1)}function i(t){if(s(t))return!1;var e=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return e.test(t)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function n(t){var e="/^[1][3][0-9]{9}$/",i=new RegExp(e);return i.test(t)?!0:!1}function a(t){var e=/^[0][1-9]{2,3}-[0-9]{5,10}$/,i=/^[1-9]{1}[0-9]{5,8}$/,n="您输入的电话号码不正确!";return t.length>9?e.test(t)?!0:(alert(n),!1):i.test(t)?!0:(alert(n),!1)}function s(t){if(""==t)return!0;var e="^[ ]+$",i=new RegExp(e);return i.test(t)}function o(t){var e=/^[-]{0,1}[0-9]{1,}$/;return e.test(t)}function r(t){var e="^[0-9]+$",i=new RegExp(e);return-1!=t.search(i)?!0:!1}function h(t){var e="^[0-9]+[.][0-9]{0,3}$",i=new RegExp(e);return i.test(t)?!0:!1}function l(t,e){var i=" ",n=-1;if(0==e||1==e){for(;" "==i;)++n,i=t.substr(n,1);t=t.substring(n)}if(0==e||2==e){for(i=" ",n=t.length;" "==i;)--n,i=t.substr(n,1);t=t.substring(0,n+1)}return t}t.checkEmail=e,t.isIP=i,t.checkMobile=n,t.checkPhone=a,t.isNull=s,t.isInteger=o,t.isNumber=r,t.isMoney=h,t.cTrim=l}(RegUtils||(RegUtils={}));var BitmapBlink=function(t){function e(e,i,n){void 0===n&&(n=!0);var a=t.call(this)||this;return a._target=e,a._time=i,n&&a.start(),a}return __extends(e,t),e.prototype.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},e.prototype.runDown=function(t){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},e.prototype.runUp=function(t){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},e.prototype.checkOver=function(){var t=egret.getTimer();return t-this._currTime>=this._time?(this.destroy(),!0):!1},e.prototype.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},e}(egret.EventDispatcher);__reflect(BitmapBlink.prototype,"BitmapBlink");var lcp;!function(t){var e=function(t){function e(e,i,n,a){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===a&&(a=!1);var s=t.call(this,e,n,a)||this;return s.CLASS_NAME="LEvent",i&&(s._obj=i),s}return __extends(e,t),e.prototype.clone=function(t){return new e(this.type,t?t:this._obj,this.bubbles,this.cancelable)},e.prototype.toString=function(){console.log(this.CLASS_NAME,"type","bubbles","cancelable")},Object.defineProperty(e.prototype,"param",{get:function(){return this._obj},enumerable:!0,configurable:!0}),e}(egret.Event);t.LEvent=e,__reflect(e.prototype,"lcp.LEvent")}(lcp||(lcp={}));var lcp;!function(t){var e=function(){function t(){this.CLASS_NAME="LListener",this.isInit=!1,this.isInit,null==this._dispatcher&&(this._dispatcher=new egret.EventDispatcher,this.isInit=!0)}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.addEventListener=function(t,e,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=0),this._dispatcher.addEventListener(t,e,i,n,a)},t.prototype.removeEventListener=function(t,e,i,n){void 0===n&&(n=!1),this._dispatcher.removeEventListener(t,e,i,n)},t.prototype.hasEventListener=function(t){return this._dispatcher.hasEventListener(t)},t.prototype.willTrigger=function(t){return this._dispatcher.willTrigger(t)},t.prototype.dispatchEvent=function(t){return this._dispatcher.dispatchEvent(t)},t.prototype.toString=function(){return this._dispatcher.toString()},t}();t.LListener=e,__reflect(e.prototype,"lcp.LListener")}(lcp||(lcp={}));var TipsUtils;!function(t){function e(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,e?i.textColor=GameConfig.TextColors.green:i.textColor=GameConfig.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,PanelManage.tipsLayer.contains(i)||PanelManage.tipsLayer.addChild(i);var n=function(){PanelManage.tipsLayer.contains(i)&&(PanelManage.tipsLayer.removeChild(i),i=null)},a=function(){egret.Tween.get(i).to({alpha:0},1e3).call(n,this)};i.visible=!0,egret.Tween.get(i).to({y:i.y-120,alpha:1},800,egret.Ease.backOut).call(a,this)}function i(t,e,i){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===i&&(i=!0);var n=new egret.TextField;n.size=24,n.y=GameConfig.curHeight()/2,e?n.textColor=GameConfig.TextColors.red:n.textColor=GameConfig.TextColors.green,n.alpha=0,n.text=t,n.strokeColor=0,i?n.x=-n.width:n.x=GameConfig.curWidth(),n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER,PanelManage.tipsLayer.contains(n)||PanelManage.tipsLayer.addChild(n);
i?egret.Tween.get(n).to({x:GameConfig.curWidth()/2-n.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(n).to({x:GameConfig.curWidth()/2-n.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){i?egret.Tween.get(n).to({x:n.x+100},500):egret.Tween.get(n).to({x:n.x-100},500)},this,300),egret.setTimeout(function(){i?egret.Tween.get(n).to({x:GameConfig.curWidth()},300,egret.Ease.sineIn):egret.Tween.get(n).to({x:-n.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){},this,1100)}function n(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,e?i.textColor=GameConfig.TextColors.red:i.textColor=GameConfig.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,i.scaleX=0,i.scaleY=0,PanelManage.tipsLayer.contains(i)||PanelManage.tipsLayer.addChild(i);var n=function(){PanelManage.tipsLayer.contains(i)&&(PanelManage.tipsLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(n,this)},this,2e3)}function a(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=30,i.y=GameConfig.curHeight()/2,e?i.textColor=16756264:i.textColor=16756264,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,i.scaleX=4,i.scaleY=4,PanelManage.tipsLayer.contains(i)||PanelManage.tipsLayer.addChild(i);var n=function(){PanelManage.tipsLayer.contains(i)&&(PanelManage.tipsLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(n,this)},this,1e3)}t.showTipsDownToUp=e,t.showTipsLeftOrRight=i,t.showTipsFromCenter=n,t.showTipsBigToSmall=a}(TipsUtils||(TipsUtils={}));var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){egret.MainContext.deviceType==egret.MainContext.DEVICE_PC&&(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL),t.prototype.createChildren.call(this);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),GlobalData.isDebug?RES.loadConfig(GlobalData.cdnResUrl+"resource/default.res.json?v="+GlobalData.version,GlobalData.cdnResUrl+"resource/"):RES.loadConfig(GlobalData.cdnResUrl+"resource/release.res.json?v="+GlobalData.version,GlobalData.cdnResUrl+"resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme(GlobalData.cdnResUrl+"resource/default.thm.json?v="+GlobalData.version,this.stage);e.addEventListener(egret.Event.COMPLETE,this.themComplete.bind(this),this),this.createScene()},e.prototype.themComplete=function(){RES.loadGroup("loading"),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName?(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)):"loading"==t.groupName&&(this.loadingView=new LoadingUI,this.euiLayer.addChild(this.loadingView),RES.loadGroup("preload"))},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createScene=function(){this.gameLayer=new egret.DisplayObjectContainer,this.addChild(this.gameLayer),this.euiLayer=new eui.UILayer,this.addChild(this.euiLayer),this.tipsLayer=new egret.DisplayObjectContainer,this.addChild(this.tipsLayer),PanelManage.gameLayer=this.gameLayer,PanelManage.euiLayer=this.euiLayer,PanelManage.tipsLayer=this.tipsLayer,PanelManage.tipsLayer.touchEnabled=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playMusicOnce,this)},e.prototype.playMusicOnce=function(){MusicManage.initMusic(),GlobalData.isDebug||MusicManage.playBgMuisc(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playMusicOnce,this)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?n(a):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var JSSDK=function(){function t(){this.CLASS_NAME="JSSDK"}return t.prototype.init=function(){var t=GlobalData.configData,e=location.href.split("#")[0];this.title="皇家电玩城给你非凡享受",this.desc="皇家电玩城给你非凡享受",this.link=t.data.linkhall+"?yid="+GlobalData.account,this.imgUrl=t.data.imgurl,this.url=t.data.shareurl,window.getShareInfo(this.url+"?url="+encodeURIComponent(e),{},this.getSignPackage.bind(this))},t.prototype.setTitle=function(){var t=GlobalData.configData;this.title="皇家电玩城给你非凡享受",this.desc="皇家电玩城给你非凡享受",this.link=t.data.linkhall+"?yid="+GlobalData.account,this.imgUrl=t.data.imgurl;var e=location.href.split("#")[0];this.url=t.data.shareurl,window.getShareInfo(this.url+"?url="+encodeURIComponent(e),{},this.getSignPackage.bind(this))},t.prototype.getSignPackage=function(t){this.signPackage=JSON.parse(t),window.setWxConfig(this.signPackage),window.setShare(this.title,this.desc,this.imgUrl,this.link)},t}();__reflect(JSSDK.prototype,"JSSDK");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.tt=0,e.arr=["新玩法欢乐21点,每日送出上万点券","首冲豪送千万金币","每天在线1小时,能够抽奖","开服起，每分钟都会有几率发送系统红包,请注意抢红包哦","提游戏建议和BUG,采纳会发放50W金币哦","邀请好友送点券，送大礼"],e.skinName="resource/skins/other/LoadingPanelSkin.exml",e.set(),e}return __extends(e,t),e.prototype.set=function(){this.bg.source=GlobalData.cdnResUrl+"resource/assets/noload/loadingbg.jpg",this.t3.source=GlobalData.cdnResUrl+"resource/assets/noload/t3.png",this.loadingtip.source=GlobalData.cdnResUrl+"resource/assets/noload/loadingtip.png"},e.prototype.childrenCreated=function(){window.hideDiv(),this.setTouchEnabled(),this.init(),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.CREATE_ROLE,this.connectSucc.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.HIDE_LOADING_TXT,this.hideTxt.bind(this)),this.loadingtip.visible=!0,egret.Tween.get(this.t3).to({alpha:0,y:700},2e3).call(this.play1.bind(this)),this.txtTishi.text=RandomUtils.randomArray(this.arr)},e.prototype.hideTxt=function(){if(this.loadingtip.visible=!1,GlobalData.user=new UserInfo,GlobalData.userfrom==PlatformData.USER_FROM_WEIXIN)if(window.isWeiXin()){var t=JSON.parse(localStorage.getItem("wxopeniddata"));GlobalData.openid=t.openid,GlobalData.user.nickname=t.nickname,GlobalData.user.headurl=t.headimgurl,GlobalData.user.sex=t.sex+"",Net.login()}else this.autoLogin()},e.prototype.autoLogin=function(){GlobalData.openid=localStorage.getItem("uuid"),GlobalData.user.headurl="http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46",GlobalData.user.sex="0",Net.login()},e.prototype.play1=function(){this.tt=egret.setTimeout(this.play2.bind(this),this,1e3),this.txtTishi.text=RandomUtils.randomArray(this.arr)},e.prototype.play2=function(){egret.clearTimeout(this.tt),this.t3.y=720,egret.Tween.get(this.t3).to({alpha:1},300).call(this.play3.bind(this))},e.prototype.play3=function(){this.txtTishi.text=RandomUtils.randomArray(this.arr),egret.clearTimeout(this.tt),egret.Tween.get(this.t3).to({alpha:0,y:700},2e3).call(this.play1.bind(this))},e.prototype.connectSucc=function(t){console.log(JSON.stringify(t.param)),GlobalData.isSign=t.param.sign,GlobalData.user.nickname=t.param.name,GlobalData.user.gold=t.param.gold,GlobalData.account=t.param.account,GlobalData.user.headurl=t.param.headurl,GlobalData.user.quan=t.param.quan,GlobalData.user.vip=t.param.vip,GlobalData.user.taskstate=t.param.taskstate,GlobalData.user.emailstate=t.param.emailstate,GlobalData.user.isOneLogin=t.param.isOneLogin,GlobalData.user.hasRecharge=t.param.hasRecharge,GlobalData.user.sex=t.param.sex,GlobalData.isComplete=!0,this.loadingtip.visible=!1;var e=GlobalData.user.headurl.split("_")[0];("nan"==e||"nv"==e)&&(GlobalData.user.headurl=GlobalData.configData.data.headurl+GlobalData.user.headurl+".png"),GlobalData.isLoadingResCom&&(this.dispose(),GameManage.init())},e.prototype.setProgress=function(t,e){var i=t/e*100;this.txtTips.text=Math.floor(i)+"%",this.bar.width=441*t/e,this.bar.x=104,t==e&&(GlobalData.isLoadingResCom=!0,GlobalData.isComplete&&(this.dispose(),GameManage.init()))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.init=function(){0==GlobalData.isDebug&&(GlobalData.connectIP=GlobalData.configData.data.connectIP),Net.connectServer(),GlobalData.isLoadingResCom=!1},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI",["fany.IDispose"]);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function a(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ActivityItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/activity/ActivityItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.txtStr.text=t.stt,this.icon.source=t.state},e.prototype.click=function(t){t?"hd.selected"!=this.bg.source&&(this.bg.source="hd.selected"):"hd.noselect"!=this.bg.source&&(this.bg.source="hd.noselect")},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ActivityItemPanel.prototype,"ActivityItemPanel",["fany.IDispose"]);var ErrorMessage;!function(t){function e(t){switch(t){case"204":return"账号不存在";case"211":return"用户名已注册";case"212":return"密码错误";case"213":return"已修改过昵称";case"301":return"请求参数错误";case"302":return"已经在游戏中";case"303":return"不在游戏中";case"304":return"已超过最大下注金额！";case"305":return"下注金币为0 出错";case"306":return"下注编号错误";case"307":return"庄家不能下注";case"308":return"已经上庄过了";case"309":return"并未上庄过";case"310":return"封盘停止下注";case"311":return"下局将不是庄";case"312":return"座位上有人了";case"313":return"座位未找到";case"314":return"抱歉，下注后不能发红包";case"315":return"当前您是庄家不可以发红包";case"316":return"您的余额不足，请充值后再发红包";case"318":return"您已经有座位了";case"319":return"VIP等级不够";case"320":return"消息发送频繁";case"321":return"缺少比武卡,请在商城购买";case"322":return"游戏密码错误";case"323":return"已经出拳";case"324":return"游戏人数不足";case"325":return"您处于排庄列表，不可坐下";case"326":return"你下注的金额超过庄家接受的上限";case"327":return"操作太频繁！";case"328":return"游戏次数不足！";case"401":return"VIP等级不够";case"402":return"已经发布打赏";case"403":return"没有摇钱树";case"404":return"没有足够的金币";case"405":return"没有足够的点卷";case"406":return"未找到";case"407":return"未完成";case"408":return"已获取";case"409":return"请求参数错误";case"410":return"金币不足存入";case"411":return"银行不足取出";case"412":return"金币不足";case"413":return"打赏过期";case"414":return"游戏中不能存入";case"420":return"当前不可以领取救济金";case"422":return"未购买";case"423":return"已经领取过";case"424":return"已经过期";case"425":return"奖品不存在";case"426":return"不在抽奖时间内";case"427":return"金币不足";case"428":return"没有抽奖次数";case"429":return"当前库存无奖券";case"431":return"今天提交意见次数已满，感谢您明天再来提交意见！";case"433":return"充值后便可以参与大转盘抽奖了！";case"434":return"您的抽奖次数已经用完！";case"436":return"您已经领取了奖励！";case"501":return"没有此房间！";case"504":return"房间人数已满！";case"512":return"您的金币不能进入当前倍率的房间！";case"514":return"游戏中不能修改底分！";case"436":return"您已经领取了奖励！";case"601":return"竞猜未开始！";case"602":return"竞猜已结束！";case"603":return"竞猜已下注！";case"604":return"金币不足！";case"605":return"没有这个竞猜！";case"701":return"游戏已结束！";default:return"返回提示错误代码："+t}}t.errorMsg=e}(ErrorMessage||(ErrorMessage={}));var AwardItem=function(t){function e(){var e=t.call(this)||this;return e._id="",e.skinName="resource/skins/award/AwardItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnTouch,egret.TouchEvent.TOUCH_TAP,this.onTouchExchange.bind(this))},e.prototype.setData=function(t,e){1==e?this.setExchange(t):2==e?this.setSelfRecord(t):3==e&&this.setAllRecord(t)},e.prototype.setExchange=function(t){this.grpExchange.visible=!0,this.grpRecord.visible=!1,this.labTitle.text=t.name,this.labInfo.text=t.desc,this.labGold.text=QuickManage.moneyStr(t.need_count),this.imgGift.source=GlobalData.cdnResUrl+"resource/assets/noload/icon/"+t.icon+".png",this._id=t._id},e.prototype.setAllRecord=function(t){this.grpExchange.visible=!1,this.grpRecord.visible=!0,this.labRecordInfo.text="vip"+t.vip+"玩家"+t.name+"兑换了"+t.award,this.labRecordTime.text=new Date(t.time).toLocaleString()},e.prototype.setSelfRecord=function(t){this.grpExchange.visible=!1,this.grpRecord.visible=!0,this.labRecordInfo.text="兑换了"+t.award,this.labRecordTime.text=new Date(t.time).toLocaleString()},e.prototype.onTouchExchange=function(){Net.send(Protocol.HALL_GIFT_EXCHANGE,{giftId:this._id},this.exchangeCB.bind(this))},e.prototype.exchangeCB=function(t){200==t.code?(lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.GIFT_ON_EXCHANGE,t.data)),TipsManage.showTips("兑换奖品成功！")):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(AwardItem.prototype,"AwardItem",["fany.IDispose"]);var AwardPanel=function(t){function e(){var e=t.call(this)||this;return e.giftArr=[],e.awardArr=[],e.curSelectAward="",e.skinName="resource/skins/award/AwardPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){for(var t=0;6>t;t++)EventManage.addEvent(this,this["game"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchGame.bind(this,t));EventManage.addButtonEvent(this,this.btnExchange,egret.TouchEvent.TOUCH_TAP,this.onTouchExchange.bind(this)),EventManage.addButtonEvent(this,this.btnMyGift,egret.TouchEvent.TOUCH_TAP,this.onTouchMyGift.bind(this)),EventManage.addButtonEvent(this,this.btnRecord,egret.TouchEvent.TOUCH_TAP,this.onTouchRecord.bind(this)),EventManage.addButtonEvent(this,this.tipsBtnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchTipsclose.bind(this)),EventManage.addButtonEvent(this,this.subBtnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchSecondClose.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnSureBuy,egret.TouchEvent.TOUCH_TAP,this.onTouchSureBuy.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.GIFT_ON_EXCHANGE,this.updateDataTicket.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.updateDataGold.bind(this)),Net.send(Protocol.HALL_GIFT_LOTTERY_INFO,{},this.init.bind(this)),EventManage.addButtonEvent(this,this.btnAddress,egret.TouchEvent.TOUCH_TAP,this.btnAddressOpen.bind(this,!0)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.btnAddressOpen.bind(this,!1)),EventManage.addEvent(this,this.bggGrp,egret.TouchEvent.TOUCH_TAP,this.bggGrpHide.bind(this,!1)),EventManage.addEvent(this,this.bggGrp1,egret.TouchEvent.TOUCH_TAP,this.bggGrp1Hide.bind(this,!1))},e.prototype.bggGrpHide=function(){this.grpSecond.visible=!1},e.prototype.bggGrp1Hide=function(){this.grpTips.visible=!1},e.prototype.btnAddressOpen=function(t){this.addressGroup.visible=t,this.scroll.visible=!t,0==t?Net.send(Protocol.UPDATE_ADDRESS,{address:this.txtName.text+"&"+this.txtPhone.text+"&"+this.txtAddress.text},this.updateSucc.bind(this)):Net.send(Protocol.GET_ADDRESS,{},this.getAddressSucc.bind(this))},e.prototype.getAddressSucc=function(t){if(200==t.code){if(""!=t.address){var e=t.address.split("&");this.txtName.text=e[0],this.txtPhone.text=e[1],this.txtAddress.text=e[2]}}else TipsManage.showTips(JSON.stringify(t))},e.prototype.updateSucc=function(t){200==t.code?(TipsManage.showTips("修改成功！"),this.addressGroup.visible=!1,this.scroll.visible=!0):TipsManage.showTips(JSON.stringify(t))},e.prototype.initData=function(){this.giftArr=[{name:"喜从天降",gold:2e3},{name:"时来运转",gold:2e3},{name:"财运亨通",gold:2e3},{name:"鸿运当头",gold:5e3},{name:"好运连连",gold:5e3},{name:"天降财神",gold:8888}],this.grpSecond.visible=!1,this.grpTips.visible=!1,this.labGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold))},e.prototype.updateDataGold=function(){this.labGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold))},e.prototype.init=function(t){if(200==t.code){this.initData(),this.labShop.text="剩余库存:"+t.data.shopticket,this.labUser.text=t.data.userticket,this.awardArr=t.data.awardArr;for(var e=0;6>e;e++)this["labMoney"+e].text=QuickManage.moneyStr(this.awardArr[e].gold),this["game"+e].name=this.awardArr[e]._id}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.updateDataTicket=function(t){this.labUser.text=t.param.userticket},e.prototype.onTouchGame=function(t){this.grpTips.visible=!0,this.grpTipsInfo.text="花费"+QuickManage.moneyStr(this.awardArr[t].gold)+"金币购买?",this.grpTipsTitle.text=this.giftArr[t].name,this.curSelectAward=this["game"+t].name},e.prototype.onTouchSureBuy=function(){console.log("onTouchSure to buy!"),Net.send(Protocol.HALL_GIFT_GET_LOTTERY,{drawId:this.curSelectAward},this.onTouchBuyCB.bind(this))},e.prototype.onTouchBuyCB=function(t){200==t.code?(0==t.data.count?TipsManage.showTips("抱歉您没有抽中奖券！"):TipsManage.showTips("抽中"+QuickManage.moneyStr(t.data.count)+"张奖券"),this.labShop.text="剩余库存:"+t.data.shopticket,this.labUser.text=t.data.userticket,this.grpTips.visible=!1,GlobalData.user.gold=t.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchExchange=function(){this.addressGroup.visible=!1,this.scroll.visible=!0,this.grpSecond.visible=!0,this.subImgTitle.source="award.title0",Net.send(Protocol.HALL_GIFT_LIST,{},this.exchangeCB.bind(this))},e.prototype.exchangeCB=function(t){200==t.code?this.setItem(t.data,1):ErrorMessage.errorMsg(t.msg)},e.prototype.onTouchMyGift=function(){this.grpSecond.visible=!0,this.subImgTitle.source="award.title1",Net.send(Protocol.HALL_GIFT_SELF_RECORD,{},this.myGiftCB.bind(this))},e.prototype.myGiftCB=function(t){200==t.code?this.setItem(t.data,2):ErrorMessage.errorMsg(t.msg)},e.prototype.onTouchRecord=function(){this.addressGroup.visible=!1,this.scroll.visible=!0,this.grpSecond.visible=!0,this.subImgTitle.source="award.title2",Net.send(Protocol.HALL_GIFT_ALL_RECORD,{},this.recordCB.bind(this))},e.prototype.recordCB=function(t){200==t.code?this.setItem(t.data,3):ErrorMessage.errorMsg(t.msg)},e.prototype.onTouchTipsclose=function(){this.grpTips.visible=!1},e.prototype.onTouchSecondClose=function(){for(;this.subGrpContent.numChildren>0;){var t=this.subGrpContent.removeChildAt(0);t.dispose()}this.clearItems(),this.grpSecond.visible=!1},e.prototype.setItem=function(t,e){for(var i=0;i<t.length;i++){var n=ObjManage.getObj("AwardItem");n.y=i*n.height,this.subGrpContent.addChild(n),n.setData(t[i],e)}},e.prototype.clearItems=function(){for(;this.subGrpContent.numChildren>0;)ObjManage.addObj("AwardPanel",this.subGrpContent.removeChildAt(0));this.subGrpContent.scrollV=0},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(AwardPanel.prototype,"AwardPanel",["fany.IDispose"]);var BlackJackItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/blackjack/BlackJackItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.txtName.text=t.name,this.txtRank.text=t.rank,this.txtScore.text=t.toScore},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(BlackJackItemPanel.prototype,"BlackJackItemPanel",["fany.IDispose"]);var BlackJackPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.cardArr=[[],[],[],[]],i.cardXArr=[70,216,362,507],i.cardBaseY=600,i.cardIncrementalY=40,i.cardBackArr=[],i.cardBackNum=9,i.isCanTouchBox=!1,i.lastCardNumber=0,i.curSelectIndex=0,i.isGaming=!1,i.tt=0,i.current=0,i.ii=0,i.skinName="resource/skins/blackjack/BlackJackSkin.exml",i.r=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnStart,egret.TouchEvent.TOUCH_TAP,this.onTouchStart.bind(this)),EventManage.addButtonEvent(this,this.btnLing,egret.TouchEvent.TOUCH_TAP,this.btnLingHandle.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.exitGame.bind(this)),EventManage.addButtonEvent(this,this.btnStart1,egret.TouchEvent.TOUCH_TAP,this.startGame.bind(this,1e3)),EventManage.addButtonEvent(this,this.btnStart2,egret.TouchEvent.TOUCH_TAP,this.startGame.bind(this,1e4)),EventManage.addButtonEvent(this,this.btnStart3,egret.TouchEvent.TOUCH_TAP,this.startGame.bind(this,1e5)),EventManage.addEvent(this,this.selectBox0,egret.TouchEvent.TOUCH_TAP,this.onTouchSelectBox.bind(this,0)),EventManage.addEvent(this,this.selectBox1,egret.TouchEvent.TOUCH_TAP,this.onTouchSelectBox.bind(this,1)),EventManage.addEvent(this,this.selectBox2,egret.TouchEvent.TOUCH_TAP,this.onTouchSelectBox.bind(this,2)),EventManage.addEvent(this,this.selectBox3,egret.TouchEvent.TOUCH_TAP,this.onTouchSelectBox.bind(this,3)),EventManage.addEvent(this,this.mcGroup,egret.TouchEvent.TOUCH_TAP,this.closeMcGroup.bind(this,3)),this.initData(this.r),Net.send(Protocol.BLACK_JACK_RANK,{},this.rankCallback.bind(this)),this.mcGroup.visible=!1,TimerManager.getInstance().setFrame("GameMainPanel.noticeMoveHandler",this.gogo.bind(this),this,300),MusicManage.playGameBgMuisc("bj.bg",.5,-1)},e.prototype.gogo=function(){Net.send(Protocol.BLACK_JACK_RANK,{},this.rankCallback.bind(this))},e.prototype.closeMcGroup=function(){clearTimeout(this.tt),this.mcGroup.visible=!1},e.prototype.btnLingHandle=function(){Net.send(Protocol.BLACK_JACK_REWARD,{},this.lingCallback.bind(this))},e.prototype.lingCallback=function(t){200==t.code?-1==parseInt(""+t.win.gold)?TipsManage.showTips("今天已经领过!"):-2==parseInt(""+t.win.gold)?TipsManage.showTips("昨日未参与游戏!"):(this.mcGroup.visible=!0,EffectUtils.numEffect(this.txtJiangquan,parseInt(""+t.win.note)),EffectUtils.numEffect(this.txtJianggold,parseInt(""+t.win.gold)),this.tt=setTimeout(this.closeMcGroup.bind(this),5e3)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.rankCallback=function(t){if(200==t.code){this.clearItems();for(var e=t.data.players,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("BlackJackItemPanel");a.y=22*n,this.itemGroup.addChild(a),a.setData({name:e[n].name,toScore:e[n].score,rank:n+1}),this.arr.push(a)}}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("BlackJackItemPanel",this.arr[e]));this.arr=[]},e.prototype.startGame=function(t){this.current=t,this.chooseGroup.visible=!1,Net.send(Protocol.BLACK_JACK_CHOOSE,{gold:t},this.chooseCallback.bind(this))},e.prototype.chooseCallback=function(t){200==t.code?Net.send(Protocol.BLACK_JACK_START,{},this.startCallback.bind(this)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.initData=function(t){200==t.code&&(this.labScore.text=""+t.data.toScore,this.labGameNumer.text="剩余次数："+t.data.cur+"/"+t.data.max),this.titleHead.source=GlobalData.user.headurl;var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(66,45,40),e.graphics.endFill(),this.addChild(e),this.titleHead.mask=e,this.titleName.text=GlobalData.user.nickname,this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.onTouchStart=function(){this.isGaming||(this.chooseGroup.visible=!0)},e.prototype.startCallback=function(t){200==t.code?(this.isCanTouchBox=!0,this.lastCardNumber=t.data.count,this.createCard(t.data.poke),this.isGaming=!0,this.labGameNumer.text="剩余次数："+t.data.cur+"/"+t.data.max):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchRestart=function(){this.restart()},e.prototype.onTouchSelectBox=function(t){this.isCanTouchBox&&(this.isCanTouchBox=!1,Net.send(Protocol.BLACK_JACK_SETCARD,{channel:t},this.setCardCallback.bind(this)),this.curSelectIndex=t)},e.prototype.setCardCallback=function(t){if(200==t.code){var e=this.cardXArr[this.curSelectIndex],i=this.cardBaseY+this.cardArr[this.curSelectIndex].length*this.cardIncrementalY;this.cardArr[this.curSelectIndex].push(this.curCard),egret.Tween.get(this.curCard).to({x:e,y:i},200).wait(100).call(this.afterFlyCard.bind(this,t.data)),GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.current+"",this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),5==++this.ii&&(Net.send(Protocol.HALL_GET_GOLD,{},this.flyCoins.bind(this)),this.ii=0)}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.isCanTouchBox=!0},e.prototype.flyCoins=function(t){200==t.code?(GlobalData.user.gold=t.data.gold,this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.afterFlyCard=function(t){this.lastCardNumber=t.count;for(var e=0;4>e;e++)this["labChannel"+e].text=t.cScore[e];if(this.labScore.text=""+t.toScore,1==t.boom?(this.cleanBoxCard(this.curSelectIndex),console.log("BOOM !!!")):2==t.boom&&(this.cleanBoxCard(this.curSelectIndex),console.log("NO BOOM !!!")),"0"==t.poke)return void this.gameOver();if(this.lastCardNumber<10){if(this.cardBackNum<0)return;this.cardBackArr[this.cardBackNum].visible=!1,this.cardBackNum--}this.createCard(t.poke)},e.prototype.createCard=function(t){var e=new eui.Image("bj.card_"+t);e.x=89,e.y=409,e.touchEnabled=!1,this.addChild(e),this.curCard=e,this.curCard.alpha=0,egret.Tween.get(this.curCard).to({x:192,y:409,alpha:1},80).call(function(){this.isCanTouchBox=!0},this)},e.prototype.gameOver=function(){console.log("over"),this.labFinalScore.text=this.labScore.text},e.prototype.cleanBoxCard=function(t){for(var e=this.cardArr[t],i=0;i<e.length;i++)egret.Tween.get(e[i]).to({scaleX:1.2,scaleY:1.2,alpha:0},100).call(function(){this.parent.removeChild(this)},e[i]);this.cardArr[t]=[]},e.prototype.restart=function(){for(var t=0;t<this.cardArr.length;t++){for(var e=0;e<this.cardArr[t].length;e++){var i=this.cardArr[t];this.removeChild(i[e])}this.cardArr[t]=[]}for(var e=0;e<this.cardBackArr.length;e++)this.cardBackArr[e].visible=!0;for(var n=0;4>n;n++)this["labChannel"+n].text="0";this.cardBackNum=9,this.lastCardNumber=0,this.curSelectIndex=0,this.isCanTouchBox=!1,this.isGaming=!1},e.prototype.randomSort=function(t,e){return Math.random()-.5},e.prototype.exitGame=function(){Net.send(Protocol.BLACK_JACK_LEAVE,{},this.exitGameCB.bind(this))},e.prototype.exitGameCB=function(t){200==t.code?this.dispose():TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){MusicManage.closeGameBgMuisc(),TimerManager.getInstance().remove("GameMainPanel.noticeMoveHandler"),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(BlackJackPanel.prototype,"BlackJackPanel",["fany.IDispose"]);var ChatItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/chat/ChatItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled()},e.prototype.setData=function(t){""==t.msg.name?(this.chatGroup.visible=!1,this.txtSys.visible=!0,this.txtSys.textFlow=(new egret.HtmlTextParser).parser(ChatManage.getInstance().transition(t.msg.msg))):(this.chatGroup.visible=!0,this.txtSys.visible=!1,this.icon.source=t.msg.headurl,this.txtSay.textFlow=(new egret.HtmlTextParser).parser('<font color="#FFFF00" >V'+t.msg.vip+'</font><font color="#e938f2" >['+t.msg.name+']</font><font color="#e938f2" >:'+t.msg.msg+"</font>"))},e.prototype.btnSendHandle=function(){},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ChatItemPanel.prototype,"ChatItemPanel",["fany.IDispose"]);var ChatPanel=function(t){function e(){var e=t.call(this)||this;return e.yy=0,e.tt=0,e.skinName="resource/skins/chat/ChatPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.arr=[],this.chats=[],this.chats2=[],this.tt=0,EventManage.addButtonEvent(this,this.btnSend,egret.TouchEvent.TOUCH_TAP,this.btnSendHandle.bind(this)),this.txtSay.touchEnabled=!0,TimerManager.getInstance().setFrame("ChatPanel.gogo",this.gogo.bind(this),this,6),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.CHAT_GAME_RESULT,this.gameresult.bind(this))},e.prototype.gameresult=function(){for(var t=this.chats2.length,e=0;t>e;e++)this.setChatItem(this.chats2[e]);this.chats2=[]},e.prototype.gogo=function(){if(this.chats.length>0){var t=this.chats.shift();this.setChatItem(t)}},e.prototype.btnSendHandle=function(){return""==this.txtSay.text?void TipsManage.showTips("不能发送空消息!"):void(this.txtSay.text.length>0&&this.txtSay.text.length<20?ChatManage.getInstance().send(this.txtSay.text,this.sendChatBack.bind(this)):TipsManage.showTips("长度超出限制,最大20个字符!"))},e.prototype.sendChatBack=function(t){200!=t.code&&TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.txtSay.text=""},e.prototype.setChat=function(t){return""==t.msg.name&&"1"==t.msg.msg.split(":")[0]?void this.chats2.push(t):void this.chats.push(t)},e.prototype.callcb=function(t){clearTimeout(this.tt),this.setChatItem(t)},e.prototype.sendGameChat=function(t){this.setChatItem({msg:{msg:"2:"+t,name:""}})},e.prototype.setChatItem=function(t){if(this.arr.length>10){var e=this.arr.shift();e.parent&&(e.parent.removeChild(e),ObjManage.addObj("ChatItemPanel",e))}var i=ObjManage.getObj("ChatItemPanel");i.setData(t),i.y=2+40*this.yy,this.chatGroup.addChild(i),this.arr.push(i),this.yy>2&&(this.chatScroll.viewport.validateNow(),egret.Tween.get(this.chatScroll.viewport).to({scrollV:this.chatScroll.viewport.contentHeight-this.chatScroll.viewport.height},200)),++this.yy},e.prototype.clearItems=function(){this.arr=this.arr||[];for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("ChatItemPanel",this.arr[e]));this.arr=[]},e.prototype.dispose=function(){TimerManager.getInstance().remove("ChatPanel.gogo"),this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)
},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ChatPanel.prototype,"ChatPanel",["fany.IDispose"]);var ChooseClownPanel=function(t){function e(e){var i=t.call(this)||this;return i.res="",i.tt=0,i.tt3=0,i.isMove=!1,i.tt1=0,i.tt2=30,i.isDouble=0,i.skinName="resource/skins/clown/ChooseClownskin.exml",i.bet=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){for(var t=this,e=1;9>e;e++)this["clown_star"+e].visible=!1;this.imgWinLost.visible=!1,this.updataBet(this.bet),setTimeout(function(){t.grpGuess.visible=!1},2e3),this.addEventListene(),MusicManage.playMuisc("clown_roll_music"),this.rollMc=QuickManage.createMc("rollmc"),this.zhuanGroup.addChild(this.rollMc),this.rollMc.play(-1),TimerManager.getInstance().setFrame("ChooseClownPanel.gogo",this.gogo.bind(this),this,3)},e.prototype.gogo=function(){0==this.isMove&&(62==this.hong.x?this.hong.x=-79:this.hong.x=62),10==++this.tt1&&(this.tt1=0,this.tt2--,this.txtTime.text="("+this.tt2+")",0==this.tt2&&this.btnQuitHandle())},e.prototype.addEventListene=function(){EventManage.addButtonEvent(this,this.clown_icon8,egret.TouchEvent.TOUCH_TAP,this.onTouchClown.bind(this,0),""),EventManage.addButtonEvent(this,this.clown_icon9,egret.TouchEvent.TOUCH_TAP,this.onTouchClown.bind(this,1),""),EventManage.addButtonEvent(this,this.btnDouble,egret.TouchEvent.TOUCH_TAP,this.btnDoubleHandle.bind(this)),EventManage.addButtonEvent(this,this.btnQuit,egret.TouchEvent.TOUCH_TAP,this.btnQuitHandle.bind(this)),EventManage.addEvent(this,this.giftGroup,egret.TouchEvent.TOUCH_TAP,this.giftGroupHandle.bind(this))},e.prototype.giftGroupHandle=function(){this.giftGroup.visible=!1},e.prototype.giftGroupHandle1=function(){this.giftGroup.visible=!1,this.dispose()},e.prototype.btnQuitHandle=function(){Net.send(Protocol.CLOWN_QUIT,{},this.chooseendCallback.bind(this))},e.prototype.btnDoubleHandle=function(){1==this.isAuto.visible?(this.isAuto.visible=!1,this.isDouble=0,this.bet_num.text=""+this.bet):(this.isAuto.visible=!0,this.isDouble=1,this.bet_num.text=""+2*this.bet)},e.prototype.onTouchClown=function(t){MusicManage.playMuisc("clown_button_click"),this.clown_icon8.touchEnabled=!1,this.clown_icon9.touchEnabled=!1,this.isMove=!0,0==t?this.res="clown_girl":this.res="clown_boy",Net.send(Protocol.CLOWN_CLOWNHANDLER_CHOOSECLOWN,{plus:this.isDouble},this.chooseClownCallback.bind(this))},e.prototype.chooseendCallback=function(t){200==t.code?this.dispose():("701"==t.msg&&this.dispose(),TipsManage.showTips(ErrorMessage.errorMsg(t.msg)))},e.prototype.chooseClownCallback=function(t){if(MusicManage.closeClickMuisc(),200==t.code){this.chooseClownResult=t.data,this.imgClown.y=0,egret.Tween.get(this.imgClown).to({y:67},400,egret.Ease.backOut),this.rollMc.stop(),this.rollMc.visible=!1,this.imgWinLost.visible=!0,this.bet=parseInt(t.data.cell+""),this.bet_num.text=t.data.cell,this.isAuto.visible=!1,this.playGift(t.data.gift,t.data.star),"0"==t.data.res?(MusicManage.playMuisc("clown_bibei_fail0"),this.imgWinLost.source="clown_main_lost_btn","clown_girl"==this.res?this.imgClown.source="clown_boy":this.imgClown.source="clown_girl",1==this.isDouble&&(this.isAuto.visible=!0,this.bet_num.text=""+2*this.bet)):(this.playGold(),this.imgWinLost.source="clown_main_win_btn",this.imgClown.source=this.res,this.txtWin.text="+"+t.data.win);for(var e=1;9>e;e++)this["clown_star"+e].visible=!1;for(var e=1;e<=t.data.star;e++)this["clown_star"+e].visible=!0;GlobalData.user.gold=parseInt(GlobalData.user.gold)+t.data.win+"",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),1!=t.data.end&&(this.tt=setTimeout(this.start.bind(this),1e3))}else"701"==t.msg&&this.dispose(),TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.playGift=function(t,e){t>0&&(this.giftGroup.visible=!0,this.txtDadao.text="恭喜达到"+e+"星",this.txtGift.text=t+"",this.tt3=setTimeout(this.giftGroupHandle.bind(this),2e3)),8==e&&(this.giftGroup.visible=!0,this.txtDadao.text="恭喜达到"+e+"星",this.txtGift.text=t+"",this.tt3=setTimeout(this.giftGroupHandle1.bind(this),2e3))},e.prototype.playGold=function(){this.mcGroup.visible=!0,null==this.mc&&(this.mc=QuickManage.createMc("goldfly2"),this.mcGroup.addChild(this.mc)),this.mc.gotoAndPlay(0,1),EventManage.addEvent(this,this.mc,egret.Event.COMPLETE,this.mcComplete.bind(this)),MusicManage.playMuisc("gold_diaoluo")},e.prototype.mcComplete=function(){this.mc.gotoAndStop(0),this.mcGroup.visible=!1},e.prototype.start=function(){MusicManage.playMuisc("clown_roll_music"),this.clown_icon8.touchEnabled=!0,this.clown_icon9.touchEnabled=!0,this.isMove=!1,this.imgWinLost.visible=!1,this.rollMc.visible=!0,this.rollMc.play(-1),this.tt2=31},e.prototype.updataBet=function(t){this.bet_num.text=""+t},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e.prototype.dispose=function(){MusicManage.closeClickMuisc(),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CLOWN_CHOOSE_CLOSE)),TimerManager.getInstance().remove("ChooseClownPanel.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.dispose2=function(){MusicManage.closeClickMuisc(),TimerManager.getInstance().remove("ChooseClownPanel.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e}(eui.Component);__reflect(ChooseClownPanel.prototype,"ChooseClownPanel",["fany.IDispose"]);var ClownHelpPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/clown/ClownHelpSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e}(eui.Component);__reflect(ClownHelpPanel.prototype,"ClownHelpPanel");var ClownPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.jiantou=!1,i.isClickStart=!1,i.tt=0,i.randResult=null,i.isantoo=!1,i.bet=50,i.betArr=[50,100,1e3,5e3,1e4,1e5],i.num=0,i.touchAutoNum=0,i.skinName="resource/skins/clown/ClownPanelSkin.exml",i.r=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.netcallback(),this.isAuto.visible=!1,this.starMc=QuickManage.createMc("clowShan"),this.grpStar.addChild(this.starMc),this.starMc.x=10,this.starMc.y=200,this.grpStar.visible=!1;for(var t=1;4>t;t++)this["star"+t].visible=!1,this["star_g"+t].visible=!1;for(var e=0;3>e;e++)this["rollMc"+e]=QuickManage.createMc("rollmc"),this["rollMc"+e].visible=!1,this["rollItem"+e].addChild(this["rollMc"+e]),this["rollItem"+e].setChildIndex(this["resultItem"+e],2);this.addEventListene(),this.playAnimation(this.bgRoation,!0),this.updatePoolGold(this.gift),this.updataBet(this.bet),this.setSelfInfo(),MusicManage.playGameBgMuisc("clown_bg",1,-1)},e.prototype.setMaxuserInfo=function(){this.imgKingHead.source=this.max_user.headurl,this.labKingName.text=this.max_user.name},e.prototype.setSelfInfo=function(){this.labUserGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.labUserName.text=GlobalData.user.nickname,this.imgUserHead.source=GlobalData.user.headurl},e.prototype.netcallback=function(){var t=this.r;this.max_user=t.data.max_user,this.gift=t.data.gift,this.labKingName.text=this.max_user.name,this.imgKingHead.source=this.max_user.headurl,this.goldNum.text=this.gift+""},e.prototype.addEventListene=function(){EventManage.addButtonEvent(this,this.btnAuto,egret.TouchEvent.TOUCH_TAP,this.onTouchAuto.bind(this)),EventManage.addButtonEvent(this,this.btnStart,egret.TouchEvent.TOUCH_TAP,this.onTouchStart.bind(this)),EventManage.addButtonEvent(this,this.btnChat,egret.TouchEvent.TOUCH_TAP,this.onTouchChat.bind(this)),EventManage.addButtonEvent(this,this.btnRedpack,egret.TouchEvent.TOUCH_TAP,this.onTouchRedpack.bind(this)),EventManage.addButtonEvent(this,this.btnHelp,egret.TouchEvent.TOUCH_TAP,this.onTouchHelp.bind(this)),EventManage.addButtonEvent(this,this.btnPlusBet,egret.TouchEvent.TOUCH_TAP,this.onTouchPlusBet.bind(this)),EventManage.addButtonEvent(this,this.btnMinuBet,egret.TouchEvent.TOUCH_TAP,this.onTouchMinuBet.bind(this)),EventManage.addButtonEvent(this,this.btnReturn,egret.TouchEvent.TOUCH_TAP,this.btnReturnHandle.bind(this)),EventManage.addEvent(this,this.btnAddGold,egret.TouchEvent.TOUCH_TAP,this.btnAddGoldHandle.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.setSelfInfo.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.CLOWN_CHOOSE_CLOSE,this.closeChoosePanel.bind(this)),TimerManager.getInstance().setFrame("ClownPanel.gogo",this.gogo.bind(this),this,180),EventManage.addEvent(this,this.btnRank,egret.TouchEvent.TOUCH_TAP,this.btnRankHandle.bind(this))},e.prototype.btnRankHandle=function(){PanelManage.openClownrank()},e.prototype.closeChoosePanel=function(){MusicManage.playMuisc("clown_bg"),this.isClickStart=!1,this.jiantou=!1,this.btnStart.source="clown_startbutton",this.btnAuto.source="clown_autobutton",this.btnStart.touchEnabled=!0,this.btnAuto.touchEnabled=!0,this.rightArrow.source="clown_arrow_2",this.leftArrow.source="clown_arrow_2",this.isantoo=!1,this.btnAuto.visible=!0,this.isAuto.visible=!1,this.rightArrow.visible=!0,this.leftArrow.visible=!0;for(var t=0;3>t;t++)this["rollMc"+t].stop(),this["rollMc"+t].visible=!1,this["resultItem"+t].y=-120,this["resultItem"+t].source="clown_icon"+(t+1),this["resultItem"+t].visible=!0,this["rollItem"+t].visible=!0,egret.Tween.get(this["resultItem"+t]).to({y:70},400,egret.Ease.backOut)},e.prototype.gogo=function(){Net.send(Protocol.CLOWN_GET_GIFT,{},this.tongbugift.bind(this)),Net.send(Protocol.CLOWN_GET_MESSAGES,{},this.getMessages.bind(this))},e.prototype.getMessages=function(t){if(200==t.code){var e=t.list,i=e.length;i>4&&(i=4);for(var n=0;i>n;n++)this["txt"+n].text=""+e[n].name+"    "+QuickManage.moneyStr(parseInt(e[n].win+""))}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.btnAddGoldHandle=function(){PanelManage.openShop(2)},e.prototype.onTouchHelp=function(){this.clownhelpPanel&&this.clownhelpPanel.dispose(),this.clownhelpPanel=null,this.clownhelpPanel=new ClownHelpPanel,this.addChild(this.clownhelpPanel),this.clownhelpPanel.x=30,this.clownhelpPanel.y=100},e.prototype.onTouchChat=function(){this.chatpanel=new ChatPanel,this.addChild(this.chatpanel),this.chatpanel.touchEnabled=!0,this.chatpanel.x=150,this.chatpanel.y=730},e.prototype.onTouchRedpack=function(){PanelManage.openRedBox(3,1)},e.prototype.onTouchPlusBet=function(){this.isClickStart||(this.helptpis.visible=!1,this.num++,this.num>=this.betArr.length&&(this.num=3),this.betArr[this.num]>5e3&&parseInt(GlobalData.user.vip)<1&&(TipsManage.showTips("VIP等级不足!"),this.num=3),this.bet=this.betArr[this.num],this.updataBet(this.bet))},e.prototype.onTouchMinuBet=function(){this.isClickStart||(this.num--,this.num<=0&&(this.num=0),this.bet=this.betArr[this.num],this.updataBet(this.bet))},e.prototype.updataBet=function(t){this.betNum.text=""+t},e.prototype.onTouchDispos=function(){this.chatpanel&&(this.removeChild(this.chatpanel),this.chatpanel=null)},e.prototype.onTouchAuto=function(){this.helptpis.visible=!1,"clown_autobutton_gray"!=this.btnAuto.source&&0==this.isantoo&&(this.isantoo=!0,this.isAuto.visible=!0,this.onTouchStart())},e.prototype.onTouchStart=function(){clearTimeout(this.tt),this.helptpis.visible=!1,0==this.isClickStart?(this.randResult=null,this.btnStart.source="clown_stopbutton",this.btnAuto.source="clown_autobutton_gray",this.btnAuto.touchEnabled=!1,this.isClickStart=!0,this.rollEffect(),this.jiantou=!0,this.gundongjiantou(),this.tt=setTimeout(this.onTouchStop.bind(this),2e3)):"clown_stopbutton"==this.btnStart.source&&(this.isantoo=!1,this.isAuto.visible=!1,this.onTouchStop())},e.prototype.onTouchStop=function(){clearTimeout(this.tt),Net.send(Protocol.CLOWN_CLOWNHANDLER_RANDRESULT,{cell:this.bet},this.randCallback.bind(this))},e.prototype.gundongjiantou=function(){1==this.jiantou&&(this.leftArrow.source="clown_arrow_1",this.rightArrow.source="clown_arrow_1",egret.Tween.get(this.leftArrow).to({rotation:5},100),egret.Tween.get(this.rightArrow).to({rotation:5},100).call(this.gundongjiantou1.bind(this),this))},e.prototype.gundongjiantou1=function(){1==this.jiantou&&(egret.Tween.get(this.leftArrow).to({rotation:0},100),egret.Tween.get(this.rightArrow).to({rotation:0},100).call(this.gundongjiantou.bind(this),this))},e.prototype.showStar=function(){clearTimeout(this.tt),this.txtFen.text="+"+this.getBetNum(this.randResult.res)*this.bet,this.grpStar.visible=!0,this.starMc.play(-1);for(var t=1;4>t;t++)egret.Tween.get(this["star"+t]).wait(100*(t-1)).to({visible:!0},100),egret.Tween.get(this["star_g"+t]).wait(100*(t-1)).to({visible:!0},100)},e.prototype.closeStar=function(){this.starMc.stop(),this.grpStar.visible=!1;for(var t=1;4>t;t++)this["star"+t].visible=!1,this["star_g"+t].visible=!1},e.prototype.rollEffect=function(){MusicManage.playMuisc("clown_bibei_roll_sound");for(var t=0;3>t;t++)this["rollMc"+t].play(-1),this["rollMc"+t].visible=!0,this["resultItem"+t].visible=!1},e.prototype.randCallback=function(t){if(MusicManage.closeClickMuisc(),200==t.code)GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.bet+"",parseInt(GlobalData.user.gold)<0&&(GlobalData.user.gold="0"),this.labUserGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.randResult=t.data,this.btnStart.touchEnabled=!1,this.jiantou=!1,this.rightArrow.source="clown_arrow_2",this.leftArrow.source="clown_arrow_2",this.endRollEffect();else{TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.isClickStart=!1,this.jiantou=!1,this.btnStart.source="clown_startbutton",this.btnAuto.source="clown_autobutton",this.btnStart.touchEnabled=!0,this.btnAuto.touchEnabled=!0,this.rightArrow.source="clown_arrow_2",this.leftArrow.source="clown_arrow_2",this.isantoo=!1,this.isAuto.visible=!1;for(var e=0;3>e;e++)this["rollMc"+e].stop(),this["rollMc"+e].visible=!1,this["resultItem"+e].y=-120,this["resultItem"+e].source="clown_icon"+(e+1),this["resultItem"+e].visible=!0,egret.Tween.get(this["resultItem"+e]).to({y:70},400,egret.Ease.backOut)}},e.prototype.endRollEffect=function(){for(var t=this,e=0;3>e;e++)setTimeout(this.endRollEffectResult.bind(this,e),50*e);return null==this.randResult?(this.btnStart.source="clown_startbutton",this.btnAuto.source="clown_autobutton",this.btnAuto.touchEnabled=!0,this.btnStart.touchEnabled=!0,void(1==this.isantoo&&(this.tt=setTimeout(this.onTouchStart.bind(this),1e3)))):void(this.randResult.win>0?(MusicManage.playMuisc("clown_roll_winSound"),this.isantoo=!1,this.isAuto.visible=!1,this.showStar(),setTimeout(function(){t.closeStar(),t.showChooseClown()},3e3)):(MusicManage.playMuisc("clown_roll_failSound"),this.tt=setTimeout(this.panduanshuying.bind(this),1e3)))},e.prototype.panduanshuying=function(){clearTimeout(this.tt),this.randResult.win<1&&(this.isClickStart=!1,this.btnStart.source="clown_startbutton",this.btnAuto.source="clown_autobutton",this.btnStart.touchEnabled=!0,this.btnAuto.touchEnabled=!0,1==this.isantoo&&this.onTouchStart())},e.prototype.showChooseClown=function(){for(var t=0;3>t;t++)this["rollItem"+t].visible=!1;this.btnAuto.visible=!1,this.rightArrow.visible=!1,this.leftArrow.visible=!1;var e=this.getBetNum(this.randResult.res)*this.bet;this.chooseclownpanel&&this.chooseclownpanel.dispose2(),this.chooseclownpanel=new ChooseClownPanel(e),this.addChild(this.chooseclownpanel),this.chooseclownpanel.y=70},e.prototype.endRollEffectResult=function(t){this.randResult&&(this["rollMc"+t].stop(),this["rollMc"+t].visible=!1,this["resultItem"+t].y=-120,this["resultItem"+t].source="clown_icon"+this.randResult.res[t],this["resultItem"+t].visible=!0,egret.Tween.get(this["resultItem"+t]).to({y:70},400,egret.Ease.backOut))},e.prototype.updatePoolGold=function(t){this.goldNum.text=QuickManage.moneyStr(parseInt(""+t))},e.prototype.playAnimation=function(t,e){if(e)for(var i in t.items)t.items[i].props={loop:!0};t.play()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e.prototype.changeClownKing=function(t){this.labKingName.text=t.msg.data.name,this.imgKingHead.source=t.msg.data.headurl},e.prototype.tongbugift=function(t){200==t.code&&EffectUtils.numEffect(this.goldNum,parseInt(t.gift+""))},e.prototype.btnReturnHandle=function(){Net.send(Protocol.CLOWN_CLOWNHANDLER_LEAVEGAME,{},function(t){200==t.code?this.dispose():TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.dispose=function(){MusicManage.closeMuisc(),TimerManager.getInstance().remove("ClownPanel.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.getBetNum=function(t){var e=1;if(console.log(t[0]+"=="+t[1]+"=="+t[2]),t[0]==t[1]&&t[1]==t[2])switch(t[0]){case 1:e=1e3;break;case 2:e=500;break;case 3:e=50;break;case 4:e=20;break;case 5:e=10;break;case 6:e=4;break;case 7:e=3;break;case 8:e=2;break;case 9:e=1}return e},e}(eui.Component);__reflect(ClownPanel.prototype,"ClownPanel",["fany.IDispose"]);var ClownRankItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/clown/ClownRankItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.head.source=t.headurl,t.rank>3?(this.txtRank.visible=!0,this.txtRank.text=t.rank):(this.num.source="rank.num"+t.rank,this.num.visible=!0),this.txtGold.text=QuickManage.moneyStr(t.gold),this.txtName.text=t.name,this.txtVip.text="v"+t.vip},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ClownRankItemPanel.prototype,"ClownRankItemPanel",["fany.IDispose"]);var ClownRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/clown/ClownRankSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.CLOWN_RANK_DAY,{},this.ranklistcallback.bind(this)),EventManage.addEvent(this,this.btnToday,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,1)),EventManage.addEvent(this,this.btnWeek,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,2))},e.prototype.clickBtn=function(t){if(!("clown_king_daily"==this.btnToday.source&&1==t||"clown_king_week"==this.btnWeek.source&&2==t))switch(t){case 1:this.btnToday.source="clown_king_daily",this.btnWeek.source="clown_king_week_s",Net.send(Protocol.CLOWN_RANK_DAY,{},this.ranklistcallback.bind(this));break;case 2:this.btnToday.source="clown_king_daily_s",this.btnWeek.source="clown_king_week",Net.send(Protocol.CLOWN_RANK_WEEK,{},this.ranklistcallback.bind(this))}},e.prototype.ranklistcallback=function(t){if(200==t.code){this.clearItems();for(var e=t.list,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("ClownRankItemPanel");a.y=100*n,this.itemGroup.addChild(a),a.setData({name:e[n].name,vip:e[n].vip,gold:e[n].win,rank:n+1,headurl:e[n].headurl}),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("ClownRankItemPanel",this.arr[e]));this.arr=[]},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ClownRankPanel.prototype,"ClownRankPanel",["fany.IDispose"]);var DaShangItem=function(t){function e(){var e=t.call(this)||this;return e.userId="",e.skinName="resource/skins/dashang/DashangItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnAction,egret.TouchEvent.TOUCH_TAP,this.onTouchAction.bind(this))},e.prototype.onTouchAction=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.DASHANG_NOTICE_PUBLISH,this.userId))},e.prototype.setInfo=function(t){this.labVip.text="V"+t.vip,this.labName.text=t.name,this.labInfo.text="求打赏。。。。";var e=new Date(t.time),i=e.getHours()+"",n=e.getMinutes()+"";parseInt(n)<10&&(n="0"+n),this.labTime.text=i+":"+n,this.userId=t.id},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DaShangItem.prototype,"DaShangItem",["fany.IDispose"]);var DaShangPanel=function(t){function e(){var e=t.call(this)||this;return e.moneyArr=[1e5,2e5,1e6,2e6,5e6,1e7],e.lastSelectMoney=-1,e.publishID="",e.skinName="resource/skins/dashang/DashangSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.grpSecond.visible=!1,this.grpPublish.visible=!1,EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnSend,egret.TouchEvent.TOUCH_TAP,this.onTouchSend.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.onTouchSure.bind(this)),EventManage.addButtonEvent(this,this.btnCloseSecond,egret.TouchEvent.TOUCH_TAP,this.onTouchSecondClose.bind(this)),EventManage.addButtonEvent(this,this.btnPublishSure,egret.TouchEvent.TOUCH_TAP,this.onTouchPublishSure.bind(this)),EventManage.addButtonEvent(this,this.btnClosePublish,egret.TouchEvent.TOUCH_TAP,this.onTouchPublishClose.bind(this));for(var t=0;6>t;t++)EventManage.addEvent(this,this["grpMoney"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchPublishNum.bind(this,t));EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.DASHANG_NOTICE_PUBLISH,this.showPublishPanel.bind(this)),Net.send(Protocol.HALL_REWARD_LIST,{},this.rewardListCallBack.bind(this))},e.prototype.onTouchClose=function(){this.dispose()},e.prototype.onTouchSend=function(){this.grpSecond.visible=!0},e.prototype.onTouchSure=function(){Net.send(Protocol.HALL_RELEASE_REWARD,{},this.touchSureCallback.bind(this)),this.grpSecond.visible=!1},e.prototype.touchSureCallback=function(t){200==t.code?Net.send(Protocol.HALL_REWARD_LIST,{},this.rewardListCallBack.bind(this)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.sendCallback=function(t){200==t.code&&(this.grpSecond.visible=!1)},e.prototype.onTouchSecondClose=function(){this.grpSecond.visible=!1},e.prototype.onTouchPublishClose=function(){this.grpPublish.visible=!1},e.prototype.showPublishPanel=function(t){return t.param==GlobalData.openid+"@"+GlobalData.platform?void TipsManage.showTips("不可以打赏自己！"):(this.publishID=t.param,this.lastSelectMoney=0,this["imgMoney"+this.lastSelectMoney].source="c.labbg1",this.grpPublish.visible=!0,this.grpPublishInput.visible=!1,void(this.grpPublishSelect.visible=!0))},e.prototype.showPublishInput=function(){this.grpPublishInput.visible=!0,this.grpPublishSelect.visible=!1},e.prototype.onTouchPublishNum=function(t){t!=this.lastSelectMoney&&(this["imgMoney"+this.lastSelectMoney].source="c.labbg0",this["imgMoney"+t].source="c.labbg1",this.lastSelectMoney=t)},e.prototype.onTouchPublishSure=function(){var t=0;t=this.moneyArr[this.lastSelectMoney],Net.send(Protocol.HALL_GIVE_REWARD,{dsId:this.publishID,gold:t},this.giveRewardCallback.bind(this))},e.prototype.giveRewardCallback=function(t){200==t.code?(this.grpPublish.visible=!1,Net.send(Protocol.HALL_REWARD_LIST,{},this.rewardListCallBack.bind(this)),GlobalData.user.gold=t.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.rewardListCallBack=function(t){this.clearItems();for(var e=0;e<t.data.length;e++){if(e>20)return;var i=ObjManage.getObj("DaShangItem");i.x=0,i.y=i.height*e,i.setInfo(t.data[e]),this.grpItem.addChild(i)}},e.prototype.clearItems=function(){for(;this.grpItem.numChildren>0;)ObjManage.addObj("DaShangPanel",this.grpItem.removeChildAt(0))},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DaShangPanel.prototype,"DaShangPanel",["fany.IDispose"]);var DaShangTips=function(t){function e(e){var i=t.call(this)||this;return i.skinName="resource/skins/dashang/DashangTipSkin.exml",i.data=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.labName.text=this.data.name,this.labMoney.text=QuickManage.moneyStr(parseInt(this.data.gold)),GlobalData.user.gold=parseInt(GlobalData.user.gold)+this.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.onTouchSure.bind(this)),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.onTouchSure.bind(this))},e.prototype.onTouchSure=function(){this.dispose()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DaShangTips.prototype,"DaShangTips",["fany.IDispose"]);var DdzHeadItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/ddz/DdzHeadItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled();var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(52,86,40),t.graphics.endFill(),this.addChild(t),this.head.mask=t},e.prototype.setData=function(t){this.txtName.text=t.name,this.txtGold.text=t.gold,this.head.source=t.head,this.txtPokerNum.text=t.pokernum},e.prototype.setPokerNum=function(t){this.txtPokerNum.text=t+""},e.prototype.setDizhu=function(t){void 0===t&&(t=!0),this.dizhu.visible=t},e.prototype.setGold=function(t){var e=QuickManage.moneyStr2number(this.txtGold.text)+t;this.txtGold.text=QuickManage.moneyStr(e)},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DdzHeadItemPanel.prototype,"DdzHeadItemPanel",["fany.IDispose"]);var DdzPanel=function(t){function e(e){var i=t.call(this)||this;return i.count=0,i.ii=0,i.count1=0,i.ii1=0,i.time=0,i.isMove=!1,i.len=0,i.tt=0,i.isMeChupai=!1,i.isFirst=!1,i.curObj=null,i.againBool=!1,i.jieBool=!1,i.cnn=0,i.tt2=0,i.tt3=0,i.rObj=null,i.num=0,i.skinName="resource/skins/ddz/DdzSkin.exml",GlobalData.user.seat="-1",i.rObj=e,i.setXY(),i}return __extends(e,t),e.prototype.setXY=function(){this.pokerPos=[320,800],this.buchuPos=[[286,333],[544,303],[30,303]],this.timerPos=[[267,371],[532,305],[8,305]]},e.prototype.setBuchuPos=function(t){this.imgBuchu.x=this.buchuPos[t][0],this.imgBuchu.y=this.buchuPos[t][1]},e.prototype.setTimerPos=function(t){this.grpTimer.x=this.timerPos[t][0],this.grpTimer.y=this.timerPos[t][1]},e.prototype.chairToView=function(t){var e=t-parseInt(GlobalData.user.seat);return e=(e+=3)%3},e.prototype.childrenCreated=function(){this.txtTips.touchEnabled=!1,this.txtName.text=GlobalData.user.nickname,this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.head.source=GlobalData.user.headurl,this.labRoomNum.text=GlobalData.user.idd,EventManage.addButtonEvent(this,this.btnReturn,egret.TouchEvent.TOUCH_TAP,this.btnReturnHandle.bind(this)),EventManage.addButtonEvent(this,this.btnBuJiao,egret.TouchEvent.TOUCH_TAP,this.clickDizhu.bind(this,0)),EventManage.addButtonEvent(this,this.btn1,egret.TouchEvent.TOUCH_TAP,this.clickDizhu.bind(this,1)),EventManage.addButtonEvent(this,this.btn2,egret.TouchEvent.TOUCH_TAP,this.clickDizhu.bind(this,2)),EventManage.addButtonEvent(this,this.btn3,egret.TouchEvent.TOUCH_TAP,this.clickDizhu.bind(this,3)),EventManage.addButtonEvent(this,this.item1,egret.TouchEvent.TOUCH_TAP,this.createTable.bind(this,100)),EventManage.addButtonEvent(this,this.item2,egret.TouchEvent.TOUCH_TAP,this.createTable.bind(this,5e4)),EventManage.addButtonEvent(this,this.item3,egret.TouchEvent.TOUCH_TAP,this.createTable.bind(this,1e6)),this.btnChu.name="btnChu",this.btnGuo.name="btnGuo",EventManage.addButtonEvent(this,this.btnPlayAgain,egret.TouchEvent.TOUCH_TAP,this.btnPlayAgainHandle.bind(this)),this.txtDifentxt.text="0",EventManage.addButtonEvent(this,this.btnMusic,egret.TouchEvent.TOUCH_TAP,this.btnMusicHandler.bind(this)),0==GlobalData.isMusic?this.btnMusic.source="btnMusicCloise":this.btnMusic.source="btnMusic",this.createGroup.visible=!0},e.prototype.netcallback=function(t){200==t.code?(this.txtTipsss.text="正在加入房间...","0"==t.tid?Net.send(Protocol.DDZ_CREATE_TABLE,{difen:this.num+""},this.createTableBack.bind(this)):Net.send(Protocol.DDZ_JOIN_TABLE,{tableId:t.tid},this.joinBack.bind(this))):(this.txtTipsss.text="请选择对应房间加入",this.createGroup.visible=!0,TipsManage.showTips(ErrorMessage.errorMsg(t.msg)))},e.prototype.joinBack=function(t){if(200==t.code){this.createGroup.visible=!1,GlobalData.user.idd=t.table.id,GlobalData.user.seat=t.chairId,GlobalData.isJoin="no",GlobalData.tableState=t.table.playing,GlobalData.user.difen=t.table.difen;for(var e=t.table.users.length,i=0;e>i;i++){var n=this.chairToView(t.table.users[i].chairId);0!=n&&(this["group"+n].visible=!0,this["group"+n].setData({pokernum:"X0",name:t.table.users[i].name,gold:QuickManage.moneyStr(parseInt(t.table.users[i].gold+"")),head:t.table.users[i].headurl}))}this.txtTips.visible=!0,2==e?this.txtTips.text="请等待剩余1名玩家加入...":1==e?this.txtTips.text="请等待剩余2名玩家加入...":this.txtTips.visible=!1,this.txtDifentxt.text=""+QuickManage.moneyStr(parseInt(GlobalData.user.difen)),this.initGame()}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.txtTipsss.text="请选择对应房间加入",this.createGroup.visible=!0},e.prototype.createTable=function(t){"请选择对应房间加入"==this.txtTipsss.text&&(this.num=t,this.txtTipsss.text="正在查找房间...",Net.send(Protocol.JOIN_DDZ_GAME,{difen:t},this.netcallback.bind(this)))},e.prototype.createTableBack=function(t){200==t.code?(this.createGroup.visible=!1,this.txtTips.visible=!0,GlobalData.user.idd=t.table.id,GlobalData.isJoin="yes",GlobalData.user.seat="0",GlobalData.user.difen=t.table.difen,this.txtDifentxt.text=""+QuickManage.moneyStr(parseInt(GlobalData.user.difen)),this.txtTips.text="请等待剩余2名玩家加入...",this.initGame()):(TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.txtTipsss.text="请选择对应房间加入",this.createGroup.visible=!0)},e.prototype.initGame=function(){this.chupaiGroup.touchChildren=!1,this.chupaiGroup.touchEnabled=!1,this.count=0,this.tt2=0,this.tt3=0,this.ii=0,this.count1=0,this.againBool=!1,this.jieBool=!1,this.ii1=0,this.tt=20,this.curData=[],t.prototype.childrenCreated.call(this),this.setTouchEnabled(),this.images=this.images||[],this.pokerData=[],EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin.bind(this)),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_END,this.onTouchEend.bind(this)),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_MOVE,this.onTouchMove.bind(this)),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.clickHandle.bind(this))},e.prototype.btnMusicHandler=function(){"btnMusic"==this.btnMusic.source?(this.btnMusic.source="btnMusicCloise",GlobalData.isMusic=!1,MusicManage.closeMuisc(),MusicManage.closeBgMuisc()):(this.btnMusic.source="btnMusic",GlobalData.isMusic=!0,MusicManage.playGameBgMuisc("hallBgm",.5,-1))},e.prototype.btnReturnHandle=function(){1==this.createGroup.visible?this.quit():Net.send(Protocol.DDZ_QUIT_GAME,{},this.quit.bind(this))},e.prototype.btnPlayAgainHandle=function(){++this.cnn,this.dizhuGroup.visible=!1,this.btnChu.visible=!1,this.btnGuo.visible=!1,this.grpEnd.visible=!1,this.dizhu.visible=!1,this.grpTimer.visible=!1,this.removeChupaiGroup(),this.count=0,this.ii=0,this.count1=0,this.ii1=0,this.tt=20,this.curData=[],this.pokerArr=[],this.curObj=null;
for(var t=this.pokerData.length,e=0;t>e;e++)this.pokerData[e]&&(this.pokerData[e].parent&&this.pokerData[e].parent.removeChild(this.pokerData[e]),ObjManage.addPoker(this.pokerData[e]));this.group1.setPokerNum("X0"),this.group2.setPokerNum("X0"),this.group1.setDizhu(!1),this.group2.setDizhu(!1),this.pokerData=[],this.txtBei.text="X0",this.card0.source="ddz_0",this.card1.source="ddz_0",this.card2.source="ddz_0",GlobalData.curData=[],this.enabled=!0,this.touchChildren=!0,this.touchEnabled=!0,TimerManager.getInstance().remove("GamePanel.gogo"),this.len=0,Net.send(Protocol.DDZ_AGAIN_GAME,{},this.againGame.bind(this))},e.prototype.againGame=function(t){console.log(JSON.stringify(t)),200==t.code&&(this.againBool=!0,this.jieBool&&(console.log("来源于againGame"+this.jieBool),this.play(),this.jieBool=!1))},e.prototype.clickHandle=function(t){var e=t.target.parent;return t.stageX>this.btnGuo.x&&t.stageX<this.btnGuo.x+this.btnGuo.width&&t.stageY>this.btnGuo.y&&t.stageY<this.btnGuo.y+this.btnGuo.height&&this.btnGuo.visible?(this.chupaiHandle(1),void EffectUtils.playButtonEffect(this.btnGuo)):t.stageX>this.btnChu.x&&t.stageX<this.btnChu.x+this.btnChu.width&&t.stageY>this.btnChu.y&&t.stageY<this.btnChu.y+this.btnChu.height&&this.btnChu.visible?(this.chupaiHandle(2),void EffectUtils.playButtonEffect(this.btnChu)):void(null!=e.name&&("poker"!=e.name.split("_")[0]?this.setfuwei():e.setSelect()))},e.prototype.setfuwei=function(){for(var t=this.pokerData.length,e=0;t>e;e++)this.pokerData[e]&&this.pokerData[e].setSelect3()},e.prototype.chupaiHandle=function(t){if(2==t)if(this.isMeChupai){if((null==this.curObj||"0"==this.curObj.isMe)&&GlobalData.curData.length<1)return void TipsManage.showTips("必须出至少1张牌!");this.btnChu.touchEnabled=!1,this.btnGuo.touchEnabled=!1,Net.send(Protocol.DDZ_CHU_PAI,{pokers:GlobalData.curData},this.chupaiBack.bind(this))}else TipsManage.showTips("还未轮到你出牌!");else{if(null==this.curObj||"0"==this.curObj.isMe)return void TipsManage.showTips("轮到你出牌了!");GlobalData.curData=[],this.btnChu.touchEnabled=!1,this.btnGuo.touchEnabled=!1,Net.send(Protocol.DDZ_CHU_PAI,{pokers:[]},this.chupaiBack.bind(this))}},e.prototype.clickDizhu=function(t){this.dizhuGroup.visible=!1,clearInterval(this.tt2),Net.send(Protocol.DDZ_JIAO_FEN,{score:t},this.jiaofenBack.bind(this))},e.prototype.jiaofenBack=function(t){},e.prototype.onTouchEend=function(t){this.isMove=!1},e.prototype.onTouchBegin=function(t){this.isMove=!0,this.time=egret.getTimer()},e.prototype.onTouchMove=function(t){var e=t.target.parent;this.isMove&&null!=e.name&&"poker"==e.name.split("_")[0]&&e.setSelect2()},e.prototype.quitBack=function(t){(t.code=200)&&(GlobalData.user.idd="",this.dispose())},e.prototype.init=function(){},e.prototype.goNext=function(){this.init()},e.prototype.play=function(){TimerManager.getInstance().remove("GamePanel.gogo"),TimerManager.getInstance().setFrame("GamePanel.gogo",this.gogo.bind(this),this)},e.prototype.someonecurbet=function(t){},e.prototype.someonechangechupai=function(t){},e.prototype.someonechupai=function(t){this.txtBei.text="X"+t.msg.bet;var e=this.chairToView(t.msg.chairId),i=t.msg.cards,n=this.chairToView(t.msg.next);if(0==i.length)this.imgBuchu.visible=!0,this.imgBuchu.alpha=1,egret.Tween.get(this.imgBuchu).to({alpha:0},1200);else{this.imgBuchu.visible=!1,this.curObj={isMe:e+""},this.createPoker(i);var a=new eui.HorizontalLayout;a.gap=-40,0==e?a.horizontalAlign=egret.HorizontalAlign.CENTER:1==e?a.horizontalAlign=egret.HorizontalAlign.RIGHT:2==e&&(a.horizontalAlign=egret.HorizontalAlign.LEFT),this.chupaiGroup.layout=a}this.setBuchuPos(e),0!=e&&this["group"+e].setPokerNum("X"+t.msg.count),this.isMeChupai=!1,this.setTimerPos(n),0==n&&(this.btnChu.touchEnabled=!0,this.btnGuo.touchEnabled=!0,this.btnChu.visible=!0,this.btnGuo.visible=!0,this.isMeChupai=!0),this.curObj.isMe==n+""&&this.removeChupaiGroup(),e+""==n+""&&this.removeChupaiGroup(),this.setChildIndex(this.grpTimer,this.numChildren-1),clearInterval(this.tt2),this.tt2=setInterval(this.updateTime.bind(this),1e3),this.tt=20,this.txtTime.text=this.tt--+""},e.prototype.createPoker=function(t){this.removeChupaiGroup(),this.images=[];for(var e=t.length,i=0;e>i;i++){var n=ObjManage.getImage(t[i]+"");this.chupaiGroup.addChild(n),n.scaleX=.5,n.scaleY=.5,this.images.push(n)}},e.prototype.removeChupaiGroup=function(){for(var t=this.images.length,e=0;t>e;e++)this.images[e]&&this.images[e].parent&&(this.images[e].parent.removeChild(this.images[e]),ObjManage.addImage(this.images[e]))},e.prototype.setDipaiFun=function(t){for(var e=t.length,i=0;e>i;i++)this["card"+i].source=t[i]+""},e.prototype.someonecalldizhu=function(t){this.r=t,this.group1.setPokerNum("X17"),this.group2.setPokerNum("X17"),this.pokerArr=PokerManage.paixu(t.msg.handCard,[]),this.len=this.pokerArr.length,this.dizhuGroup.visible=!0,this.jieBool=!0,0==this.cnn?(this.play(),this.jieBool=!1):this.againBool&&(console.log("来源于someonecalldizhu"),this.play(),this.jieBool=!1),this.tt3=0,clearInterval(this.tt2),this.tt2=setInterval(this.jiaodizhudaojishi.bind(this),1e3)},e.prototype.jiaodizhudaojishi=function(){5==++this.tt3&&(this.dizhuGroup.visible&&this.clickDizhu(0),clearInterval(this.tt2))},e.prototype.someonemakedizhu=function(t){console.log("有人当地主了"),this.txtBei.text="X"+t.msg.bet,this.setDipaiFun(t.msg.dipai),this.grpTimer.visible=!0,this.isMeChupai=!1,this.dizhu.visible=!1,this.group1.setDizhu(!1),this.group2.setDizhu(!1);var e=this.chairToView(t.msg.chairId);this.setTimerPos(e),0==e?(this.btnChu.visible=!0,this.btnGuo.visible=!0,this.isMeChupai=!0,this.dizhu.visible=!0,this.addPoker(t.msg.dipai)):(this["group"+e].setPokerNum("X20"),this["group"+e].setDizhu()),clearInterval(this.tt2),this.tt2=setInterval(this.updateTime.bind(this),1e3)},e.prototype.addPoker=function(t){for(var e=t.length,i=0;e>i;i++){var n=ObjManage.getPoker();n.setData({res:t[i]+""}),n.rotation=5+-(10*this.len)/2+10*this.ii,n.anchorOffsetX=66,n.anchorOffsetY=360,n.x=this.pokerPos[0],n.y=this.pokerPos[1],n.name="poker_"+this.ii,this.addChild(n),this.pokerData.push(n),++this.ii}PokerManage.paixu(t,this.pokerArr),this.updatePoker()},e.prototype.updateTime=function(){if(this.txtTime.text=this.tt--+"",this.tt<0)if(clearInterval(this.tt2),this.btnChu.visible=!1,this.btnGuo.visible=!1,null==this.curObj||"0"==this.curObj.isMe){if(this.isMeChupai){var t=this.pokerArr[this.pokerArr.length-1];t&&(GlobalData.curData=[],GlobalData.curData.push(t.y)),Net.send(Protocol.DDZ_CHU_PAI,{pokers:GlobalData.curData},this.chupaiBack.bind(this)),this.isMeChupai=!1}}else this.setfuwei(),GlobalData.curData=[],this.isMeChupai&&(Net.send(Protocol.DDZ_CHU_PAI,{pokers:[]},this.chupaiBack.bind(this)),this.isMeChupai=!1)},e.prototype.chupaiBack=function(t){if(this.btnChu.touchEnabled=!0,this.btnGuo.touchEnabled=!0,200==t.code)this.btnChu.visible=!1,this.btnGuo.visible=!1,this.pokerArr=[],this.pokerArr=PokerManage.paixu(t.handCard,[]),this.updatePoker(),GlobalData.curData=[],this.setfuwei();else{if("208"==t.msg||"508"==t.msg)return void TipsManage.showTips("等待结算中,不能出牌！");TipsManage.showTips("牌出错啦！"),this.isMeChupai=!0,this.btnChu.visible=!0,this.btnGuo.visible=!0}},e.prototype.updatePoker=function(){for(var t=this.pokerData.length,e=0;t>e;e++)this.pokerData[e]&&(this.pokerData[e].parent&&this.pokerData[e].parent.removeChild(this.pokerData[e]),ObjManage.addPoker(this.pokerData[e]));this.pokerData=[];var i=this.pokerArr.length;for(e=0;i>e;e++){var n=ObjManage.getPoker();n.rotation=5+-(10*i)/2+10*e,n.setData({res:this.pokerArr[e].y+""}),n.anchorOffsetX=55,n.anchorOffsetY=320,n.x=this.pokerPos[0],n.y=this.pokerPos[1],this.addChild(n),n.name="poker_"+e,this.pokerData.push(n)}},e.prototype.someonechangeowner=function(t){this.chairToView(t.msg.chairId)},e.prototype.someoneconclude=function(t){console.log("开始结算了"),clearInterval(this.tt2),this.setChildIndex(this.grpEnd,this.numChildren-1),this.grpEnd.visible=!0,this.setChildIndex(this.topGroup,this.numChildren-1);var e=t.msg;this.imgResult.source="",this.txtDi.text=e.bet.difen,this.txtBeishu.text=e.bet.bet,this.txtStt.text="炸弹"+e.bom+"个,春天"+e.chuntian+"个";for(var i=0;3>i;i++){var n=this.chairToView(i);if(0==n){var a=e.data[i];this.txtGoldFen.text=""+QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtFen.text=(a>0?"":"-")+QuickManage.moneyStr(Math.abs(a)),this.imgResult.source=a>0?"youwin":"youlose",this.txtResult.text=a>0?"赢得:":"输掉:"}else this["group"+n].setGold(e.data[i])}},e.prototype.setOver=function(t){PanelManage.openResult(t)},e.prototype.someoneopencard=function(t){this.chairToView(t.msg.chairId)},e.prototype.someonesendcard=function(t){},e.prototype.someonestart=function(t){},e.prototype.someonejoin=function(t){if("-1"!=GlobalData.user.seat){var e=this.chairToView(t.msg.chairId);0!=e&&(this["group"+e].visible=!0,this["group"+e].setData({head:t.msg.headurl,pokernum:"X0",name:t.msg.name,gold:QuickManage.moneyStr(parseInt(t.msg.gold+""))}),1==this.group1.visible&&1==this.group2.visible?this.txtTips.visible=!1:this.txtTips.text="请等待剩余1名玩家加入...")}},e.prototype.someoneready=function(t){this.chairToView(t.msg.chairId)},e.prototype.someoneleave=function(t){var e=this.chairToView(t.msg.chairId);this["group"+e].visible=!1},e.prototype.gogo=function(){if(2==++this.count){var t=ObjManage.getPoker();t.setData({res:this.pokerArr[this.ii].y+""}),t.rotation=5+-(10*this.len)/2+10*this.ii,t.anchorOffsetX=55,t.anchorOffsetY=320,t.x=this.pokerPos[0],t.y=this.pokerPos[1],t.name="poker_"+this.ii,this.addChild(t),this.pokerData.push(t),this.count=0,++this.ii,this.ii==this.len&&TimerManager.getInstance().remove("GamePanel.gogo")}},e.prototype.someonequit=function(t){"512"==t.msg&&TipsManage.showTips("金币不足,不能在此房间继续游戏."),Net.send(Protocol.DDZ_QUIT_GAME,{},this.quit.bind(this))},e.prototype.quit=function(t){void 0===t&&(t=null),this.dispose()},e.prototype.pokerClickHandle=function(t){t.setSelect()},e.prototype.dispose=function(){MusicManage.closeMuisc(),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DdzPanel.prototype,"DdzPanel",["fany.IDispose"]);var PokerPanel=function(t){function e(){var e=t.call(this)||this;return e.flag=!1,e.skinName="resource/skins/ddz/PokerPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t){this.poker.source=t.res},e.prototype.getData=function(){return this.poker.source},e.prototype.setSelect=function(){MusicManage.playMuisc("s004"),this.hui.visible?(this.hui.visible=!1,this.y=800,this.removePoker()):(this.hui.visible=!0,this.y=780,GlobalData.curData.push(this.poker.source))},e.prototype.removePoker=function(){for(var t=GlobalData.curData.length,e=0;t>e;e++)GlobalData.curData[e]==this.poker.source&&GlobalData.curData.splice(e,1)},e.prototype.setSelect2=function(){this.hui.visible||(MusicManage.playMuisc("s004"),this.hui.visible=!0,this.y=780,GlobalData.curData.push(this.poker.source))},e.prototype.setSelect3=function(){this.hui.visible&&(MusicManage.playMuisc("s004"),this.hui.visible=!1,this.y=800,this.removePoker())},e.prototype.setHui=function(){this.hui.visible=!1},e}(eui.Component);__reflect(PokerPanel.prototype,"PokerPanel");var EmailItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/email/EmailItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.labName.text=t.sname,this.labDesc.text=t.title,this.labTime.text=new Date(t._id).toLocaleString()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(EmailItemPanel.prototype,"EmailItemPanel",["fany.IDispose"]);var EmailPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/email/EmailPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.GET_MAIL_LIST,{},this.maillistcallback.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.maillistcallback=function(t){if(200==t.code){this.clearItems();var e=t.mails,i=e.length;i>0?this.labTips.visible=!1:this.labTips.visible=!0;for(var n=0;i>n;n++){var a=ObjManage.getObj("EmailItemPanel");a.y=111*n,this.itemGroup.addChild(a),a.setData(e[n]),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("EmailItemPanel",this.arr[e]));this.arr=[]},e.prototype.onTouchVip=function(){PanelManage.openVip()},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(EmailPanel.prototype,"EmailPanel",["fany.IDispose"]);var FreeCoinItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/freeCoin/FreeCoinItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnGet,egret.TouchEvent.TOUCH_TAP,this.btnGetHandle.bind(this))},e.prototype.btnGetHandle=function(){this.func&&this.func()},e.prototype.setData=function(t){this.labTitle.text=t.title,this.labInfo.text=t.info,this.btnGet.source=t.res,this.func=t.func},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(FreeCoinItemPanel.prototype,"FreeCoinItemPanel",["fany.IDispose"]);var FreeCoinPanel=function(t){function e(){var e=t.call(this)||this;return e.tipsGoldData=null,e.skinName="resource/skins/freeCoin/FreeCoinSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.initData(),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.GET_FOLLOW_GOLD,this.getGoldTips.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.initData=function(){this.arr=[];var t={},e=[];"self"==GlobalData.userfrom?(t={title:"绑定账号领金币",info:"用账号登录可领取50万金币",res:"task.btnget",func:this.openQRcode.bind(this)},e.push(t)):""!=GlobalData.configData.data.gongzhonghaourl&&(t={title:"关注领金币",info:"关注公众号后可领取50万金币",res:"task.btnget",func:this.openQRcode.bind(this)},e.push(t));var i={title:"救济金",info:"少于金币10000即可领取",res:"task.btnget",func:this.getFreeCoins.bind(this)},n={title:"签到奖励",info:"每日登陆即可领取",res:"c.btnchakan",func:this.jumpSign.bind(this)},a={title:"任务领取",info:"完成登陆即可领取",res:"c.btnchakan",func:this.jumpTask.bind(this)},s={title:"提建议得金币",info:"提交建议或者BUG采纳就会有50万金币奖励",res:"c.btnchakan",func:this.jumpSet.bind(this)},o={title:"转盘大抽奖",info:"每日转盘大抽奖",res:"c.btnchakan",func:this.jumpJiang.bind(this)};e.push(i),e.push(n),e.push(a),e.push(s),e.push(o);for(var r=e.length,h=0;r>h;h++){var l=ObjManage.getObj("FreeCoinItemPanel");l.y=125*h,this.itemGroup.addChild(l),l.setData(e[h]),this.arr.push(l)}},e.prototype.getFreeCoins=function(){Net.send(Protocol.GET_ALMS,{},this.getFreeCallback.bind(this))},e.prototype.getFreeCallback=function(t){200==t.code?(GlobalData.user.gold=t.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),EffectUtils.coinsFly(this,416,340)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.jumpSet=function(){PanelManage.openSet()},e.prototype.jumpJiang=function(){PanelManage.openLottery()},e.prototype.jumpTask=function(){PanelManage.openTask()},e.prototype.jumpSign=function(){PanelManage.openSign()},e.prototype.openQRcode=function(){Net.send(Protocol.HALL_GET_FOLLOW_GOLD,{},this.getGoldCB.bind(this)),"weixin"==GlobalData.userfrom?QuickManage.openEr(GlobalData.configData.data.gongzhonghaourl):0==GlobalData.isLogin&&(window.location.href=GlobalData.configData.data.linkhall+"?fwid=fixed")},e.prototype.getGoldCB=function(t){this.tipsGoldData=t},e.prototype.getGoldTips=function(){this.tipsGoldData&&(200==this.tipsGoldData.code?(GlobalData.user.gold=this.tipsGoldData.gold,PanelManage.hall.updateData(),TipsManage.showTips("恭喜你领取了50万金币！")):TipsManage.showTips(ErrorMessage.errorMsg(this.tipsGoldData.msg)))},e.prototype.dispose=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("FreeCoinItemPanel",this.arr[e]));this.arr=[],this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(FreeCoinPanel.prototype,"FreeCoinPanel",["fany.IDispose"]);var FruitInfo=function(){function t(){this._count=0,this._count1=0,this._count2=0,this._count3=0,this._ii=0,this._ii1=0,this._ii2=0,this._ii3=0,this._jiange=0,this._isGo=!1,this._isGo1=!1,this._isGo2=!1,this._isGo3=!1,this._jiedian=0,this._endtime=0,this._r=null,this._danzhu="",this._timett=0,this._timett1=0,this._tt=0,this._tt1=0,this._tt2=0,this._result=null,this._resultc=!1,this._daojishicom=!1,this._end=0,this._endzhuanhuan=0,this._ctt=0,this._fltt=!1,this._zhuangnum=0,this._changebanker=null,this._isSys=!1,this._collectobj=null,this._zhuangGold=0,this._isChongfuXiazhu=!1,this._isYing=!1,this.isChongfuXiazhu=!1,this.ii=0,this.ii1=0,this.ii2=0,this.ii3=0,this.jiange=0,this.jiedian=0,this.isGo=!1,this.isGo1=!1,this.isGo2=!1,this.isGo3=!1,this.currentArr=[],this.endtime=0,this.r=null,this.danzhu="",this.timett=0,this.timett1=0,this.tt=0,this.tt1=0,this.tt2=0,this.result=null,this.resultc=!1,this.daojishicom=!1,this.end=0,this.endzhuanhuan=0,this.ctt=0,this.fltt=!1,this.xiazhuArr=[],this.xiazhuArr2=[],this.zhiqianArr=[],this.zhuArr=[],this.zhuangnum=0,this.zhuangGold=0,this.changebanker=null,this.isSys=!1,this.collectobj=null,this.posArr=[]}return t.prototype.init=function(){},Object.defineProperty(t.prototype,"posArr",{get:function(){return this._posArr},set:function(t){this._posArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isYing",{get:function(){return this._isYing},set:function(t){this._isYing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChongfuXiazhu",{get:function(){return this._isChongfuXiazhu},set:function(t){this._isChongfuXiazhu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangGold",{get:function(){return this._zhuangGold},set:function(t){this._zhuangGold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(t){this._count=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii1",{get:function(){return this._ii1},set:function(t){this._ii1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii2",{get:function(){return this._ii2},set:function(t){this._ii2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii3",{get:function(){return this._ii3},set:function(t){this._ii3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentArr",{get:function(){return this._currentArr},set:function(t){this._currentArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jiange",{get:function(){return this._jiange},set:function(t){this._jiange=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo",{get:function(){return this._isGo},set:function(t){this._isGo=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo1",{get:function(){return this._isGo1},set:function(t){this._isGo1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo2",{get:function(){return this._isGo2},set:function(t){this._isGo2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo3",{get:function(){return this._isGo3},set:function(t){this._isGo3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jiedian",{get:function(){return this._jiedian},set:function(t){this._jiedian=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endtime",{get:function(){return this._endtime},set:function(t){this._endtime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danzhu",{get:function(){return this._danzhu},set:function(t){this._danzhu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timett",{get:function(){return this._timett},set:function(t){this._timett=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timett1",{get:function(){return this._timett1},set:function(t){this._timett1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt",{get:function(){return this._tt},set:function(t){this._tt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt1",{get:function(){return this._tt1},set:function(t){this._tt1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt2",{get:function(){return this._tt2},set:function(t){this._tt2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return this._result},set:function(t){this._result=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resultc",{get:function(){return this._resultc},set:function(t){this._resultc=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"daojishicom",{get:function(){return this._daojishicom},set:function(t){this._daojishicom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(t){this._end=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endzhuanhuan",{get:function(){return this._endzhuanhuan},set:function(t){this._endzhuanhuan=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ctt",{get:function(){return this._ctt},set:function(t){this._ctt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fltt",{get:function(){return this._fltt},set:function(t){this._fltt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xiazhuArr2",{get:function(){return this._xiazhuArr2},set:function(t){this._xiazhuArr2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xiazhuArr",{get:function(){return this._xiazhuArr},set:function(t){this._xiazhuArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhiqianArr",{get:function(){return this._zhiqianArr},set:function(t){this._zhiqianArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuArr",{get:function(){return this._zhuArr},set:function(t){this._zhuArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangnum",{get:function(){return this._zhuangnum},set:function(t){this._zhuangnum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changebanker",{get:function(){return this._changebanker},set:function(t){this._changebanker=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSys",{get:function(){return this._isSys},set:function(t){this._isSys=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectobj",{get:function(){return this._collectobj},set:function(t){this._collectobj=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count1",{get:function(){return this._count1},set:function(t){this._count1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count2",{get:function(){return this._count2},set:function(t){this._count2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count3",{get:function(){return this._count3},set:function(t){this._count3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii",{get:function(){return this._ii},set:function(t){this._ii=t},enumerable:!0,configurable:!0}),t}();__reflect(FruitInfo.prototype,"FruitInfo");var FruitPanel=function(t){function e(e){var i=t.call(this)||this;return i.tt=0,i.isLeave=!1,i.skinName="resource/skins/fruit/FruitPanelSkin.exml",FruitUtils.getInstance().getFruit().r=e,GlobalData.user.rate=parseFloat(e.data.rate+""),console.log("rate=="+GlobalData.user.rate),i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),EventManage.addEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.leaveGame.bind(this)),EventManage.addEvent(this,this.btnQiehuan,egret.TouchEvent.TOUCH_TAP,this.qiehuanhandle.bind(this)),EventManage.addButtonEvent(this,this.imgfa,egret.TouchEvent.TOUCH_TAP,this.imgfaHandle.bind(this)),this.init(),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.OPERTE_REDBOX_COMPLETE,this.operateBoxComplete.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.operateBoxComplete.bind(this)),PanelManage.openChat(this,112,378,"10006"),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),EventManage.addButtonEvent(this,this.btnChong,egret.TouchEvent.TOUCH_TAP,this.btnChongHandle.bind(this)),MusicManage.playGameBgMuisc("fruit_bg",.5,-1),EventManage.addEvent(this,this.btnFeng,egret.TouchEvent.TOUCH_TAP,this.btnJiluHandle.bind(this)),EventManage.addEvent(this,this.btnJilu,egret.TouchEvent.TOUCH_TAP,this.btnJiluHandle.bind(this))},e.prototype.btnJiluHandle=function(){TipsManage.showTips("暂未开放!")},e.prototype.btnChongHandle=function(){PanelManage.openShop(3)},e.prototype.updatePayData=function(t){var e=t.param;GlobalData.user.gold=e.msg.gold+"",GlobalData.user.vip=e.msg.vip+"",EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold)),this.txtVip.text="VIP"+GlobalData.user.vip},e.prototype.operateBoxComplete=function(){EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.imgfaHandle=function(){PanelManage.openRedBox(0,1)},e.prototype.btnBaoHandle=function(){},e.prototype.btnChongfuHandle=function(){this.fruit.xiazhuArr2.length>0&&Net.send(Protocol.FRUIT_XIA_ZHU,{bets:this.fruit.xiazhuArr2},this.xiazhucallback1.bind(this))},e.prototype.xiazhucallback1=function(t){if(200==t.code){for(var e=this.fruit.xiazhuArr2.length,i=0;e>i;i++)this.fruit.zhuArr[parseInt(this.fruit.xiazhuArr2[i].betId+"")-1]=this.fruit.zhuArr[parseInt(this.fruit.xiazhuArr2[i].betId+"")-1]+parseInt(this.fruit.xiazhuArr2[i].gold+""),this["txtCurrent"+this.fruit.xiazhuArr2[i].betId].text=QuickManage.moneyStr(this.fruit.zhuArr[parseInt(this.fruit.xiazhuArr2[i].betId+"")-1]),this.fruit.xiazhuArr.push(this.fruit.xiazhuArr2[i]);this.updateGold()}else"319"==t.msg?TipsManage.showTips("非VIP玩家下注不能超过1万!"):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.qiehuanhandle=function(){this.fruit.danzhu=""+FruitUtils.getInstance().getDanZhu(this.fruit.danzhu),this.txtDanzhu.text="单注:"+QuickManage.moneyStr(parseInt(this.fruit.danzhu))},e.prototype.xiazhuHandle=function(t){if(this.helptips.visible=!1,this.setBtnXy(),"a"!=(this["zhu"+t].source+"").charAt(7)){var e=parseInt(GlobalData.user.gold)-parseInt(this.fruit.danzhu);return 0>e?void TipsManage.showTips("金币不足!"):void Net.send(Protocol.FRUIT_XIA_ZHU,{bets:[{betId:""+t,gold:this.fruit.danzhu}]},this.xiazhucallback.bind(this,t))}},e.prototype.xiazhucallback=function(t,e){if(200==e.code){this.fruit.xiazhuArr.push({gold:this.fruit.danzhu,betId:t}),this.fruit.zhuArr[t-1]=this.fruit.zhuArr[t-1]+parseInt(this.fruit.danzhu),this["txtCurrent"+t].text=QuickManage.moneyStr(this.fruit.zhuArr[t-1]);var i=parseInt(GlobalData.user.gold)-parseInt(this.fruit.danzhu);0>i&&(i=0),GlobalData.user.gold=i+"",this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold))}else"319"==e.msg?TipsManage.showTips("非VIP玩家下注不能超过1万!"):TipsManage.showTips(ErrorMessage.errorMsg(e.msg))},e.prototype.setBtnXy=function(){for(var t=this.fruit.posArr.length,e=1;t>e;e++){var i=this.fruit.posArr[e],n=i.view,a=i.acx,s=i.acy,o=i.xx,r=i.yy;n.acx=a,n.acy=s,n.x=o,n.y=r}},e.prototype.feiqi=function(t){},e.prototype.setMaxInfo=function(t){200==t.code&&(this.txtMaxName.text=t.data.name,this.txtMaxVip.text="VIP"+t.data.vip,this.maxhead.source=t.data.headurl)},e.prototype.init=function(){Net.send(Protocol.FRUIT_GET_MAX,{},this.setMaxInfo.bind(this)),this.fruit=FruitUtils.getInstance().getFruit();for(var t=0;22>t;t++)this.fruit.currentArr.push(this["z"+t]);this.fruit.zhuArr=[];for(var t=1;9>t;t++)this.fruit.zhuArr.push(0),this.fruit.posArr.push({view:this["zhu"+t],acx:this["zhu"+t].anchorOffsetX,acy:this["zhu"+t].anchorOffsetY,xx:this["zhu"+t].x,yy:this["zhu"+t].y}),EventManage.addButtonEvent(this,this["zhu"+t],egret.TouchEvent.TOUCH_TAP,this.xiazhuHandle.bind(this,t),"fruit_bet"+t);this.txtVip.text="VIP"+GlobalData.user.vip,this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtName.text=GlobalData.user.nickname,this.txtCaijin.text=this.fruit.r.data.caijin,this.head.source=GlobalData.user.headurl,console.log("服务端获取到的时间为:"+this.fruit.r.data.time),this.fruit.timett=Math.abs(parseInt(this.fruit.r.data.time))+3,(-1!=(this.fruit.timett+"").indexOf(".")||this.fruit.timett>20)&&Net.send(Protocol.HALL_SET_PROPOSAL,{proposal:"请截图给管理员fruit:"+this.fruit.r.data.state+":"+this.fruit.r.data.time},this.feiqi.bind(this)),this.fruit.timett<10?this.txtTime.text="0"+this.fruit.timett:this.txtTime.text=""+this.fruit.timett,this.fruit.timett>20&&(this.txtTime.text="20",this.fruit.timett=20),console.warn("当前游戏状态是==="+this.fruit.r.data.state),"3"==this.fruit.r.data.state?(this.setBtnTouched(),this.txtTime.text="00"):(clearInterval(this.fruit.tt),this.fruit.tt=setInterval(this.updateTime.bind(this),1e3)),this.fruit.danzhu=this.fruit.r.data.danzhu,this.txtDanzhu.text="单注:"+QuickManage.moneyStr(parseInt(this.fruit.danzhu)),this.fruit.zhiqianArr=this.fruit.r.data.recent,this.setZuiJin()},e.prototype.setZuiJin=function(){for(var t=this.fruit.zhiqianArr.length,e=0;t>e;e++)this["zhiqian"+e].source="fruit."+this.fruit.zhiqianArr[e]+"d"},e.prototype.updateTime=function(){--this.fruit.timett,this.fruit.timett>0?this.fruit.timett<10?this.txtTime.text="0"+this.fruit.timett:this.txtTime.text=""+this.fruit.timett:(clearInterval(this.fruit.tt),this.txtTime.text="00")},e.prototype.resultcome=function(t){clearInterval(this.fruit.tt),this.txtTime.text="00",this.fruit.result=t,this.fruit.resultc=!0,FruitUtils.getInstance().startEffect(),TimerManager.getInstance().setFrame("FruitPanel.gogo",this.gogo.bind(this),this)},e.prototype.collect=function(t){this.fruit.collectobj=t},e.prototype.betcome=function(t){return this.fruit.r&&"3"==this.fruit.r.data.state?(this.fruit.timett=Math.abs(parseInt(t.msg.time))+3,this.fruit.timett<10?this.txtTime.text="0"+this.fruit.timett:this.txtTime.text=""+this.fruit.timett,this.setBtnTouched(!0),clearInterval(this.fruit.tt),this.fruit.tt=setInterval(this.updateTime.bind(this),1e3),void(this.fruit.r=null)):(this.fruit.timett1=Math.abs(parseInt(t.msg.time))+3,clearInterval(this.fruit.tt1),void(this.fruit.tt1=setInterval(this.updateTime1.bind(this),1e3)))},e.prototype.betstop=function(t){console.warn("停止下注了"),this.setBtnTouched(),this.tt=0},e.prototype.updateTime1=function(){--this.fruit.timett1},e.prototype.setBtnTouched=function(t){void 0===t&&(t=!1);var e="fruit.a";t&&(e="fruit.l");for(var i=1;9>i;i++)this["zhu"+i].source=e+i,this["zhu"+i].touchEnabled=t;this.btnQiehuan.touchEnabled=t},e.prototype.gogo=function(){FruitUtils.getInstance().manageMc(this.jiesuan.bind(this),this.pushArr.bind(this))},e.prototype.jiesuan=function(){TimerManager.getInstance().remove("FruitPanel.gogo"),this.fruit.tt2=setTimeout(this.endmc.bind(this),1e3)
},e.prototype.updateGold=function(){Net.send(Protocol.FRUIT_GET_GOLD,{},this.updateGoldSucc.bind(this))},e.prototype.updateGoldSucc=function(t){GlobalData.user.gold=t.data.gold+"",console.log("同步金币返回"+GlobalData.user.gold),EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.endmc=function(){clearTimeout(this.fruit.tt2),this.isBaocaijin(),this.updateGold()},e.prototype.isBaocaijin=function(){var t=this.fruit.result.msg.result+"",e="fruit."+t+"a",i=""+FruitUtils.getInstance().jiesuan(this.fruit.xiazhuArr,parseInt(t)),n=""+QuickManage.moneyStr(parseInt(this.fruit.result.msg.gift)),a=this.fruit.collectobj.msg.max.name,s="",o=this.fruit.collectobj.msg.max.value;PanelManage.openGameResult({res:e,win:i,caijing:n,max:{name:a,vip:1,headurl:s,maxGold:o}}),this.next(),this.fruit.zhiqianArr.length>9&&this.fruit.zhiqianArr.shift(),this.fruit.zhiqianArr.push(t),this.setZuiJin()},e.prototype.next=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CHAT_GAME_RESULT)),this.initData(),clearInterval(this.fruit.tt),this.fruit.tt=setInterval(this.updateTime.bind(this),1e3)},e.prototype.initData=function(){Net.send(Protocol.FRUIT_GET_MAX,{},this.setMaxInfo.bind(this)),clearInterval(this.fruit.tt1),this.setBtnTouched(!0),this.fruit.timett=this.fruit.timett1,this.fruit.resultc=!1,this.fruit.xiazhuArr.length>0&&(this.fruit.xiazhuArr2=[],this.fruit.xiazhuArr2=this.fruit.xiazhuArr),this.fruit.xiazhuArr=[],this.fruit.zhuArr=[];for(var t=1;9>t;t++)this["txtCurrent"+t].text="0",this.fruit.zhuArr.push(0)},e.prototype.pushArr=function(t){var e=this["z"+t],i=e.source;e.source=i.replace("b","c")},e.prototype.leaveGame=function(){return FruitUtils.getInstance().isCanQuit()?void TipsManage.showTips("已经下注,不能离开!"):void(0==this.isLeave&&(Net.send(Protocol.FRUIT_LEAVE,{cell:this.fruit.danzhu},this.leavegamecallback.bind(this)),this.isLeave=!0))},e.prototype.leavegamecallback=function(t){200==t.code?(lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.dispose()):TipsManage.showTips(JSON.stringify(t))},e.prototype.dispose=function(){clearInterval(this.fruit.tt),clearInterval(this.fruit.tt1),MusicManage.closeMuisc(),TimerManager.getInstance().remove("FruitPanel.gogo"),FruitUtils.getInstance().clear(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(FruitPanel.prototype,"FruitPanel",["fany.IDispose"]);var FruitUtils=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist");this.fruit=new FruitInfo}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.clear=function(){this.fruit=null},t.prototype.startEffect=function(){var e=this.fruit.result.msg.result,i=this.fruit.end,n=t.getInstance().getTrueRes(e);n.stt;this.fruit.end=n.end,this.fruit.endzhuanhuan=110+this.fruit.end-i+1,this.fruit.endtime=0;var a=this.fruit.currentArr[i].source;this.fruit.currentArr[i].source=a.replace("b","c"),this.fruit.jiange=10,this.fruit.ii=i,this.fruit.jiedian=3,this.fruit.isGo=!0},t.prototype.getFruit=function(){return null==this.fruit&&(this.fruit=new FruitInfo),this.fruit},t.prototype.isCanQuit=function(){for(var t=this.fruit.zhuArr,e=t.length,i=!1,n=0;e>n;n++)if(t[n]>0){i=!0;break}return i},t.prototype.manageMc=function(t,e){this.fruit.isGo&&++this.fruit.count==this.fruit.jiange&&(this.fuyuan(),e(this.fruit.ii++),this.fruit.isGo1&&(e(this.fruit.ii1),e(this.fruit.ii2),e(this.fruit.ii3)),this.fruit.count=0,++this.fruit.endtime==this.fruit.endzhuanhuan-4&&(this.fruit.isGo1=!1,this.fruit.jiange=10,MusicManage.playMuisc("fruit_stop")),this.fruit.endtime==this.fruit.endzhuanhuan&&(this.fruit.isGo=!1,t()),this.fruit.jiedian>=0&&0==--this.fruit.jiedian&&(this.fruit.jiange=1,this.fruit.jiedian=-1,this.fruit.isGo1=!0,MusicManage.playMuisc("fruit_loop",1,-1)))},t.prototype.fuyuan=function(){this.fruit.ii>21&&(this.fruit.ii=0),0==this.fruit.ii?(this.fruit.ii1=21,this.fruit.ii2=20,this.fruit.ii3=19):1==this.fruit.ii?(this.fruit.ii1=0,this.fruit.ii2=21,this.fruit.ii3=20):2==this.fruit.ii?(this.fruit.ii1=1,this.fruit.ii2=0,this.fruit.ii3=21):(this.fruit.ii1=this.fruit.ii-1,this.fruit.ii2=this.fruit.ii-2,this.fruit.ii3=this.fruit.ii-3);for(var t=this.fruit.currentArr.length,e=0;t>e;e++){var i=this.fruit.currentArr[e].source;this.fruit.currentArr[e].source=i.replace("c","b")}},t.prototype.getDanZhu=function(t){var e=0;switch(t){case"1000":e=1e4;break;case"10000":e=1e5;break;case"100000":e=5e5;break;case"500000":e=1e6;break;case"1000000":e=5e6;break;case"5000000":e=1e7;break;case"10000000":e=5e7;break;case"50000000":e=1e3;break;default:e=1e4}return e},t.prototype.jiesuan=function(t,e){for(var i=t.length,n=0,a=0;i>a;a++){var s=this.getBet(t[a].betId);(e+""==t[a].betId+""||e+""=="9")&&(n+=s*t[a].gold)}return n*=1-GlobalData.user.rate},t.prototype.getBet=function(t){var e=1;switch(t){case 1:e=100;break;case 2:e=50;break;case 3:e=20;break;case 4:e=15;break;case 5:e=8;break;case 6:e=5;break;case 7:e=3;break;case 8:e=1}return e},t.prototype.getTrueRes=function(t){var e="",i=0;switch(t){case"1":i=3,e="77";break;case"2":i=14,e="西瓜";break;case"3":i=RandomUtils.randomArray([9,20]),e="樱桃";break;case"4":i=RandomUtils.randomArray([10,21]),e="葡萄";break;case"5":i=RandomUtils.randomArray([4,15]),e="草莓";break;case"6":i=RandomUtils.randomArray([0,5,11,16]),e="柚子";break;case"7":i=RandomUtils.randomArray([1,6,12,17]),e="橘子";break;case"8":i=RandomUtils.randomArray([2,7,13,18]),e="苹果";break;case"9":i=RandomUtils.randomArray([19,8]),e="loucky"}return{end:i,stt:e}},t}();FruitUtils.instance=null,__reflect(FruitUtils.prototype,"FruitUtils");var HallPanel=function(t){function e(){var e=t.call(this)||this;return e.time=0,e.xx=0,e.yy=0,e.currentIndex=0,e.moveNumber=0,e.isMove=!1,e.count=0,e.skinName="resource/skins/HallPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.notify_mail.visible=!1,this.notify_task.visible=!1,this.notify_tree.visible=!1,this.chats=[],this.currentIndex=0,this.moveNumber=0,this.createGameBtn(),EventManage.addButtonEvent(this,this.btnJiang,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,1)),EventManage.addButtonEvent(this,this.btnHuoDong,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,4)),EventManage.addButtonEvent(this,this.btnRank,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,3)),EventManage.addButtonEvent(this,this.btnShop,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,2)),EventManage.addButtonEvent(this,this.btnSet,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,5)),this.setData(),EventManage.addButtonEvent(this,this.btnDa,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,1)),EventManage.addButtonEvent(this,this.btnEmail,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,2)),EventManage.addButtonEvent(this,this.btnTask,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,3)),EventManage.addButtonEvent(this,this.btnMoney,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,5)),EventManage.addButtonEvent(this,this.btnYao,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,7)),EventManage.addButtonEvent(this,this.btnChong,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,9)),EventManage.addButtonEvent(this,this.btnFreeGold,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,10)),EventManage.addEvent(this,this.btnTeHui,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,11)),EventManage.addButtonEvent(this,this.btnYue,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,12)),EventManage.addButtonEvent(this,this.btnVip,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,13)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.updateData.bind(this)),EventManage.addButtonEvent(this,this.btnKefu,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,16)),EventManage.addOnceEvent(this,lcp.LListener.getInstance(),EventData.UI_COM_OPEN,this.goonOpenUI.bind(this)),PanelManage.openNotice(this.gudingGroup),TimerManager.getInstance().setFrame("GameMainPanel.noticeMoveHandler",this.noticeMoveHandler.bind(this),this),-1!=GlobalData.hallNotice&&this.redNotice(GlobalData.hallNotice,!0),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),GlobalData.user.hasRecharge&&(this.btnTeHui.visible=!1,this.btnTeHui.touchEnabled=!1),this.createSnow(),this.setVersion()},e.prototype.noticeMoveHandler=function(){this.btnTeHui.visible&&45==++this.count&&(EffectUtils.playEffect2(this.btnTeHui,this.fuweiTeHui.bind(this)),this.count=0),this.snow1.y>1024&&(this.snow1.y=-500),this.snow2.y>1024&&(this.snow2.y=-500),this.snow1.y++,this.snow2.y++},e.prototype.createGameBtn=function(){for(var t=["btnJinSha","btnDdz","btnXiaoChou","btnJinHua","btnNiuNiu","blackjack","btnShuiGuo","pk"],e=0,i=0;i<t.length;i++){var n=new eui.Image(t[i]);this.itemGroup.addChild(n),i%2==0?(e=190*(i/2),n.x=0,n.y=e):(n.x=305,n.y=e),EventManage.addEvent(this,n,egret.TouchEvent.TOUCH_TAP,this.onTouchEend.bind(this,t[i]))}},e.prototype.createSnow=function(){this.snow1=new eui.Image(GlobalData.cdnResUrl+"resource/assets/noload/noload.snow.png"),this.snow1.touchEnabled=!1,PanelManage.tipsLayer.addChild(this.snow1),this.snow2=new eui.Image(GlobalData.cdnResUrl+"resource/assets/noload/noload.snow.png"),this.snow2.touchEnabled=!1,this.snow2.y=-800,PanelManage.tipsLayer.addChild(this.snow2)},e.prototype.updatePayData=function(t){var e=t.param;GlobalData.user.gold=e.msg.gold+"",GlobalData.user.vip=e.msg.vip+"",this.updateData(),this.btnTeHui.visible=!1,this.btnTeHui.touchEnabled=!1},e.prototype.goonOpenUI=function(t){var e=t.param;2==e.from?this.onClick2(e.num):this.onClick(e.num)},e.prototype.updateData=function(){EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold)),this.txtVip.text="VIP"+GlobalData.user.vip},e.prototype.onClick2=function(t){if(!GlobalData.isLodingComUI)return void PanelManage.openResLoading2({num:t,from:2});switch(t){case 1:PanelManage.openDa();break;case 2:this.notify_mail.visible=!1,PanelManage.openEmail();break;case 3:PanelManage.openTask();break;case 4:PanelManage.openAward();break;case 5:PanelManage.openMoney();break;case 6:break;case 7:PanelManage.openYaoQing();break;case 8:break;case 9:PanelManage.openShop();break;case 10:PanelManage.openFreeCoin();break;case 11:PanelManage.openTeHui();break;case 12:PanelManage.openYue();break;case 13:PanelManage.openVip();break;case 15:PanelManage.openUser();break;case 16:PanelManage.openKefu()}},e.prototype.setData=function(){var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(77,50,40),t.graphics.endFill(),this.addChild(t),this.head.mask=t,this.head.source=GlobalData.user.headurl,this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtName.text=GlobalData.user.nickname,this.txtVip.text="VIP"+GlobalData.user.vip},e.prototype.updateHeadurl=function(){var t=GlobalData.user.headurl.split("_")[0];"nan"==t||"nv"==t?this.head.source=GlobalData.configData.data.headurl+GlobalData.user.headurl+".png":this.head.source=GlobalData.user.headurl,this.txtName.text=GlobalData.user.nickname},e.prototype.onClick=function(t){if(this.btnJiang.source="btnJiang",this.btnShop.source="btnShop",this.btnHuoDong.source="btnHuoDong",this.btnSet.source="btnSet",!GlobalData.isLodingComUI)return void PanelManage.openResLoading2({num:t,from:1});switch(t){case 1:this.btnJiang.source="btnJiangLiang",PanelManage.openAward();break;case 2:this.btnShop.source="btnShopLiang",PanelManage.openShop();break;case 3:PanelManage.openRank();break;case 4:this.btnHuoDong.source="btnHuoDongLiang",PanelManage.openActive();break;case 5:this.btnSet.source="btnSetLiang",PanelManage.openSet()}},e.prototype.onTouchEend=function(t){switch(t){case"btnJinSha":PanelManage.openResLoading("jinsha");break;case"btnJinHua":PanelManage.openResLoading("jinhua");break;case"btnNiuNiu":PanelManage.openResLoading("niuniu");break;case"blackjack":PanelManage.openResLoading("blackjack");break;case"pk":PanelManage.openResLoading("pk");break;case"btnDdz":PanelManage.openResLoading("ddz");break;case"btnXiaoChou":PanelManage.openResLoading("clown");break;case"btnShuiGuo":PanelManage.openResLoading("fruit")}},e.prototype.fuweiItem=function(t,e){t.x=e},e.prototype.fuweiTeHui=function(){this.btnTeHui.x=531,this.btnTeHui.y=164},e.prototype.redNotice=function(t,e){switch(t.type){case 1:this.notify_task.visible=e;break;case 2:this.notify_mail.visible=e,this.updateGold();break;case 3:this.notify_tree.visible=e;break;case 4:PanelManage.openDaTips(t)}},e.prototype.updateGold=function(){Net.send(Protocol.HALL_GET_GOLD,{},this.updateGoldCB.bind(this))},e.prototype.updateGoldCB=function(t){GlobalData.user.gold=t.data.gold,EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e.prototype.setVersion=function(){"self"==GlobalData.userfrom||"platform"==GlobalData.userfrom},e}(eui.Component);__reflect(HallPanel.prototype,"HallPanel",["fany.IDispose"]);var JingCaiItemPanel=function(t){function e(){var e=t.call(this)||this;return e.answerNum="",e.skinName="resource/skins/jingcai/JingCaiItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.txtGold,egret.Event.CHANGE,this.txtGoldChange.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.btnSureHandle.bind(this)),EventManage.addEvent(this,this.itemA,egret.TouchEvent.TOUCH_TAP,this.itemClick.bind(this,1)),EventManage.addEvent(this,this.itemB,egret.TouchEvent.TOUCH_TAP,this.itemClick.bind(this,2)),this.txtGold.restrict="0-9"},e.prototype.itemClick=function(t){switch(t){case 1:this.itemA.scaleX=1.1,this.itemA.scaleY=1.1,this.itemB.scaleX=1,this.itemB.scaleY=1,this.answerNum=this.itemA.name;break;case 2:this.itemA.scaleX=1,this.itemA.scaleY=1,this.itemB.scaleX=1.1,this.itemB.scaleY=1.1,this.answerNum=this.itemB.name}},e.prototype.btnSureHandle=function(){if(""==this.answerNum)return void TipsManage.showTips("请选择一个答案!");if(""==this.txtGold.text)return void TipsManage.showTips("请输入下注金额!");var t=parseInt(this.txtGold.text);if(0==t)return void TipsManage.showTips("请输入下注金额!");var e={competitionId:this.idd,aorb:this.answerNum,gold:1e4*t};console.log(JSON.stringify(e)),Net.send(Protocol.SEND_JINGCAI,e,this.jingcaicallback.bind(this))},e.prototype.jingcaicallback=function(t){200==t.code?this.answerNum==this.itemA.name?this.txtA.text="已下注:"+t.data.max_bet:this.txtB.text="已下注:"+t.data.max_bet:(console.log(JSON.stringify(t)),TipsManage.showTips(ErrorMessage.errorMsg(t.msg)))},e.prototype.txtGoldChange=function(){var t=parseInt(this.txtGold.text);this.txtGold.text=t+"万"},e.prototype.setData=function(t){this.idd=t._id,this.img.source="http://c.hiphotos.baidu.com/zhidao/pic/item/c8177f3e6709c93d72318d2d993df8dcd000542c.jpg",this.txtA.text="已下注:"+t.answer[0].max_bet,this.txtB.text="已下注:"+t.answer[1].max_bet,this.answera.text="A:"+t.answer[0].title,this.answerb.text="B:"+t.answer[1].title,this.itemA.name=""+t.answer[0]._id,this.itemB.name=""+t.answer[1]._id,void 0!=t.result&&(1==t.result?console.log("win A"):console.log("win B"))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(JingCaiItemPanel.prototype,"JingCaiItemPanel",["fany.IDispose"]);var JingCaiPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/jingcai/JingCaiPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnJingcaitxt,egret.TouchEvent.TOUCH_TAP,this.btnJingcaiHandle.bind(this)),EventManage.addButtonEvent(this,this.btnWangqitxt,egret.TouchEvent.TOUCH_TAP,this.btnWangqiHandle.bind(this)),Net.send(Protocol.GET_JINGCAI_LIST,{},this.jingcailistcallback.bind(this))},e.prototype.btnJingcaiHandle=function(){this.btnJingcai.visible=!0,this.btnWangqi.visible=!1,Net.send(Protocol.GET_JINGCAI_LIST,{},this.jingcailistcallback.bind(this))},e.prototype.btnWangqiHandle=function(){this.btnJingcai.visible=!1,this.btnWangqi.visible=!0,Net.send(Protocol.GET_JINGCAI_HISTORY_LIST,{},this.historyCB.bind(this))},e.prototype.jingcailistcallback=function(t){if(200==t.code){this.clearItems();for(var e=t.data.competitionlist,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("JingCaiItemPanel");a.y=335*n,this.itemGroup.addChild(a),a.setData(e[n]),this.arr.push(a)}}},e.prototype.historyCB=function(t){if(console.log(JSON.stringify(t)),200==t.code){this.clearItems();for(var e=t.data,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("JingCaiItemPanel");a.y=335*n,this.itemGroup.addChild(a),a.setData(e[n]),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("JingCaiItemPanel",this.arr[e]));this.arr=[]},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(JingCaiPanel.prototype,"JingCaiPanel",["fany.IDispose"]);var JinHuaUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return 5*Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 1*Math.pow(10,8);case 5:return 5*Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="d2";break;case 3:e="d3";break;case 4:e="d4";break;case 5:e="d5"}return e},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"jh.jackpot";case 2:return"jh.start";case 3:return"jh.end";case 4:return"jh.ts";case 5:return"jh.tp";case 6:return"jh.dealCard";case 7:return"jh.openCard";case 8:return"jh.stake"}},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=190,e.y=510;break;case 2:e.x=370,e.y=510;break;case 3:e.x=190,e.y=650;break;case 4:e.x=370,e.y=650}return e},t.prototype.getCardType=function(t){switch(t){case 32:return"豹子";case 16:return"同花顺";case 8:return"金花";case 4:return"顺子";case 2:return"对子";case 1:return"单张"}},t.prototype.coinsType=function(t){var e=[],i=0,n="";t=Math.round(t/1e4),t>0&&10>t?(i=t,n="b1a"):t>9&&100>t?(i=t/10,n="b2a"):t>99&&1e3>t?(i=t/100,n="b3a"):t>999&&1e4>t?(i=t/1e3,n="b4a"):t>9999&&1e5>t?(i=t/1e4,n="b5a"):(i=t/5e4,n="b6a");for(var a=0;a<Math.round(i);a++){var s=new eui.Image(n),o=this.coinPos();s.x=o.x,s.y=o.y,e.push(s)}return e},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t}();JinHuaUtil.instance=null,__reflect(JinHuaUtil.prototype,"JinHuaUtil");var ZhaJinHuaPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.interval=-1,i.selfbetsNum={},i.betsPostion=-1,i.betsNum=0,i.cardResult=null,i.isChangeBanker=!1,i.changeBankerObj={},i.isCanBets=!0,i.poolBetArray={},i.limitGold=0,i.limitVip=0,i.curBankerRanking=-1,i.isApplyBanker=!1,i.lastGameBankerNum=0,i.isSysBanker=!1,i.orginBankerCardPos=[],i.orginPlayerCardPos=[],i.isBanker=!1,i.isBets=!1,i.maxUserData=null,i.banker_total_gold=0,i.isBoomBanker=!1,i.resultCaijin=0,i.totalCaijin=0,i.cdNum=10,i.coinsNumArr={},i.isCoinsReturn=!0,i.curRate=0,i.lastTouchBetTime=0,i.isCardEffectShow=!1,i.isFirstSetBanker=!0,i.flyIntval=0,i.flyIndex0=0,i.flyIndex1=0,i.flyBankerIndex=0,i.effectPlayerIndex=0,i.redPanel=null,i.skinName="resource/skins/ZhaJinHuaSkin.exml",i.r=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.getOrginCardPos(),this.addEvent(),this.initData(),this.setCountdown(),this.onTouchBet(0),this.setSelfInfo(),this.joinCallback(this.r),PanelManage.openChat(this,112,315,"10002")},e.prototype.initData=function(){this.labBankerRank.text="",this.labBankerLastNum.text="",this.labCardTypeBanker.text="",this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpBankerList.visible=!1,this.grpCoins.touchEnabled=!1,this.grpTips.touchEnabled=!1,this.grpTips.touchChildren=!1,this.grpSecondPanel.visible=!1,this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1,this.grpTips.visible=!1,this.grpResult.visible=!1,this.imgBaoZhuang.visible=!1,this.grpCardType.touchChildren=!1,this.grpCardType.touchEnabled=!1,this.grpCaijin.visible=!1,this.grpCard.visible=!0},e.prototype.getOrginCardPos=function(){for(var t=0;3>t;t++){var e=this["bankerCard_"+t];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginBankerCardPos[t]=i}for(var n=0;4>n;n++){this["labCardType"+n].text="";for(var a=[],s=0;3>s;s++){var e=this["grpCard"+n+"_"+s];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x+24,i.y=e.y,a[s]=i}this.orginPlayerCardPos[n]=a}},e.prototype.addEvent=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnCharge,egret.TouchEvent.TOUCH_TAP,this.onTouchCharge.bind(this)),EventManage.addButtonEvent(this,this.btnUpBanker,egret.TouchEvent.TOUCH_TAP,this.onTouchUpBank.bind(this)),EventManage.addButtonEvent(this,this.btnDownBanker,egret.TouchEvent.TOUCH_TAP,this.onTouchDownBank.bind(this)),EventManage.addButtonEvent(this,this.btnBankerDown,egret.TouchEvent.TOUCH_TAP,this.getBankerList.bind(this)),EventManage.addEvent(this,this.grpBankerList,egret.TouchEvent.TOUCH_TAP,this.onTouchCloseBankerList.bind(this)),EventManage.addButtonEvent(this,this.btnCardType,egret.TouchEvent.TOUCH_TAP,this.onTouchCardType.bind(this)),EventManage.addButtonEvent(this,this.btnCardHistroy,egret.TouchEvent.TOUCH_TAP,this.onTouchCardHistory.bind(this)),EventManage.addButtonEvent(this,this.secondClose,egret.TouchEvent.TOUCH_TAP,this.onTouchCloseSecondPanel.bind(this)),EventManage.addEvent(this,this.btnRedBox,egret.TouchEvent.TOUCH_TAP,this.onTouchRedBox.bind(this)),EventManage.addEvent(this,this.grpBanker,egret.TouchEvent.TOUCH_TAP,this.getBankerList.bind(this));for(var t=0;8>t;t++)6>t&&(EventManage.addButtonEvent(this,this["btnBet"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchBet.bind(this,t)),this["labBet"+t].touchEnabled=!1),4>t&&(EventManage.addEvent(this,this["effectTouch"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchSelectIndex.bind(this,t)),this["labBetsPool"+t].text="0",this["labBetsSelf"+t].text="0"),EventManage.addButtonEvent(this,this["grpHead"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchSeat.bind(this,t)),this["imghead"+t].source="",this["labelHead"+t].text="";EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.OPERTE_REDBOX_COMPLETE,this.operateBoxComplete.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.updateDataGold.bind(this))},e.prototype.setSelfInfo=function(){this.titleHead.source=GlobalData.user.headurl;var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(55,52,40),t.graphics.endFill(),this.addChild(t),this.titleHead.mask=t,this.titleName.text=GlobalData.user.nickname,this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.setHandsel=function(t){this.labHandsel.text=QuickManage.moneyStr(t)},e.prototype.setTips=function(){this.labTips.text=""},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum%7==0&&this.getBets(),this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0),this.cdNum<10?(this.labCountdown0.text="0",this.labCountdown1.text=this.cdNum+""):(this.labCountdown0.text=(this.cdNum+"").split("")[0],this.labCountdown1.text=(this.cdNum+"").split("")[1])},e.prototype.joinCallback=function(t){if(200==t.code){this.curRate=t.data.rate;for(var e=t.data,i=t.data.seats,n=0;n<i.length;n++)this["imghead"+i[n].seat].source=i[n].headurl,this["labelHead"+i[n].seat].text=i[n].name,this["imghead"+i[n].seat].height=this["imghead"+i[n].seat].width=86;this.limitGold=e.limitGold,this.limitVip=e.limitVip,this.setHandsel(e.caijin),this.setBankerInfo(e.zhuang),this.cdNum=e.time,this.cdTimer.start(),1==t.state?this.isCanBets=!1:2==t.state?this.isCanBets=!0:3==t.state&&(this.isCanBets=!1),console.log("join_game: "+e.state)}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onMsgListen=function(t){var e=t.msg;switch(console.log("onMsgListen: "+e.type,"__zjh"),e.type){case 0:this.cdNum=parseInt(e.time)+3,this.cdTimer.start();break;case 1:this.isCanBets=!1,this.showGameTips(3);break;case 2:this.setGameResult(e.data);break;case 3:this.changeBankerObj=e.zhuang,this.isChangeBanker=!0;break;case 4:this.updataSeat(1,e.data);break;case 5:this.updataSeat(2,e.seat);break;case 6:this.updateHandsel(e);break;case 7:this.updateBankerRank(e)}},e.prototype.setGameResult=function(t){this.grpCountdown.visible=!1,this.cardResult=t;t.pokes},e.prototype.updataSeat=function(t,e){1==t?(this["imghead"+e.seat].source=e.headurl,this["imghead"+e.seat].height=this["imghead"+e.seat].width=86,this["labelHead"+e.seat].text=e.nick):(this["imghead"+e].source="",this["labelHead"+e].text="")},e.prototype.updateHandsel=function(t){if(null!=this.cardResult){this.resultCaijin=parseInt(t.data.gift),this.totalCaijin=parseInt(t.data.caijin),this.banker_total_gold=t.data.bankerTotalGold,this.maxUserData=t.data.max;for(var e=0;4>e;e++)this["labTipsClick"+e].visible=!1;this.cardEffect()}},e.prototype.updateBankerRank=function(t){if(this.isApplyBanker){var e=GlobalData.openid+"@"+GlobalData.platform;t.id==e?this.curBankerRanking=t.pos:(t.pos<this.curBankerRanking||t.pos==this.curBankerRanking)&&this.curBankerRanking++,this.labBankerRank.text="排庄"+this.curBankerRanking}},e.prototype.getBankerList=function(t){(!t.target||"btnUpBanker"!=t.target.name&&"btnDownBanker"!=t.target.name)&&Net.send(Protocol.GOLDEN_BANKER_LIST,{},this.bankerListCallback.bind(this))},e.prototype.bankerListCallback=function(t){if(200==t.code){this.grpBankerList.visible=!0;for(var e=0;10>e;e++)e<t.list.length?(this["bankerListItem"+e].visible=!0,this["itemRank"+e].text=e+1+"",this["itemName"+e].text=t.list[e].name,this["itemMoney"+e].text=QuickManage.moneyStr(t.list[e].gold),this["itemVip"+e].text="v"+t.list[e].vip):3>e?(this["bankerListItem"+e].visible=!0,this["itemRank"+e].text=e+1+"",this["itemName"+e].text="",this["itemMoney"+e].text="",this["itemVip"+e].text=""):this["bankerListItem"+e].visible=!1}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchCloseBankerList=function(){this.grpBankerList.visible=!1},e.prototype.getBets=function(){Net.send(Protocol.GOLDEN_GET_BETS,{},this.getBetsCallback.bind(this))},e.prototype.getBetsCallback=function(t){if(200==t.code)for(var e=t.list,i=1;5>i;i++)if(0!=e[i].score){if(e[i].score==this.poolBetArray[i])continue;this.isCanBets&&this.showCoins(e[i].score-this.poolBetArray[i],i),parseInt(this["labBetsPool"+(i-1)].text)<e[i].score/1e4&&(this["labBetsPool"+(i-1)].text=QuickManage.moneyStr(e[i].score),this.poolBetArray[i]=e[i].score)}},e.prototype.onTouchClose=function(){return this.isBanker?void TipsManage.showTips("您是庄家，下庄后方可离开！"):this.isBets?void TipsManage.showTips("您已经下注，这局结束后方可离开！"):void Net.send(Protocol.GOLDEN_LEAVE_GAME,{},function(t){200==t.code?this.dispose():TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.onTouchCharge=function(){PanelManage.openShop(3)},e.prototype.updatePayData=function(t){GlobalData.user.gold=t.param.msg.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.onTouchUpBank=function(){return parseInt(GlobalData.user.vip)<this.limitVip?void TipsManage.showTips("您的VIP等级未满"+this.limitVip+"级,不能上庄！"):parseInt(GlobalData.user.gold)<this.limitGold?void TipsManage.showTips("您的金币未满"+QuickManage.moneyStr(this.limitGold)+",不能上庄！"):void Net.send(Protocol.GOLDEN_UP_BANKER,{},this.upBankerCallback.bind(this))},e.prototype.upBankerCallback=function(t){200==t.code&&(TipsManage.showTips("申请上庄成功！"),this.btnDownBanker.visible=!0,this.btnUpBanker.visible=!1,this.isApplyBanker=!0,this.curBankerRanking=t.pos,this.labBankerRank.text="排庄"+this.curBankerRanking)},e.prototype.onTouchDownBank=function(){Net.send(Protocol.GOLDEN_DOWN_BANKER,{},this.downBankerCallback.bind(this))},e.prototype.downBankerCallback=function(t){200==t.code&&(TipsManage.showTips("申请下庄成功！"),this.btnDownBanker.visible=!1,this.btnUpBanker.visible=!0,this.isApplyBanker=!1,this.curBankerRanking=-1,this.labBankerRank.text="")},e.prototype.onTouchSeat=function(t){return this.isBanker?void TipsManage.showTips("当前您是庄，不能坐下！"):void Net.send(Protocol.GOLDEN_SEAT_DOWN,{seat:t},function(t){200!=t.code&&TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.onTouchBet=function(t){return this.isBanker?void TipsManage.showTips("您是庄家，不能下注！"):this.isCoinsReturn?(this.grpSelectBet.x=-8+106*t,void(this.betsNum=JinHuaUtil.getInstance().getBetNumber(t))):(console.log("touche  Bet++++++++++++++"),void TipsManage.showTips("操作过于频繁，请稍等！"))},e.prototype.onTouchSelectIndex=function(t){if(!this.isCardEffectShow){var e=(new Date).getTime();if(!(e-this.lastTouchBetTime<400))return this.lastTouchBetTime=e,this.isBanker?void TipsManage.showTips("您是庄家，不能下注！"):this.isCoinsReturn?void(this.isCanBets&&(this.betsPostion=t+1,this.isCoinsReturn=!1,Net.send(Protocol.GOLDEN_BET_GOLD,{betId:this.betsPostion,gold:this.betsNum},this.betGlodCallback.bind(this),!1))):void TipsManage.showTips("操作过于频繁，请稍等！")}},e.prototype.betGlodCallback=function(t){if(this.isCoinsReturn=!0,200==t.code){this.isBets=!0,GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.betsNum+"",this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.selfbetsNum[this.betsPostion]=parseInt(this.selfbetsNum[this.betsPostion])+this.betsNum,this.poolBetArray[this.betsPostion]=parseInt(this.poolBetArray[this.betsPostion])+this.betsNum,this["labBetsPool"+(this.betsPostion-1)].text=QuickManage.moneyStr(this.poolBetArray[this.betsPostion]),this.showCoins(this.betsNum,this.betsPostion);for(var e=0;4>e;e++)this["labBetsSelf"+e].text=QuickManage.moneyStr(this.selfbetsNum[e+1])}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.setBankerInfo=function(t){1==t.sys?(this.bankerHead.source="head",this.bankerName.text="萌萌哒",this.labBankerMoney.text=QuickManage.moneyStr(8888888e4),this.isSysBanker=!0,this.labBankerLastNum.text="剩余10次",this.lastGameBankerNum=10,this.isBanker=!1,this.labBankerVip.text="v10",this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1):(t.id==GlobalData.openid+"@"+GlobalData.platform?(this.isBanker=!0,this.labBankerRank.text=""):(this.isApplyBanker?t.pos<this.curBankerRanking&&(this.curBankerRanking--,this.labBankerRank.text="排庄"+this.curBankerRanking):(this.labBankerRank.text="",this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1),this.isBanker=!1),"萌萌哒"!=this.bankerName.text&&(this.isFirstSetBanker||PanelManage.chat.sendGameChat(this.bankerName.text+"下庄了")),this.bankerHead.source=t.headurl,this.bankerHead.width=this.bankerHead.height=86,this.bankerName.text=t.nick,this.labBankerMoney.text=QuickManage.moneyStr(t.gold),this.labBankerLastNum.text="剩余10次",this.lastGameBankerNum=10,this.isSysBanker=!1,this.labBankerVip.text="v"+t.vip,this.isFirstSetBanker||PanelManage.chat.sendGameChat(this.bankerName.text+"上庄了")),this.isFirstSetBanker=!1
},e.prototype.setHistory=function(){for(var t=0;10>t;t++){this["grpHistory"+t].visible=!1;for(var e=0;4>e;e++)this["grpHistory"+e+"_"+t].source=""}},e.prototype.updateGold=function(){Net.send(Protocol.JINHUA_GET_GOLD,{},this.getGoldCallback.bind(this))},e.prototype.getGoldCallback=function(t){200==t.code&&(GlobalData.user.gold=t.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)))},e.prototype.showGameTips=function(t){this.grpTipsInfo.source=JinHuaUtil.getInstance().getMsgSource(t),this.grpTips.visible=!0,this.grpTipsbg.alpha=0,this.grpTipsInfo.x=640,MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(t)),egret.Tween.get(this.grpTipsbg).to({alpha:1},400).wait(400).call(function(){egret.Tween.get(this).to({alpha:0},400)},this.grpTipsbg),egret.Tween.get(this.grpTipsInfo).to({x:0},400).wait(400).call(function(){egret.Tween.get(this).to({x:-640},400)},this.grpTipsInfo)},e.prototype.showCoins=function(t,e){var i=!1;MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(8),.5);var n=JinHuaUtil.getInstance().getCoinsPos(e),a=JinHuaUtil.getInstance().coinsType(t);this.coinsNumArr[e]<50?(this.coinsNumArr[e]=parseInt(this.coinsNumArr[e])+a.length,i=!1):i=!0;for(var s=0;s<a.length;s++){var o=n.x+60*Math.random(),r=n.y+50*Math.random();this.grpCoins.addChild(a[s]),egret.Tween.get(a[s]).to({x:o,y:r},200).call(function(){this[0]&&this[1].parent.removeChild(this[1])},[i,a[s]])}},e.prototype.cardEffect=function(){this.isCardEffectShow=!0,this.flyIntval=setInterval(this.playCardFly.bind(this),200)},e.prototype.playCardFly=function(){var t=this["grpCard"+this.flyIndex0+"_"+this.flyIndex1];t.source="card_100",t.x=296,t.y=340,t.anchorOffsetX=t.width/2,t.x+=t.width/2;var e=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},300),2==this.flyIndex1?3==this.flyIndex0?(this.flyIndex0=0,this.flyIndex1=0,clearInterval(this.flyIntval),this.flyBankerIndex=0,this.flyIntval=setInterval(this.bankerCardFly.bind(this),200)):(this.flyIndex1=0,this.flyIndex0++):this.flyIndex1++},e.prototype.bankerCardFly=function(){if(3==this.flyBankerIndex)return this.flyBankerIndex=0,clearInterval(this.flyIntval),void(this.interval=setInterval(this.playerCardRotation.bind(this),800));var t=this["bankerCard_"+this.flyBankerIndex];t.x=296,t.y=340,t.source="card_100",t.anchorOffsetX=t.width/2,t.x+=t.width/2,this.orginBankerCardPos;var e=this.orginBankerCardPos[this.flyBankerIndex];MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},400),this.flyBankerIndex++},e.prototype.playerCardRotation=function(){if(4==this.effectPlayerIndex)return clearInterval(this.interval),this.effectPlayerIndex=0,void this.bankerCardRotation();MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes,e=this.effectPlayerIndex,i=0;3>i;i++){var n=this["grpCard"+e+"_"+i];n.source="card_100",egret.Tween.get(n).to({scaleX:0},300).call(function(){this[0].source="card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[n,t[e+1].value[i]])}this["labCardType"+e].text=JinHuaUtil.getInstance().getCardType(t[e+1].type),this.effectPlayerIndex++},e.prototype.bankerCardRotation=function(){MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes[0],e=0;3>e;e++){var i=this["bankerCard_"+e];i.source="card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]]),console.log("poke_banker: "+t.value[e])}this.labCardTypeBanker.text=JinHuaUtil.getInstance().getCardType(t.type),this.interval=setInterval(this.blinkEffect.bind(this),500)},e.prototype.blinkEffect=function(){clearInterval(this.interval);for(var t=this.cardResult.result,e=0;4>e;e++)1==t[e]&&(this["effectSelect"+e].visible=!0,EffectUtils.blinkEffect(this["effectSelect"+e],200));this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval);var t=this.cardResult,e=!1;1==t.result[0]&&1==t.result[1]&&1==t.result[2]&&1==t.result[3]&&(this.showGameTips(5),e=!0),0==t.result[0]&&0==t.result[1]&&0==t.result[2]&&0==t.result[3]&&(this.showGameTips(4),e=!0),e?this.interval=setInterval(this.showGameResult.bind(this),1e3):this.showGameResult()},e.prototype.showGameResult=function(){clearInterval(this.interval),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CHAT_GAME_RESULT));var t=this.cardResult;this.grpResult.visible=!0,null!=this.maxUserData?(this.grpMax.visible=!0,this.grpMaxHead.source=this.maxUserData.headurl,this.grpMaxHead.width=this.grpMaxHead.height=86,this.grpMaxGold.text="赢"+QuickManage.moneyStr(this.maxUserData.gold),this.grpMaxName.text=this.maxUserData.name,this.maxUserData.name==GlobalData.user.nickname&&MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(1))):this.grpMax.visible=!1,this.grpBankerHead.source=this.bankerHead.source,this.grpBankerName.text=this.bankerName.text,this.grpBankerBeishu.text=t.pokes[0].num+"倍",this.labelBankerType.text=JinHuaUtil.getInstance().getCardType(t.pokes[0].type),parseInt(t.bankerWin)<0?(this.grpBankerGold.text="输 "+QuickManage.moneyStr(Math.abs(t.bankerWin)),PanelManage.chat.sendGameChat("庄家输了 "+QuickManage.moneyStr(Math.abs(t.bankerWin)))):(this.grpBankerGold.text="赢 "+QuickManage.moneyStr(t.bankerWin),0!=t.bankerWin&&PanelManage.chat.sendGameChat("庄家赢了 "+QuickManage.moneyStr(Math.abs(t.bankerWin))));for(var e=0,i=0;4>i;i++){this["resultType"+i].text=JinHuaUtil.getInstance().getCardType(t.pokes[i+1].type),this["labResult0_"+i].text=t.pokes[i+1].num+"倍",this["labResult1_"+i].text=QuickManage.moneyStr(this.selfbetsNum[i+1]);var n=this.selfbetsNum[i+1];if(0!=n)if(this["labResult2_"+i].text="",1==t.result[i]){var a=0;a=this.isBanker?parseInt(t.pokes[0].num):parseInt(t.pokes[i+1].num),e+=parseInt(n)*(a+1)}else{var s=0;s=this.isBanker?parseInt(t.pokes[i+1].num):parseInt(t.pokes[0].num),1==s||(e-=parseInt(n)*(s-1))}else this["labResult2_"+i].text=0}for(var o=0,i=1;5>i;i++)o+=this.selfbetsNum[i];(e>0||0==e)&&(e*=1-this.curRate),e-=o,e>0||0==e?this.labResultValue.text="结算："+QuickManage.moneyStr(e):this.labResultValue.text="结算：-"+QuickManage.moneyStr(Math.abs(e)),e>0&&EffectUtils.coinsFly(this,320,500),this.setHandsel(this.totalCaijin),this.updateGold(),this.isSysBanker||(this.labBankerMoney.text=QuickManage.moneyStr(this.banker_total_gold)),e>0&&this.resultCaijin>0?this.interval=setInterval(this.caijinShow.bind(this),3e3):0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3)},e.prototype.boomShow=function(){this.grpCaijin.visible=!1,this.imgBaoZhuang.visible=!0,clearInterval(this.interval),this.interval=setInterval(this.setStartBet.bind(this),4e3)},e.prototype.caijinShow=function(t){PanelManage.chat.sendGameChat("恭喜你获得彩金 "+this.resultCaijin),this.grpCaijinLabel.text="恭喜你获得"+this.resultCaijin+"彩金",this.grpCaijin.visible=!0,clearInterval(this.interval),0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3)},e.prototype.setStartBet=function(){this.resetGame(),this.grpResult.visible=!1,clearInterval(this.interval),this.showGameTips(2),this.grpCountdown.visible=!0,this.isSysBanker||this.isChangeBanker||(this.lastGameBankerNum--,this.labBankerLastNum.text="剩余"+this.lastGameBankerNum+"次"),this.isChangeBanker&&(this.isChangeBanker=!1,this.setBankerInfo(this.changeBankerObj),this.grpBankerList.visible=!1)},e.prototype.resetGame=function(){for(var t=0;4>t;t++)this["labBetsPool"+t].text="0",this["labBetsSelf"+t].text="0",egret.Tween.removeTweens(this["effectSelect"+t]);for(var t=0;3>t;t++){var e=this["bankerCard_"+t];e.source="",egret.Tween.removeTweens(e)}for(var i=0;4>i;i++){this["labCardType"+i].text="";for(var n=0;3>n;n++){var e=this["grpCard"+i+"_"+n];e.source="",egret.Tween.removeTweens(e)}}for(this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0};this.grpCoins.numChildren>0;)this.grpCoins.removeChildAt(0);for(var t=0;4>t;t++)this["effectSelect"+t].visible=!1;for(var a=0;4>a;a++)this["labTipsClick"+a].visible=!0;this.isCanBets=!0,this.isBets=!1,this.imgBaoZhuang.visible=!1,this.labCardTypeBanker.text="",this.resultCaijin=0,this.grpCaijin.visible=!1,this.isCoinsReturn=!0,this.isCardEffectShow=!1},e.prototype.onTouchCardType=function(){this.grpSecondPanel.visible=!0,this.grpCardType.visible=!0,this.grpHistory.visible=!1},e.prototype.onTouchCardHistory=function(){Net.send(Protocol.GOLDEN_GAME_RECORD,{},this.getHistoryCallback.bind(this))},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],a=0;4>a;a++)this["grpHistroy"+a+"_"+i].source=1==n[a]?"a8":"a7"}else this["grpHistroy"+i].visible=!1;this.grpSecondPanel.visible=!0,this.grpCardType.visible=!1,this.grpHistory.visible=!0},e.prototype.onTouchCloseSecondPanel=function(){this.grpSecondPanel.visible=!1},e.prototype.onTouchRedBox=function(){PanelManage.openRedBox(1,1)},e.prototype.operateBoxComplete=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))},e.prototype.updateDataGold=function(){EffectUtils.numEffect(this.titleLabMoney,parseInt(GlobalData.user.gold))},e.prototype.dispose=function(){MusicManage.closeMuisc(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ZhaJinHuaPanel.prototype,"ZhaJinHuaPanel",["fany.IDispose"]);var JinShaInfo=function(){function t(){this._count=0,this._count1=0,this._count2=0,this._count3=0,this._ii=0,this._ii1=0,this._ii2=0,this._ii3=0,this._jiange=0,this._isGo=!1,this._isGo1=!1,this._isGo2=!1,this._isGo3=!1,this._jiedian=0,this._endtime=0,this._r=null,this._danzhu="",this._timett=0,this._timett1=0,this._tt=0,this._tt1=0,this._tt2=0,this._result=null,this._resultc=!1,this._daojishicom=!1,this._end=0,this._endzhuanhuan=0,this._ctt=0,this._fltt=!1,this._zhuangnum=0,this._changebanker=null,this._isZhuang=!1,this._numShengyu=0,this._isSys=!1,this._collectobj=null,this._zhuangGold=0,this._isChongfuXiazhu=!1,this._isYing=!1,this.isChongfuXiazhu=!1,this.ii=0,this.ii1=0,this.ii2=0,this.ii3=0,this.jiange=0,this.jiedian=0,this.isGo=!1,this.isGo1=!1,this.isGo2=!1,this.isGo3=!1,this.currentArr=[],this.endtime=0,this.r=null,this.danzhu="",this.timett=0,this.timett1=0,this.tt=0,this.tt1=0,this.tt2=0,this.result=null,this.resultc=!1,this.daojishicom=!1,this.end=0,this.endzhuanhuan=0,this.ctt=0,this.fltt=!1,this.xiazhuArr=[],this.xiazhuArr2=[],this.zhiqianArr=[],this.zhuArr=[],this.zhuangnum=0,this.zhuangGold=0,this.changebanker=null,this.zhuangLists=[],this.isZhuang=!1,this.numShengyu=0,this.isSys=!1,this.collectobj=null,this.posArr=[]}return t.prototype.init=function(){},Object.defineProperty(t.prototype,"posArr",{get:function(){return this._posArr},set:function(t){this._posArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isYing",{get:function(){return this._isYing},set:function(t){this._isYing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChongfuXiazhu",{get:function(){return this._isChongfuXiazhu},set:function(t){this._isChongfuXiazhu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangGold",{get:function(){return this._zhuangGold},set:function(t){this._zhuangGold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(t){this._count=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii1",{get:function(){return this._ii1},set:function(t){this._ii1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii2",{get:function(){return this._ii2},set:function(t){this._ii2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii3",{get:function(){return this._ii3},set:function(t){this._ii3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentArr",{get:function(){return this._currentArr},set:function(t){this._currentArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jiange",{get:function(){return this._jiange},set:function(t){this._jiange=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo",{get:function(){return this._isGo},set:function(t){this._isGo=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo1",{get:function(){return this._isGo1},set:function(t){this._isGo1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo2",{get:function(){return this._isGo2},set:function(t){this._isGo2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo3",{get:function(){return this._isGo3},set:function(t){this._isGo3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jiedian",{get:function(){return this._jiedian},set:function(t){this._jiedian=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endtime",{get:function(){return this._endtime},set:function(t){this._endtime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danzhu",{get:function(){return this._danzhu},set:function(t){this._danzhu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timett",{get:function(){return this._timett},set:function(t){this._timett=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timett1",{get:function(){return this._timett1},set:function(t){this._timett1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt",{get:function(){return this._tt},set:function(t){this._tt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt1",{get:function(){return this._tt1},set:function(t){this._tt1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt2",{get:function(){return this._tt2},set:function(t){this._tt2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return this._result},set:function(t){this._result=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resultc",{get:function(){return this._resultc},set:function(t){this._resultc=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"daojishicom",{get:function(){return this._daojishicom},set:function(t){this._daojishicom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(t){this._end=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endzhuanhuan",{get:function(){return this._endzhuanhuan},set:function(t){this._endzhuanhuan=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ctt",{get:function(){return this._ctt},set:function(t){this._ctt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fltt",{get:function(){return this._fltt},set:function(t){this._fltt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xiazhuArr2",{get:function(){return this._xiazhuArr2},set:function(t){this._xiazhuArr2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xiazhuArr",{get:function(){return this._xiazhuArr},set:function(t){this._xiazhuArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhiqianArr",{get:function(){return this._zhiqianArr},set:function(t){this._zhiqianArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuArr",{get:function(){return this._zhuArr},set:function(t){this._zhuArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangnum",{get:function(){return this._zhuangnum},set:function(t){this._zhuangnum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changebanker",{get:function(){return this._changebanker},set:function(t){this._changebanker=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangLists",{get:function(){return this._zhuangLists},set:function(t){this._zhuangLists=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isZhuang",{get:function(){return this._isZhuang},set:function(t){this._isZhuang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numShengyu",{get:function(){return this._numShengyu},set:function(t){this._numShengyu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSys",{get:function(){return this._isSys},set:function(t){this._isSys=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectobj",{get:function(){return this._collectobj},set:function(t){this._collectobj=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count1",{get:function(){return this._count1},set:function(t){this._count1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count2",{get:function(){return this._count2},set:function(t){this._count2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count3",{get:function(){return this._count3},set:function(t){this._count3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii",{get:function(){return this._ii},set:function(t){this._ii=t},enumerable:!0,configurable:!0}),t}();__reflect(JinShaInfo.prototype,"JinShaInfo");var JinShaPanel=function(t){function e(e){var i=t.call(this)||this;return i.tt=0,i.isLeave=!1,i.skinName="resource/skins/jinsha/JinShaPanelSkin.exml",JinShaUtils.getInstance().getJinSha().r=e,GlobalData.user.rate=parseFloat(e.data.rate+""),console.log("rate=="+GlobalData.user.rate),i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),EventManage.addEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.leaveGame.bind(this)),EventManage.addEvent(this,this.btnQiehuan,egret.TouchEvent.TOUCH_TAP,this.qiehuanhandle.bind(this)),EventManage.addButtonEvent(this,this.btnShang,egret.TouchEvent.TOUCH_TAP,this.btnShanghandle.bind(this)),EventManage.addEvent(this,this.zhuangbg,egret.TouchEvent.TOUCH_TAP,this.getZhuangListhandle.bind(this)),EventManage.addEvent(this,this.xiala,egret.TouchEvent.TOUCH_TAP,this.getZhuangListhandle.bind(this)),EventManage.addEvent(this,this.txtShengYuNum,egret.TouchEvent.TOUCH_TAP,this.getZhuangListhandle.bind(this)),EventManage.addButtonEvent(this,this.btnChongfu,egret.TouchEvent.TOUCH_TAP,this.btnChongfuHandle.bind(this)),EventManage.addButtonEvent(this,this.btnBao,egret.TouchEvent.TOUCH_TAP,this.btnBaoHandle.bind(this)),EventManage.addButtonEvent(this,this.imgfa,egret.TouchEvent.TOUCH_TAP,this.imgfaHandle.bind(this)),this.init(),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.OPERTE_REDBOX_COMPLETE,this.operateBoxComplete.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.operateBoxComplete.bind(this)),PanelManage.openChat(this,112,378,"10001"),this.setChildIndex(this.zhuangScroll,this.numChildren-1),this.setChildIndex(this.txtFenPanNum,this.numChildren-1),this.zhuangScroll.touchEnabled=!1,this.txtFenPanNum.touchEnabled=!1,EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),EventManage.addButtonEvent(this,this.btnChong,egret.TouchEvent.TOUCH_TAP,this.btnChongHandle.bind(this)),this.guang.anchorOffsetX=250,this.guang.anchorOffsetY=250,this.guang.x+=250,this.guang.y+=250},e.prototype.btnChongHandle=function(){PanelManage.openShop(3)},e.prototype.updatePayData=function(t){var e=t.param;GlobalData.user.gold=e.msg.gold+"",GlobalData.user.vip=e.msg.vip+"",this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold)),this.txtVip.text="VIP"+GlobalData.user.vip},e.prototype.operateBoxComplete=function(){this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.imgfaHandle=function(){PanelManage.openRedBox(0,1)},e.prototype.btnBaoHandle=function(){},e.prototype.btnChongfuHandle=function(){this.jinsha.xiazhuArr2.length>0&&(this.btnChongfu.touchEnabled=!1,Net.send(Protocol.XIA_ZHU_JINSHA,{bets:this.jinsha.xiazhuArr2},this.xiazhucallback1.bind(this)))},e.prototype.xiazhucallback1=function(t){if(200==t.code){for(var e=this.jinsha.xiazhuArr2.length,i=0;e>i;i++)this.jinsha.zhuArr[parseInt(this.jinsha.xiazhuArr2[i].betId+"")-1]=this.jinsha.zhuArr[parseInt(this.jinsha.xiazhuArr2[i].betId+"")-1]+parseInt(this.jinsha.xiazhuArr2[i].gold+""),this["txtCurrent"+this.jinsha.xiazhuArr2[i].betId].text=QuickManage.moneyStr(this.jinsha.zhuArr[parseInt(this.jinsha.xiazhuArr2[i].betId+"")-1]),this.jinsha.xiazhuArr.push(this.jinsha.xiazhuArr2[i]);this.updateGold()}else"319"==t.msg?TipsManage.showTips("非VIP玩家下注不能超过1万!"):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.getZhuangListhandle=function(){return 1==this.zhuangScroll.visible?void(this.zhuangScroll.visible=!1):void Net.send(Protocol.JIN_SHA_ZHUANGLIST,{},this.zhuanglistcallback.bind(this))},e.prototype.zhuanglistcallback=function(t){if(this.bgg.visible=!0,JinShaUtils.getInstance().initZhuangList(),200==t.code){var e=t.list,i=e.length;i>0&&(this.bgg.visible=!1),this.zhuangScroll.visible=!0;for(var n=0;i>n;n++){var a=(e[n],ObjManage.getObj("ZhuangListItemPanel"));a.setData({num:n+1,name:e[n].name,vip:e[n].vip,gold:e[n].gold}),a.x=5,a.y=42*n,this.zhuangGroup.addChild(a),JinShaUtils.getInstance().setZhuangItem(a)}}},e.prototype.btnShanghandle=function(){if("jinsha.btnShang"==this.btnShang.source){if(parseInt(GlobalData.user.gold)<2e8)return void TipsManage.showTips("金币不足2亿不能上庄！");if(parseInt(GlobalData.user.vip)<1)return void TipsManage.showTips("VIP等级大于1能上庄！");Net.send(Protocol.JIN_SHA_SHANGZHUANG,{},this.shangzhuangcallback.bind(this))}else Net.send(Protocol.JIN_SHA_XIAZHUANG,{},this.xiazhuangcallback.bind(this))},e.prototype.xiazhuangcallback=function(t){200==t.code&&(this.txtPaizhuang.visible=!1,this.txtPaizhuangNum.visible=!1,this.jinsha.zhuangnum=0,this.jinsha.isZhuang?(this.btnShang.source="jinsha.btnShang",TipsManage.showTips("下庄成功，等待本局结束！")):this.btnShang.source="jinsha.btnShang")},e.prototype.shangzhuangcallback=function(t){200==t.code?(this.txtPaizhuang.visible=!0,this.btnShang.source="jinsha.btnXia"):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.qiehuanhandle=function(){this.jinsha.danzhu=""+JinShaUtils.getInstance().getDanZhu(this.jinsha.danzhu),this.txtDanzhu.text="单注:"+QuickManage.moneyStr(parseInt(this.jinsha.danzhu))},e.prototype.xiazhuHandle=function(t){if(this.helptips.visible=!1,this.setBtnXy(),"a"!=(this["zhu"+t].source+"").charAt(7)){var e=parseInt(GlobalData.user.gold)-parseInt(this.jinsha.danzhu);return 0>e?void TipsManage.showTips("金币不足!"):this.jinsha.isZhuang?void TipsManage.showTips("庄不能下注!"):void Net.send(Protocol.XIA_ZHU_JINSHA,{bets:[{betId:""+t,gold:this.jinsha.danzhu}]},this.xiazhucallback.bind(this,t))}},e.prototype.xiazhucallback=function(t,e){if(200==e.code){this.jinsha.xiazhuArr.push({gold:this.jinsha.danzhu,betId:t}),this.jinsha.zhuArr[t-1]=this.jinsha.zhuArr[t-1]+parseInt(this.jinsha.danzhu),this["txtCurrent"+t].text=QuickManage.moneyStr(this.jinsha.zhuArr[t-1]);var i=parseInt(GlobalData.user.gold)-parseInt(this.jinsha.danzhu);0>i&&(i=0),GlobalData.user.gold=i+"",this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold))}else"319"==e.msg?TipsManage.showTips("非VIP玩家下注不能超过1万!"):TipsManage.showTips(ErrorMessage.errorMsg(e.msg))},e.prototype.setBtnXy=function(){for(var t=this.jinsha.posArr.length,e=1;t>e;e++){var i=this.jinsha.posArr[e],n=i.view,a=i.acx,s=i.acy,o=i.xx,r=i.yy;n.acx=a,n.acy=s,n.x=o,n.y=r}},e.prototype.feiqi=function(t){},e.prototype.init=function(){this.jinsha=JinShaUtils.getInstance().getJinSha();for(var t=0;28>t;t++)this.jinsha.currentArr.push(this["z"+t]);this.jinsha.zhuArr=[];for(var t=1;13>t;t++)this.jinsha.zhuArr.push(0),this.jinsha.posArr.push({view:this["zhu"+t],acx:this["zhu"+t].anchorOffsetX,acy:this["zhu"+t].anchorOffsetY,xx:this["zhu"+t].x,yy:this["zhu"+t].y}),EventManage.addButtonEvent(this,this["zhu"+t],egret.TouchEvent.TOUCH_TAP,this.xiazhuHandle.bind(this,t));this.txtVip.text="VIP"+GlobalData.user.vip,this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtName.text=GlobalData.user.nickname,this.txtCaijin.text=QuickManage.moneyStr(this.jinsha.r.data.caijin);var e=new egret.Shape;if(e.graphics.beginFill(16711680),e.graphics.drawCircle(60,50,40),e.graphics.endFill(),this.addChild(e),this.head.mask=e,this.head.source=GlobalData.user.headurl,console.log("服务端获取到的时间为:"+this.jinsha.r.data.time),this.jinsha.timett=Math.abs(parseInt(this.jinsha.r.data.time)),(-1!=(this.jinsha.timett+"").indexOf(".")||this.jinsha.timett>28)&&Net.send(Protocol.HALL_SET_PROPOSAL,{proposal:"请截图给管理员:"+this.jinsha.r.data.state+":"+this.jinsha.r.data.time},this.feiqi.bind(this)),this.jinsha.timett<10?this.txtTime.text="0"+this.jinsha.timett:this.txtTime.text=""+this.jinsha.timett,this.jinsha.timett>28&&(this.txtTime.text="28",this.jinsha.timett=28),"1"==this.jinsha.r.data.zhuang.sys){var i="http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46";this.setZhuangInfo({nick:"皇家特派员",gold:"88880000",headurl:i,num:9999,vip:15},!0)}else this.setZhuangInfo(this.jinsha.r.data.zhuang,!1);console.warn("当前游戏状态是==="+this.jinsha.r.data.state),"3"==this.jinsha.r.data.state?(this.setBtnTouched(),this.txtTime.text="00"):this.jinsha.tt=setInterval(this.updateTime.bind(this),1e3),this.jinsha.danzhu=this.jinsha.r.data.danzhu,this.txtDanzhu.text="单注:"+QuickManage.moneyStr(parseInt(this.jinsha.danzhu)),this.jinsha.zhiqianArr=this.jinsha.r.data.recent,this.setZuiJin()},e.prototype.setZhuangInfo=function(t,e){this.txtNameZhuang.text=t.nick,this.txtGoldZhuang.text=QuickManage.moneyStr(parseInt(t.gold+""));var i=new egret.Shape;i.graphics.beginFill(16711680),i.graphics.drawCircle(155,324,40),i.graphics.endFill(),this.addChild(i),this.headzhuang.mask=i,this.headzhuang.source=t.headurl,this.jinsha.numShengyu=t.num,this.txtZhuangVip.text="VIP"+t.vip,this.txtShengYuNum.text="剩余局数:"+this.jinsha.numShengyu,e||(this.jinsha.zhuangGold=parseInt(t.gold+"")),this.jinsha.isSys=e},e.prototype.setZuiJin=function(){for(var t=this.jinsha.zhiqianArr.length,e=0;t>e;e++)this["zhiqian"+e].source="jinsha."+this.jinsha.zhiqianArr[e]+"d"},e.prototype.tongbuxiazhucallback=function(t){for(var e=t.list,i=e.length,n=0;i>n;n++){var a=e[n];this["txtTotal"+a.id].text=QuickManage.moneyStr(a.bet)}},e.prototype.updateTime=function(){this.jinsha.timett%6==0&&Net.send(Protocol.JIN_SHA_TONGBU,{},this.tongbuxiazhucallback.bind(this)),--this.jinsha.timett,this.jinsha.timett>0?this.jinsha.timett<10?this.txtTime.text="0"+this.jinsha.timett:this.txtTime.text=""+this.jinsha.timett:this.txtTime.text="00"},e.prototype.resultcome=function(t){this.jinsha.result=t,this.jinsha.resultc=!0,this.jinsha.daojishicom&&(JinShaUtils.getInstance().startEffect(),TimerManager.getInstance().setFrame("JinShaPanel.gogo",this.gogo.bind(this),this))},e.prototype.collect=function(t){this.jinsha.collectobj=t},e.prototype.someonshangzhuang=function(t){this.jinsha.changebanker=t;var e=t.msg.pos||1;if(t){var i=t.msg.account;"0"==i?this.jinsha.zhuangnum=0:GlobalData.account!=i?this.jinsha.zhuangnum>e&&(this.jinsha.zhuangnum-=1):this.jinsha.zhuangnum=0}},e.prototype.someonupzhuang=function(t){console.warn("有人上庄了"+t.msg.account+"=="+t.msg.pos+"=="+this.jinsha.zhuangnum);var e=t.msg.account;GlobalData.account!=e?parseInt(t.msg.pos)<=this.jinsha.zhuangnum&&(this.jinsha.zhuangnum+=1):this.jinsha.zhuangnum=parseInt(t.msg.pos),this.txtPaizhuangNum.visible=!0,this.txtPaizhuangNum.text=this.jinsha.zhuangnum+""},e.prototype.someondownzhuang=function(t){var e=t.msg.account;GlobalData.account!=e?parseInt(t.msg.pos)<this.jinsha.zhuangnum&&(this.jinsha.zhuangnum-=1):this.jinsha.isZhuang=!1,this.txtPaizhuangNum.text=this.jinsha.zhuangnum+""},e.prototype.betcome=function(t){return this.jinsha.r&&"3"==this.jinsha.r.data.state?(this.jinsha.timett=Math.abs(parseInt(t.msg.time)),this.jinsha.timett<10?this.txtTime.text="0"+this.jinsha.timett:this.txtTime.text=""+this.jinsha.timett,this.setBtnTouched(!0),clearInterval(this.jinsha.tt),this.jinsha.tt=setInterval(this.updateTime.bind(this),1e3),void(this.jinsha.r=null)):(this.jinsha.timett1=Math.abs(parseInt(t.msg.time)),clearInterval(this.jinsha.tt1),void(this.jinsha.tt1=setInterval(this.updateTime1.bind(this),1e3)))},e.prototype.betstop=function(t){console.warn("停止下注了"),clearInterval(this.jinsha.tt),this.txtTime.text="00",this.setBtnTouched(),this.txtFenPanNum.source="jinsha.num3",this.txtFenPanNum.visible=!0,this.tt=setInterval(this.play321.bind(this),1e3),MusicManage.playMuisc("music.countdown")},e.prototype.play321=function(){"jinsha.num3"==this.txtFenPanNum.source?(this.txtFenPanNum.source="jinsha.num2",EffectUtils.playEffect3(this.txtFenPanNum,1e3),MusicManage.playMuisc("music.countdown")):"jinsha.num2"==this.txtFenPanNum.source?(this.txtFenPanNum.source="jinsha.num1",EffectUtils.playEffect3(this.txtFenPanNum,1e3),MusicManage.playMuisc("music.countdown")):(clearInterval(this.tt),this.txtFenPanNum.visible=!1,console.warn("开始动画"+this.jinsha.timett),this.startMC(),MusicManage.playMuisc("music.start"),this.tt=0)},e.prototype.updateTime1=function(){--this.jinsha.timett1},e.prototype.startMC=function(){this.jinsha.daojishicom=!0,this.jinsha.resultc&&(JinShaUtils.getInstance().startEffect(),TimerManager.getInstance().setFrame("JinShaPanel.gogo",this.gogo.bind(this),this))},e.prototype.setBtnTouched=function(t){void 0===t&&(t=!1);var e="jinsha.a";t&&(e="jinsha.l");for(var i=1;13>i;i++)this["zhu"+i].source=e+i,this["zhu"+i].touchEnabled=t;this.btnChongfu.touchEnabled=t},e.prototype.gogo=function(){JinShaUtils.getInstance().manageMc(this.jiesuan.bind(this),this.pushArr.bind(this))},e.prototype.jiesuan=function(){TimerManager.getInstance().remove("JinShaPanel.gogo"),this.imgend.visible=!0,this.imgend.x=279,this.imgend.y=453;var t=this.jinsha.result.msg.result;this.imgend.source="jinsha."+t+"a",MusicManage.playMuisc("music.result"+t),EffectUtils.playEffect4(this.imgend),this.jinsha.isZhuang?this.txtWinGold.text=this.jinsha.result.msg.bankWin+"":this.txtWinGold.text=""+JinShaUtils.getInstance().jiesuan(this.jinsha.xiazhuArr,parseInt(t)),this.jinsha.isSys||(this.jinsha.zhuangGold+=parseInt(this.jinsha.result.msg.bankWin),this.txtGoldZhuang.text=QuickManage.moneyStr(this.jinsha.zhuangGold)),this.jinsha.isSys||parseInt(this.jinsha.result.msg.bankWin+"")>0&&PanelManage.chat.sendGameChat("庄家"+this.txtNameZhuang.text+"赢得了"+QuickManage.moneyStr(parseInt(this.jinsha.result.msg.bankWin))),this.txtWinGold.visible=!1,this.guang.visible=!0,TimerManager.getInstance().setFrame("JinShaPanel.gogo1",this.gogo1.bind(this),this),this.jinsha.tt2=setTimeout(this.endmc.bind(this),5e3)},e.prototype.updateGold=function(){Net.send(Protocol.JINSHA_GET_GOLD,{},this.updateGoldSucc.bind(this))},e.prototype.updateGoldSucc=function(t){GlobalData.user.gold=t.data.gold+"",console.log("同步金币返回"+GlobalData.user.gold),this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.endmc=function(){clearTimeout(this.jinsha.tt2),TimerManager.getInstance().remove("JinShaPanel.gogo1"),this.guang.visible=!1,egret.Tween.get(this.imgend).to({x:73,y:514},800).call(this.hideImgend.bind(this)),console.log("是否爆庄:"+this.jinsha.result.msg.bomb),"1"==this.jinsha.result.msg.bomb?(PanelManage.chat.sendGameChat(this.txtNameZhuang.text+"爆庄了"),this.baozhuang.visible=!0,MusicManage.playMuisc("music.bomb"),EffectUtils.playEffect3(this.baozhuang,1200,this.isBaocaijin.bind(this))):this.isBaocaijin(),this.updateGold()
},e.prototype.isBaocaijin=function(){console.log("彩金值:"+this.jinsha.result.msg.gift),this.baozhuang.visible=!1,parseInt(this.jinsha.result.msg.gift)>0?(MusicManage.playMuisc("music.jackpot"),this.baocaijin.visible=!0,parseInt(this.txtWinGold.text)>0?(this.txtCaiJin2.text="恭喜你获得彩金"+QuickManage.moneyStr(parseInt(this.jinsha.result.msg.gift)),PanelManage.chat.sendGameChat(this.txtCaiJin2.text)):this.txtCaiJin2.text="系统爆彩金啦，很遗憾你没有获得!",EffectUtils.playEffect3(this.baocaijin,6e3,this.next.bind(this))):this.next()},e.prototype.next=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CHAT_GAME_RESULT)),this.baocaijin.visible=!1,EffectUtils.numEffect(this.txtCaijin,parseInt(this.jinsha.collectobj.msg.caijin)),this.zhuangScroll.visible=!1;var t=this.jinsha.changebanker;if(t){var e=t.msg.account;if("0"==e){this.jinsha.isZhuang=!1,this.txtPaizhuang.visible=!1,this.txtPaizhuangNum.visible=!1,this.btnShang.source="jinsha.btnShang";var i="http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46";this.setZhuangInfo({nick:"皇家特派员",gold:"88880000",headurl:i,num:9999,vip:15},!0)}else GlobalData.account!=e?(this.jinsha.isZhuang&&(this.btnShang.source="jinsha.btnShang"),this.txtPaizhuangNum.text=this.jinsha.zhuangnum+"",this.jinsha.isZhuang=!1,"皇家特派员"!=this.txtNameZhuang.text&&PanelManage.chat.sendGameChat(this.txtNameZhuang.text+"下庄了"),this.setZhuangInfo({nick:t.msg.name,gold:t.msg.gold,headurl:t.msg.headurl,num:parseInt(t.msg.count),vip:t.msg.vip},!1),"皇家特派员"!=this.txtNameZhuang.text&&PanelManage.chat.sendGameChat("恭迎"+this.txtNameZhuang.text+"上庄了")):(this.jinsha.isZhuang=!0,this.txtPaizhuang.visible=!1,this.txtPaizhuangNum.visible=!1,this.btnShang.source="jinsha.btnXia","皇家特派员"!=this.txtNameZhuang.text&&PanelManage.chat.sendGameChat(this.txtNameZhuang.text+"下庄了"),this.setZhuangInfo({nick:t.msg.name,gold:t.msg.gold,headurl:t.msg.headurl,num:parseInt(t.msg.count),vip:t.msg.vip},!1),"皇家特派员"!=this.txtNameZhuang.text&&PanelManage.chat.sendGameChat("恭迎"+this.txtNameZhuang.text+"上庄了"))}else this.txtShengYuNum.text="剩余局数:"+--this.jinsha.numShengyu;this.initData(),this.jinsha.tt=setInterval(this.updateTime.bind(this),1e3)},e.prototype.initData=function(){clearInterval(this.jinsha.tt1),this.setBtnTouched(!0),this.txtWinGold.visible=!1,this.txtWinGold.text="0",this.jinsha.timett=this.jinsha.timett1,this.jinsha.changebanker=null,this.jinsha.ctt=0,this.txtWinGold.text="",this.jinsha.daojishicom=!1,this.jinsha.xiazhuArr.length>0&&(this.jinsha.xiazhuArr2=[],this.jinsha.xiazhuArr2=this.jinsha.xiazhuArr),this.jinsha.xiazhuArr=[],this.jinsha.zhuArr=[];for(var t=1;13>t;t++)this["txtCurrent"+t].text="0",this["txtTotal"+t].text="0",this.jinsha.zhuArr.push(0)},e.prototype.hideImgend=function(){this.imgend.visible=!1,this.guang.visible=!1;var t=this.jinsha.result.msg.result;this.jinsha.zhiqianArr.length>9&&this.jinsha.zhiqianArr.shift(),this.jinsha.zhiqianArr.push(t),this.setZuiJin()},e.prototype.gogo1=function(){if(this.guang.rotation+=5,15==++this.jinsha.ctt){var t=parseInt(this.jinsha.result.msg.result);t>4&&9>t&&("jinsha.l1"==this.zhu1.source?this.zhu1.source="jinsha.a1":this.zhu1.source="jinsha.l1"),t>8&&13>t&&("jinsha.l4"==this.zhu4.source?this.zhu4.source="jinsha.a4":this.zhu4.source="jinsha.l4"),this["zhu"+t].source=="jinsha.l"+t?this["zhu"+t].source="jinsha.a"+t:this["zhu"+t].source="jinsha.l"+t,this.txtWinGold.visible=!this.txtWinGold.visible,this.jinsha.ctt=0}},e.prototype.pushArr=function(t){var e=this["z"+t],i=e.source;e.source=i.replace("b","c")},e.prototype.leaveGame=function(){return JinShaUtils.getInstance().isCanQuit()?void TipsManage.showTips("已经下注,不能离开!"):this.jinsha.isZhuang?void TipsManage.showTips("你是庄家,不能离开!"):void(0==this.isLeave&&(Net.send(Protocol.JIN_SHA_LEAVE,{cell:this.jinsha.danzhu},this.leavegamecallback.bind(this)),this.isLeave=!0))},e.prototype.leavegamecallback=function(t){200==t.code?(lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.dispose()):TipsManage.showTips(JSON.stringify(t))},e.prototype.dispose=function(){clearInterval(this.jinsha.tt),clearInterval(this.jinsha.tt1),MusicManage.closeMuisc(),TimerManager.getInstance().remove("JinShaPanel.gogo"),TimerManager.getInstance().remove("JinShaPanel.gogo1"),JinShaUtils.getInstance().clear(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(JinShaPanel.prototype,"JinShaPanel",["fany.IDispose"]);var JinShaUtils=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist");this.jinsha=new JinShaInfo}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.clear=function(){this.jinsha=null},t.prototype.startEffect=function(){var e=this.jinsha.result.msg.result,i=this.jinsha.end,n=t.getInstance().getTrueRes(e);n.stt;this.jinsha.end=n.end;var a=140+this.jinsha.end-i+1;this.jinsha.endzhuanhuan=a,this.jinsha.endtime=0;var s=this.jinsha.currentArr[i].source;this.jinsha.currentArr[i].source=s.replace("b","c"),this.jinsha.jiange=10,this.jinsha.ii=i,24==i?(this.jinsha.ii1=26,this.jinsha.ii2=25,this.jinsha.ii3=24):25==i?(this.jinsha.ii1=27,this.jinsha.ii2=26,this.jinsha.ii3=25):26==i?(this.jinsha.ii1=0,this.jinsha.ii2=27,this.jinsha.ii3=26):27==i?(this.jinsha.ii1=2,this.jinsha.ii2=1,this.jinsha.ii3=0):(this.jinsha.ii1=this.jinsha.ii+2,this.jinsha.ii2=this.jinsha.ii+1,this.jinsha.ii3=this.jinsha.ii),this.jinsha.jiedian=3,this.jinsha.isGo=!0},t.prototype.initZhuangList=function(){this.jinsha.zhuangLists=this.jinsha.zhuangLists||[];for(var t=this.jinsha.zhuangLists.length,e=0;t>e;e++)this.jinsha.zhuangLists[e]&&(this.jinsha.zhuangLists[e].parent&&this.jinsha.zhuangLists[e].parent.removeChild(this.jinsha.zhuangLists[e]),ObjManage.addObj("ZhuangListItemPanel",this.jinsha.zhuangLists[e]));this.jinsha.zhuangLists=[]},t.prototype.getJinSha=function(){return null==this.jinsha&&(this.jinsha=new JinShaInfo),this.jinsha},t.prototype.setZhuangItem=function(t){this.jinsha.zhuangLists.push(t)},t.prototype.isCanQuit=function(){for(var t=this.jinsha.zhuArr,e=t.length,i=!1,n=0;e>n;n++)if(t[n]>0){i=!0;break}return i},t.prototype.manageMc=function(t,e){this.jinsha.isGo&&++this.jinsha.count==this.jinsha.jiange&&(this.jinsha.ii>27&&(this.jinsha.ii=0),this.fuyuan(),e(this.jinsha.ii),this.jinsha.count=0,++this.jinsha.endtime==this.jinsha.endzhuanhuan-3&&(this.jinsha.isGo1=!1,this.jinsha.isGo2=!1,this.jinsha.isGo3=!1,this.jinsha.jiange=10,MusicManage.playMuisc("music.stop")),this.jinsha.endtime==this.jinsha.endzhuanhuan&&(this.jinsha.isGo=!1,t()),this.jinsha.jiedian>=0&&0==--this.jinsha.jiedian&&(this.jinsha.jiange=1,this.jinsha.jiedian=-1,this.jinsha.isGo1=!0,this.jinsha.isGo2=!0,this.jinsha.isGo3=!0,MusicManage.playMuisc("music.loop",1,-1)),++this.jinsha.ii),this.jinsha.isGo1&&(this.jinsha.ii1>27&&(this.jinsha.ii1=0),e(this.jinsha.ii1),++this.jinsha.ii1),this.jinsha.isGo2&&(this.jinsha.ii2>27&&(this.jinsha.ii2=0),e(this.jinsha.ii2),++this.jinsha.ii2),this.jinsha.isGo3&&(this.jinsha.ii3>27&&(this.jinsha.ii3=0),e(this.jinsha.ii3),++this.jinsha.ii3)},t.prototype.fuyuan=function(){for(var t=this.jinsha.currentArr.length,e=0;t>e;e++){var i=this.jinsha.currentArr[e].source;this.jinsha.currentArr[e].source=i.replace("c","b")}},t.prototype.getDanZhu=function(t){var e=0;switch(t){case"1000":e=1e4;break;case"10000":e=1e5;break;case"100000":e=5e5;break;case"500000":e=1e6;break;case"1000000":e=5e6;break;case"5000000":e=1e7;break;case"10000000":e=5e7;break;case"50000000":e=1e3;break;default:e=1e4}return e},t.prototype.jiesuan=function(t,e){for(var i=t.length,n=0,a=0;i>a;a++){var s=this.getBet(t[a].betId);e+""==t[a].betId+""?n+=s*t[a].gold:e>4&&9>e?"1"==""+t[a].betId&&(n+=2*t[a].gold):e>8&&13>e&&"4"==""+t[a].betId&&(n+=2*t[a].gold)}return n*=1-GlobalData.user.rate},t.prototype.getBet=function(t){var e=1;switch(t){case 1:e=2;break;case 2:e=24;break;case 3:e=48;break;case 4:e=2;break;case 5:e=6;break;case 6:e=8;break;case 7:e=8;break;case 8:e=12;break;case 9:e=12;break;case 10:e=8;break;case 11:e=8;break;case 12:e=6}return e},t.prototype.getTrueRes=function(t){var e="",i=0;switch(t){case"2":i=RandomUtils.randomArray([0,8,14,22]),e="银鲨";break;case"3":i=RandomUtils.randomArray([4,11,18,25]),e="金鲨";break;case"5":i=RandomUtils.randomArray([21,20,19]),e="燕子";break;case"6":i=RandomUtils.randomArray([24,23]),e="鸽子";break;case"7":i=RandomUtils.randomArray([27,26]),e="孔雀";break;case"8":i=RandomUtils.randomArray([3,2,1]),e="老鹰";break;case"9":i=RandomUtils.randomArray([7,6,5]),e="狮子";break;case"10":i=RandomUtils.randomArray([10,9]),e="熊猫";break;case"11":i=RandomUtils.randomArray([13,12]),e="猴子";break;case"12":i=RandomUtils.randomArray([17,16,15]),e="兔子"}return{end:i,stt:e}},t}();JinShaUtils.instance=null,__reflect(JinShaUtils.prototype,"JinShaUtils");var ZhuangListItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/jinsha/ZhuangListItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.txtGold.text=QuickManage.moneyStr(parseInt(t.gold+"")),this.txtName.text=t.name,this.txtNum.text=t.num,this.txtVip.text="VIP"+t.vip},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ZhuangListItemPanel.prototype,"ZhuangListItemPanel",["fany.IDispose"]);var KeFuPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/kefu/KeFuSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(KeFuPanel.prototype,"KeFuPanel",["fany.IDispose"]);var LoginPanel=function(t){function e(e){var i=t.call(this)||this;return i.isClickQuick=!1,i.isClickLogin=!1,i.isClickReg=!1,i.flag=!1,i.skinName="resource/skins/login/LoginPanelSkin.exml",i.flag=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),EventManage.addButtonEvent(this,this.btnTongxingzheng,egret.TouchEvent.TOUCH_TAP,this.btnTongxingzhengHandle.bind(this)),EventManage.addButtonEvent(this,this.btnQuick,egret.TouchEvent.TOUCH_TAP,this.btnQuickHandle.bind(this)),EventManage.addButtonEvent(this,this.btnLoginTrue,egret.TouchEvent.TOUCH_TAP,this.btnLoginTrueHandle.bind(this)),EventManage.addButtonEvent(this,this.btnRegGroup,egret.TouchEvent.TOUCH_TAP,this.btnRegGroupHandle.bind(this)),EventManage.addButtonEvent(this,this.btnCloseLogin,egret.TouchEvent.TOUCH_TAP,this.btnCloseLoginHandle.bind(this)),EventManage.addButtonEvent(this,this.btnRegTrue,egret.TouchEvent.TOUCH_TAP,this.btnRegTrueHandle.bind(this)),EventManage.addButtonEvent(this,this.btnBack,egret.TouchEvent.TOUCH_TAP,this.btnTongxingzhengHandle.bind(this)),this.txtTips.visible=!1,1==this.flag&&(this.txtTips.visible=!0,this.btnBack.visible=!1,this.btnRegGroupHandle())},e.prototype.btnRegTrueHandle=function(){if(""==this.txtMima.text||this.txtMima.text.length>20||this.txtMima.text.length<2)return void TipsManage.showTips("请输入有效密码!");if(""==this.txtMima2.text||this.txtMima2.text.length>20||this.txtMima2.text.length<2)return void TipsManage.showTips("请输入有效密码!");if(this.txtMima2.text!=this.txtMima.text)return void TipsManage.showTips("两次密码不一致!");if(""==this.txtUser.text||this.txtUser.text.length>20||this.txtUser.text.length<2)TipsManage.showTips("请输入有效用户名!");else if(1==fany.SocketManage.isConnect)if(0==this.isClickReg){this.isClickReg=!0;var t=GlobalData.configData.data.regapi+"?service=user.register&username="+this.txtUser.text+"&pwd="+this.txtMima.text+"&from="+GlobalData.platform+"&token="+GlobalData.openid;window.regLogin(t,{},this.regback.bind(this))}else TipsManage.showTips("请勿频繁操作!");else TipsManage.showTips("请等待服务器连接。。。!")},e.prototype.btnLoginTrueHandle=function(){if(""==this.txtMimaLogin.text||this.txtMimaLogin.text.length>20||this.txtMimaLogin.text.length<2)return void TipsManage.showTips("请输入有效密码!");if(""==this.txtUserLogin.text||this.txtUserLogin.text.length>20||this.txtUserLogin.text.length<2)TipsManage.showTips("请输入有效用户名!");else if(1==fany.SocketManage.isConnect)if(0==this.isClickLogin){var t=GlobalData.configData.data.regapi+"?service=user.login&username="+this.txtUserLogin.text+"&pwd="+this.txtMimaLogin.text;window.regLogin(t,{},this.loginback.bind(this)),this.isClickLogin=!0}else TipsManage.showTips("请勿频繁操作!");else TipsManage.showTips("请等待服务器连接。。。!")},e.prototype.loginback=function(t){this.isClickLogin=!1,this.isClickReg=!1,200==t.ret?200==t.data.code?(TipsManage.showTips("登陆成功!"),GlobalData.openid=t.data.token,console.log("openid="+GlobalData.openid),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.LOGIN_REG_ROLE)),GlobalData.isLogin=!0,this.dispose()):203==t.data.code?TipsManage.showTips("用户名或密码错误!"):202==t.data.code?TipsManage.showTips("用户名不存在!"):TipsManage.showTips("系统错误!"):TipsManage.showTips("系统错误!")},e.prototype.regback=function(t){if(this.isClickLogin=!1,this.isClickReg=!1,200==t.ret)if(200==t.data.code){if(TipsManage.showTips("注册成功!"),GlobalData.openid=t.data.token,console.log("openid="+GlobalData.openid),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.LOGIN_REG_ROLE)),GlobalData.isLogin=!0,this.dispose(),1==this.flag)return void PanelManage.openShop()}else 201==t.data.code?TipsManage.showTips("用户名已存在!"):TipsManage.showTips("系统错误!");else TipsManage.showTips("系统错误!")},e.prototype.btnRegGroupHandle=function(){this.quickGroup.visible=!1,this.loginGroup.visible=!1,this.regGroup.visible=!0},e.prototype.btnTongxingzhengHandle=function(){this.quickGroup.visible=!1,this.loginGroup.visible=!0,this.regGroup.visible=!1},e.prototype.btnCloseLoginHandle=function(){this.quickGroup.visible=!0,this.loginGroup.visible=!1,this.regGroup.visible=!1},e.prototype.btnQuickHandle=function(){return 1==this.flag?void TipsManage.showTips("请点击通行证登陆!"):(GlobalData.openid=localStorage.getItem("uuid"),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.LOGIN_REG_ROLE)),void this.dispose())},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(LoginPanel.prototype,"LoginPanel",["fany.IDispose"]);var LotteryPanel=function(t){function e(){var e=t.call(this)||this;return e.isLottering=!1,e.rewardArr=[],e.curTimes=0,e.skinName="resource/skins/lottery/LotterySkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.deg=0,this.duration=0,EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.current,egret.TouchEvent.TOUCH_TAP,this.onTouchLottery.bind(this)),EventManage.addButtonEvent(this,this.btnCharge,egret.TouchEvent.TOUCH_TAP,this.onTouchCharge.bind(this)),Net.send(Protocol.DIAL_GET_INFO,{},this.getDialInfo.bind(this))},e.prototype.getDialInfo=function(t){if(200==t.code){this.curTimes=parseInt(t.times),this.labTipsNum.text="您当前剩余"+t.times+"次抽奖机会！",this.rewardArr=t.list;for(var e=0;e<this.rewardArr.length;e++)this["label"+e].text=this.rewardArr[e].name}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchCharge=function(){this.isLottering||PanelManage.openShop()},e.prototype.onTouchLottery=function(){this.isLottering||Net.send(Protocol.DIAL_GET_AWARD,{},this.onPostComplete.bind(this))},e.prototype.onPostComplete=function(t){var e=this;if(200==t.code){this.curTimes=this.curTimes-1,this.labTipsNum.text="您当前剩余"+this.curTimes+"次抽奖机会！",this.isLottering=!0;var i=t.binggo;return this.deg=360*Math.ceil(6*Math.random()+10)-30*(i-1),this.duration=this.calcDuration(this.deg),console.log("prize_id：",i,"转动角度：",this.deg,"转动时间：",this.duration),this.startTurn(function(){e.lotteryDone(e.rewardArr[i-1].name)})}TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.calcDuration=function(t){return 2*t},e.prototype.lotteryDone=function(t){egret.Tween.removeAllTweens(),this.isLottering=!1,TipsManage.showTips("恭喜您获得了 "+t),PanelManage.hall.updateGold()},e.prototype.startTurn=function(t){var e=this;this.lightAni(),this.current.touchEnabled=!1,egret.Tween.get(this.inCir).to({rotation:this.deg},this.duration,egret.Ease.cubicOut).call(function(){e.current.touchEnabled=!0,t()})},e.prototype.lightAni=function(){egret.Tween.get(this.warpCir,{loop:!0}).set({source:RES.getRes("lottery.wrapcircle_bg2")}).wait(300).set({source:RES.getRes("lottery.wrapcircle_bg")}).wait(300)},e.prototype.getGridID=function(t){for(var e=0,i=[],n=0;n<this.rewardArr.length;n++)this.rewardArr[n]==t&&i.push(n);return console.log("grid Arr : "+i),e=i[Math.floor(Math.random()*i.length)],console.log("grid id:  "+e),e},e.prototype.dispose=function(){this.isLottering||(this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this))},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(LotteryPanel.prototype,"LotteryPanel",["fany.IDispose"]);var MoneyTreePanel=function(t){function e(){var e=t.call(this)||this;return e.lMax=0,e.skinName="resource/skins/moneytree/MoneyTreeSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnCharge,egret.TouchEvent.TOUCH_TAP,this.onTouchCharge.bind(this)),EventManage.addButtonEvent(this,this.btnGetCoin,egret.TouchEvent.TOUCH_TAP,this.onTouchGetCoin.bind(this)),EventManage.addButtonEvent(this,this.btnUp,egret.TouchEvent.TOUCH_TAP,this.onTouchUp.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.HALL_MONEYTREE_LIST,{},this.treeList.bind(this))},e.prototype.treeList=function(t){200==t.code&&(0==t.data.level?this.initNo():this.initHave(t.data))},e.prototype.onTouchClose=function(){this.dispose()},e.prototype.onTouchCharge=function(){PanelManage.openShop()},e.prototype.onTouchGetCoin=function(){return 0==this.lMax?void TipsManage.showTips(ErrorMessage.errorMsg(404)):void Net.send(Protocol.HALL_MONEYTREE_GET,{},this.getCoinCallback.bind(this))},e.prototype.getCoinCallback=function(t){200==t.code?(GlobalData.user.gold=t.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),EffectUtils.coinsFly(this,116,557),this.updateLoding(0,this.lMax)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchUp=function(){PanelManage.openShop()},e.prototype.initHave=function(t){this.btnCharge.visible=!1,this.grpNoTips.visible=!1,this.labLevel.text=t.level+"级",this.btnGetCoin.visible=!0,this.grpLoding.visible=!0,this.btnUp.visible=!0,this.grpUpTip.visible=!0,this.updateLoding(t.gold,t.max)},e.prototype.initNo=function(){this.btnCharge.visible=!0,this.grpNoTips.visible=!0,this.labLevel.text="未获得",this.btnGetCoin.visible=!1,this.grpLoding.visible=!1,this.btnUp.visible=!1,this.grpUpTip.visible=!1},e.prototype.updateLoding=function(t,e){this.lMax=e,this.labload.text=t+"/"+e,this.imgload.width=400*(t/e)},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(MoneyTreePanel.prototype,"MoneyTreePanel",["fany.IDispose"]);var NiuNiuPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.interval=-1,i.selfbetsNum={},i.betsPostion=-1,i.betsNum=0,i.cardResult=null,i.isChangeBanker=!1,i.changeBankerObj={},i.isCanBets=!0,i.poolBetArray={},i.limitGold=0,i.limitVip=0,i.curBankerRanking=-1,i.isApplyBanker=!1,i.lastGameBankerNum=0,i.isSysBanker=!1,i.orginBankerCardPos=[],i.orginPlayerCardPos=[],i.isBanker=!1,i.isBets=!1,i.maxUserData=null,i.banker_total_gold=0,i.isBoomBanker=!1,i.resultCaijin=0,i.totalCaijin=0,i.cdNum=10,i.lastTouchBetIndex=-1,i.coinsNumArr={},i.isCoinsReturn=!0,i.curRate=0,i.lastTouchBetTime=0,i.isCardEffectShow=!1,i.isFirstSetBanker=!0,i.flyIntval=0,i.flyIndex0=0,i.flyIndex1=0,i.flyBankerIndex=0,i.effectPlayerIndex=0,i.redPanel=null,i.skinName="resource/skins/BaiRenNiuNiuSkin.exml",i.r=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.getOrginCardPos(),this.addEvent(),this.initData(),this.setCountdown(),this.onTouchBet(0),this.setSelfInfo(),PanelManage.openChat(this,112,300,"10003"),this.joinCallback(this.r)},e.prototype.initData=function(){this.labBankerRank.text="",this.labBankerLastNum.text="",this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpBankerList.visible=!1,this.grpCoins.touchEnabled=!1,this.grpTips.touchEnabled=!1,this.grpTips.touchChildren=!1,this.grpSecondPanel.visible=!1,this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1,this.grpTips.visible=!1,this.grpResult.visible=!1,this.imgBaoZhuang.visible=!1,this.grpCardType.touchChildren=!1,this.grpCardType.touchEnabled=!1,this.grpCaijin.visible=!1,this.grpCard.visible=!0},e.prototype.getOrginCardPos=function(){for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginBankerCardPos[t]=i}this.labCardTypeBanker.visible=!1;for(var n=0;4>n;n++){this["labCardResult"+n].text="",this["labCardType"+n].visible=!1;for(var a=[],s=0;5>s;s++){var e=this["grpCard_"+n+"_"+s];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,a[s]=i}this.orginPlayerCardPos[n]=a}},e.prototype.addEvent=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnCharge,egret.TouchEvent.TOUCH_TAP,this.onTouchCharge.bind(this)),EventManage.addButtonEvent(this,this.btnUpBanker,egret.TouchEvent.TOUCH_TAP,this.onTouchUpBank.bind(this)),EventManage.addButtonEvent(this,this.btnDownBanker,egret.TouchEvent.TOUCH_TAP,this.onTouchDownBank.bind(this)),EventManage.addEvent(this,this.grpBankerInfo,egret.TouchEvent.TOUCH_TAP,this.getBankerList.bind(this)),EventManage.addEvent(this,this.grpBankerList,egret.TouchEvent.TOUCH_TAP,this.onTouchCloseBankerList.bind(this)),EventManage.addButtonEvent(this,this.btnCardType,egret.TouchEvent.TOUCH_TAP,this.onTouchCardType.bind(this)),EventManage.addButtonEvent(this,this.btnCardHistroy,egret.TouchEvent.TOUCH_TAP,this.onTouchCardHistory.bind(this)),EventManage.addButtonEvent(this,this.secondClose,egret.TouchEvent.TOUCH_TAP,this.onTouchCloseSecondPanel.bind(this)),EventManage.addEvent(this,this.btnRedBox,egret.TouchEvent.TOUCH_TAP,this.onTouchRedBox.bind(this));for(var t=0;8>t;t++)6>t&&(EventManage.addEvent(this,this["btnBet"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchBet.bind(this,t)),this["labBet"+t].touchEnabled=!1),4>t&&(EventManage.addEvent(this,this["effectTouch"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchSelectIndex.bind(this,t)),this["labBetsPool"+t].text="0",this["labBetsSelf"+t].text="0"),EventManage.addButtonEvent(this,this["grpHead"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchSeat.bind(this,t)),this["imghead"+t].source="",this["labelHead"+t].text="";EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.OPERTE_REDBOX_COMPLETE,this.operateBoxComplete.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.updateDataGold.bind(this))},e.prototype.setSelfInfo=function(){this.titleHead.source=GlobalData.user.headurl;var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(55,52,40),t.graphics.endFill(),this.addChild(t),this.titleHead.mask=t,this.titleName.text=GlobalData.user.nickname,this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.setHandsel=function(t){this.labHandsel.text=QuickManage.moneyStr(t)},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum%7==0&&this.getBets(),this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0),this.cdNum<10?(this.labCountdown0.text="0",this.labCountdown1.text=this.cdNum+""):(this.labCountdown0.text=(this.cdNum+"").split("")[0],this.labCountdown1.text=(this.cdNum+"").split("")[1])},e.prototype.joinCallback=function(t){if(200==t.code){this.curRate=t.data.rate;for(var e=t.data,i=t.data.seats,n=0;n<i.length;n++)this["imghead"+i[n].seat].source=i[n].headurl,this["labelHead"+i[n].seat].text=i[n].name,this["imghead"+i[n].seat].height=this["imghead"+i[n].seat].width=70;this.limitGold=e.limitGold,this.limitVip=e.limitVip,this.setHandsel(e.caijin),this.setBankerInfo(e.zhuang),this.cdNum=e.time,this.cdTimer.start(),1==t.state?this.isCanBets=!1:2==t.state?this.isCanBets=!0:3==t.state&&(this.isCanBets=!1),console.log("join_game: "+e.state)}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onMsgListen=function(t){var e=t.msg;switch(console.log("onMsgListen: "+e.type,"_niuniuMsgListen_"),e.type){case 0:this.cdNum=parseInt(e.time)+3,this.cdTimer.start();break;case 1:this.isCanBets=!1,this.showGameTips(3);break;case 2:this.setGameResult(e.data);break;case 3:this.changeBankerObj=e.zhuang,this.isChangeBanker=!0;break;case 4:this.updataSeat(1,e.data);break;case 5:this.updataSeat(2,e.seat);break;case 6:this.updateHandsel(e);break;case 7:this.updateBankerRank(e)}},e.prototype.setGameResult=function(t){this.grpCountdown.visible=!1,this.cardResult=t},e.prototype.updataSeat=function(t,e){1==t?(this["imghead"+e.seat].source=e.headurl,this["imghead"+e.seat].height=this["imghead"+e.seat].width=70,this["labelHead"+e.seat].text=e.nick):(this["imghead"+e].source="",this["labelHead"+e].text="")},e.prototype.updateHandsel=function(t){if(null!=this.cardResult){this.resultCaijin=parseInt(t.data.gift),this.totalCaijin=parseInt(t.data.caijin),this.maxUserData=t.data.max,this.banker_total_gold=t.data.bankerTotalGold;for(var e=0;4>e;e++)this["labTipsClick"+e].visible=!1;this.cardEffect()}},e.prototype.updateBankerRank=function(t){if(this.isApplyBanker){var e=GlobalData.openid+"@"+GlobalData.platform;t.id==e?this.curBankerRanking=t.pos:(t.pos<this.curBankerRanking||t.pos==this.curBankerRanking)&&this.curBankerRanking++,this.labBankerRank.text="排庄"+this.curBankerRanking}},e.prototype.getBankerList=function(t){(!t.target||"btnUpBanker"!=t.target.name&&"btnDownBanker"!=t.target.name)&&Net.send(Protocol.NIUNIU_BANKER_LIST,{},this.bankerListCallback.bind(this))},e.prototype.bankerListCallback=function(t){if(200==t.code){this.grpBankerList.visible=!0;for(var e=0;10>e;e++)e<t.list.length?(this["bankerListItem"+e].visible=!0,this["itemRank"+e].text=e+1+"",this["itemName"+e].text=t.list[e].name,this["itemMoney"+e].text=QuickManage.moneyStr(t.list[e].gold),this["itemVip"+e].text="v"+t.list[e].vip):3>e?(this["bankerListItem"+e].visible=!0,this["itemRank"+e].text=e+1+"",this["itemName"+e].text="",this["itemMoney"+e].text="",this["itemVip"+e].text=""):this["bankerListItem"+e].visible=!1}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchCloseBankerList=function(){this.grpBankerList.visible=!1},e.prototype.getBets=function(){Net.send(Protocol.NIUNIU_GET_BETS,{},this.getBetsCallback.bind(this))},e.prototype.getBetsCallback=function(t){if(200==t.code)for(var e=t.list,i=1;5>i;i++)if(0!=e[i].score){if(e[i].score==this.poolBetArray[i])continue;this.isCanBets&&this.showCoins(e[i].score-this.poolBetArray[i],i),parseInt(this["labBetsPool"+(i-1)].text)<e[i].score/1e4&&(this["labBetsPool"+(i-1)].text=QuickManage.moneyStr(e[i].score),this.poolBetArray[i]=e[i].score)}},e.prototype.onTouchClose=function(){return this.isBanker?void TipsManage.showTips("您是庄家，下庄后方可离开！"):this.isBets?void TipsManage.showTips("您已经下注，这局结束后方可离开！"):void Net.send(Protocol.NIUNIU_LEAVE_GAME,{},function(t){200==t.code?this.dispose():TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.onTouchCharge=function(){PanelManage.openShop(3)},e.prototype.updatePayData=function(t){GlobalData.user.gold=t.param.msg.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.onTouchUpBank=function(){return parseInt(GlobalData.user.vip)<this.limitVip?void TipsManage.showTips("您的VIP等级未满"+this.limitVip+"级,不能上庄！"):parseInt(GlobalData.user.gold)<this.limitGold?void TipsManage.showTips("您的金币未满"+QuickManage.moneyStr(this.limitGold)+",不能上庄！"):void Net.send(Protocol.NIUNIU_UP_BANKER,{},this.upBankerCallback.bind(this))},e.prototype.upBankerCallback=function(t){200==t.code&&(TipsManage.showTips("申请上庄成功！"),this.btnDownBanker.visible=!0,this.btnUpBanker.visible=!1,this.isApplyBanker=!0)},e.prototype.onTouchDownBank=function(){Net.send(Protocol.NIUNIU_DOWN_BANKER,{},this.downBankerCallback.bind(this))},e.prototype.downBankerCallback=function(t){200==t.code&&(TipsManage.showTips("申请下庄成功！"),this.btnDownBanker.visible=!1,this.btnUpBanker.visible=!0,this.isApplyBanker=!1,this.curBankerRanking=-1)},e.prototype.onTouchSeat=function(t){return this.isBanker?void TipsManage.showTips("当前您是庄，不能坐下！"):void Net.send(Protocol.NIUNIU_SEAT_DOWN,{seat:t},function(t){200!=t.code&&TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.onTouchBet=function(t){return this.isBanker?void TipsManage.showTips("您是庄家，不能下注！"):this.isCoinsReturn?void(this.lastTouchBetIndex!=t&&(-1!=this.lastTouchBetIndex&&(this["btnBet"+this.lastTouchBetIndex].scaleX=this["btnBet"+this.lastTouchBetIndex].scaleY=1),this.lastTouchBetIndex=t,this["btnBet"+t].scaleX=this["btnBet"+t].scaleY=1.2,this.betsNum=NiuNiuUtil.getInstance().getBetNumber(t),this.labCurChip.text="注码："+this["labBet"+t].text)):(console.log("touche  Bet++++++++++++++"),void TipsManage.showTips("操作过于频繁，请稍等！"))},e.prototype.onTouchSelectIndex=function(t){if(!this.isCardEffectShow){var e=(new Date).getTime();if(!(e-this.lastTouchBetTime<400))return this.lastTouchBetTime=e,this.isBanker?void TipsManage.showTips("您是庄家，不能下注！"):this.isCoinsReturn?void(this.isCanBets&&(this.betsPostion=t+1,this.isCoinsReturn=!1,Net.send(Protocol.NIUNIU_BET_GOLD,{betId:this.betsPostion,gold:this.betsNum},this.betGlodCallback.bind(this),!1))):void TipsManage.showTips("操作过于频繁，请稍等！")}},e.prototype.betGlodCallback=function(t){if(this.isCoinsReturn=!0,200==t.code){this.isBets=!0,GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.betsNum+"",this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.selfbetsNum[this.betsPostion]=parseInt(this.selfbetsNum[this.betsPostion])+this.betsNum,this.poolBetArray[this.betsPostion]=parseInt(this.poolBetArray[this.betsPostion])+this.betsNum,this["labBetsPool"+(this.betsPostion-1)].text=QuickManage.moneyStr(this.poolBetArray[this.betsPostion]),this.showCoins(this.betsNum,this.betsPostion);for(var e=0;4>e;e++)this["labBetsSelf"+e].text=QuickManage.moneyStr(this.selfbetsNum[e+1])}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.setBankerInfo=function(t){1==t.sys?(this.bankerHead.source="nn.head",this.bankerHead.width=this.bankerHead.height=55,this.bankerName.text="萌萌哒",this.labBankerMoney.text=QuickManage.moneyStr(8888888e4),this.isSysBanker=!0,this.labBankerLastNum.text="剩余"+parseInt(t.num)+"次",this.lastGameBankerNum=t.num,this.isBanker=!1,this.labBankerVip.text="v10"):(t.id==GlobalData.openid+"@"+GlobalData.platform?(this.isBanker=!0,this.labBankerRank.text=""):(this.isApplyBanker?t.pos<this.curBankerRanking&&(this.curBankerRanking--,this.labBankerRank.text="排庄"+this.curBankerRanking):(this.labBankerRank.text="",this.btnDownBanker.visible=!1,this.btnUpBanker.visible=!0),this.isBanker=!1),"萌萌哒"!=this.bankerName.text&&(this.isFirstSetBanker||PanelManage.chat.sendGameChat(this.bankerName.text+"下庄了")),this.bankerHead.source=t.headurl,this.bankerHead.width=this.bankerHead.height=55,this.bankerName.text=t.nick,this.labBankerMoney.text=QuickManage.moneyStr(t.gold),this.labBankerLastNum.text="剩余"+parseInt(t.num)+"次",this.lastGameBankerNum=t.num,this.isSysBanker=!1,this.labBankerVip.text="v"+t.vip,this.isFirstSetBanker||PanelManage.chat.sendGameChat(this.bankerName.text+"上庄了")),this.isFirstSetBanker=!1
},e.prototype.setHistory=function(){for(var t=0;10>t;t++){this["grpHistory"+t].visible=!1;for(var e=0;4>e;e++)this["grpHistory"+e+"_"+t].source=""}},e.prototype.updateGold=function(){Net.send(Protocol.NIUNIU_GET_GOLD,{},this.getGoldCallback.bind(this))},e.prototype.getGoldCallback=function(t){200==t.code&&(GlobalData.user.gold=t.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)))},e.prototype.showGameTips=function(t){this.grpTipsInfo.source=NiuNiuUtil.getInstance().getMsgSource(t),this.grpTips.visible=!0,this.grpTipsbg.alpha=0,this.grpTipsInfo.x=640,MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(t)),egret.Tween.get(this.grpTipsbg).to({alpha:1},400).wait(400).call(function(){egret.Tween.get(this).to({alpha:0},400)},this.grpTipsbg),egret.Tween.get(this.grpTipsInfo).to({x:0},400).wait(400).call(function(){egret.Tween.get(this).to({x:-640},400)},this.grpTipsInfo)},e.prototype.showCoins=function(t,e){var i=!1;MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(8),.5);var n=NiuNiuUtil.getInstance().getCoinsPos(e),a=NiuNiuUtil.getInstance().coinsType(t);this.coinsNumArr[e]<50?(this.coinsNumArr[e]=parseInt(this.coinsNumArr[e])+a.length,i=!1):i=!0;for(var s=0;s<a.length;s++){var o=n.x+50*Math.random(),r=n.y+50*Math.random();this.grpCoins.addChild(a[s]),egret.Tween.get(a[s]).to({x:o,y:r},200).call(function(){this[0]&&this[1].parent.removeChild(this[1])},[i,a[s]])}},e.prototype.cardEffect=function(){this.isCardEffectShow=!0,this.flyIntval=setInterval(this.playCardFly.bind(this),200)},e.prototype.playCardFly=function(){var t=this["grpCard_"+this.flyIndex0+"_"+this.flyIndex1];t.source="nn.card_100",t.x=296,t.y=340,t.anchorOffsetX=t.width/2,t.x+=t.width/2;var e=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},300),4==this.flyIndex1?3==this.flyIndex0?(this.flyIndex0=0,this.flyIndex1=0,clearInterval(this.flyIntval),this.flyBankerIndex=0,this.flyIntval=setInterval(this.bankerCardFly.bind(this),200)):(this.flyIndex1=0,this.flyIndex0++):this.flyIndex1++},e.prototype.bankerCardFly=function(){if(5==this.flyBankerIndex)return this.flyBankerIndex=0,clearInterval(this.flyIntval),void(this.interval=setInterval(this.playerCardRotation.bind(this),800));var t=this["bankerCard_"+this.flyBankerIndex];t.x=296,t.y=340,t.source="nn.card_100",t.anchorOffsetX=t.width/2,t.x+=t.width/2,this.orginBankerCardPos;var e=this.orginBankerCardPos[this.flyBankerIndex];MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},400),this.flyBankerIndex++},e.prototype.playerCardRotation=function(){if(4==this.effectPlayerIndex)return clearInterval(this.interval),this.effectPlayerIndex=0,void this.bankerCardRotation();MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes,e=this.effectPlayerIndex,i=0;5>i;i++){var n=this["grpCard_"+e+"_"+i];n.source="nn.card_100",egret.Tween.get(n).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[n,t[e+1].value[i]])}if(this["labCardType"+e].source=NiuNiuUtil.getInstance().getCardType(t[e+1].type),MusicManage.playMuisc(NiuNiuUtil.getInstance().getCardMusicType(t[e+1].type)),this["labCardType"+e].visible=!0,this["labCardType"+e].width=98,this["labCardType"+e].height=44,this["labCardResult"+e].text="",0!=t[e+1].type)for(var i=0;5>i;i++){var n=this["grpCard_"+e+"_"+i];3>i?egret.Tween.get(n).wait(700).to({x:n.x-10},100):egret.Tween.get(n).wait(700).to({x:n.x+10},100)}this.effectPlayerIndex++},e.prototype.bankerCardRotation=function(){MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes[0],e=0;5>e;e++){var i=this["bankerCard_"+e];i.source="nn.card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]])}if(this.labCardTypeBanker.source=NiuNiuUtil.getInstance().getCardType(t.type),MusicManage.playMuisc(NiuNiuUtil.getInstance().getCardMusicType(t.type)),this.labCardTypeBanker.visible=!0,this.labCardTypeBanker.width=98,this.labCardTypeBanker.height=44,0!=t.type)for(var e=0;5>e;e++){var i=this["bankerCard_"+e];3>e?egret.Tween.get(i).wait(700).to({x:i.x-10},100):egret.Tween.get(i).wait(700).to({x:i.x+10},100)}this.interval=setInterval(this.blinkEffect.bind(this),500)},e.prototype.blinkEffect=function(){clearInterval(this.interval);for(var t=this.cardResult.result,e=0;4>e;e++)1==t[e]&&(this["effectSelect"+e].visible=!0,EffectUtils.blinkEffect(this["effectSelect"+e],200));this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval);var t=this.cardResult,e=!1;1==t.result[0]&&1==t.result[1]&&1==t.result[2]&&1==t.result[3]&&(this.showGameTips(5),e=!0),0==t.result[0]&&0==t.result[1]&&0==t.result[2]&&0==t.result[3]&&(this.showGameTips(4),e=!0),e?this.interval=setInterval(this.showGameResult.bind(this),1e3):this.showGameResult()},e.prototype.showGameResult=function(){clearInterval(this.interval),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CHAT_GAME_RESULT));var t=this.cardResult;this.grpResult.visible=!0,null!=this.maxUserData?(this.grpMax.visible=!0,this.grpMaxHead.source=this.maxUserData.headurl,this.grpMaxHead.width=this.grpMaxHead.height=70,this.grpMaxGold.text="赢 "+QuickManage.moneyStr(this.maxUserData.gold),this.grpMaxName.text=this.maxUserData.name,this.maxUserData.name==GlobalData.user.nickname&&MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(1))):this.grpMax.visible=!1,this.grpBankerHead.source=this.bankerHead.source,this.grpBankerName.text=this.bankerName.text,this.grpBankerBeishu.text=t.pokes[0].num+"倍",this.grpBankerType.source="",this.labelBankerType.text=NiuNiuUtil.getInstance().getCardType2(t.pokes[0].type),parseInt(t.bankerWin)<0?(this.grpBankerGold.text="输 "+QuickManage.moneyStr(Math.abs(t.bankerWin)),PanelManage.chat.sendGameChat("庄家输了 "+QuickManage.moneyStr(Math.abs(t.bankerWin)))):(this.grpBankerGold.text="赢 "+QuickManage.moneyStr(t.bankerWin),0!=t.bankerWin&&PanelManage.chat.sendGameChat("庄家赢了 "+QuickManage.moneyStr(Math.abs(t.bankerWin))));for(var e=0,i=0;4>i;i++){var n=parseInt(t.pokes[i+1].num);this["resultType"+i].text=NiuNiuUtil.getInstance().getCardType2(t.pokes[i+1].type),this["labResult0_"+i].text=n+"倍",this["labResult1_"+i].text=QuickManage.moneyStr(this.selfbetsNum[i+1]);var a=this.selfbetsNum[i+1];if(0!=a)if(this["labResult2_"+i].text="",1==t.result[i]){var s=0;s=this.isBanker?parseInt(t.pokes[0].num):parseInt(t.pokes[i+1].num),e+=parseInt(a)*(s+1)}else{var o=0;o=this.isBanker?parseInt(t.pokes[i+1].num):parseInt(t.pokes[0].num),1==o||(e-=parseInt(a)*(o-1))}else this["labResult2_"+i].text=0}for(var r=0,i=1;5>i;i++)r+=this.selfbetsNum[i];(e>0||0==e)&&(e*=1-this.curRate),e-=r,e>0||0==e?this.labResultValue.text="结算："+QuickManage.moneyStr(e):this.labResultValue.text="结算：-"+QuickManage.moneyStr(Math.abs(e)),e>0&&EffectUtils.coinsFly(this,320,500),this.updateGold(),this.isSysBanker||(this.labBankerMoney.text=QuickManage.moneyStr(this.banker_total_gold)),this.setHandsel(this.totalCaijin),e>0&&this.resultCaijin>0?this.interval=setInterval(this.caijinShow.bind(this),3e3):0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3)},e.prototype.boomShow=function(){this.grpCaijin.visible=!1,this.imgBaoZhuang.visible=!0,clearInterval(this.interval),this.interval=setInterval(this.setStartBet.bind(this),4e3)},e.prototype.caijinShow=function(t){PanelManage.chat.sendGameChat("恭喜你获得彩金 "+this.resultCaijin),this.grpCaijinLabel.text="恭喜你获得"+this.resultCaijin+"彩金",this.grpCaijin.visible=!0,clearInterval(this.interval),0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3)},e.prototype.setStartBet=function(){this.resetGame(),this.grpResult.visible=!1,clearInterval(this.interval),this.showGameTips(2),this.grpCountdown.visible=!0,this.isSysBanker||this.isChangeBanker||(this.lastGameBankerNum--,this.labBankerLastNum.text="剩余"+Math.round(this.lastGameBankerNum)+"次"),this.isChangeBanker&&(this.isChangeBanker=!1,this.setBankerInfo(this.changeBankerObj),this.grpBankerList.visible=!1)},e.prototype.resetGame=function(){for(var t=0;4>t;t++)this["labBetsPool"+t].text="0",this["labBetsSelf"+t].text="0",egret.Tween.removeTweens(this["effectSelect"+t]);for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",egret.Tween.removeTweens(e)}for(var i=0;4>i;i++){this["labCardResult"+i].text="",this["labCardType"+i].visible=!1,this.labCardTypeBanker.visible=!1;for(var n=0;5>n;n++){var e=this["grpCard_"+i+"_"+n];e.source="",egret.Tween.removeTweens(e)}}for(this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0};this.grpCoins.numChildren>0;)this.grpCoins.removeChildAt(0);for(var t=0;4>t;t++)this["effectSelect"+t].visible=!1;for(var a=0;4>a;a++)this["labTipsClick"+a].visible=!0;this.isCanBets=!0,this.isBets=!1,this.imgBaoZhuang.visible=!1,this.resultCaijin=0,this.grpCaijin.visible=!1,this.isCoinsReturn=!0,this.isCardEffectShow=!1},e.prototype.onTouchCardType=function(){this.grpSecondPanel.visible=!0,this.grpCardType.visible=!0,this.grpHistory.visible=!1},e.prototype.onTouchCardHistory=function(){Net.send(Protocol.NIUNIU_GAME_RECORD,{},this.getHistoryCallback.bind(this))},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],a=0;4>a;a++)this["grpHistroy"+a+"_"+i].source=1==n[a]?"nn.a8":"nn.a7"}else this["grpHistroy"+i].visible=!1;this.grpSecondPanel.visible=!0,this.grpCardType.visible=!1,this.grpHistory.visible=!0},e.prototype.onTouchCloseSecondPanel=function(){this.grpSecondPanel.visible=!1},e.prototype.onTouchRedBox=function(){PanelManage.openRedBox(2,1)},e.prototype.operateBoxComplete=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))},e.prototype.updateDataGold=function(){EffectUtils.numEffect(this.titleLabMoney,parseInt(GlobalData.user.gold))},e.prototype.dispose=function(){MusicManage.closeMuisc(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(NiuNiuPanel.prototype,"NiuNiuPanel",["fany.IDispose"]);var NiuNiuUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 5*Math.pow(10,7);case 5:return Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="nn.d2";break;case 3:e="nn.d3";break;case 4:e="nn.d4";break;case 5:e="nn.d5"}return e},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=195,e.y=523;break;case 2:e.x=383,e.y=523;break;case 3:e.x=195,e.y=633;break;case 4:e.x=383,e.y=633}return e},t.prototype.getCardType2=function(t){switch(t){case 0:return"无牛";case 1:return"牛一";case 2:return"牛二";case 3:return"牛三";case 4:return"牛四";case 5:return"牛五";case 6:return"牛六";case 7:return"牛七";case 8:return"牛八";case 9:return"牛九";case 10:return"牛牛";case 11:return"四炸";case 12:return"五花牛";case 13:return"五小牛"}},t.prototype.getCardType=function(t){switch(t){case 0:return"nn.n1";case 1:return"nn.n2";case 2:return"nn.n3";case 3:return"nn.n4";case 4:return"nn.n5";case 5:return"nn.n6";case 6:return"nn.n7";case 7:return"nn.n8";case 8:return"nn.n9";case 9:return"nn.n10";case 10:return"nn.n11";case 11:return"nn.n13";case 12:return"nn.n14";case 13:return"nn.n12"}},t.prototype.getCardMusicType=function(t){switch(t){case 0:return"nn.niu0";case 1:return"nn.niu1";case 2:return"nn.niu2";case 3:return"nn.niu3";case 4:return"nn.niu4";case 5:return"nn.niu5";case 6:return"nn.niu6";case 7:return"nn.niu7";case 8:return"nn.niu8";case 9:return"nn.niu9";case 10:return"nn.niuniu";case 11:return"nn.playNiuZhadan";case 12:return"nn.playNiu5hua";case 13:return"nn.playNiuXiao5"}},t.prototype.coinsType=function(t){var e=[],i=0,n="";t=Math.round(t/1e4),t>0&&10>t?(i=t,n="nn.b1a"):t>9&&100>t?(i=t/10,n="nn.b2a"):t>99&&1e3>t?(i=t/100,n="nn.b3a"):t>999&&5e3>t?(i=t/1e3,n="nn.b4a"):t>4999&&1e4>t?(i=t/5e3,n="nn.b5a"):(i=t/1e4,n="nn.b6a");for(var a=0;a<Math.round(i);a++){var s=new eui.Image(n),o=this.coinPos();s.x=o.x,s.y=o.y,e.push(s)}return e},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"nn.jackpot";case 2:return"nn.start";case 3:return"nn.end";case 4:return"nn.ts";case 5:return"nn.tp";case 6:return"nn.dealCard";case 7:return"nn.openCard";case 8:return"nn.stake"}},t}();NiuNiuUtil.instance=null,__reflect(NiuNiuUtil.prototype,"NiuNiuUtil");var GameResultPanel=function(t){function e(e,i){var n=t.call(this)||this;return n.data=null,n.cb=null,n.tt=0,n.skinName="resource/skins/other/GameResultPanelSkin.exml",n.data=e,n.cb=i,n}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.bg.source=GlobalData.cdnResUrl+"resource/assets/noload/noloding.gameresult.png",this.imgGold.source=GlobalData.cdnResUrl+"resource/assets/noload/noloding.gamegold.png",this.guang.source=GlobalData.cdnResUrl+"resource/assets/noload/noloading.guang.png",this.tt=setTimeout(this.dispose.bind(this),3e3),this.guang.anchorOffsetX=250,this.guang.anchorOffsetY=250,this.guang.x+=250,this.guang.y+=250,TimerManager.getInstance().setFrame("GameResultPanel.gogo",this.gogo.bind(this),this),this.setData(),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.gogo=function(){this.guang.rotation+=5},e.prototype.setData=function(){var t=this.data;this.imgResult.source=t.res,this.txtYing.text="+"+t.win,this.txtCaiJing.text="本局获得彩金为: "+t.caijing,""!=t.max.name?(this.txtTips.visible=!1,this.maxWin.visible=!0,this.txtVip.text="VIP"+t.max.vip,this.txtName.text=t.max.name,this.txtMaxGold.text=t.max.maxGold,this.head.source=t.max.headurl):(this.txtTips.visible=!0,this.maxWin.visible=!1),parseInt(t.win+"")>0?(MusicManage.playMuisc("fruit_win"),this.imgTishi.source=GlobalData.cdnResUrl+"resource/assets/noload/noloading.txt2.png"):(MusicManage.playMuisc("fruit_fail"),this.imgTishi.source=GlobalData.cdnResUrl+"resource/assets/noload/noloading.txt3.png")},e.prototype.dispose=function(){this.cb&&this.cb(),TimerManager.getInstance().remove("GameResultPanel.gogo"),clearTimeout(this.tt),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(GameResultPanel.prototype,"GameResultPanel",["fany.IDispose"]);var NoticePanel=function(t){function e(e){var i=t.call(this)||this;return i.gudingGroup=e,i.createNotice(),TimerManager.getInstance().setFrame("NoticePanel.noticeMoveHandler",i.noticeMoveHandler.bind(i),i),i}return __extends(e,t),e.prototype.gonggao=function(t){""!=t.msg.name?this.noticeData.push("<font color=#00e500>["+t.msg.name+']:</font><font color="#ffffff" >'+t.msg.msg+"</font>"):this.noticeData.push(ChatManage.getInstance().transition(t.msg.msg,!1))},e.prototype.setGuding=function(){this.gudingGroup=new eui.Group,this.gudingGroup.x=0,this.gudingGroup.y=118,this.addChild(this.gudingGroup);var t=new eui.Image("gonggao.bgg");t.touchEnabled=!1,this.gudingGroup.addChild(t);var e=new eui.Label;e.height=26,e.width=700,e.size=22,e.textColor=GameConfig.TextColors.milkWhite,e.text="欢迎进入游戏，全新上线欢乐小丑和老虎机，欢迎体验！",this.gudingGroup.addChild(e)},e.prototype.noticeMoveHandler=function(){this.label_notice.x<-600?(this.setNotice(),this.label_notice.x=600):this.label_notice.x-=4},e.prototype.setNotice=function(){var t="";0==this.noticeData.length?(egret.Tween.get(this.bgg).to({alpha:0},800),this.gudingGroup.visible=!0,t=""):(egret.Tween.get(this.bgg).to({alpha:1},800),this.gudingGroup.visible=!1,t=this.noticeData.shift()),this.label_notice.textFlow=(new egret.HtmlTextParser).parser(t)},e.prototype.createNotice=function(){this.noticeData=[],this.bgg=new eui.Image("gonggao.bgg"),this.bgg.touchEnabled=!1,this.bgg.x=0,this.bgg.y=118,this.bgg.alpha=0,this.addChild(this.bgg),this.label_notice=new eui.Label,this.label_notice.height=26,this.label_notice.width=700,this.label_notice.size=22,this.label_notice.x=75,this.label_notice.y=124,this.label_notice.textColor=GameConfig.TextColors.milkWhite,this.label_notice.text="",this.addChild(this.label_notice),this.label_notice.touchEnabled=!1,this.maskNotice=new eui.Rect,this.maskNotice.width=619,this.maskNotice.height=28,this.maskNotice.x=75,this.maskNotice.y=124,this.addChild(this.maskNotice),this.label_notice.mask=this.maskNotice,this.maskNotice.touchEnabled=!1},e.prototype.dispose=function(){TimerManager.getInstance().remove("NoticePanel.noticeMoveHandler"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(egret.Sprite);__reflect(NoticePanel.prototype,"NoticePanel");var ResLoading=function(t){function e(){var e=t.call(this)||this;return e.r=null,e.skinName="resource/skins/other/ResLoadingPanelSkin.exml",e}return __extends(e,t),e.prototype.init=function(t){switch(this.res=t,t){case"jinsha":GlobalData.isLodingComJinSha?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"jinhua":GlobalData.isLodingComJinHua?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"niuniu":GlobalData.isLodingComNiuNiu?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"blackjack":GlobalData.isLodingComBlackJack?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"pk":GlobalData.isLodingComPK?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"ddz":GlobalData.isLodingComDDZ?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"clown":GlobalData.isLodingComClown?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"fruit":GlobalData.isLodingComFruit?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t))}},e.prototype.netcallback=function(t){this.r=t,this.openPanel(),this.dispose()},e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.txtStr.text="正在加载界面资源...",this.zhuan.anchorOffsetX=25,this.zhuan.anchorOffsetY=25,EnterFrameManage.add(this.gogo.bind(this),"ResLoading.gogo"),EventManage.addOnceEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.gogo=function(){this.zhuan.rotation+=8},e.prototype.setProgress=function(t,e){this.txtStr.text="正在加载资源...",this.txtTips.text=Math.floor(t/e*100)+"%"},e.prototype.callback=function(t){switch(this.txtStr.text="正在加载数据...",t){case"jinsha":Net.send(Protocol.JOIN_JINSHA_GAME,{},this.netcallback.bind(this));break;case"jinhua":Net.send(Protocol.JOIN_GOLDEN_GAME,{},this.netcallback.bind(this));break;case"niuniu":Net.send(Protocol.JOIN_NIUNIU_GAME,{},this.netcallback.bind(this));break;case"blackjack":Net.send(Protocol.BLACK_JACK_JOIN,{},this.netcallback.bind(this));break;case"pk":this.netcallback({code:"200"});break;case"ddz":this.netcallback({code:"200"});break;case"clown":Net.send(Protocol.CLOWN_CLOWNHANDLER_JOINGAME,{},this.netcallback.bind(this));break;case"fruit":Net.send(Protocol.FRUIT_JOIN_GAME,{},this.netcallback.bind(this))}},e.prototype.openPanel=function(){if(null==this.r)return void TipsManage.showTips("数据异常！请重新操作！");if(200!=this.r.code)return void TipsManage.showTips("数据异常！请重新操作！"+JSON.stringify(this.r));switch(this.res){case"jinsha":PanelManage.openJinSha(this.r),GlobalData.isLodingComJinSha=!0;break;case"jinhua":PanelManage.openZhaJinHua(this.r),GlobalData.isLodingComJinHua=!0;break;case"niuniu":PanelManage.openNiuNiu(this.r),GlobalData.isLodingComNiuNiu=!0;break;case"blackjack":PanelManage.openBlackJack(this.r),GlobalData.isLodingComBlackJack=!0;break;case"pk":PanelManage.openPk(this.r),GlobalData.isLodingComPK=!0;break;case"ddz":MusicManage.closeBgMuisc(),MusicManage.playGameBgMuisc("hallBgm",.5,-1),PanelManage.openDdz(this.r),GlobalData.isLodingComDDZ=!0;break;case"clown":PanelManage.openClown(this.r),GlobalData.isLodingComClown=!0;break;case"fruit":PanelManage.openFruit(this.r),GlobalData.isLodingComFruit=!0}},e.prototype.dispose=function(){EnterFrameManage.remove("ResLoading.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ResLoading.prototype,"ResLoading",["fany.IDispose"]);var ResLoading2=function(t){function e(e){var i=t.call(this)||this;return i.skinName="resource/skins/other/ResLoadingPanelSkin.exml",i.param=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.txtStr.text="正在加载界面资源...",this.zhuan.anchorOffsetX=25,this.zhuan.anchorOffsetY=25,TimerManager.getInstance().setFrame("ResLoading.gogo",this.gogo.bind(this),this),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UI_LOADING_COM,this.dispose.bind(this)),EventManage.addEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose2.bind(this))},e.prototype.setProgress=function(t,e){this.txtTips.text=Math.floor(t/e*100)+"%"},e.prototype.gogo=function(){this.zhuan.rotation+=8},e.prototype.dispose2=function(){this.visible=!1},e.prototype.dispose=function(){TimerManager.getInstance().remove("ResLoading.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren(),PanelManage.resloading2=null},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ResLoading2.prototype,"ResLoading2",["fany.IDispose"]);var ServerErrorPanel=function(t){function e(e){var i=t.call(this)||this;return i.skinName="resource/skins/other/ServerErrorPanelSkin.exml",i.notice=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){egret.Tween.removeAllTweens(),this.setTouchEnabled(),this.txtNotice.text=this.notice,EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.btnSureHandle.bind(this))},e.prototype.btnSureHandle=function(){this.dispose(),window.location.reload()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ServerErrorPanel.prototype,"ServerErrorPanel",["fany.IDispose"]);var TipsShowPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/other/TipsShowPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.touchChildren=!1,this.touchEnabled=!1},e.prototype.setStr=function(t){this.txtNotice.text=t},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(TipsShowPanel.prototype,"TipsShowPanel",["fany.IDispose"]);var PkPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.isCanTouch=!0,i.intVal=-1,i.isJoin=!1,i.skinName="resource/skins/pk/PkSkin.exml",i}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnType0,egret.TouchEvent.TOUCH_TAP,this.onTouchType.bind(this,0)),EventManage.addButtonEvent(this,this.btnType1,egret.TouchEvent.TOUCH_TAP,this.onTouchType.bind(this,1)),EventManage.addButtonEvent(this,this.btnType2,egret.TouchEvent.TOUCH_TAP,this.onTouchType.bind(this,2)),EventManage.addButtonEvent(this,this.btnJoin,egret.TouchEvent.TOUCH_TAP,this.onTouchJoin.bind(this)),EventManage.addButtonEvent(this,this.btnCreate,egret.TouchEvent.TOUCH_TAP,this.onTouchCreate.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.overToEnter.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.exit.bind(this)),this.initEnter()},e.prototype.onTouchType=function(t){this.isCanTouch&&(Net.send(Protocol.PK_SETHAND,{type:t},this.typeCallback.bind(this)),this.isCanTouch=!1)},e.prototype.typeCallback=function(t){200==t.code?(this.btnType0.visible=!1,this.btnType1.visible=!1,this.btnType2.visible=!1,TipsManage.showTips("请等待对方出拳！")):TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.isCanTouch=!0},e.prototype.onTouchJoin=function(){var t=this.editRoom.text;if(""==t)return void TipsManage.showTips("抱歉，房间号不能为空！");var e=this.editPwdJoin.text;return""==e?void TipsManage.showTips("抱歉，密码不能为空！"):void Net.send(Protocol.PK_JOIN,{room:t,password:e},this.joinCallback.bind(this))},e.prototype.joinCallback=function(t){200==t.code?(this.isJoin=!0,this.initGameOther(t.data)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchCreate=function(){var t=this.editMoney.text;if(""==t)return void TipsManage.showTips("抱歉，金额不能为空！");var e=this.editPwd.text;return""==e?void TipsManage.showTips("抱歉，密码不能为空！"):void Net.send(Protocol.PK_CREATE,{money:1e4*parseInt(t),password:e},this.createCallback.bind(this))},e.prototype.createCallback=function(t){200==t.code?(this.isJoin=!1,this.initGame(t.data)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.initEnter=function(){this.grpEnter.visible=!0,this.grpGame.visible=!1,this.grpOver.visible=!1,this.editMoney.text="",this.editPwd.text="",this.editRoom.text="",this.editPwdJoin.text="",this.labPwd.text=""},e.prototype.initGame=function(t){this.btnType0.visible=!0,this.btnType1.visible=!0,this.btnType2.visible=!0,this.grpEnter.visible=!1,this.grpGame.visible=!0,this.grpOver.visible=!1,this.otherHead.source="",this.labOtherName.text="",this.labMoney.text="金额： "+QuickManage.moneyStr(t.money),this.curMoney=t.money,this.labRoom.text="房间号："+t.room,this.labPwd.text="密码："+t.password,this.setOtherReslut(-1),this.setSelfReslut(-1)},e.prototype.initGameOther=function(t){this.btnType0.visible=!0,this.btnType1.visible=!0,this.btnType2.visible=!0,this.grpEnter.visible=!1,this.grpGame.visible=!0,this.grpOver.visible=!1,this.otherHead.source="",this.labOtherName.text="",this.labMoney.text="金额： "+QuickManage.moneyStr(t.money),this.curMoney=t.money,this.labRoom.text="",this.labPwd.text="",this.setOtherReslut(-1),this.setSelfReslut(-1)},e.prototype.messageOn=function(t){switch(t.msg.type){case 1:this.setOtherPeople(t.msg.data);break;case 2:this.setResult(t.msg);break;case 3:this.setOtherLeave(t.msg)}},e.prototype.setOtherLeave=function(t){this.labOtherName.text="",this.otherHead.source=""},e.prototype.setResult=function(t){this.isJoin?this.setJoinResult(t):this.setCreateResult(t),this.intVal=setInterval(this.setOver.bind(this),4e3)},e.prototype.setJoinResult=function(t){this.setSelfReslut(t.hands[1]),this.setOtherReslut(t.hands[0]),1==t.result?(this.labOverTitle.text="恭喜 您赢了"+QuickManage.moneyStr(this.curMoney),GlobalData.user.gold=parseInt(GlobalData.user.gold)+parseInt(this.curMoney)+""):0==t.result?(this.labOverTitle.text="非常遗憾 您输了"+QuickManage.moneyStr(this.curMoney),GlobalData.user.gold=parseInt(GlobalData.user.gold)-parseInt(this.curMoney)+""):this.labOverTitle.text="平局",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))},e.prototype.setCreateResult=function(t){this.setSelfReslut(t.hands[0]),this.setOtherReslut(t.hands[1]),0==t.result?(this.labOverTitle.text="恭喜 您赢了"+QuickManage.moneyStr(this.curMoney),GlobalData.user.gold=parseInt(GlobalData.user.gold)+parseInt(this.curMoney)+""):1==t.result?(this.labOverTitle.text="非常遗憾 您输了"+QuickManage.moneyStr(this.curMoney),GlobalData.user.gold=parseInt(GlobalData.user.gold)-parseInt(this.curMoney)+""):this.labOverTitle.text="平局",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))},e.prototype.setOver=function(){clearInterval(this.intVal),this.grpEnter.visible=!1,this.grpGame.visible=!1,this.grpOver.visible=!0},e.prototype.setSelfReslut=function(t){for(var e=0;3>e;e++)t==e?this["resultSelf"+e].visible=!0:this["resultSelf"+e].visible=!1},e.prototype.setOtherReslut=function(t){for(var e=0;3>e;e++)t==e?this["resultOther"+e].visible=!0:this["resultOther"+e].visible=!1},e.prototype.setOtherPeople=function(t){if(1==t.lenght)return this.labOtherName.text="",void(this.otherHead.source="");for(var e=0;e<t.length;e++){var i=t[e];GlobalData.user.nickname==i.name||(this.labOtherName.text=i.name,this.otherHead.source=i.headurl,this.otherHead.width=this.otherHead.height=74)}},e.prototype.overToEnter=function(){this.initEnter()},e.prototype.exit=function(){Net.send(Protocol.PK_LEAVE,{},this.exitCallback.bind(this))},e.prototype.exitCallback=function(t){200==t.code&&this.dispose()},e.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(PkPanel.prototype,"PkPanel",["fany.IDispose"]);var RankItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rank/RankItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.head.source=t.headurl,t.rank>3?(this.txtRank.visible=!0,this.txtRank.text=t.rank,this.num.visible=!1):(this.num.source="rank.num"+t.rank,this.num.visible=!0),this.txtGold.text=QuickManage.moneyStr(t.gold),this.txtName.text=t.name,this.txtVip.text="v"+t.vip},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(RankItemPanel.prototype,"RankItemPanel",["fany.IDispose"]);var RankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rank/RankPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.GET_RANK_LIST,{},this.ranklistcallback.bind(this)),EventManage.addButtonEvent(this,this.btnCaifu,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,1)),EventManage.addButtonEvent(this,this.btnShu,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,2)),EventManage.addButtonEvent(this,this.btnYing,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,3))},e.prototype.clickBtn=function(t){switch(this.btnShu.source="rank.btnShuan",this.btnYing.source="rank.btnYingan",this.btnCaifu.source="rank.btnCaifuan",t){case 1:this.btnCaifu.source="rank.btnCaifu",Net.send(Protocol.GET_RANK_LIST,{},this.ranklistcallback.bind(this));break;case 2:this.btnShu.source="rank.btnShu",Net.send(Protocol.GET_RANK_LIST2,{win:"0"},this.ranklistcallback.bind(this));break;case 3:this.btnYing.source="rank.btnYing",Net.send(Protocol.GET_RANK_LIST2,{win:"1"},this.ranklistcallback.bind(this))}},e.prototype.ranklistcallback=function(t){if(200==t.code){this.clearItems();for(var e=t.list,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("RankItemPanel");a.y=100*n,this.itemGroup.addChild(a),a.setData({name:e[n].name,vip:e[n].vip,gold:e[n].gold,rank:n+1,headurl:e[n].headurl}),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("RankItemPanel",this.arr[e]));
this.arr=[]},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(RankPanel.prototype,"RankPanel",["fany.IDispose"]);var RedBoxPanel=function(t){function e(e,i,n){var a=t.call(this)||this;return a.game=-1,a.type=-1,a.data=null,a.isTouch=!1,a.level=0,a.levelArr=[1,5,10],a.select=0,a.selectArr=[1e3,2e3,3e3,5e3],a.rid="",a.intval=-1,a.sendTotalGold=0,a.skinName="resource/skins/other/RedBoxPanelSkin.exml",a.game=e,a.type=i,a.data=n,a}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnPlus,egret.TouchEvent.TOUCH_TAP,this.onTouchPlus.bind(this)),EventManage.addButtonEvent(this,this.btnReduce,egret.TouchEvent.TOUCH_TAP,this.onTouchReduce.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.onTouchSureSend.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.imgRedBox,egret.TouchEvent.TOUCH_TAP,this.onTouchRedBox.bind(this));for(var t=0;4>t;t++)EventManage.addEvent(this,this["grpMoney"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchMoney.bind(this,t));if(this.level=0,this.labNum.text=this.levelArr[this.level]+"份",this.select=0,this["imgSelect"+this.select].source="c.labbg1",this.labName.text="",this.labInfo.text="",this.labName.touchEnabled=!1,this.labInfo.touchEnabled=!1,0==this.type?(this.grpRobRed.visible=!0,this.grpSendRed.visible=!1,this.labTips.text="",this.intval=setInterval(this.dispose.bind(this),5e3)):(this.grpSendRed.visible=!0,this.grpRobRed.visible=!1),null!=this.data){if(this.data.name==GlobalData.user.nickname)return;this.rid=this.data.rid,this.labName.text="土豪"+this.data.name,this.labInfo.text="发了"+QuickManage.moneyStr(this.data.total)+"的红包"}},e.prototype.setRid=function(t){t.name!=GlobalData.user.nickname&&(this.rid=t.rid,this.labName.text="土豪"+t.name,this.labInfo.text="发了"+QuickManage.moneyStr(t.total)+"的红包")},e.prototype.onTouchRedBox=function(){this.isTouch||(this.isTouch=!0,Net.send(Protocol.GAME_GET_REDBOX,{rid:this.rid},this.getRedBoxCallback.bind(this)))},e.prototype.getRedBoxCallback=function(t){if(200==t.code){var e="";0==t.gold?e="抱歉您这次没有抢到红包！":(e="恭喜您抢到"+QuickManage.moneyStr(t.gold),PanelManage.hall.updateGold(),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.OPERTE_REDBOX_COMPLETE))),this.labTips.text=e}else TipsManage.showTips(t.msg);clearInterval(this.intval),this.intval=setInterval(this.dispose.bind(this),3e3)},e.prototype.onTouchPlus=function(){2!=this.level&&(this.level++,this.labNum.text=this.levelArr[this.level]+"份")},e.prototype.onTouchReduce=function(){0!=this.level&&(this.level--,this.labNum.text=this.levelArr[this.level]+"份")},e.prototype.onTouchMoney=function(t){this.select!=t&&(this["imgSelect"+this.select].source="c.labbg0",this.select=t,this["imgSelect"+this.select].source="c.labbg1")},e.prototype.onTouchSureSend=function(){this.sendTotalGold=1e4*this.selectArr[this.select];var t=this.levelArr[this.level];0==this.game?Net.send(Protocol.GAME_ANIMAL_REDBOX,{total:this.sendTotalGold,count:t},this.sendCallback.bind(this)):1==this.game?Net.send(Protocol.GAME_GOLD_REDBOX,{total:this.sendTotalGold,count:t},this.sendCallback.bind(this)):2==this.game?Net.send(Protocol.GAME_NIUNIU_REDBOX,{total:this.sendTotalGold,count:t},this.sendCallback.bind(this)):3==this.game&&Net.send(Protocol.GAME_CLOWN_REDBOX,{total:this.sendTotalGold,count:t},this.sendCallback.bind(this))},e.prototype.sendCallback=function(t){200==t.code?(GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.sendTotalGold+"",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.OPERTE_REDBOX_COMPLETE)),TipsManage.showTips("发送红包成功!"),this.dispose()):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){clearInterval(this.intval),EventManage.removeEvent(this),this.visible=!1,this.labTips.text="",this.isTouch=!1,PopUpManager.removePopUp(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(RedBoxPanel.prototype,"RedBoxPanel",["fany.IDispose"]);var SetPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/set/SetPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.btnCloseFn.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnOpenVoice,egret.TouchEvent.TOUCH_TAP,this.onTouchVoiceOpen.bind(this)),EventManage.addButtonEvent(this,this.btnCloseVoice,egret.TouchEvent.TOUCH_TAP,this.onTouchVoiceClose.bind(this)),EventManage.addButtonEvent(this,this.btnSubmit,egret.TouchEvent.TOUCH_TAP,this.onTouchSubmitAdvice.bind(this)),EventManage.addEvent(this,this.txtVerson,egret.TouchEvent.TOUCH_TAP,this.onTouchtxtVerson.bind(this)),this.txtVerson.text="V:"+GlobalData.version,GlobalData.isMusic?(this.btnOpenVoice.visible=!1,this.btnCloseVoice.visible=!0):(this.btnOpenVoice.visible=!0,this.btnCloseVoice.visible=!1)},e.prototype.onTouchtxtVerson=function(){localStorage.clear()},e.prototype.onTouchVoiceOpen=function(){this.btnOpenVoice.visible=!1,this.btnCloseVoice.visible=!0,GlobalData.isMusic=!0,MusicManage.playBgMuisc()},e.prototype.onTouchVoiceClose=function(){this.btnOpenVoice.visible=!0,this.btnCloseVoice.visible=!1,GlobalData.isMusic=!1,MusicManage.closeBgMuisc(),MusicManage.closeMuisc()},e.prototype.onTouchSubmitAdvice=function(){""==this.labelAdvice.text?TipsManage.showTips("提交的文字不能为空！"):Net.send(Protocol.HALL_SET_PROPOSAL,{proposal:this.labelAdvice.text},this.adviceCB.bind(this))},e.prototype.adviceCB=function(t){200==t.code?TipsManage.showTips("感谢您的建议！"):TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.labelAdvice.text=""},e.prototype.btnCloseFn=function(){this.dispose()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(SetPanel.prototype,"SetPanel",["fany.IDispose"]);var ShopItemPanel=function(t){function e(){var e=t.call(this)||this;return e.price="",e.skinName="resource/skins/shop/ShopItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnChong,egret.TouchEvent.TOUCH_TAP,this.btnChongHandle.bind(this))},e.prototype.btnChongHandle=function(){PayManage.getInstance().pay(this.shopid,this.txtName.text,this.price)},e.prototype.setData=function(t){this.shopid=t.id+"",this.txtPrice.text=t.price+"元",this.txtName.text=t.name,this.txtDesc.text=t.desc,this.icon.source=t.icon,this.price=t.price2+""},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ShopItemPanel.prototype,"ShopItemPanel",["fany.IDispose"]);var ShopPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shop/ShopPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnVip,egret.TouchEvent.TOUCH_TAP,this.onTouchVip.bind(this)),Net.sendNeedSave(Protocol.GET_SHOP_LIST,{},this.shoplistcallback.bind(this),"shoplist")},e.prototype.gogo=function(){this.zhuan.rotation+=8},e.prototype.shoplistcallback=function(t){if(200==t.code){this.clearItems();for(var e=t.list,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("ShopItemPanel");a.y=95*n,this.itemGroup.addChild(a),a.setData({id:e[n]._id,name:e[n].name,desc:e[n].desc,price:parseInt(e[n].rmb)/100,icon:"shop.item"+n,price2:e[n].rmb}),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("ShopItemPanel",this.arr[e]));this.arr=[]},e.prototype.onTouchVip=function(){PanelManage.openVip()},e.prototype.dispose=function(){GlobalData.isHasShowActive||PanelManage.openActive(),this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ShopPanel.prototype,"ShopPanel",["fany.IDispose"]);var SignPanel=function(t){function e(){var e=t.call(this)||this;return e.curNum=0,e.rate=0,e.coinArr=[1e4,2e4,3e4,4e4,5e4,6e4,7e4],e.isPlayMusic=!1,e.skinName="resource/skins/sign/SignPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.isPlayMusic=!1;for(var t=1;8>t;t++)this["labMoney"+t].text=this.coinArr[t-1],this["sign"+t].visible=!1;EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnget,egret.TouchEvent.TOUCH_TAP,this.onTouchGet.bind(this)),EventManage.addButtonEvent(this,this.btnup,egret.TouchEvent.TOUCH_TAP,this.onTouchUp.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),this.labVipInfo.text="",this.labVipMoney0.text="",this.labVipMoney1.text="",Net.send(Protocol.HALL_SIGN_GET,{},this.signCallback.bind(this))},e.prototype.signCallback=function(t){if(200==t.code){this.curNum=t.count;for(var e=1;8>e;e++)e<this.curNum+1?this["sign"+e].visible=!0:this["sign"+e].visible=!1;this.rate=100+parseInt(t.percent),0==parseInt(GlobalData.user.vip)?this.labVipInfo.text="请您领取您今日的签到奖励":this.labVipInfo.text="尊贵的vip"+GlobalData.user.vip+"玩家，请您领取您今日的签到奖励",this.labVipMoney0.text=this.coinArr[this.curNum]+"",this.labVipMoney1.text="x"+this.rate+"%",this.setBtnGet(!t.hasSign)}},e.prototype.setBtnGet=function(t){t?(this.btnget.touchEnabled=!0,this.btnget.source="sign.btnget"):(this.btnget.touchEnabled=!1,this.btnget.source="sign.btnget2")},e.prototype.onTouchGet=function(){0==this.isPlayMusic&&(GlobalData.isDebug||MusicManage.playBgMuisc(),this.isPlayMusic=!0),Net.send(Protocol.HALL_SIGN_SIGN,{},this.daySignCallback.bind(this))},e.prototype.onTouchUp=function(){0==this.isPlayMusic&&(GlobalData.isDebug||MusicManage.playBgMuisc(),this.isPlayMusic=!0),PanelManage.openShop()},e.prototype.daySignCallback=function(t){if(200==t.code){this.setBtnGet(!1),GlobalData.user.gold=t.gold,this["sign"+(this.curNum+1)].visible=!0;var e=120+190*(this.curNum%3),i=260+140*(this.curNum/3);EffectUtils.coinsFly(this,e,i),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))}},e.prototype.onTouchClose=function(){0==this.isPlayMusic&&(GlobalData.isDebug||MusicManage.playBgMuisc(),this.isPlayMusic=!0),this.dispose()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),GlobalData.isFirstShowSign&&(PanelManage.openActive(),GlobalData.isFirstShowSign=!1)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(SignPanel.prototype,"SignPanel",["fany.IDispose"]);var TaskItem=function(t){function e(){var e=t.call(this)||this;return e.taskId=0,e.curType=0,e.index=0,e.isTouchBtn=!1,e.skinName="resource/skins/task/taskItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnTouch,egret.TouchEvent.TOUCH_TAP,this.onTouchBtn.bind(this))},e.prototype.onTouchBtn=function(){this.isTouchBtn||(this.isTouchBtn=!0,Net.send(Protocol.HALL_TASK_GET,{taskId:this.taskId},this.onTouchBtnCallback.bind(this)))},e.prototype.onTouchBtnCallback=function(t){this.isTouchBtn=!1,200==t.code?(this.btnTouch.visible=!1,this.imgSign.visible=!0,this.imgSign.source="task.complete",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.TASK_AFTER_COMPLETE,{index:this.index}))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.setInfo=function(t,e){this.index=e,this.taskId=t._id,this.imgLoad.width=220*(t.cur/t.max),this.labLoad.text=t.cur+"/"+t.max,this.labName.text=t.title,this.labInfo.text=t.desc,this.labGold.text=QuickManage.moneyStr(t.num),0==t.status?(this.btnTouch.visible=!1,this.imgSign.visible=!0,this.imgSign.source="task.nocomplete"):1==t.status?(this.btnTouch.visible=!0,this.imgSign.visible=!1):2==t.status&&(this.btnTouch.visible=!1,this.imgSign.visible=!0,this.imgSign.source="task.complete"),0==t.withVip?this.labGoldDouble.visible=!1:1==t.withVip&&(this.labGoldDouble.visible=!0,this.labGoldDouble.text="x"+(parseInt(GlobalData.user.vip)+1))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(TaskItem.prototype,"TaskItem",["fany.IDispose"]);var TaskPanel=function(t){function e(){var e=t.call(this)||this;return e.clacTaskHasComplete=0,e.interval=0,e.coinsNum=0,e.coinArr=[],e.flyIndex=0,e.skinName="resource/skins/task/TaskPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),Net.send(Protocol.HALL_TASK_LIST,{},this.taskList.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.TASK_AFTER_COMPLETE,this.updateGold.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.onTouchClose=function(){this.dispose()},e.prototype.taskList=function(t){this.clearItems();for(var e=!1,i=0;i<t.data.length;i++){var n=ObjManage.getObj("TaskItem");n.x=0,n.y=i*n.height,n.setInfo(t.data[i],i),1==t.data[i].status&&(e=!0,this.clacTaskHasComplete++),this.grpContent.addChild(n)}e||PanelManage.hall.redNotice({type:1},!1)},e.prototype.clearItems=function(){for(;this.grpContent.numChildren>0;)ObjManage.addObj("TaskPanel",this.grpContent.removeChildAt(0))},e.prototype.updateGold=function(t){this.clacTaskHasComplete--,0==this.clacTaskHasComplete&&PanelManage.hall.redNotice({type:1},!1),this.flyIndex=t.param.index,Net.send(Protocol.HALL_GET_GOLD,{},this.flyCoins.bind(this))},e.prototype.flyCoins=function(t){if(200==t.code){GlobalData.user.gold=t.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN));var e=300,i=275+this.grpContent.getChildAt(this.flyIndex).y-Math.round(this.grpContent.scrollV);EffectUtils.coinsFly(this,e,i)}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(TaskPanel.prototype,"TaskPanel",["fany.IDispose"]);var TeHuiPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/tehui/TeHuiPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.bg.source=GlobalData.cdnResUrl+"resource/assets/noload/noload.tehui.jpg",EventManage.addButtonEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),PanelManage.openShop()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(TeHuiPanel.prototype,"TeHuiPanel",["fany.IDispose"]);var UserPanel=function(t){function e(){var e=t.call(this)||this;return e.selectImg="",e.sex="",e.skinName="resource/skins/user/UserSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.btnSureHandle.bind(this));for(var t=1;5>t;t++)EventManage.addButtonEvent(this,this["nan_"+t],egret.TouchEvent.TOUCH_TAP,this.imgClick.bind(this,"nan_"+t)),EventManage.addButtonEvent(this,this["nv_"+t],egret.TouchEvent.TOUCH_TAP,this.imgClick.bind(this,"nv_"+t)),this["nan_"+t].source=GlobalData.configData.data.headurl+"nan_"+t+".png",this["nv_"+t].source=GlobalData.configData.data.headurl+"nv_"+t+".png"},e.prototype.imgClick=function(t){for(var e=1;5>e;e++)this["nan_"+e].scaleX=1,this["nan_"+e].scaleY=1,this["nv_"+e].scaleX=1,this["nv_"+e].scaleY=1;this[t].scaleX=1.1,this[t].scaleY=1.1,this.selectImg=t,"nan"==t.split("_")[0]?this.sex="1":this.sex="2"},e.prototype.btnSureHandle=function(){return""==this.txtUserName.text?void TipsManage.showTips("昵称不能为空!"):this.txtUserName.text.length>6?void TipsManage.showTips("昵称太长!"):""==this.selectImg?void TipsManage.showTips("请选择一个头像!"):void Net.send(Protocol.UPDATE_NAME,{sex:this.sex,name:this.txtUserName.text,headurl:this.selectImg},this.updateCallBack.bind(this))},e.prototype.updateCallBack=function(t){200==t.code?(TipsManage.showTips("修改成功!"),GlobalData.user.nickname=this.txtUserName.text,GlobalData.user.sex=this.sex,GlobalData.user.headurl=GlobalData.configData.data.headurl+this.selectImg+".png",PanelManage.hall.updateHeadurl()):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(UserPanel.prototype,"UserPanel",["fany.IDispose"]);var VipItem=function(t){function e(){var e=t.call(this)||this;return e.baseRate=100,e.baseMoney=15,e.skinName="resource/skins/vip/VipItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setVipMoney=function(t){parseInt(GlobalData.user.vip)+1>=parseInt(t.id+"")?this.labTitle.text="累计充值"+t.money/100+"元":this.labTitle.text="累计充值???元",this.imgVip.source="vip.v"+t.id,this.labInfo0.text="签到奖励多送"+t.id+"倍金币",this.labInfo1.text="救济金每日每次领取"+QuickManage.moneyStr(t.jjg)+"金币",1==parseInt(t.id+"")?this.labInfo2.text="金鲨银鲨游戏可以上庄":5==parseInt(t.id+"")?this.labInfo2.text="百人牛牛和百人金花尊享VIP专属座位":6==parseInt(t.id+"")?this.labInfo2.text="百人牛牛游戏可以上庄":8==parseInt(t.id+"")?this.labInfo2.text="百人金花游戏可以上庄":10==parseInt(t.id+"")&&(this.labInfo2.text="大厅可以发布全服公告")},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(VipItem.prototype,"VipItem",["fany.IDispose"]);var VipPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/vip/VipSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnVip,egret.TouchEvent.TOUCH_TAP,this.onTouchVipUp.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.GET_VIPS,{},this.vipInfo.bind(this))},e.prototype.vipInfo=function(t){if(200==t.code){var e=t.data,i=e.vip;this.labVip.text="VIP "+i,this.clearItems();for(var n=0;15>n;n++){var a=ObjManage.getObj("VipItem");a.x=-5,a.y=n*a.height,a.setVipMoney(e.vips[n]),this.grpContent.addChild(a)}15==i?(this.labLoading.text=e.totalMoney/100+"/"+e.vips[14].money/100,this.imgBar.width=400):(this.labLoading.text=e.totalMoney/100+"/"+e.vips[i].money/100,this.imgBar.width=400*(e.totalMoney/e.vips[i].money))}},e.prototype.clearItems=function(){for(var t=this.grpContent.numChildren,e=0;t>e;e++)ObjManage.addObj("VipItem",this.grpContent.removeChildAt(e))},e.prototype.onTouchVipUp=function(){this.dispose(),PanelManage.openShop()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(VipPanel.prototype,"VipPanel",["fany.IDispose"]);var YaoQingPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/yaoqing/YaoQingPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.tuiguang.source=GlobalData.cdnResUrl+"resource/assets/noload/noloading.haibao.jpg",EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),this.erweima.source=GlobalData.configData.data.erweimaapi+GlobalData.configData.data.erweimaurl+"?yid="+GlobalData.account,Net.send(Protocol.YAO_QING,{},this.yaoqingHandle.bind(this)),EventManage.addButtonEvent(this,this.btnTiXian,egret.TouchEvent.TOUCH_TAP,this.btnTiXianHandle.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.tuiguangGroup,egret.TouchEvent.TOUCH_TAP,this.tuiguangHide.bind(this))},e.prototype.tuiguangHide=function(){this.tuiguangGroup.visible=!1},e.prototype.btnTiXianHandle=function(){this.tuiguangGroup.visible=!0},e.prototype.yaoqingHandle=function(t){200==t.code&&(this.txtHongBao.text="已获得点券:"+parseInt(t.data.backRmb+"")/100,this.txtYaoNum.text="已邀请:"+t.data.count)},e.prototype.updateData=function(t){var e=parseInt(this.txtHongBao.text),i=parseInt(t.backRmb+"")/100,n=e-i;1>n&&(n=0),this.txtHongBao.text="已获得点券:"+n},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(YaoQingPanel.prototype,"YaoQingPanel",["fany.IDispose"]);var YuePanel=function(t){function e(){var e=t.call(this)||this;return e.count=0,e.yueeveryday="",e.zhongeveryday="",e.skinName="resource/skins/yue/YueKaPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.quan1.touchEnabled=!1,this.quan2.touchEnabled=!1,EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.zhongshenka,egret.TouchEvent.TOUCH_TAP,this.btnZhongshenHandle.bind(this)),EventManage.addButtonEvent(this,this.yueka,egret.TouchEvent.TOUCH_TAP,this.btnYueKaHandle.bind(this)),EventManage.addButtonEvent(this,this.btnJiHuo,egret.TouchEvent.TOUCH_TAP,this.btnJiHuoHandle.bind(this)),EventManage.addButtonEvent(this,this.btnget,egret.TouchEvent.TOUCH_TAP,this.btngetHandle.bind(this)),Net.send(Protocol.YUE_KA,{},this.yueHandle.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this))},e.prototype.updatePayData=function(t){var e=t.param;2==e.msg.type&&(e.msg.id==this.yue.id?(this.yueisbuy.source="yue.yesbuy",this.txtYueTime.visible=!0,this.txtYueTime.text="剩余"+e.msg.lastDay+"天"):(this.zhongisbuy.source="yue.yesbuy",this.txtZhongTime.text="终身",this.txtZhongTime.visible=!0))},e.prototype.btngetHandle=function(){0==this.count?Net.send(Protocol.GET_YUE,{shopId:this.yue.id},this.getyueHandle.bind(this)):Net.send(Protocol.GET_YUE,{shopId:this.zhong.id},this.getyueHandle.bind(this))},e.prototype.getyueHandle=function(t){200==t.code?(0==this.count?(GlobalData.user.gold=t.gold+"",TipsManage.showTips("领取成功! +"+this.yueeveryday)):(GlobalData.user.gold=t.gold+"",TipsManage.showTips("领取成功! +"+this.zhongeveryday)),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.yueHandle=function(t){200==t.code&&(this.txtYueTime.visible=!0,this.txtZhongTime.visible=!0,"月卡"==t.list[0].name?(this.yue=t.list[0],this.zhong=t.list[1]):(this.yue=t.list[1],this.zhong=t.list[0]),this.yueeveryday=QuickManage.moneyStr(parseInt(this.yue.everyDay+"")),this.zhongeveryday=QuickManage.moneyStr(parseInt(this.zhong.everyDay+"")),this.txtYueStr1.text="每日领取"+this.yueeveryday,this.txtYueStr2.text="充值立送"+QuickManage.moneyStr(parseInt(this.yue.gold+"")),this.txtZhongStr1.text="每日领取"+this.zhongeveryday,this.txtZhongStr2.text="充值立送"+QuickManage.moneyStr(parseInt(this.zhong.gold+"")),this.txtYueRate.text="系统手续费减少到"+100*parseFloat(this.yue.rate)+"%",this.txtZhongRate.text="系统手续费减少到"+100*parseFloat(this.zhong.rate)+"%","0"==this.yue.state?(this.yueisbuy.source="yue.nobuy",this.txtYueTime.visible=!1):"1"==this.yue.state?(this.yueisbuy.source="yue.yesbuy",this.txtYueTime.text="剩余"+this.yue.lastDay+"天"):(this.yueisbuy.source="yue.yilingqu",this.txtYueTime.text="剩余"+this.yue.lastDay+"天"),"0"==this.zhong.state?(this.zhongisbuy.source="yue.nobuy",this.txtZhongTime.visible=!1):"1"==this.yue.state?(this.zhongisbuy.source="yue.yesbuy",this.txtZhongTime.text="终身"):(this.zhongisbuy.source="yue.yilingqu",this.txtZhongTime.text="终身"))},e.prototype.btnJiHuoHandle=function(){1==this.count?PayManage.getInstance().pay(this.zhong.id,"终身卡",this.zhong.rmb):PayManage.getInstance().pay(this.yue.id,"月卡",this.yue.rmb)},e.prototype.btnZhongshenHandle=function(){this.count=1,this.quan1.visible=!1,this.quan2.visible=!0},e.prototype.btnYueKaHandle=function(){this.count=0,this.quan2.visible=!1,this.quan1.visible=!0},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(YuePanel.prototype,"YuePanel",["fany.IDispose"]);