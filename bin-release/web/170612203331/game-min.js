function __extends(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__define=this.__define||function(t,e,i,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:r})},egret;!function(t){t.$hashCount=1;var e=function(){function e(){this.$hashCode=t.$hashCount++}return Object.defineProperty(e.prototype,"hashCode",{get:function(){return this.$hashCode},enumerable:!0,configurable:!0}),e}();t.HashObject=e,__reflect(e.prototype,"egret.HashObject",["egret.IHashObject"])}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function r(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0);var o=i.call(this)||this;return o.x=t,o.y=e,o.width=r,o.height=n,o}return __extends(r,i),r.release=function(t){t&&e.push(t)},r.create=function(){var t=e.pop();return t||(t=new r),t},Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.setTo=function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},r.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},r.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},r.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},r.prototype.$intersectInPlace=function(t){var e=this.x,i=this.y,r=t.x,n=t.y,o=Math.max(e,r),s=Math.min(e+this.width,r+t.width);if(s>=o){var a=Math.max(i,n),h=Math.min(i+this.height,n+t.height);if(h>=a)return this.setTo(o,a,s-o,h-a),this}return this.setEmpty(),this},r.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},r.prototype.isEmpty=function(){return this.width<=0||this.height<=0},r.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y?!0:!1},r.prototype.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,r=this.x+this.width,n=this.y+this.height;return t.x>=this.x&&t.x<r&&t.y>=this.y&&t.y<n&&e>this.x&&r>=e&&i>this.y&&n>=i},r.prototype.equals=function(t){return this===t?!0:this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},r.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},r.prototype.offset=function(t,e){this.x+=t,this.y+=e},r.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},r.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},r.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return e.setTo(i,r,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-r),e},r.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},r.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return i*this.width+e*this.height},r}(t.HashObject);t.Rectangle=i,__reflect(i.prototype,"egret.Rectangle"),t.$TempRectangle=new i}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function r(t){void 0===t&&(t=null);var e=i.call(this)||this;return e.$EventDispatcher={0:t?t:e,1:{},2:{},3:0},e}return __extends(r,i),r.prototype.$getEventMap=function(t){var e=this.$EventDispatcher,i=t?e[2]:e[1];return i},r.prototype.addEventListener=function(t,e,i,r,n){this.$addListener(t,e,i,r,n)},r.prototype.once=function(t,e,i,r,n){this.$addListener(t,e,i,r,n,!0)},r.prototype.$addListener=function(t,e,i,r,n,o){var s=this.$EventDispatcher,a=r?s[2]:s[1],h=a[t];h?0!==s[3]&&(a[t]=h=h.concat()):h=a[t]=[],this.$insertEventBin(h,t,e,i,r,n,o)},r.prototype.$insertEventBin=function(t,e,i,r,n,o,s){o=0|+o;for(var a=-1,h=t.length,l=0;h>l;l++){var u=t[l];if(u.listener==i&&u.thisObject==r&&u.target==this)return!1;-1==a&&u.priority<o&&(a=l)}var c={type:e,listener:i,thisObject:r,priority:o,target:this,useCapture:n,dispatchOnce:!!s};return-1!==a?t.splice(a,0,c):t.push(c),!0},r.prototype.removeEventListener=function(t,e,i,r){var n=this.$EventDispatcher,o=r?n[2]:n[1],s=o[t];s&&(0!==n[3]&&(o[t]=s=s.concat()),this.$removeEventBin(s,e,i),0==s.length&&(o[t]=null))},r.prototype.$removeEventBin=function(t,e,i){for(var r=t.length,n=0;r>n;n++){var o=t[n];if(o.listener==e&&o.thisObject==i&&o.target==this)return t.splice(n,1),!0}return!1},r.prototype.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},r.prototype.willTrigger=function(t){return this.hasEventListener(t)},r.prototype.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},r.prototype.$notifyListener=function(t,i){var r=this.$EventDispatcher,n=i?r[2]:r[1],o=n[t.$type];if(!o)return!0;var s=o.length;if(0==s)return!0;var a=e;r[3]++;for(var h=0;s>h;h++){var l=o[h];if(l.listener.call(l.thisObject,t),l.dispatchOnce&&a.push(l),t.$isPropagationImmediateStopped)break}for(r[3]--;a.length;){var l=a.pop();l.target.removeEventListener(l.type,l.listener,l.thisObject,l.useCapture)}return!t.$isDefaultPrevented},r.prototype.dispatchEventWith=function(e,i,r,n){if(i||this.hasEventListener(e)){var o=t.Event.create(t.Event,e,i,n);o.data=r;var s=this.dispatchEvent(o);return t.Event.release(o),s}return!0},r}(t.HashObject);t.EventDispatcher=i,__reflect(i.prototype,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={}));var egret;!function(t){function e(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t}var i=function(i){function r(){var e=i.call(this)||this;return e.$children=null,e.$parent=null,e.$stage=null,e.$nestLevel=0,e.$visible=!0,e.$displayList=null,e.$alpha=1,e.$touchEnabled=r.defaultTouchEnabled,e.$scrollRect=null,e.$blendMode=0,e.$maskedObject=null,e.$mask=null,e.$maskRect=null,e.$parentDisplayList=null,e.$renderNode=null,e.$displayFlags=2032,e.$DisplayObject={0:1,1:1,2:0,3:0,4:0,5:"",6:new t.Matrix,7:new t.Matrix,8:new t.Matrix,9:new t.Rectangle,10:new t.Rectangle,11:!1,12:0,13:0,14:0/0,15:0/0,16:0,17:0,18:0,19:null,20:null},e}return __extends(r,i),r.prototype.$setFlags=function(t){this.$displayFlags|=t},r.prototype.$removeFlags=function(t){this.$displayFlags&=~t},r.prototype.$removeFlagsUp=function(t){if(this.$hasAnyFlags(t)){this.$removeFlags(t);var e=this.$parent;e&&e.$removeFlagsUp(t)}},r.prototype.$hasFlags=function(t){return(this.$displayFlags&t)==t},r.prototype.$propagateFlagsUp=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);var e=this.$parent;e&&e.$propagateFlagsUp(t)}},r.prototype.$propagateFlagsDown=function(t,e){void 0===e&&(e=!1),this.$setFlags(t)},r.prototype.$hasAnyFlags=function(t){return!!(this.$displayFlags&t)},r.prototype.$invalidateMatrix=function(){this.$setFlags(8),this.$invalidatePosition()},r.prototype.$invalidatePosition=function(){var t=this;t.$invalidateTransform(),t.$propagateFlagsDown(48),t.$parent&&t.$parent.$propagateFlagsUp(4)},Object.defineProperty(r.prototype,"name",{get:function(){return this.$DisplayObject[5]},set:function(t){this.$DisplayObject[5]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),r.prototype.$setParent=function(t){return this.$parent==t?!1:(this.$parent=t,!0)},r.prototype.$onAddToStage=function(e,i){this.$stage=e,this.$nestLevel=i,this.$hasAddToStage=!0,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},r.prototype.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},Object.defineProperty(r.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"matrix",{get:function(){return this.$getMatrix().clone()},set:function(t){this.$setMatrix(t)},enumerable:!0,configurable:!0}),r.prototype.$getMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(8)&&(t[6].$updateScaleAndRotation(t[0],t[1],t[2],t[3]),this.$removeFlags(8)),t[6]},r.prototype.$setMatrix=function(t,i){void 0===i&&(i=!0);var r=this,n=r.$DisplayObject,o=n[6];return o.equals(t)?!1:(o.copyFrom(t),i&&(n[0]=o.$getScaleX(),n[1]=o.$getScaleY(),n[2]=t.$getSkewX(),n[3]=t.$getSkewY(),n[16]=e(180*n[2]/Math.PI),n[17]=e(180*n[3]/Math.PI),n[4]=e(180*n[3]/Math.PI)),r.$removeFlags(8),r.$invalidatePosition(),!0)},r.prototype.$getConcatenatedMatrix=function(){var e=this.$DisplayObject[7];if(this.$hasFlags(16)){this.$parent?this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),e):e.copyFrom(this.$getMatrix());var i=this.$DisplayObject,r=i[12],n=i[13],o=this.$scrollRect;o?e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-o.x-r,-o.y-n),e):(0!=r||0!=n)&&e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-r,-n),e),this.$displayList&&(this.$displayList.$renderNode.moved=!0),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(16)}return e},r.prototype.$getInvertedConcatenatedMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(32)&&(this.$getConcatenatedMatrix().$invertInto(t[8]),this.$removeFlags(32)),t[8]},Object.defineProperty(r.prototype,"x",{get:function(){return this.$getX()},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),r.prototype.$getX=function(){return this.$DisplayObject[6].tx},r.prototype.$setX=function(t){t=+t||0;var e=this.$DisplayObject[6];return t==e.tx?!1:(e.tx=t,this.$invalidatePosition(),!0)},Object.defineProperty(r.prototype,"y",{get:function(){return this.$getY()},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),r.prototype.$getY=function(){return this.$DisplayObject[6].ty},r.prototype.$setY=function(t){t=+t||0;var e=this.$DisplayObject[6];return t==e.ty?!1:(e.ty=t,this.$invalidatePosition(),!0)},Object.defineProperty(r.prototype,"scaleX",{get:function(){return this.$getScaleX()},set:function(t){this.$setScaleX(t)},enumerable:!0,configurable:!0}),r.prototype.$getScaleX=function(){return this.$DisplayObject[0]},r.prototype.$setScaleX=function(t){t=+t||0;var e=this.$DisplayObject;return t==e[0]?!1:(e[0]=t,this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"scaleY",{get:function(){return this.$getScaleY()},set:function(t){this.$setScaleY(t)},enumerable:!0,configurable:!0}),r.prototype.$getScaleY=function(){return this.$DisplayObject[1]},r.prototype.$setScaleY=function(t){return t=+t||0,t==this.$DisplayObject[1]?!1:(this.$DisplayObject[1]=t,this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"rotation",{get:function(){return this.$getRotation()},set:function(t){this.$setRotation(t)},enumerable:!0,configurable:!0}),r.prototype.$getRotation=function(){return this.$DisplayObject[4]},r.prototype.$setRotation=function(t){t=+t||0,t=e(t);var i=this.$DisplayObject;if(t==i[4])return!1;var r=t-i[4],n=r/180*Math.PI;return i[2]+=n,i[3]+=n,i[4]=t,this.$invalidateMatrix(),!0},Object.defineProperty(r.prototype,"skewX",{get:function(){return this.$DisplayObject[16]},set:function(t){this.$setSkewX(t)},enumerable:!0,configurable:!0}),r.prototype.$setSkewX=function(t){t=+t||0;var i=this.$DisplayObject;return t==i[16]?!1:(i[16]=t,t=e(t),t=t/180*Math.PI,i[2]=t,this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"skewY",{get:function(){return this.$DisplayObject[17]},set:function(t){this.$setSkewY(t)},enumerable:!0,configurable:!0}),r.prototype.$setSkewY=function(t){t=+t||0;var i=this.$DisplayObject;return t==i[17]?!1:(i[17]=t,t=e(t),t=t/180*Math.PI,i[3]=t,this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){this.$setWidth(t)},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){return isNaN(this.$getExplicitWidth())?this.$getOriginalBounds().width:this.$getExplicitWidth()},r.prototype.$getExplicitWidth=function(){return this.$DisplayObject[14]},r.prototype.$setWidth=function(t){return this.$DisplayObject[14]=isNaN(t)?0/0:t,t=+t,0>t?!1:(this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){this.$setHeight(t)},enumerable:!0,configurable:!0}),r.prototype.$getHeight=function(){return isNaN(this.$getExplicitHeight())?this.$getOriginalBounds().height:this.$getExplicitHeight()},r.prototype.$getExplicitHeight=function(){return this.$DisplayObject[15]},r.prototype.$setHeight=function(t){return this.$DisplayObject[15]=isNaN(t)?0/0:t,t=+t,0>t?!1:(this.$invalidateMatrix(),!0)},Object.defineProperty(r.prototype,"measuredWidth",{get:function(){return this.$getOriginalBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"measuredHeight",{get:function(){return this.$getOriginalBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"anchorOffsetX",{get:function(){return this.$DisplayObject[12]},set:function(t){this.$setAnchorOffsetX(t)},enumerable:!0,configurable:!0}),r.prototype.$getAnchorOffsetX=function(){return this.$DisplayObject[12]},r.prototype.$setAnchorOffsetX=function(t){return t=+t||0,t==this.$DisplayObject[12]?!1:(this.$DisplayObject[12]=t,this.$invalidatePosition(),!0)},Object.defineProperty(r.prototype,"anchorOffsetY",{get:function(){return this.$DisplayObject[13]},set:function(t){this.$setAnchorOffsetY(t)},enumerable:!0,configurable:!0}),r.prototype.$getAnchorOffsetY=function(){return this.$DisplayObject[13]},r.prototype.$setAnchorOffsetY=function(t){return t=+t||0,t==this.$DisplayObject[13]?!1:(this.$DisplayObject[13]=t,this.$invalidatePosition(),!0)},Object.defineProperty(r.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$setVisible(t)},enumerable:!0,configurable:!0}),r.prototype.$setVisible=function(t){return t=!!t,t==this.$visible?!1:(this.$visible=t,this.$propagateFlagsDown(1024),this.$invalidateTransform(),!0)},r.prototype.$getConcatenatedVisible=function(){var t=this.$DisplayObject;if(this.$hasFlags(1024)){if(this.$parent){var e=this.$parent.$getConcatenatedVisible();t[19]=e&&this.$visible}else t[19]=this.$visible;this.$removeFlags(1024)}return t[19]},Object.defineProperty(r.prototype,"cacheAsBitmap",{get:function(){return this.$DisplayObject[11]},set:function(t){t=!!t,this.$DisplayObject[11]=t,this.$setHasDisplayList(t)},enumerable:!0,configurable:!0}),r.prototype.$setHasDisplayList=function(e){var i=!!this.$displayList;if(i!=e)if(e){var r=t.sys.DisplayList.create(this);r&&(this.$displayList=r,this.$parentDisplayList&&this.$parentDisplayList.markDirty(r),this.$cacheAsBitmapChanged())}else this.$displayList=null,this.$cacheAsBitmapChanged()},r.prototype.$cacheAsBitmapChanged=function(){var t=this.$displayList||this.$parentDisplayList;this.$renderNode&&t&&t.markDirty(this),this.$propagateFlagsDown(48)},Object.defineProperty(r.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$setAlpha(t)},enumerable:!0,configurable:!0}),r.prototype.$setAlpha=function(t){return t=+t||0,t==this.$alpha?!1:(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),!0)},r.prototype.$getConcatenatedAlpha=function(){var t=this.$DisplayObject;if(this.$hasFlags(64)){if(this.$parent){var e=this.$parent.$getConcatenatedAlpha();t[18]=e*this.$alpha}else t[18]=this.$alpha;this.$removeFlags(64)}return t[18]},Object.defineProperty(r.prototype,"touchEnabled",{get:function(){return this.$getTouchEnabled()},set:function(t){this.$setTouchEnabled(t)},enumerable:!0,configurable:!0}),r.prototype.$getTouchEnabled=function(){return this.$touchEnabled},r.prototype.$setTouchEnabled=function(t){return this.$touchEnabled==t?!1:(this.$touchEnabled=t,!0)},Object.defineProperty(r.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$setScrollRect(t)},enumerable:!0,configurable:!0}),r.prototype.$setScrollRect=function(e){return e||this.$scrollRect?(e?(this.$scrollRect||(this.$scrollRect=new t.Rectangle),this.$scrollRect.copyFrom(e)):this.$scrollRect=null,this.$invalidatePosition(),!0):!1},Object.defineProperty(r.prototype,"blendMode",{get:function(){return t.sys.numberToBlendMode(this.$blendMode)},set:function(e){var i=t.sys.blendModeToNumber(e);i!=this.$blendMode&&(this.$blendMode=i,this.$invalidateTransform())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this.$mask?this.$mask:this.$maskRect},set:function(t){if(t!==this){if(t)if(t instanceof r){if(t==this.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),t.$maskedObject=this,t.$invalidateTransform(),this.$mask=t,this.$maskRect=null}else this.$setMaskRect(t),this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null;else this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null,this.$maskRect=null;this.$invalidateTransform()}},enumerable:!0,configurable:!0}),r.prototype.$setMaskRect=function(e){return e||this.$maskRect?(e?(this.$maskRect||(this.$maskRect=new t.Rectangle),this.$maskRect.copyFrom(e)):this.$maskRect=null,this.$invalidatePosition(),!0):!1},Object.defineProperty(r.prototype,"filters",{get:function(){return this.$DisplayObject[20]},set:function(t){var e=this.$DisplayObject[20];if(!e&&!t)return void(this.$DisplayObject[20]=t);if(this.$invalidateContentBounds(),this.$invalidate(!0),e&&e.length)for(var i=e.length,r=0;i>r;r++)e[r].$removeTarget(this);if(this.$DisplayObject[20]=t,t&&t.length)for(var n=t.length,r=0;n>r;r++)t[r].$addTarget(this)},enumerable:!0,configurable:!0}),r.prototype.$getFilters=function(){return this.$DisplayObject[20]},r.prototype.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},r.prototype.getBounds=function(t,e){if(void 0===e&&(e=!0),t=this.$getTransformedBounds(this,t),e){var i=this.$DisplayObject;(0!=i[12]||0!=i[13])&&(t.x-=i[12],t.y-=i[13])}return t},r.prototype.$getTransformedBounds=function(e,i){var r=this.$getOriginalBounds();if(i||(i=new t.Rectangle),i.copyFrom(r),e==this)return i;var n;if(e){n=t.$TempMatrix;var o=e.$getInvertedConcatenatedMatrix();o.$preMultiplyInto(this.$getConcatenatedMatrix(),n)}else n=this.$getConcatenatedMatrix();return n.$transformBounds(i),i},r.prototype.globalToLocal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.$getInvertedConcatenatedMatrix();return r.transformPoint(t,e,i)},r.prototype.localToGlobal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.$getConcatenatedMatrix();return r.transformPoint(t,e,i)},r.prototype.$invalidateContentBounds=function(){this.$invalidate(),this.$setFlags(2),this.$propagateFlagsUp(4)},r.prototype.$getOriginalBounds=function(){var t=this.$DisplayObject[9];if(this.$hasFlags(4)){t.copyFrom(this.$getContentBounds()),this.$measureChildBounds(t),this.$removeFlags(4),this.$displayList&&(this.$displayList.$renderNode.moved=!0);var e=this.$measureFiltersOffset();e&&(t.x+=e.minX,t.y+=e.minY,t.width+=e.maxX,t.height+=e.maxY)}return t},r.prototype.$measureChildBounds=function(t){},r.prototype.$getContentBounds=function(){var t=this.$DisplayObject[10];return this.$hasFlags(2)&&(this.$measureContentBounds(t),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(2)),t},r.prototype.$measureContentBounds=function(t){},r.prototype.$invalidate=function(t){if(this.$renderNode&&!this.$hasFlags(384)){this.$setFlags(384);var e=this.$displayList?this.$displayList:this.$parentDisplayList;e&&e.markDirty(this)}},r.prototype.$invalidateTransform=function(){var t=this;if(!t.$hasFlags(512)){t.$setFlags(512);var e=t.$displayList;(e||t.$renderNode)&&t.$parentDisplayList&&t.$parentDisplayList.markDirty(e||t)}},r.prototype.$getRenderNode=function(){var t=this.$renderNode;return t?(128&this.$displayFlags&&(t.cleanBeforeRender(),this.$render(),this.$removeFlags(128),t=this.$renderNode),t):null},r.prototype.$update=function(e,i){var r=this;r.$removeFlagsUp(768);var n=r.$renderNode;n.renderAlpha=r.$getConcatenatedAlpha();var o=r.$getConcatenatedMatrix();if(e==t.DirtyRegionPolicy.OFF){var s=r.$displayList||r.$parentDisplayList;if(!s)return!1;var a=n.renderMatrix;a.copyFrom(o);var h=s.root;h!==r.$stage&&r.$getConcatenatedMatrixAt(h,a)}else{var l=i||r.$getContentBounds();n.renderVisible=r.$getConcatenatedVisible();var s=r.$displayList||r.$parentDisplayList,u=n.renderRegion;if(!s)return u.setTo(0,0,0,0),n.moved=!1,!1;if(!n.moved)return!1;n.moved=!1;var a=n.renderMatrix;a.copyFrom(o);var h=s.root;h!==r.$stage&&r.$getConcatenatedMatrixAt(h,a),u.updateRegion(l,a);var c=r.$measureFiltersOffset();c&&(u.minX+=c.minX,u.minY+=c.minY,u.maxX+=c.maxX,u.maxY+=c.maxY,u.updateArea())}return!0},r.prototype.$measureFiltersOffset=function(){var e=this.$DisplayObject[20];if(e&&e.length){for(var i=e.length,r=0,n=0,o=0,s=0,a=0;i>a;a++){var h=e[a];if("blur"==h.type){var l=h.blurX,u=h.blurY;r-=l,n-=u,o+=2*l,s+=2*u}else if("glow"==h.type){var l=h.blurX,u=h.blurY;r-=l,n-=u,o+=2*l,s+=2*u;var c=h.distance||0,p=h.angle||0,d=0,f=0;0!=c&&(d=Math.ceil(c*t.NumberUtils.cos(p)),f=Math.ceil(c*t.NumberUtils.sin(p)),d>0?o+=d:0>d&&(r+=d,o-=d),f>0?s+=f:0>f&&(n+=f,s-=f))}}return{minX:r,minY:n,maxX:o,maxY:s}}return null},r.prototype.$getConcatenatedMatrixAt=function(e,i){var r=e.$getInvertedConcatenatedMatrix();if(0===r.a||0===r.d){var n=this,o=e.$nestLevel;for(i.identity();n.$nestLevel>o;){var s=n.$scrollRect;s&&i.concat(t.$TempMatrix.setTo(1,0,0,1,-s.x,-s.y)),i.concat(n.$getMatrix()),n=n.$parent}}else r.$preMultiplyInto(i,i)},r.prototype.$getConcatenatedAlphaAt=function(t,e){var i=t.$getConcatenatedAlpha();if(0===i){e=1;for(var r=this,n=t.$nestLevel;r.$nestLevel>n;)e*=r.$alpha,r=r.$parent}else e/=i;return e},r.prototype.$render=function(){},r.prototype.$hitTest=function(t,e){var i=this.$DisplayObject;if(!this.$renderNode||!this.$visible||0==i[0]||0==i[1])return null;var r=this.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var n=this.$getContentBounds(),o=r.a*t+r.c*e+r.tx,s=r.b*t+r.d*e+r.ty;if(n.contains(o,s)){if(!this.$children){var a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(o,s))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null}return this}return null},r.prototype.hitTestPoint=function(e,i,r){if(r){var n=this.$getInvertedConcatenatedMatrix(),o=n.a*e+n.c*i+n.tx,s=n.b*e+n.d*i+n.ty,a=void 0,h=this.$displayList;if(h){var l=h.renderBuffer;try{a=l.getPixels(o-h.offsetX,s-h.offsetY)}catch(u){throw new Error(t.sys.tr(1039))}}else{var l=t.sys.customHitTestBuffer;l.resize(3,3);var c=t.Matrix.create();c.identity(),c.translate(1-o,1-s),t.sys.systemRenderer.render(this,l,c,null,!0),t.Matrix.release(c);try{a=l.getPixels(1,1)}catch(u){throw new Error(t.sys.tr(1039))}}return 0===a[3]?!1:!0}var p=this.$DisplayObject;if(0==p[0]||0==p[1])return!1;var n=this.$getInvertedConcatenatedMatrix(),d=this.getBounds(null,!1),o=n.a*e+n.c*i+n.tx,s=n.b*e+n.d*i+n.ty;if(d.contains(o,s)){var f=this.$scrollRect?this.$scrollRect:this.$maskRect;return f&&!f.contains(o,s)?!1:!0}return!1},r.prototype.$addListener=function(e,n,o,s,a,h){i.prototype.$addListener.call(this,e,n,o,s,a,h);var l=e==t.Event.ENTER_FRAME;if(l||e==t.Event.RENDER){var u=l?r.$enterFrameCallBackList:r.$renderCallBackList;-1==u.indexOf(this)&&u.push(this)}},r.prototype.removeEventListener=function(e,n,o,s){i.prototype.removeEventListener.call(this,e,n,o,s);var a=e==t.Event.ENTER_FRAME;if((a||e==t.Event.RENDER)&&!this.hasEventListener(e)){var h=a?r.$enterFrameCallBackList:r.$renderCallBackList,l=h.indexOf(this);-1!==l&&h.splice(l,1)}},r.prototype.dispatchEvent=function(t){if(!t.$bubbles)return i.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),r=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,r),!t.$isDefaultPrevented},r.prototype.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},r.prototype.$dispatchPropagationEvent=function(t,e,i){for(var r=e.length,n=i-1,o=0;r>o;o++){var s=e[o];if(t.$currentTarget=s,n>o?t.$eventPhase=1:o==i||o==n?t.$eventPhase=2:t.$eventPhase=3,s.$notifyListener(t,i>o),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},r.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},r}(t.EventDispatcher);i.defaultTouchEnabled=!1,i.boundsForUpdate=new t.Rectangle,i.$enterFrameCallBackList=[],i.$renderCallBackList=[],t.DisplayObject=i,__reflect(i.prototype,"egret.DisplayObject",["egret.sys.Renderable"])}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}return __extends(i,e),i.prototype.$propagateFlagsDown=function(t,e){if(void 0===e&&(e=!1),!this.$hasFlags(t)&&(this.$setFlags(t),!e||!this.$displayList))for(var i=this.$children,r=i.length,n=0;r>n;n++)i[n].$propagateFlagsDown(t,e)},Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},i.prototype.$doAddChild=function(e,r,n){void 0===n&&(n=!0);var o=e.$parent;if(o==this)return this.doSetChildIndex(e,r),e;o&&o.removeChild(e),this.$children.splice(r,0,e),e.$setParent(this);var s=this.$stage;if(s&&e.$onAddToStage(s,this.$nestLevel+1),n&&e.dispatchEventWith(t.Event.ADDED,!0),s)for(var a=i.$EVENT_ADD_TO_STAGE_LIST;a.length;){var h=a.shift();h.$stage&&n&&h.dispatchEventWith(t.Event.ADDED_TO_STAGE)}var l=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(e,l,l),e.$propagateFlagsDown(1648,!0),this.$propagateFlagsUp(4),this.$childAdded(e,r),e},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},i.prototype.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;r>n;n++)if(e=i[n],e.name==t)return e;return null},i.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},i.prototype.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$doRemoveChild(t):null},i.prototype.$doRemoveChild=function(e,r){void 0===r&&(r=!0),e=0|+e;var n=this.$children,o=n[e];if(this.$childRemoved(o,e),r&&o.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){o.$onRemoveFromStage();for(var s=i.$EVENT_REMOVE_FROM_STAGE_LIST;s.length>0;){var a=s.shift();r&&a.$hasAddToStage&&(a.$hasAddToStage=!1,a.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),a.$hasAddToStage=!1,a.$stage=null}}var h=this.$displayList||this.$parentDisplayList;this.assignParentDisplayList(o,h,null),o.$propagateFlagsDown(1648,!0),o.$setParent(null);var l=n.indexOf(o);return-1!=l&&n.splice(l,1),this.$propagateFlagsUp(4),o},i.prototype.setChildIndex=function(t,e){e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);i!=e&&(this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e),t.$invalidateTransform(),this.$propagateFlagsUp(4))},i.prototype.swapChildrenAt=function(t,e){t=0|+t,e=0|+e,t>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},i.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),r=this.$children.indexOf(e);-1==i||-1==r||this.doSwapChildrenAt(i,r)},i.prototype.doSwapChildrenAt=function(t,e){if(t>e){var i=e;e=t,t=i}else if(t==e)return;var r=this.$children,n=r[t],o=r[e];this.$childRemoved(n,t),this.$childRemoved(o,e),r[t]=o,r[e]=n,this.$childAdded(o,t),this.$childAdded(n,e),n.$invalidateTransform(),o.$invalidateTransform(),this.$propagateFlagsUp(4)},i.prototype.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},i.prototype.$childAdded=function(t,e){},i.prototype.$childRemoved=function(t,e){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var r=this.$children,n=r.length;i++;for(var o=0;n>o;o++){var s=this.$children[o];s.$onAddToStage(t,i)}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,r=0;i>r;r++){var n=t[r];n.$onRemoveFromStage()}},i.prototype.$measureChildBounds=function(e){var i=this.$children,r=i.length;if(0!=r){for(var n=0,o=0,s=0,a=0,h=!1,l=-1;r>l;l++){var u=-1==l?e:i[l].$getTransformedBounds(this,t.$TempRectangle);u.isEmpty()||(h?(n=Math.min(n,u.x),o=Math.max(o,u.x+u.width),s=Math.min(s,u.y),a=Math.max(a,u.y+u.height)):(h=!0,n=u.x,o=n+u.width,s=u.y,a=s+u.height))}e.setTo(n,s,o-n,a-s)}},Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),i.prototype.$getTouchChildren=function(){return this.$touchChildren},i.prototype.$setTouchChildren=function(t){return this.$touchChildren==t?!1:(this.$touchChildren=t,!0)},i.prototype.$invalidate=function(t){if(e.prototype.$invalidate.call(this,t),t){var i=this.$displayList||this.$parentDisplayList,r=this.$children;if(r)for(var n=r.length-1;n>=0;n--)this.markChildDirty(r[n],i)}},i.prototype.$invalidateTransform=function(){this.markChildDirty(this,this.$parentDisplayList)},i.prototype.markChildDirty=function(t,e){if(!t.$hasFlags(512)){t.$setFlags(512);var i=t.$displayList;if((i||t.$renderNode)&&e&&e.markDirty(i||t),!i){var r=t.$children;if(r)for(var n=r.length-1;n>=0;n--)this.markChildDirty(r[n],e)}}},i.prototype.$cacheAsBitmapChanged=function(){e.prototype.$cacheAsBitmapChanged.call(this);for(var t=this.$displayList||this.$parentDisplayList,i=this.$children,r=i.length-1;r>=0;r--)this.assignParentDisplayList(i[r],t,t)},i.prototype.assignParentDisplayList=function(t,e,i){t.$parentDisplayList=i,t.$setFlags(512);var r=t.$displayList;if((t.$renderNode||r)&&e&&e.markDirty(r||t),!r){var n=t.$children;if(n)for(var o=n.length-1;o>=0;o--)this.assignParentDisplayList(n[o],e,i)}},i.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*i+r.tx,o=r.b*t+r.d*i+r.ty,s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(n,o))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var a=this.$children,h=!1,l=null,u=a.length-1;u>=0;u--){var c=a[u];
if(!c.$maskedObject&&(l=c.$hitTest(t,i))){if(h=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:h?this:e.prototype.$hitTest.call(this,t,i)},i.prototype.$setAlpha=function(t){return t=+t||0,t==this.$alpha?!1:(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),this.$invalidateAllChildren(),!0)},i.prototype.$invalidateAllChildren=function(){var t=this.$children;if(t)for(var e=t.length-1;e>=0;e--){var i=t[e];i.$invalidate(),i.$children&&i.$invalidateAllChildren()}},i}(t.DisplayObject);e.$EVENT_ADD_TO_STAGE_LIST=[],e.$EVENT_REMOVE_FROM_STAGE_LIST=[],t.DisplayObjectContainer=e,__reflect(e.prototype,"egret.DisplayObjectContainer")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e.type=null,e.$targets=[],e}return __extends(e,t),e.prototype.$addTarget=function(t){for(var e=this.$targets.length,i=0;e>i;i++)if(this.$targets[i].$hashCode==t.$hashCode)return;this.$targets.push(t)},e.prototype.$removeTarget=function(t){for(var e=this.$targets.length,i=0;e>i;i++)if(this.$targets[i].$hashCode==t.$hashCode)return void this.$targets.splice(i,1)},e.prototype.invalidate=function(){for(var t=this.$targets.length,e=0;t>e;e++)this.$targets[e].$invalidateContentBounds()},e.prototype.$toJson=function(){return""},e}(t.HashObject);t.Filter=e,__reflect(e.prototype,"egret.Filter")}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={})),function(t){var e;!function(e){function i(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t.$locale_strings[t.$language][e];if(!n)return"{"+e+"}";for(var o=i.length,s=0;o>s;s++)n=n.replace("{"+s+"}",i[s]);return n}e.tr=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o.$eventPhase=2,o.$currentTarget=null,o.$target=null,o.$isDefaultPrevented=!1,o.$isPropagationStopped=!1,o.$isPropagationImmediateStopped=!1,o.$type=e,o.$bubbles=!!i,o.$cancelable=!!r,o.data=n,o}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),e.prototype.$setTarget=function(t){return this.$target=t,!0},e.prototype.isDefaultPrevented=function(){return this.$isDefaultPrevented},e.prototype.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},e.prototype.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},e.prototype.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},e.prototype.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},e.dispatchEvent=function(t,i,r,n){void 0===r&&(r=!1);var o=e.create(e,i,r),s=e._getPropertyData(e);void 0!=n&&(s.data=n);var a=t.dispatchEvent(o);return e.release(o),a},e._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},e.create=function(t,e,i,r){var n=t.eventPool;if(n||(n=t.eventPool=[]),n.length){var o=n.pop();return o.$type=e,o.$bubbles=!!i,o.$cancelable=!!r,o.$isDefaultPrevented=!1,o.$isPropagationStopped=!1,o.$isPropagationImmediateStopped=!1,o.$eventPhase=2,o}return new t(e,i,r)},e.release=function(t){t.clean();var e=Object.getPrototypeOf(t).constructor;e.eventPool.push(t)},e}(t.HashObject);e.ADDED_TO_STAGE="addedToStage",e.REMOVED_FROM_STAGE="removedFromStage",e.ADDED="added",e.REMOVED="removed",e.ENTER_FRAME="enterFrame",e.RENDER="render",e.RESIZE="resize",e.CHANGE="change",e.CHANGING="changing",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.ENDED="ended",e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.CLOSE="close",e.CONNECT="connect",e.LEAVE_STAGE="leaveStage",e.SOUND_COMPLETE="soundComplete",t.Event=e,__reflect(e.prototype,"egret.Event")}(egret||(egret={}));var egret;!function(t){var e=[],i=Math.PI/180,r=function(r){function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=r.call(this)||this;return i.x=t,i.y=e,i}return __extends(n,r),n.release=function(t){t&&e.push(t)},n.create=function(t,i){var r=e.pop();return r||(r=new n),r.setTo(t,i)},Object.defineProperty(n.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),n.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},n.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},n.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.interpolate=function(t,e,i){var r=1-i;return new n(t.x*i+e.x*r,t.y*i+e.y*r)},n.prototype.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},n.prototype.offset=function(t,e){this.x+=t,this.y+=e},n.polar=function(e,r){return new n(e*t.NumberUtils.cos(r/i),e*t.NumberUtils.sin(r/i))},n.prototype.subtract=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},n}(t.HashObject);t.Point=r,__reflect(r.prototype,"egret.Point"),t.$TempPoint=new r}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){var r=e.call(this)||this;return r._bitmapX=0,r._bitmapY=0,r._textureMap=t.createMap(),r.$texture=i,r._bitmapX=i._bitmapX-i._offsetX,r._bitmapY=i._bitmapY-i._offsetY,r}return __extends(i,e),i.prototype.getTexture=function(t){return this._textureMap[t]},i.prototype.createTexture=function(e,i,r,n,o,s,a,h,l){void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=s+n),void 0===l&&(l=a+o);var u=new t.Texture;return u._bitmapData=this.$texture._bitmapData,u.$initData(this._bitmapX+i,this._bitmapY+r,n,o,s,a,h,l,this.$texture._sourceWidth,this.$texture._sourceHeight),this._textureMap[e]=u,u},i.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,__reflect(e.prototype,"egret.SpriteSheet")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n,o,s,a,h){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===r&&(r=6),void 0===n&&(n=6),void 0===o&&(o=2),void 0===s&&(s=1),void 0===a&&(a=!1),void 0===h&&(h=!1);var l=t.call(this)||this;return l.type="glow",l.$color=e,l.$blue=255&e,l.$green=(65280&e)>>8,l.$red=e>>16,l.$alpha=i,l.$blurX=r,l.$blurY=n,l.$strength=o,l.$quality=s,l.$inner=a,l.$knockout=h,l}return __extends(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.$strength},set:function(t){this.$strength!=t&&(this.$strength=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.$quality},set:function(t){this.$quality!=t&&(this.$quality=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inner",{get:function(){return this.$inner},set:function(t){this.$inner!=t&&(this.$inner=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this.$knockout},set:function(t){this.$knockout!=t&&(this.$knockout=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+"}"},e}(t.Filter);t.GlowFilter=e,__reflect(e.prototype,"egret.GlowFilter")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*e+r.c*i+r.tx,o=r.b*e+r.d*i+r.ty,s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(n,o))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var a=this.$children,h=!1,l=null,u=a.length-1;u>=0;u--){var c=a[u];if(!c.$maskedObject&&(l=c.$hitTest(e,i))){if(h=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:h?this:(l=t.DisplayObject.prototype.$hitTest.call(this,e,i),l&&(l=this.$graphics.$hitTest(e,i)),l)},i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObjectContainer);t.Sprite=e,__reflect(e.prototype,"egret.Sprite")}(egret||(egret={}));var egret;!function(t){t.$TextureScaleFactor=1;var e=function(e){function i(){var t=e.call(this)||this;return t._bitmapX=0,t._bitmapY=0,t._bitmapWidth=0,t._bitmapHeight=0,t._offsetX=0,t._offsetY=0,t._textureWidth=0,t._textureHeight=0,t._sourceWidth=0,t._sourceHeight=0,t._bitmapData=null,t}return __extends(i,e),Object.defineProperty(i.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),i.prototype.$getTextureWidth=function(){return this._textureWidth},Object.defineProperty(i.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),i.prototype.$getTextureHeight=function(){return this._textureHeight},i.prototype.$getScaleBitmapWidth=function(){return this._bitmapWidth*t.$TextureScaleFactor},i.prototype.$getScaleBitmapHeight=function(){return this._bitmapHeight*t.$TextureScaleFactor},Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(t){this._setBitmapData(t)},enumerable:!0,configurable:!0}),i.prototype._setBitmapData=function(e){this._bitmapData=e;var i=t.$TextureScaleFactor,r=e.width*i,n=e.height*i;this.$initData(0,0,r,n,0,0,r,n,e.width,e.height)},i.prototype.$initData=function(e,i,r,n,o,s,a,h,l,u){var c=t.$TextureScaleFactor;this._bitmapX=e/c,this._bitmapY=i/c,this._bitmapWidth=r/c,this._bitmapHeight=n/c,this._offsetX=o,this._offsetY=s,this._textureWidth=a,this._textureHeight=h,this._sourceWidth=l,this._sourceHeight=u,t.BitmapData.$invalidate(this)},i.prototype.getPixel32=function(t,e){throw new Error},i.prototype.getPixels=function(t,e,i,r){throw void 0===i&&(i=1),void 0===r&&(r=1),new Error},i.prototype.toDataURL=function(t,e){throw new Error},i.prototype.saveToFile=function(t,e,i){throw new Error},i.prototype.dispose=function(){this._bitmapData&&(this._bitmapData.$dispose(),this._bitmapData=null)},i}(t.HashObject);t.Texture=e,__reflect(e.prototype,"egret.Texture")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(r){var n=e.call(this)||this;return n.$scale9Grid=null,n.$fillMode="scale",n._pixelHitTest=!1,n.$renderNode=new t.sys.BitmapNode,n.$Bitmap={0:null,1:null,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:i.defaultSmoothing,11:0/0,12:0/0},n.$setBitmapData(r),n}return __extends(i,e),i.prototype.$onAddToStage=function(i,r){e.prototype.$onAddToStage.call(this,i,r);var n=this.$Bitmap[0];n&&t.BitmapData.$addDisplayObject(this,n)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var i=this.$Bitmap[0];i&&t.BitmapData.$removeDisplayObject(this,i)},Object.defineProperty(i.prototype,"bitmapData",{get:function(){var e=this.$Bitmap[0];return e instanceof t.Texture?null:e},set:function(t){this.$setBitmapData(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){var e=this.$Bitmap[0];return e instanceof t.Texture?e:null},set:function(t){this.$setBitmapData(t)},enumerable:!0,configurable:!0}),i.prototype.$setBitmapData=function(e){var i=this.$Bitmap,r=i[0];if(e==r)return!1;if(i[0]=e,!e)return r&&t.BitmapData.$removeDisplayObject(this,r),this.setImageData(null,0,0,0,0,0,0,0,0,0,0),this.$invalidateContentBounds(),!0;if(this.$refreshImageData(),this.$stage){if(r){var n=void 0;n=r._bitmapData&&r._bitmapData.hashCode?r._bitmapData.hashCode:r.hashCode;var o=void 0;if(o=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,n==o)return this.$invalidateContentBounds(),!0;t.BitmapData.$removeDisplayObject(this,r)}t.BitmapData.$addDisplayObject(this,e)}return this.$invalidateContentBounds(),!0},i.prototype.$refreshImageData=function(){var e=this.$Bitmap,i=e[0];if(i)if(i instanceof t.Texture){var r=i;this.setImageData(r._bitmapData,r._bitmapX,r._bitmapY,r._bitmapWidth,r._bitmapHeight,r._offsetX,r._offsetY,r.$getTextureWidth(),r.$getTextureHeight(),r._sourceWidth,r._sourceHeight)}else{var n=i.width,o=i.height;this.setImageData(i,0,0,n,o,0,0,n,o,n,o)}},i.prototype.setImageData=function(t,e,i,r,n,o,s,a,h,l,u){var c=this.$Bitmap;c[1]=t,c[2]=e,c[3]=i,c[4]=r,c[5]=n,c[6]=o,c[7]=s,c[8]=a,c[9]=h,c[13]=l,c[14]=u},Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$scale9Grid=t,this.$invalidateContentBounds()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){this.$setFillMode(t)},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(t){return t==this.$fillMode?!1:(this.$fillMode=t,!0)},Object.defineProperty(i.prototype,"smoothing",{get:function(){var t=this.$Bitmap;return t[10]},set:function(t){t=!!t;var e=this.$Bitmap;t!=e[10]&&(e[10]=t,this.$invalidate())},enumerable:!0,configurable:!0}),i.prototype.$setWidth=function(t){var e=this.$Bitmap;return 0>t||t==e[11]?!1:(e[11]=t,this.$invalidateContentBounds(),!0)},i.prototype.$setHeight=function(t){var e=this.$Bitmap;return 0>t||t==e[12]?!1:(e[12]=t,this.$invalidateContentBounds(),!0)},i.prototype.$getWidth=function(){var t=this.$Bitmap;return isNaN(t[11])?this.$getContentBounds().width:t[11]},i.prototype.$getHeight=function(){var t=this.$Bitmap;return isNaN(t[12])?this.$getContentBounds().height:t[12]},i.prototype.$measureContentBounds=function(t){var e=this.$Bitmap;if(e[1]){var i=this.$Bitmap,r=isNaN(i[11])?i[8]:i[11],n=isNaN(i[12])?i[9]:i[12];t.setTo(0,0,r,n)}else{var r=isNaN(e[11])?0:e[11],n=isNaN(e[12])?0:e[12];t.setTo(0,0,r,n)}},i.prototype.$render=function(){var e=this.$Bitmap;if(e[1]){var i=isNaN(e[11])?e[8]:e[11],r=isNaN(e[12])?e[9]:e[12];t.sys.BitmapNode.$updateTextureData(this.$renderNode,e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],i,r,e[13],e[14],this.scale9Grid||e[0].scale9Grid,this.fillMode,e[10])}},Object.defineProperty(i.prototype,"pixelHitTest",{get:function(){return this._pixelHitTest},set:function(t){this._pixelHitTest=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r&&this._pixelHitTest&&(r=this.hitTestPixel(t,i)),r},i.prototype.hitTestPixel=function(e,i){var r,n=this.$getInvertedConcatenatedMatrix(),o=n.a*e+n.c*i+n.tx,s=n.b*e+n.d*i+n.ty,a=this.$displayList;if(a){var h=a.renderBuffer;try{r=h.getPixels(o-a.offsetX,s-a.offsetY)}catch(l){throw console.log(this.$Bitmap[0]),new Error(t.sys.tr(1039))}}else{var h=t.sys.customHitTestBuffer;h.resize(3,3);var u=this.$getRenderNode(),c=t.Matrix.create();c.identity(),c.translate(1-o,1-s),t.sys.systemRenderer.drawNodeToBuffer(u,h,c,!0),t.Matrix.release(c);try{r=h.getPixels(1,1)}catch(l){throw console.log(this.$Bitmap[0]),new Error(t.sys.tr(1039))}}return 0===r[3]?null:this},i.$drawImage=function(e,i,r,n,o,s,a,h,l,u,c,p,d,f,g,y,v){console.warn("deprecated method : Bitmap.$drawImage,use egret.sys.BitmapNode.$drawImage instead of it"),t.sys.BitmapNode.$updateTextureData(e,i,r,n,o,s,a,h,l,u,c,p,d,f,g,y,v)},i}(t.DisplayObject);e.defaultSmoothing=!0,t.Bitmap=e,__reflect(e.prototype,"egret.Bitmap")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function i(){this.type=0,this.needRedraw=!1,this.renderAlpha=1,this.renderVisible=!0,this.renderMatrix=new t.Matrix,this.renderRegion=new e.Region,this.moved=!1,this.drawData=[],this.renderCount=0}return i.prototype.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},i.prototype.$getRenderCount=function(){return this.renderCount},i}();e.RenderNode=i,__reflect(i.prototype,"egret.sys.RenderNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0,this.$lastX=0,this.$lastY=0}return t.prototype.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},t.prototype.curveTo=function(t,e,i,r){this.$commands[this.commandPosition++]=3;var n=this.dataPosition;this.$data[n++]=t,this.$data[n++]=e,this.$data[n++]=i,this.$data[n++]=r,this.dataPosition=n},t.prototype.cubicCurveTo=function(t,e,i,r,n,o){this.$commands[this.commandPosition++]=4;var s=this.dataPosition;this.$data[s++]=t,this.$data[s++]=e,this.$data[s++]=i,this.$data[s++]=r,this.$data[s++]=n,this.$data[s++]=o,this.dataPosition=s},t.prototype.drawRect=function(t,e,i,r){var n=t+i,o=e+r;this.moveTo(t,e),this.lineTo(n,e),this.lineTo(n,o),this.lineTo(t,o),this.lineTo(t,e)},t.prototype.drawRoundRect=function(t,e,i,r,n,o){var s=.5*n|0,a=o?.5*o|0:s;if(!s||!a)return void this.drawRect(t,e,i,r);var h=.5*i,l=.5*r;if(s>h&&(s=h),a>l&&(a=l),h===s&&l===a)return void(s===a?this.drawCircle(t+s,e+a,s):this.drawEllipse(t,e,2*s,2*a));var u=t+i,c=e+r,p=t+s,d=u-s,f=e+a,g=c-a;this.moveTo(u,g),this.curveTo(u,c,d,c),this.lineTo(p,c),this.curveTo(t,c,t,g),this.lineTo(t,f),this.curveTo(t,e,p,e),this.lineTo(d,e),this.curveTo(u,e,u,f),this.lineTo(u,g)},t.prototype.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},t.prototype.drawEllipse=function(t,e,i,r){var n=.5*i,o=.5*r;t+=n,e+=o,this.arcToBezier(t,e,n,o,0,2*Math.PI)},t.prototype.drawArc=function(t,e,i,r,n,o){o?n>=r&&(n-=2*Math.PI):r>=n&&(n+=2*Math.PI),this.arcToBezier(t,e,i,i,r,n,o)},t.prototype.arcToBezier=function(t,e,i,r,n,o,s){var a=.5*Math.PI,h=n,l=h;s?(l+=-a-h%a,o>l&&(l=o)):(l+=a-h%a,l>o&&(l=o));var u=t+Math.cos(h)*i,c=e+Math.sin(h)*r;(this.$lastX!=u||this.$lastY!=c)&&this.moveTo(u,c);for(var p=Math.cos(h),d=Math.sin(h),f=0;4>f;f++){var g=l-h,y=4*Math.tan(g/4)/3,v=u-d*y*i,$=c+p*y*r;p=Math.cos(l),d=Math.sin(l),u=t+p*i,c=e+d*r;var m=u+d*y*i,b=c-p*y*r;if(this.cubicCurveTo(v,$,m,b,u,c),l===o)break;h=l,s?(l=h-a,o>l&&(l=o)):(l=h+a,l>o&&(l=o))}},t}();t.Path2D=e,__reflect(e.prototype,"egret.sys.Path2D")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t}t.createMap=e}(egret||(egret={}));var egret;!function(t){function e(){return""}function i(t){throw new Error("#"+t)}function r(){}function n(){}t.getString=e,t.$error=i,t.$warn=r,t.$markCannotUse=n}(egret||(egret={}));var egret;!function(t){t.CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"}}(egret||(egret={}));var egret;!function(t){t.DirtyRegionPolicy={OFF:"off",ON:"on"}}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}return e.compileProgram=function(i,r,n){var o=e.compileFragmentShader(i,n),s=e.compileVertexShader(i,r),a=i.createProgram();return i.attachShader(a,s),i.attachShader(a,o),i.linkProgram(a),i.getProgramParameter(a,i.LINK_STATUS)||t.$warn(1020),a},e.compileFragmentShader=function(t,i){return e._compileShader(t,i,t.FRAGMENT_SHADER)},e.compileVertexShader=function(t,i){return e._compileShader(t,i,t.VERTEX_SHADER)},e._compileShader=function(t,e,i){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:null},e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var t=document.createElement("canvas");e.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(i){e.canUseWebGL=!1}return e.canUseWebGL},e.deleteWebGLTexture=function(t){if(t){var e=t.glContext;e&&e.deleteTexture(t)}},e}();t.WebGLUtils=e,__reflect(e.prototype,"egret.WebGLUtils")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),t.call(this,e,i,r)||this}return __extends(e,t),e}(t.Event);e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",t.FocusEvent=e,__reflect(e.prototype,"egret.FocusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",t.GeolocationEvent=e,__reflect(e.prototype,"egret.GeolocationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var n=e.call(this,t,i,r)||this;return n._status=0,n}return __extends(i,e),Object.defineProperty(i.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),i.dispatchHTTPStatusEvent=function(e,r){var n=t.Event.create(i,i.HTTP_STATUS);n._status=r;var o=e.dispatchEvent(n);return t.Event.release(n),o},i}(t.Event);e.HTTP_STATUS="httpStatus",t.HTTPStatusEvent=e,__reflect(e.prototype,"egret.HTTPStatusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)||this}return __extends(i,e),i.dispatchIOErrorEvent=function(e){var r=t.Event.create(i,i.IO_ERROR),n=e.dispatchEvent(r);return t.Event.release(r),n},i}(t.Event);e.IO_ERROR="ioError",t.IOErrorEvent=e,__reflect(e.prototype,"egret.IOErrorEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.MotionEvent=e,__reflect(e.prototype,"egret.MotionEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e}(t.Event);t.OrientationEvent=e,__reflect(e.prototype,"egret.OrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n,o){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n=0),void 0===o&&(o=0);var s=e.call(this,t,i,r)||this;return s.bytesLoaded=0,s.bytesTotal=0,s.bytesLoaded=n,s.bytesTotal=o,s}return __extends(i,e),i.dispatchProgressEvent=function(e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var s=t.Event.create(i,r);s.bytesLoaded=n,s.bytesTotal=o;var a=e.dispatchEvent(s);return t.Event.release(s),a},i}(t.Event);e.PROGRESS="progress",e.SOCKET_DATA="socketData",t.ProgressEvent=e,__reflect(e.prototype,"egret.ProgressEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),e.call(this,t,i,r)||this}return __extends(i,e),i.dispatchStageOrientationEvent=function(e,r){var n=t.Event.create(i,r),o=e.dispatchEvent(n);return t.Event.release(n),o},i}(t.Event);e.ORIENTATION_CHANGE="orientationChange",t.StageOrientationEvent=e,__reflect(e.prototype,"egret.StageOrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,n){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===n&&(n="");var o=e.call(this,t,i,r)||this;return o.text=n,o}return __extends(i,e),i.dispatchTextEvent=function(e,r,n){var o=t.Event.create(i,r);o.text=n;var s=e.dispatchEvent(o);return t.Event.release(o),s},i}(t.Event);e.LINK="link",t.TextEvent=e,__reflect(e.prototype,"egret.TextEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r){return e.call(this,t,i,r)||this}return __extends(i,e),i.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},i.dispatchTimerEvent=function(e,r,n,o){var s=t.Event.create(i,r,n,o),a=e.dispatchEvent(s);return t.Event.release(s),a},i}(t.Event);e.TIMER="timer",e.TIMER_COMPLETE="timerComplete",t.TimerEvent=e,__reflect(e.prototype,"egret.TimerEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.format="image",i.$deleteSource=!0,i.source=t,i.width=t.width,i.height=t.height,i}return __extends(i,e),i.prototype.$dispose=function(){t.Capabilities.runtimeType==t.RuntimeType.WEB&&"webgl"==t.Capabilities.renderMode&&this.webGLTexture&&(t.WebGLUtils.deleteWebGLTexture(this.webGLTexture),this.webGLTexture=null),this.source&&this.source.dispose&&this.source.dispose(),this.source=null,i.$dispose(this)},i.$addDisplayObject=function(t,e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode){if(!i._displayList[r])return void(i._displayList[r]=[t]);var n=i._displayList[r];n.indexOf(t)<0&&n.push(t)}},i.$removeDisplayObject=function(t,e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r]){var n=i._displayList[r],o=n.indexOf(t);o>=0&&n.splice(o)}},i.$invalidate=function(e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r])for(var n=i._displayList[r],o=0;o<n.length;o++)n[o]instanceof t.Bitmap&&n[o].$refreshImageData(),n[o].$invalidateContentBounds()},i.$dispose=function(e){var r;if(r=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r&&i._displayList[r]){for(var n=i._displayList[r],o=0,s=n;o<s.length;o++){var a=s[o];a instanceof t.Bitmap&&(a.$Bitmap[1]=null),a.$invalidateContentBounds()}delete i._displayList[r]}},i}(t.HashObject);e._displayList=t.createMap(),t.BitmapData=e,__reflect(e.prototype,"egret.BitmapData")}(egret||(egret={}));var egret;!function(t){var e=new t.Point,i=function(i){function r(t,e,r,n,o,s){var a=i.call(this,t,e,r)||this;return a.targetChanged=!0,a.touchDown=!1,a.$initTo(n,o,s),a}return __extends(r,i),r.prototype.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},Object.defineProperty(r.prototype,"stageX",{get:function(){return this.$stageX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stageY",{get:function(){return this.$stageY},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"localX",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"localY",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localY},enumerable:!0,configurable:!0}),r.prototype.getLocalXY=function(){this.targetChanged=!1;var t=this.$target.$getInvertedConcatenatedMatrix();t.transformPoint(this.$stageX,this.$stageY,e),this._localX=e.x,this._localY=e.y},r.prototype.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},r.prototype.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},r.dispatchTouchEvent=function(e,i,n,o,s,a,h,l){if(void 0===l&&(l=!1),!n&&!e.hasEventListener(i))return!0;var u=t.Event.create(r,i,n,o);u.$initTo(s,a,h),u.touchDown=l;var c=e.dispatchEvent(u);return t.Event.release(u),c},r}(t.Event);i.TOUCH_MOVE="touchMove",i.TOUCH_BEGIN="touchBegin",i.TOUCH_END="touchEnd",i.TOUCH_CANCEL="touchCancel",i.TOUCH_TAP="touchTap",i.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",i.TOUCH_ROLL_OUT="touchRollOut",i.TOUCH_ROLL_OVER="touchRollOver",t.TouchEvent=i,__reflect(i.prototype,"egret.TouchEvent")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r){void 0===e&&(e=4),void 0===i&&(i=4),void 0===r&&(r=1);var n=t.call(this)||this;return n.type="blur",n.$blurX=e,n.$blurY=i,n.$quality=r,n}return __extends(e,t),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"blurX": '+this.$blurX+', "blurY": '+this.$blurY+', "quality": 1}'},e}(t.Filter);t.BlurFilter=e,__reflect(e.prototype,"egret.BlurFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.$matrix=[],i.matrix2=[],i.type="colorTransform",i.setMatrix(e),i}return __extends(e,t),Object.defineProperty(e.prototype,"matrix",{get:function(){for(var t=0;20>t;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},set:function(t){this.setMatrix(t),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.setMatrix=function(t){if(t)for(var e=0;20>e;e++)this.$matrix[e]=t[e];else for(var e=0;20>e;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0},e.prototype.$toJson=function(){return'{"matrix": ['+this.$matrix.toString()+"]}"},e}(t.Filter);t.ColorMatrixFilter=e,__reflect(e.prototype,"egret.ColorMatrixFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,r,n,o,s,a,h,l,u,c){void 0===e&&(e=4),void 0===i&&(i=45),void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o=4),void 0===s&&(s=4),void 0===a&&(a=1),void 0===h&&(h=1),void 0===l&&(l=!1),void 0===u&&(u=!1),void 0===c&&(c=!1);var p=t.call(this,r,n,o,s,a,h,l,u)||this;return p.$distance=e,p.$angle=i,p.$hideObject=c,p}return __extends(e,t),Object.defineProperty(e.prototype,"distance",{get:function(){return this.$distance},set:function(t){this.$distance!=t&&(this.$distance=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.$angle},set:function(t){this.$angle!=t&&(this.$angle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideObject",{get:function(){return this.$hideObject},set:function(t){this.$hideObject!=t&&(this.$hideObject=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"distance": '+this.$distance+', "angle": '+this.$angle+', "color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+', "hideObject": '+this.$hideObject+"}"},e}(t.GlowFilter);t.DropShadowFilter=e,__reflect(e.prototype,"egret.DropShadowFilter")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.LINEAR="linear",e.RADIAL="radial",t.GradientType=e,__reflect(e.prototype,"egret.GradientType")}(egret||(egret={}));var egret;
!function(t){function e(t){return t%=2*Math.PI,0>t&&(t+=2*Math.PI),t}var i=function(i){function r(){var e=i.call(this)||this;return e.lastX=0,e.lastY=0,e.fillPath=null,e.strokePath=null,e.topLeftStrokeWidth=0,e.bottomRightStrokeWidth=0,e.minX=1/0,e.minY=1/0,e.maxX=-(1/0),e.maxY=-(1/0),e.includeLastPosition=!0,e.$renderNode=new t.sys.GraphicsNode,e}return __extends(r,i),r.prototype.$setTarget=function(t){this.targetDisplay&&(this.targetDisplay.$renderNode=null),t.$renderNode=this.$renderNode,this.targetDisplay=t},r.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},r.prototype.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,this.fillPath=this.$renderNode.beginFill(t,e,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.beginGradientFill=function(t,e,i,r,n){void 0===n&&(n=null),this.fillPath=this.$renderNode.beginGradientFill(t,e,i,r,n,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.endFill=function(){this.fillPath=null},r.prototype.lineStyle=function(t,e,i,r,n,o,s,a){void 0===t&&(t=0/0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=!1),void 0===n&&(n="normal"),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=3),t=+t||0,0>=t?(this.strokePath=null,this.setStrokeWidth(0)):(e=+e||0,i=+i||0,a=+a||0,this.setStrokeWidth(t),this.strokePath=this.$renderNode.lineStyle(t,e,i,o,s,a),this.$renderNode.drawData.length>1&&this.strokePath.moveTo(this.lastX,this.lastY))},r.prototype.drawRect=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,o=this.strokePath;n&&n.drawRect(t,e,i,r),o&&o.drawRect(t,e,i,r),this.extendBoundsByPoint(t+i,e+r),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},r.prototype.drawRoundRect=function(t,e,i,r,n,o){t=+t||0,e=+e||0,i=+i||0,r=+r||0,n=+n||0,o=+o||0;var s=this.fillPath,a=this.strokePath;s&&s.drawRoundRect(t,e,i,r,n,o),a&&a.drawRoundRect(t,e,i,r,n,o);var h=.5*n|0,l=o?.5*o|0:h,u=t+i,c=e+r,p=c-l;this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(u,c),this.updatePosition(u,p),this.$renderNode.dirtyRender=!0},r.prototype.drawCircle=function(t,e,i){t=+t||0,e=+e||0,i=+i||0;var r=this.fillPath,n=this.strokePath;r&&r.drawCircle(t,e,i),n&&n.drawCircle(t,e,i),this.extendBoundsByPoint(t-i,e-i),this.extendBoundsByPoint(t+i,e+i),this.updatePosition(t+i,e),this.$renderNode.dirtyRender=!0},r.prototype.drawEllipse=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,o=this.strokePath;n&&n.drawEllipse(t,e,i,r),o&&o.drawEllipse(t,e,i,r),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(t+i,e+r),this.updatePosition(t+i,e+.5*r),this.$renderNode.dirtyRender=!0},r.prototype.moveTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,r=this.strokePath;i&&i.moveTo(t,e),r&&r.moveTo(t,e),this.includeLastPosition=!1,this.lastX=t,this.lastY=e,this.$renderNode.dirtyRender=!0},r.prototype.lineTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,r=this.strokePath;i&&i.lineTo(t,e),r&&r.lineTo(t,e),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},r.prototype.curveTo=function(t,e,i,r){t=+t||0,e=+e||0,i=+i||0,r=+r||0;var n=this.fillPath,o=this.strokePath;n&&n.curveTo(t,e,i,r),o&&o.curveTo(t,e,i,r),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,r),this.updatePosition(i,r),this.$renderNode.dirtyRender=!0},r.prototype.cubicCurveTo=function(t,e,i,r,n,o){t=+t||0,e=+e||0,i=+i||0,r=+r||0,n=+n||0,o=+o||0;var s=this.fillPath,a=this.strokePath;s&&s.cubicCurveTo(t,e,i,r,n,o),a&&a.cubicCurveTo(t,e,i,r,n,o),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,r),this.extendBoundsByPoint(n,o),this.updatePosition(n,o),this.$renderNode.dirtyRender=!0},r.prototype.drawArc=function(t,i,r,n,o,s){if(!(0>r||n===o)){t=+t||0,i=+i||0,r=+r||0,n=+n||0,o=+o||0,s=!!s,n=e(n),o=e(o);var a=this.fillPath,h=this.strokePath;a&&(a.$lastX=this.lastX,a.$lastY=this.lastY,a.drawArc(t,i,r,n,o,s)),h&&(h.$lastX=this.lastX,h.$lastY=this.lastY,h.drawArc(t,i,r,n,o,s)),s?this.arcBounds(t,i,r,o,n):this.arcBounds(t,i,r,n,o);var l=t+Math.cos(o)*r,u=i+Math.sin(o)*r;this.updatePosition(l,u),this.$renderNode.dirtyRender=!0}},r.prototype.arcBounds=function(t,e,i,r,n){var o=Math.PI;if(Math.abs(r-n)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);r>n&&(n+=2*o);for(var s=Math.cos(r)*i,a=Math.cos(n)*i,h=Math.min(s,a),l=Math.max(s,a),u=Math.sin(r)*i,c=Math.sin(n)*i,p=Math.min(u,c),d=Math.max(u,c),f=r/(.5*o),g=n/(.5*o),y=Math.ceil(f);g>=y;y++)switch(y%4){case 0:l=i;break;case 1:d=i;break;case 2:h=-i;break;case 3:p=-i}h=Math.floor(h),p=Math.floor(p),l=Math.ceil(l),d=Math.ceil(d),this.extendBoundsByPoint(h+t,p+e),this.extendBoundsByPoint(l+t,d+e)},r.prototype.clear=function(){this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},r.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},r.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},r.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e),this.targetDisplay.$invalidateContentBounds()},r.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},r.prototype.$hitTest=function(e,i){var r=this.targetDisplay,n=r.$getInvertedConcatenatedMatrix(),o=n.a*e+n.c*i+n.tx,s=n.b*e+n.d*i+n.ty,a=t.sys.canvasHitTestBuffer;a.resize(3,3);var h=this.$renderNode,l=t.Matrix.create();l.identity(),l.translate(1-o,1-s),t.sys.canvasRenderer.drawNodeToBuffer(h,a,l,!0),t.Matrix.release(l);try{var u=a.getPixels(1,1);if(0===u[3])return null}catch(c){throw new Error(t.sys.tr(1039))}return r},r.prototype.$onRemoveFromStage=function(){this.$renderNode&&this.$renderNode.clean()},r}(t.HashObject);t.Graphics=i,__reflect(i.prototype,"egret.Graphics")}(egret||(egret={}));var egret;!function(t){var e=Math.PI,i=2*e,r=e/180,n=[],o=function(o){function s(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0);var a=o.call(this)||this;return a.a=t,a.b=e,a.c=i,a.d=r,a.tx=n,a.ty=s,a}return __extends(s,o),s.release=function(t){t&&n.push(t)},s.create=function(){var t=n.pop();return t||(t=new s),t},s.prototype.clone=function(){return new s(this.a,this.b,this.c,this.d,this.tx,this.ty)},s.prototype.concat=function(t){var e=this.a*t.a,i=0,r=0,n=this.d*t.d,o=this.tx*t.a+t.tx,s=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(e+=this.b*t.c,n+=this.c*t.b,i+=this.a*t.b+this.b*t.d,r+=this.c*t.a+this.d*t.c,o+=this.ty*t.c,s+=this.tx*t.b),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=o,this.ty=s},s.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},s.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},s.prototype.invert=function(){this.$invertInto(this)},s.prototype.$invertInto=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=this.tx,s=this.ty;if(0==i&&0==r)return t.b=t.c=0,void(0==e||0==n?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,n=t.d=1/n,t.tx=-e*o,t.ty=-n*s));var a=e*n-i*r;if(0==a)return void t.identity();a=1/a;var h=t.a=n*a;i=t.b=-i*a,r=t.c=-r*a,n=t.d=e*a,t.tx=-(h*o+r*s),t.ty=-(i*o+n*s)},s.prototype.rotate=function(e){if(e=+e,0!==e){e/=r;var i=t.NumberUtils.cos(e),n=t.NumberUtils.sin(e),o=this.a,s=this.b,a=this.c,h=this.d,l=this.tx,u=this.ty;this.a=o*i-s*n,this.b=o*n+s*i,this.c=a*i-h*n,this.d=a*n+h*i,this.tx=l*i-u*n,this.ty=l*n+u*i}},s.prototype.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},s.prototype.setTo=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},s.prototype.transformPoint=function(e,i,r){var n=this.a*e+this.c*i+this.tx,o=this.b*e+this.d*i+this.ty;return r?(r.setTo(n,o),r):new t.Point(n,o)},s.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},s.prototype.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},s.prototype.prepend=function(t,e,i,r,n,o){var s=this.tx;if(1!=t||0!=e||0!=i||1!=r){var a=this.a,h=this.c;this.a=a*t+this.b*i,this.b=a*e+this.b*r,this.c=h*t+this.d*i,this.d=h*e+this.d*r}return this.tx=s*t+this.ty*i+n,this.ty=s*e+this.ty*r+o,this},s.prototype.append=function(t,e,i,r,n,o){var s=this.a,a=this.b,h=this.c,l=this.d;return(1!=t||0!=e||0!=i||1!=r)&&(this.a=t*s+e*h,this.b=t*a+e*l,this.c=i*s+r*h,this.d=i*a+r*l),this.tx=n*s+o*h+this.tx,this.ty=n*a+o*l+this.ty,this},s.prototype.deltaTransformPoint=function(e){var i=this,r=i.a*e.x+i.c*e.y,n=i.b*e.x+i.d*e.y;return new t.Point(r,n)},s.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},s.prototype.createBox=function(e,i,n,o,s){void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0);var a=this;if(0!==n){n/=r;var h=t.NumberUtils.cos(n),l=t.NumberUtils.sin(n);a.a=h*e,a.b=l*i,a.c=-l*e,a.d=h*i}else a.a=e,a.b=0,a.c=0,a.d=i;a.tx=o,a.ty=s},s.prototype.createGradientBox=function(t,e,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.createBox(t/1638.4,e/1638.4,i,r+t/2,n+e/2)},s.prototype.$transformBounds=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=this.tx,s=this.ty,a=t.x,h=t.y,l=a+t.width,u=h+t.height,c=e*a+r*h+o,p=i*a+n*h+s,d=e*l+r*h+o,f=i*l+n*h+s,g=e*l+r*u+o,y=i*l+n*u+s,v=e*a+r*u+o,$=i*a+n*u+s,m=0;c>d&&(m=c,c=d,d=m),g>v&&(m=g,g=v,v=m),t.x=Math.floor(g>c?c:g),t.width=Math.ceil((d>v?d:v)-t.x),p>f&&(m=p,p=f,f=m),y>$&&(m=y,y=$,$=m),t.y=Math.floor(y>p?p:y),t.height=Math.ceil((f>$?f:$)-t.y)},s.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},s.prototype.$getScaleX=function(){var t=this;if(1==t.a&&0==t.b)return 1;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},s.prototype.$getScaleY=function(){var t=this;if(0==t.c&&1==t.d)return 1;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},s.prototype.$getSkewX=function(){return Math.atan2(this.d,this.c)-e/2},s.prototype.$getSkewY=function(){return Math.atan2(this.b,this.a)},s.prototype.$updateScaleAndRotation=function(e,n,o,s){if(!(0!=o&&o!=i||0!=s&&s!=i))return this.a=e,this.b=this.c=0,void(this.d=n);o/=r,s/=r;var a=t.NumberUtils.cos(o),h=t.NumberUtils.sin(o);o==s?(this.a=a*e,this.b=h*e):(this.a=t.NumberUtils.cos(s)*e,this.b=t.NumberUtils.sin(s)*e),this.c=-h*n,this.d=a*n},s.prototype.$preMultiplyInto=function(t,e){var i=t.a*this.a,r=0,n=0,o=t.d*this.d,s=t.tx*this.a+this.tx,a=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(i+=t.b*this.c,o+=t.c*this.b,r+=t.a*this.b+t.b*this.d,n+=t.c*this.a+t.d*this.c,s+=t.ty*this.c,a+=t.tx*this.b),e.a=i,e.b=r,e.c=n,e.d=o,e.tx=s,e.ty=a},s}(t.HashObject);t.Matrix=o,__reflect(o.prototype,"egret.Matrix"),t.$TempMatrix=new o}(egret||(egret={}));var egret;!function(t){t.JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"}}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}。",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton error，singleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="Cross domains pictures can not get pixel information!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="{0} is deprecated, please use {1} replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[1050]="ExternalInterface calls the method without js registration: {0}",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list！",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r._verticesDirty=!0,r._bounds=new t.Rectangle,r.$renderNode=new t.sys.MeshNode,r}return __extends(i,e),i.prototype.$render=function(){var e=this.$Bitmap,i=e[1];if(i){var r=(t.$TextureScaleFactor,this.$renderNode);r.smoothing=e[10],r.image=i,r.imageWidth=e[13],r.imageHeight=e[14];var n=isNaN(e[11])?e[8]:e[11],o=isNaN(e[12])?e[9]:e[12],s=n/e[8],a=o/e[9],h=e[4],l=e[5];r.drawMesh(e[2],e[3],h,l,e[6]*s,e[7]*a,s*h,a*l)}},i.prototype.$updateVertices=function(){this._verticesDirty=!0,this.$invalidateContentBounds()},i.prototype.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);for(var r=0,n=i.length;n>r;r+=2){var o=i[r],s=i[r+1];this._bounds.x>o&&(this._bounds.x=o),this._bounds.width<o&&(this._bounds.width=o),this._bounds.y>s&&(this._bounds.y=s),this._bounds.height<s&&(this._bounds.height=s)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},i}(t.Bitmap);t.Mesh=e,__reflect(e.prototype,"egret.Mesh")}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="找不到Egret入口类: {0}。",e[1002]="Egret入口类 {0} 必须继承自egret.DisplayObject。",e[1003]="参数 {0} 不能为 null。",e[1004]="无法将对象添加为它的一个子对象（或子对象的子对象等）的子对象。",e[1005]="不能将对象添加为其自身的子对象。",e[1006]="提供的 DisplayObject 必须是调用者的子级。",e[1007]="为参数指定的索引不在范围内。",e[1008]="实例化单例出错，不允许实例化多个 {0} 对象。",e[1009]="类 {0} 不可以使用属性 {1}",e[1010]="类 {0} 属性 {1} 是只读的",e[1011]="流错误。URL: {0}",e[1012]="参数 {0} 的类型必须为 Class。",e[1013]="变量赋值为NaN，请查看代码！",e[1014]="类 {0} 常量 {1} 是只读的",e[1015]="xml not found!",e[1016]="{0}已经废弃",e[1017]="JSON文件格式不正确: {0}\ndata: {1}",e[1018]="9宫格设置错误",e[1019]="网络异常:{0}",e[1020]="无法初始化着色器",e[1021]="当前浏览器不支持webgl",e[1022]="{0} ArgumentError",e[1023]="此方法在ScrollView内不可用!",e[1025]="遇到文件尾",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]="调用了未配置的注入规则:{0}。 请先在项目初始化里配置指定的注入规则，再调用对应单例。",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="跨域图片不可以使用toDataURL来转换成base64",e[1034]='音乐文件解码失败："{0}"，请使用标准的转换工具重新转换下mp3。',e[1035]="Native 下暂未实现此功能！",e[1036]="声音已停止，请重新调用 Sound.play() 来播放声音！",e[1037]="非正确的blob加载！",e[1038]="XML 格式错误!",e[1039]="跨域图片不能获取像素信息!",e[1040]="hitTestPoint 不能对跨域图片进行检测! 请检查该显示对象内是否含有跨域元素",e[1041]="{0} 已废弃,请使用 {1} 代替",e[1042]="drawToTexture方法传入的区域各个参数需要为整数,否则某些浏览器绘制会出现异常",e[1043]="{0} 中存在编译错误，属性名 : {1}，属性值 : {2}",e[1044]="当前的 runtime 版本不支持视频播放,请使用最新的版本",e[1045]="没有设置要加载的资源地址",e[1046]="BitmapText 找不到对应字符:{0}，请检查配置文件",e[1047]="egret.localStorage.setItem保存失败,key={0}&value={1}",e[1048]="视频加载失败",e[1049]="声音在没有加载完之前不允许播放",e[1050]="ExternalInterface调用了js没有注册的方法: {0}",e[3e3]="主题配置文件加载失败: {0}",e[3001]="找不到主题中所配置的皮肤类名: {0}",e[3002]='索引:"{0}"超出集合元素索引范围',e[3003]="在此组件中不可用，若此组件为容器类，请使用",e[3004]="addChild(){0}addElement()代替",e[3005]="addChildAt(){0}addElementAt()代替",e[3006]="removeChild(){0}removeElement()代替",e[3007]="removeChildAt(){0}removeElementAt()代替",e[3008]="setChildIndex(){0}setElementIndex()代替",e[3009]="swapChildren(){0}swapElements()代替",e[3010]="swapChildrenAt(){0}swapElementsAt()代替",e[3011]='索引:"{0}"超出可视元素索引范围',e[3012]="此方法在Scroller组件内不可用!",e[3013]="UIStage是GUI根容器，只能有一个此实例在显示列表中！",e[3014]="设置全屏模式失败",e[3100]="当前浏览器不支持WebSocket",e[3101]="请先连接WebSocket",e[3102]="请先设置type为二进制类型",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){r.indexOf(t)<0&&r.push(t)}function i(t){var e=r.indexOf(t);return e>=0?(r.splice(e,1),!0):!1}var r=[];t.$pushSoundChannel=e,t.$popSoundChannel=i}(e=t.sys||(t.sys={}))}(egret||(egret={})),function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret_native;!function(t){}(egret_native||(egret_native={}));var egret;!function(t){var e=function(){function e(){this.onSuccessFunc=null,this.onSuccessThisObject=null,this.onErrorFunc=null,this.onErrorThisObject=null,this.downloadingSizeFunc=null,this.downloadingSizeThisObject=null,this.onResponseHeaderFunc=null,this.onResponseHeaderThisObject=null}return e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new t.PromiseObject},e.prototype.onSuccess=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,t),this.destroy()},e.prototype.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,t),this.destroy()},e.prototype.downloadingSize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,t)},e.prototype.onResponseHeader=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onResponseHeaderFunc&&this.onResponseHeaderFunc.apply(this.onResponseHeaderThisObject,t)},e.prototype.destroy=function(){this.onSuccessFunc=void 0,this.onSuccessThisObject=void 0,this.onErrorFunc=void 0,this.onErrorThisObject=void 0,this.downloadingSizeFunc=void 0,this.downloadingSizeThisObject=void 0,this.onResponseHeaderFunc=void 0,this.onResponseHeaderThisObject=void 0,e.promiseObjectList.push(this)},e}();e.promiseObjectList=[],t.PromiseObject=e,__reflect(e.prototype,"egret.PromiseObject")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.GET="GET",e.POST="POST",t.HttpMethod=e,__reflect(e.prototype,"egret.HttpMethod")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.TEXT="text",e.ARRAY_BUFFER="arraybuffer",t.HttpResponseType=e,__reflect(e.prototype,"egret.HttpResponseType")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t,e){var i=t.minX<e.minX?t.minX:e.minX,r=t.minY<e.minY?t.minY:e.minY,n=t.maxX>e.maxX?t.maxX:e.maxX,o=t.maxY>e.maxY?t.maxY:e.maxY;return(n-i)*(o-r)}var r=function(){function r(e){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1,this.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,this.root=e}return r.prototype.setClipRect=function(t,e){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(e),this.clipArea=this.clipWidth*this.clipHeight},r.prototype.addRegion=function(i){var r=i.minX,n=i.minY,o=i.maxX,s=i.maxY;if(this.hasClipRect&&(0>r&&(r=0),0>n&&(n=0),o>this.clipWidth&&(o=this.clipWidth),s>this.clipHeight&&(s=this.clipHeight)),r>=o||n>=s)return!1;if(this.clipRectChanged)return!0;var a=this.dirtyList,h=e.Region.create();return a.push(h.setTo(r,n,o,s)),this.$dirtyRegionPolicy!=t.DirtyRegionPolicy.OFF&&this.mergeDirtyList(a),!0},r.prototype.clear=function(){for(var t=this.dirtyList,i=t.length,r=0;i>r;r++)e.Region.release(t[r]);t.length=0},r.prototype.getDirtyRegions=function(){var i=this.dirtyList;if(this.$dirtyRegionPolicy==t.DirtyRegionPolicy.OFF){this.clipRectChanged=!0,this.clear();var r=e.Region.create();if(this.hasClipRect)i.push(r.setTo(0,0,this.clipWidth,this.clipHeight));else{var n=this.root.$getOriginalBounds();i.push(r.setTo(n.x,n.y,n.width,n.height))}}else if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();var r=e.Region.create();i.push(r.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(i););var o=this.dirtyList.length;if(o>0)for(var s=0;o>s;s++)this.dirtyList[s].intValues();return this.dirtyList},r.prototype.mergeDirtyList=function(t){var r=t.length;if(2>r)return!1;for(var n=this.hasClipRect,o=r>3?Number.POSITIVE_INFINITY:0,s=0,a=0,h=0,l=0;r-1>l;l++){var u=t[l];n&&(h+=u.area);for(var c=l+1;r>c;c++){var p=t[c],d=i(u,p)-u.area-p.area;o>d&&(s=l,a=c,o=d)}}if(n&&h/this.clipArea>.95&&(this.clipRectChanged=!0),s!=a){var f=t[a];return t[s].union(f),e.Region.release(f),t.splice(a,1),!0}return!1},r.prototype.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t},r}();e.DirtyRegion=r,__reflect(r.prototype,"egret.sys.DirtyRegion")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function r(r){var n=i.call(this)||this;return n.isStage=!1,n.$renderNode=new e.BitmapNode,n.renderBuffer=null,n.offsetX=0,n.offsetY=0,n.offsetMatrix=new t.Matrix,n.isDirty=!1,n.needUpdateRegions=!1,n.dirtyNodeList=[],n.dirtyList=null,n.sizeChanged=!1,n.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,n.root=r,n.dirtyRegion=new e.DirtyRegion(r),n.isStage=r instanceof t.Stage,n.dirtyNodes=t.createMap(),n}return __extends(r,i),r.create=function(i){var r=new t.sys.DisplayList(i);try{var n=new e.RenderBuffer;r.renderBuffer=n}catch(o){return null}return r.root=i,r},r.prototype.$getRenderNode=function(){return this.$renderNode},r.prototype.$update=function(e){var i=this.root;if(null==i)return!1;i.$removeFlagsUp(768);var r=this.$renderNode,n=i.$getConcatenatedMatrix();if(e==t.DirtyRegionPolicy.OFF){var o=i.$parentDisplayList;if(this.needUpdateRegions&&this.updateDirtyRegions(),!o)return!1;var s=r.renderMatrix;s.copyFrom(n);var a=o.root;a!==i.$stage&&i.$getConcatenatedMatrixAt(a,s)}else{var h=i.$getOriginalBounds(),o=i.$parentDisplayList,l=r.renderRegion;if(this.needUpdateRegions&&this.updateDirtyRegions(),!o)return l.setTo(0,0,0,0),r.moved=!1,!1;if(!r.moved)return!1;r.moved=!1;var s=r.renderMatrix;s.copyFrom(n);var a=o.root;a!==i.$stage&&i.$getConcatenatedMatrixAt(a,s),l.updateRegion(h,s)}return!0},r.prototype.setClipRect=function(t,e){this.dirtyRegion.setClipRect(t,e),this.renderBuffer.resize(t,e)},r.prototype.markDirty=function(t){var e=t.$hashCode;if(!this.dirtyNodes[e]&&(this.dirtyNodes[e]=!0,this.dirtyNodeList.push(t),!this.needUpdateRegions)){this.needUpdateRegions=!0,this.isDirty=!0;var i=this.root.$parentDisplayList;i&&i.markDirty(this)}},r.prototype.updateDirtyRegions=function(){var e=this.dirtyNodeList;this.dirtyNodeList=[],this.dirtyNodes=t.createMap(),this.needUpdateRegions=!1;for(var i=this.dirtyRegion,r=e.length,n=0;r>n;n++){var o=e[n],s=o.$getRenderNode();if(s)if(s.needRedraw=!1,this.isStage){s.renderAlpha>0&&s.renderVisible&&i.addRegion(s.renderRegion)&&(s.needRedraw=!0);var a=o.$update(this.$dirtyRegionPolicy);s.renderAlpha>0&&s.renderVisible&&(a||!s.needRedraw)&&i.addRegion(s.renderRegion)&&(s.needRedraw=!0)}else{i.addRegion(s.renderRegion)&&(s.needRedraw=!0);var a=o.$update(this.$dirtyRegionPolicy);(a||!s.needRedraw)&&i.addRegion(s.renderRegion)&&(s.needRedraw=!0)}}return this.dirtyList=i.getDirtyRegions(),this.dirtyList},r.prototype.drawToSurface=function(){var i=0,r=this.dirtyList;if(r&&r.length>0){this.isStage||this.changeSurfaceSize();var n=this.renderBuffer;if(n.beginClip(this.dirtyList,this.offsetX,this.offsetY),r=this.$dirtyRegionPolicy==t.DirtyRegionPolicy.OFF?null:this.dirtyList,i=e.systemRenderer.render(this.root,n,this.offsetMatrix,r),n.endClip(),!this.isStage){var o=n.surface,s=this.$renderNode;s.drawData.length=0;var a=o.width,h=o.height;this.bitmapData?(this.bitmapData.source=o,this.bitmapData.width=a,this.bitmapData.height=h):this.bitmapData=new t.BitmapData(o),s.image=this.bitmapData,s.imageWidth=a,s.imageHeight=h,s.drawImage(0,0,a,h,-this.offsetX,-this.offsetY,a,h)}}return this.dirtyList=null,this.dirtyRegion.clear(),this.isDirty=!1,i},r.prototype.changeSurfaceSize=function(){var t=(this.root,this.offsetX),e=this.offsetY,i=this.root.$getOriginalBounds();this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(1,0,0,1,this.offsetX,this.offsetY);var r=this.renderBuffer,n=Math.max(257,i.width),o=Math.max(257,i.height);(this.offsetX!=t||this.offsetY!=e||r.surface.width!=n||r.surface.height!=o)&&(this.sizeChanged?r.resizeTo(n,o,this.offsetX-t,this.offsetY-e):(this.sizeChanged=!0,r.resize(n,o)))},r.prototype.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t,this.dirtyRegion.setDirtyRegionPolicy(t),this.renderBuffer.setDirtyRegionPolicy(t)},r}(t.HashObject);e.DisplayList=i,__reflect(i.prototype,"egret.sys.DisplayList",["egret.sys.Renderable"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(i,r,n,o){if(r&&(t.log=function(){for(var t=arguments.length,i="",r=0;t>r;r++)i+=arguments[r]+" ";e.$logToFPS(i),console.log.apply(console,s(arguments))}),l=o?{}:o,r=!!r,this.showFPS=!!i,this.showLog=r,!this.fps){var a=void 0===o.x?0:o.x,c=void 0===o.y?0:o.y;h=this.fps=new FPS(this.stage,i,r,n,o),h.x=a,h.y=c;for(var p=u.length,d=0;p>d;d++)h.updateInfo(u[d]);u=null}}function r(t){t=!!t,this._showPaintRect!=t&&(this._showPaintRect=t,t?(this.stageDisplayList||(this.stageDisplayList=e.DisplayList.create(this.stage)),this.stage.$displayList=this.stageDisplayList):this.stage.$displayList=this.screenDisplayList)}function n(t){for(var e=t.length,i=[],r=0;e>r;r++){var n=t[r];i[r]=[n.minX,n.minY,n.width,n.height],n.width-=1,n.height-=1}var o=this.paintList;o.push(i),o.length>1&&o.shift();var s=this.screenDisplayList.renderBuffer,a=s.context;a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,s.surface.width,s.surface.height),a.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),e=o.length;for(var r=0;e>r;r++){i=o[r];for(var h=i.length-1;h>=0;h--){var l=i[h];this.drawDirtyRect(l[0],l[1],l[2],l[3],a)}}a.save(),a.beginPath(),e=t.length;for(var r=0;e>r;r++){var n=t[r];a.clearRect(n.minX,n.minY,n.width,n.height),a.rect(n.minX,n.minY,n.width,n.height)}a.clip(),a.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),a.restore()}function o(t,e,i,r,n){n.strokeStyle="rgb(255,0,0)",n.lineWidth=5,n.strokeRect(t-.5,e-.5,i,r)}function s(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}var a=function(s){function a(t,e,a){var h=s.call(this)||this;return h.isPlaying=!1,h.entryClassName=a,h.stage=e,h.screenDisplayList=h.createDisplayList(e,t),h.showFPS=!1,h.showLog=!1,h._showPaintRect=!1,h.stageDisplayList=null,h.paintList=[],h.displayFPS=i,h.showPaintRect=r,h.drawPaintRect=n,h.drawDirtyRect=o,h}return __extends(a,s),a.prototype.createDisplayList=function(t,i){var r=new e.DisplayList(t);return r.renderBuffer=i,t.$displayList=r,r},a.prototype.start=function(){!this.isPlaying&&this.stage&&(e.$TempStage=e.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),e.$ticker.$addPlayer(this))},a.prototype.initialize=function(){var e;if(this.entryClassName&&(e=t.getDefinitionByName(this.entryClassName)),e){var i=new e;this.root=i,i instanceof t.DisplayObject&&this.stage.addChild(i)}},a.prototype.stop=function(){this.pause(),this.stage=null},a.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,e.$ticker.$removePlayer(this))},a.prototype.$render=function(e,i){(this.showFPS||this.showLog)&&this.stage.addChild(this.fps);var r=this.stage,n=t.getTimer(),o=r.$displayList.updateDirtyRegions(),s=t.getTimer();o=o.concat();var a=r.$displayList.drawToSurface();this._showPaintRect&&this.drawPaintRect(o);var h=t.getTimer();if(e&&this.showFPS){var l=0;if(a>0){for(var u=o.length,c=0,p=0;u>p;p++)c+=o[p].area;l=Math.ceil(1e3*c/(r.stageWidth*r.stageHeight))/10}this.fps.update(a,l,s-n,h-s,i)}},a.prototype.updateStageSize=function(e,i){var r=this.stage;r.$stageWidth=e,r.$stageHeight=i,this.screenDisplayList.setClipRect(e,i),this.stageDisplayList&&this.stageDisplayList.setClipRect(e,i),r.dispatchEventWith(t.Event.RESIZE),r.$invalidate(!0)},a}(t.HashObject);e.Player=a,__reflect(a.prototype,"egret.sys.Player");
var h,l,u=[];e.$logToFPS=function(t){return h?void h.updateInfo(t):void u.push(t)},FPS=function(i){function r(e,r,n,o,s){i.call(this),this.isFPS=!0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0,this._stage=e,this.showFPS=r,this.showLog=n,this.logFilter=o,this.touchChildren=!1,this.touchEnabled=!1,this.styles=s,this.fpsDisplay=new t.FPSDisplay(e,r,n,o,s),this.addChild(this.fpsDisplay);var a;try{a=o?new RegExp(o):null}catch(h){t.log(h)}this.filter=function(t){return a?a.test(t):!o||0==t.indexOf(o)}}return __extends(r,i),r.prototype.update=function(i,r,n,o,s){var a=t.getTimer();if(this.totalTime+=a-this.lastTime,this.lastTime=a,this.totalTick++,this.drawCalls+=i,this.dirtyRatio+=r,this.costDirty+=n,this.costRender+=o,this.costTicker+=s,this.totalTime>=1e3){var h=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),e.$ticker.$frameRate),l=Math.round(this.drawCalls/this.totalTick),u=Math.round(this.dirtyRatio/this.totalTick),c=Math.round(this.costDirty/this.totalTick),p=Math.round(this.costRender/this.totalTick),d=Math.round(this.costTicker/this.totalTick);this.fpsDisplay.update({fps:h,draw:l,dirty:u,costTicker:d,costDirty:c,costRender:p}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0}},r.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},r}(t.Sprite),t.warn=function(){console.warn.apply(console,s(arguments))},t.error=function(){console.error.apply(console,s(arguments))},t.assert=function(){console.assert.apply(console,s(arguments))},t.log=function(){console.log.apply(console,s(arguments))}}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"}}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=[],i=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0,this.moved=!1}return t.release=function(t){e.push(t)},t.create=function(){var i=e.pop();return i||(i=new t),i},t.prototype.setTo=function(t,e,i,r){return this.minX=t,this.minY=e,this.maxX=i,this.maxY=r,this.updateArea(),this},t.prototype.intValues=function(){this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this.updateArea()},t.prototype.updateArea=function(){this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this.area=this.width*this.height},t.prototype.union=function(t){this.minX>t.minX&&(this.minX=t.minX),this.minY>t.minY&&(this.minY=t.minY),this.maxX<t.maxX&&(this.maxX=t.maxX),this.maxY<t.maxY&&(this.maxY=t.maxY),this.updateArea()},t.prototype.intersect=function(t){return this.minX<t.minX&&(this.minX=t.minX),this.maxX>t.maxX&&(this.maxX=t.maxX),this.minX>=this.maxX?void this.setEmpty():(this.minY<t.minY&&(this.minY=t.minY),this.maxY>t.maxY&&(this.maxY=t.maxY),this.minY>=this.maxY?void this.setEmpty():void this.updateArea())},t.prototype.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},t.prototype.isEmpty=function(){return this.width<=0||this.height<=0},t.prototype.intersects=function(t){if(this.isEmpty())return!1;var e=this.minX>t.minX?this.minX:t.minX,i=this.maxX<t.maxX?this.maxX:t.maxX;return e>i?!1:(e=this.minY>t.minY?this.minY:t.minY,i=this.maxY<t.maxY?this.maxY:t.maxY,i>=e)},t.prototype.updateRegion=function(t,e){if(0==t.width||0==t.height)return void this.setEmpty();var i,r,n,o,s=e,a=s.a,h=s.b,l=s.c,u=s.d,c=s.tx,p=s.ty,d=t.x,f=t.y,g=d+t.width,y=f+t.height;if(1==a&&0==h&&0==l&&1==u)i=d+c-1,r=f+p-1,n=g+c+1,o=y+p+1;else{var v=a*d+l*f+c,$=h*d+u*f+p,m=a*g+l*f+c,b=h*g+u*f+p,T=a*g+l*y+c,x=h*g+u*y+p,_=a*d+l*y+c,O=h*d+u*y+p,E=0;v>m&&(E=v,v=m,m=E),T>_&&(E=T,T=_,_=E),i=(T>v?v:T)-1,n=(m>_?m:_)+1,$>b&&(E=$,$=b,b=E),x>O&&(E=x,x=O,O=E),r=(x>$?$:x)-1,o=(b>O?b:O)+1}this.minX=i,this.minY=r,this.maxX=n,this.maxY=o,this.width=n-i,this.height=o-r,this.area=this.width*this.height},t}();t.Region=i,__reflect(i.prototype,"egret.sys.Region")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.calculateStageSize=function(e,i,r,n,o){var s=i,a=r,h=n,l=o,u=i/h||0,c=r/l||0;switch(e){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:h=Math.round(i/c);break;case t.StageScaleMode.FIXED_WIDTH:l=Math.round(r/u);break;case t.StageScaleMode.NO_BORDER:u>c?a=Math.round(l*u):s=Math.round(h*c);break;case t.StageScaleMode.SHOW_ALL:u>c?s=Math.round(h*c):a=Math.round(l*u);break;case t.StageScaleMode.FIXED_NARROW:u>c?h=Math.round(i/c):l=Math.round(r/u);break;case t.StageScaleMode.FIXED_WIDE:u>c?l=Math.round(r/u):h=Math.round(i/c);break;default:h=i,l=r}return s%2!=0&&(s+=1),a%2!=0&&(a+=1),{stageWidth:h,stageHeight:l,displayWidth:s,displayHeight:a}},i}(t.HashObject);e.DefaultScreenAdapter=i,__reflect(i.prototype,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.NO_SCALE="noScale",e.SHOW_ALL="showAll",e.NO_BORDER="noBorder",e.EXACT_FIT="exactFit",e.FIXED_WIDTH="fixedWidth",e.FIXED_HEIGHT="fixedHeight",e.FIXED_NARROW="fixedNarrow",e.FIXED_WIDE="fixedWide",t.StageScaleMode=e,__reflect(e.prototype,"egret.StageScaleMode")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){e.$START_TIME=0,e.$invalidateRenderFlag=!1,e.$requestRenderingFlag=!1;var i=function(){function i(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,e.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}return i.prototype.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},i.prototype.$removePlayer=function(t){var e=this.playerList.indexOf(t);if(-1!==e){this.playerList=this.playerList.concat(),this.playerList.splice(e,1)}},i.prototype.$startTick=function(t,e){var i=this.getTickIndex(t,e);-1==i&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},i.prototype.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},i.prototype.getTickIndex=function(t,e){for(var i=this.callBackList,r=this.thisObjectList,n=i.length-1;n>=0;n--)if(i[n]==t&&r[n]==e)return n;return-1},i.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},i.prototype.$setFrameRate=function(e){return e=+e||0,0>=e?!1:this.$frameRate==e?!1:(this.$frameRate=e,e>60&&(e=60),t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&(egret_native.setFrameRate(e),e=60),this.frameDeltaTime=1e3/e,this.lastCount=this.frameInterval=Math.round(6e4/e),!0)},i.prototype.update=function(){var i=t.getTimer(),r=this.callBackList,n=this.thisObjectList,o=r.length,s=e.$requestRenderingFlag,a=t.getTimer();this.callLaterAsyncs();for(var h=0;o>h;h++)r[h].call(n[h],a)&&(s=!0);var l=t.getTimer(),u=a-this.lastTimeStamp;if(this.lastTimeStamp=a,u>=this.frameDeltaTime)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return void(s&&this.render(!1,this.costEnterFrame+l-i));this.lastCount+=this.frameInterval}this.render(!0,this.costEnterFrame+l-i);var c=t.getTimer();this.broadcastEnterFrame();var p=t.getTimer();this.costEnterFrame=p-c},i.prototype.render=function(t,i){var r=this.playerList,n=r.length;if(0!=n){this.callLaters(),e.$invalidateRenderFlag&&(this.broadcastRender(),e.$invalidateRenderFlag=!1);for(var o=0;n>o;o++)r[o].$render(t,i);e.$requestRenderingFlag=!1}},i.prototype.broadcastEnterFrame=function(){var e=t.DisplayObject.$enterFrameCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;i>r;r++)e[r].dispatchEventWith(t.Event.ENTER_FRAME)}},i.prototype.broadcastRender=function(){var e=t.DisplayObject.$renderCallBackList,i=e.length;if(0!=i){e=e.concat();for(var r=0;i>r;r++)e[r].dispatchEventWith(t.Event.RENDER)}},i.prototype.callLaters=function(){var e,i,r;if(t.$callLaterFunctionList.length>0&&(e=t.$callLaterFunctionList,t.$callLaterFunctionList=[],i=t.$callLaterThisList,t.$callLaterThisList=[],r=t.$callLaterArgsList,t.$callLaterArgsList=[]),e)for(var n=e.length,o=0;n>o;o++){var s=e[o];null!=s&&s.apply(i[o],r[o])}},i.prototype.callLaterAsyncs=function(){if(t.$callAsyncFunctionList.length>0){var e=t.$callAsyncFunctionList,i=t.$callAsyncThisList,r=t.$callAsyncArgsList;t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[];for(var n=0;n<e.length;n++){var o=e[n];null!=o&&o.apply(i[n],r[n])}}},i}();e.SystemTicker=i,__reflect(i.prototype,"egret.sys.SystemTicker"),e.$ticker=new e.SystemTicker}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(t){var i=e.call(this)||this;return i.maxTouches=0,i.useTouchesCount=0,i.touchDownTarget={},i.lastTouchX=-1,i.lastTouchY=-1,i.stage=t,i}return __extends(i,e),i.prototype.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},i.prototype.onTouchBegin=function(e,i,r){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);null==this.touchDownTarget[r]&&(this.touchDownTarget[r]=n,this.useTouchesCount++),t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_BEGIN,!0,!0,e,i,r,!0)}},i.prototype.onTouchMove=function(e,i,r){if(null!=this.touchDownTarget[r]&&(this.lastTouchX!=e||this.lastTouchY!=i)){this.lastTouchX=e,this.lastTouchY=i;var n=this.findTarget(e,i);t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_MOVE,!0,!0,e,i,r,!0)}},i.prototype.onTouchEnd=function(e,i,r){if(null!=this.touchDownTarget[r]){var n=this.findTarget(e,i),o=this.touchDownTarget[r];delete this.touchDownTarget[r],this.useTouchesCount--,t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_END,!0,!0,e,i,r,!1),o==n?t.TouchEvent.dispatchTouchEvent(n,t.TouchEvent.TOUCH_TAP,!0,!0,e,i,r,!1):t.TouchEvent.dispatchTouchEvent(o,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,e,i,r,!1)}},i.prototype.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},i}(t.HashObject);e.TouchHandler=i,__reflect(i.prototype,"egret.sys.TouchHandler")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.blendMode=null,t.alpha=0/0,t.filter=null,t.type=1,t}return __extends(i,e),i.prototype.drawImage=function(t,e,i,r,n,o,s,a){this.drawData.push(t,e,i,r,n,o,s,a),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null,this.blendMode=null,this.alpha=0/0,this.filter=null},i.$updateTextureData=function(e,r,n,o,s,a,h,l,u,c,p,d,f,g,y,v,$){if(r){var m=t.$TextureScaleFactor;if(e.smoothing=$,e.image=r,e.imageWidth=f,e.imageHeight=g,y)i.$updateTextureDataWithScale9Grid(e,y,n,o,s,a,h,l,u,c,p,d);else if(v==t.BitmapFillMode.SCALE){var b=p/u*m,T=d/c*m;e.drawImage(n,o,s,a,b*h,T*l,b*s,T*a)}else if(v==t.BitmapFillMode.CLIP){var x=Math.min(u,p),_=Math.min(c,d),O=s*m,E=a*m;i.drawClipImage(e,m,n,o,O,E,h,l,x,_)}else for(var O=s*m,E=a*m,F=0;p>F;F+=u)for(var w=0;d>w;w+=c){var x=Math.min(p-F,u),_=Math.min(d-w,c);i.drawClipImage(e,m,n,o,O,E,h,l,x,_,F,w)}}},i.$updateTextureDataWithScale9Grid=function(e,i,r,n,o,s,a,h,l,u,c,p){var d=o,f=s;c-=l-o*t.$TextureScaleFactor,p-=u-s*t.$TextureScaleFactor;var g=i.x-a,y=i.y-h,v=g/t.$TextureScaleFactor,$=y/t.$TextureScaleFactor,m=i.width/t.$TextureScaleFactor,b=i.height/t.$TextureScaleFactor;0==b&&(b=1,$>=f&&$--),0==m&&(m=1,v>=d&&v--);var T=r,x=T+v,_=x+m,O=d-v-m,E=n,F=E+$,w=F+b,C=f-$-b,R=O*t.$TextureScaleFactor,S=C*t.$TextureScaleFactor;if((v+O)*t.$TextureScaleFactor>c||($+C)*t.$TextureScaleFactor>p)return void e.drawImage(r,n,o,s,a,h,c,p);var P=a,D=P+g,L=P+(c-R),M=c-g-R,A=h,N=A+y,B=A+p-S,I=p-y-S;$>0&&(v>0&&e.drawImage(T,E,v,$,P,A,g,y),m>0&&e.drawImage(x,E,m,$,D,A,M,y),O>0&&e.drawImage(_,E,O,$,L,A,R,y)),b>0&&(v>0&&e.drawImage(T,F,v,b,P,N,g,I),m>0&&e.drawImage(x,F,m,b,D,N,M,I),O>0&&e.drawImage(_,F,O,b,L,N,R,I)),C>0&&(v>0&&e.drawImage(T,w,v,C,P,B,g,S),m>0&&e.drawImage(x,w,m,C,D,B,M,S),O>0&&e.drawImage(_,w,O,C,L,B,R,S))},i.drawClipImage=function(t,e,i,r,n,o,s,a,h,l,u,c){void 0===u&&(u=0),void 0===c&&(c=0);var p=s+n-h;p>0&&(n-=p),p=a+o-l,p>0&&(o-=p),t.drawImage(i,r,n/e,o/e,u+s,c+a,n,o)},i}(e.RenderNode);e.BitmapNode=i,__reflect(i.prototype,"egret.sys.BitmapNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=["none","round","square"],r=["bevel","miter","round"],n=function(n){function o(){var t=n.call(this)||this;return t.dirtyRender=!0,t.type=3,t}return __extends(o,n),o.prototype.beginFill=function(t,i,r){void 0===i&&(i=1);var n=new e.FillPath;if(n.fillColor=t,n.fillAlpha=i,r){var o=this.drawData.lastIndexOf(r);this.drawData.splice(o,0,n)}else this.drawData.push(n);return n},o.prototype.beginGradientFill=function(i,r,n,o,s,a){var h=new t.Matrix;s?(h.a=819.2*s.a,h.b=819.2*s.b,h.c=819.2*s.c,h.d=819.2*s.d,h.tx=s.tx,h.ty=s.ty):(h.a=100,h.d=100);var l=new e.GradientFillPath;if(l.gradientType=i,l.colors=r,l.alphas=n,l.ratios=o,l.matrix=h,a){var u=this.drawData.lastIndexOf(a);this.drawData.splice(u,0,l)}else this.drawData.push(l);return l},o.prototype.lineStyle=function(n,o,s,a,h,l){void 0===s&&(s=1),void 0===l&&(l=3),-1==i.indexOf(a)&&(a="round"),-1==r.indexOf(h)&&(h="round");var u=new e.StrokePath;return u.lineWidth=n,u.lineColor=o,u.lineAlpha=s,u.caps=a||t.CapsStyle.ROUND,u.joints=h,u.miterLimit=l,this.drawData.push(u),u},o.prototype.clear=function(){this.drawData.length=0,this.dirtyRender=!0},o.prototype.cleanBeforeRender=function(){},o.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},o}(e.RenderNode);e.GraphicsNode=n,__reflect(n.prototype,"egret.sys.GraphicsNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=4,e}return __extends(e,t),e.prototype.addNode=function(t){this.drawData.push(t)},e.prototype.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;e>=0;e--)t[e].cleanBeforeRender()},e.prototype.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;i>=0;i--)t+=e[i].$getRenderCount();return t},e}(t.RenderNode);t.GroupNode=e,__reflect(e.prototype,"egret.sys.GroupNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=e.call(this)||this;return i.image=null,i.smoothing=!0,i.bounds=new t.Rectangle,i.type=7,i.vertices=[],i.uvs=[],i.indices=[],i}return __extends(i,e),i.prototype.drawMesh=function(t,e,i,r,n,o,s,a){this.drawData.push(t,e,i,r,n,o,s,a),this.renderCount++},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i}(e.RenderNode);e.MeshNode=i,__reflect(i.prototype,"egret.sys.MeshNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;i.$renderBuffer=new t.sys.RenderBuffer;var r=new t.BitmapData(i.$renderBuffer.surface);return r.$deleteSource=!1,i._setBitmapData(r),i}return __extends(i,e),i.prototype.drawToTexture=function(e,i,r){if(void 0===r&&(r=1),i&&(0==i.width||0==i.height))return!1;var n=i||e.$getOriginalBounds();if(0==n.width||0==n.height)return!1;r/=t.$TextureScaleFactor;var o=(n.x+n.width)*r,s=(n.y+n.height)*r;i&&(o=n.width*r,s=n.height*r);var a=this.$renderBuffer;if(!a)return!1;a.resize(o,s),this._bitmapData.width=o,this._bitmapData.height=s;var h=t.Matrix.create();return h.identity(),i&&h.translate(-i.x,-i.y),h.scale(r,r),t.sys.systemRenderer.render(e,a,h,null,!0),t.Matrix.release(h),this.$initData(0,0,o,s,0,0,o,s,o,s),!0},i.prototype.getPixel32=function(e,i){var r;if(this.$renderBuffer){var n=t.$TextureScaleFactor;e=Math.round(e/n),i=Math.round(i/n),r=this.$renderBuffer.getPixels(e,i,1,1)}return r},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.$renderBuffer=null},i}(t.Texture);t.RenderTexture=e,__reflect(e.prototype,"egret.RenderTexture")}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=6,e}return __extends(e,t),e.prototype.setAlpha=function(t){0!=this.drawData.length&&(this.drawData.length=0),this.drawData.push(t),this.renderCount++},e}(t.RenderNode);t.SetAlphaNode=e,__reflect(e.prototype,"egret.sys.SetAlphaNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var t=e.call(this)||this;return t.textColor=16777215,t.strokeColor=0,t.size=30,t.stroke=0,t.bold=!1,t.italic=!1,t.fontFamily="Arial",t.dirtyRender=!0,t.type=2,t}return __extends(i,e),i.prototype.drawText=function(t,e,i,r){this.drawData.push(t,e,i,r),this.renderCount++,this.dirtyRender=!0},i.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this)},i.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},i}(e.RenderNode);e.TextNode=i,__reflect(i.prototype,"egret.sys.TextNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=1,e}return __extends(e,t),e}(t.Path2D);t.FillPath=e,__reflect(e.prototype,"egret.sys.FillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=2,e}return __extends(e,t),e}(t.Path2D);t.GradientFillPath=e,__reflect(e.prototype,"egret.sys.GradientFillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r==this&&(r=this.$graphics.$hitTest(t,i)),r},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.DisplayObject);t.Shape=e,__reflect(e.prototype,"egret.Shape")}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.type=3,e}return __extends(e,t),e}(t.Path2D);t.StrokePath=e,__reflect(e.prototype,"egret.sys.StrokePath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(t,e){var i=null==e.italic?t.italic:e.italic,r=null==e.bold?t.bold:e.bold,n=null==e.size?t.size:e.size,o=e.fontFamily||t.fontFamily,s=i?"italic ":"normal ";return s+=r?"bold ":"normal ",s+=n+"px "+o}function i(t,e){var i=t>>16,r=t>>8&255,n=255&t;return"rgba("+i+","+r+","+n+","+e+")"}function r(e,r,n,o,s,a){var h;h=r==t.GradientType.LINEAR?e.createLinearGradient(-1,0,1,0):e.createRadialGradient(0,0,0,0,0,1);for(var l=n.length,u=0;l>u;u++)h.addColorStop(s[u]/255,i(n[u],o[u]));return h}function n(t,e,i){void 0===i&&(i=0);for(var r=0,n=e.length;n>r;r++)t[r+i]=e[r]}function o(t,e,i,r){for(var n=r[0],o=r[1],s=r[2],a=r[3],h=r[4],l=r[5],u=r[6],c=r[7],p=r[8],d=r[9],f=r[10],g=r[11],y=r[12],v=r[13],$=r[14],m=r[15],b=r[16],T=r[17],x=r[18],_=r[19],O=0,E=e*i*4;E>O;O+=4){var F=t[O+0],w=t[O+1],C=t[O+2],R=t[O+3];t[O+0]=n*F+o*w+s*C+a*R+h,t[O+1]=l*F+u*w+c*C+p*R+d,t[O+2]=f*F+g*w+y*C+v*R+$,t[O+3]=m*F+b*w+T*C+x*R+_}}function s(t,e,i,r,n){a(t,e,i,r),h(t,e,i,n)}function a(t,e,i,r){var o;o=x?new Uint8ClampedArray(4*e):new Array(4*e);for(var s=4*e,a=2*r+1,h=0;i>h;h++){for(var l=h*s,u=0,c=0,p=0,d=0,f=0,g=0,y=4*-r,v=4*r+4;v>y;y+=4){var $=l+y;l>$||$>=l+s||(f=t[$+3],u+=t[$+0]*f,c+=t[$+1]*f,p+=t[$+2]*f,d+=f)}for(var y=l,v=l+s,m=0,b=y-4*r,T=y+4*(r+1);v>y;y+=4,m+=4,T+=4,b+=4)0===d?(o[m+0]=0,o[m+1]=0,o[m+2]=0,o[m+3]=0):(o[m+0]=u/d,o[m+1]=c/d,o[m+2]=p/d,o[m+3]=d/a),f=t[T+3],g=t[b+3],f||0==f?g||0==g?(u+=t[T+0]*f-t[b+0]*g,c+=t[T+1]*f-t[b+1]*g,p+=t[T+2]*f-t[b+2]*g,d+=f-g):(u+=t[T+0]*f,c+=t[T+1]*f,p+=t[T+2]*f,d+=f):(g||0==g)&&(u+=-t[b+0]*g,c+=-t[b+1]*g,p+=-t[b+2]*g,d+=-g);x?t.set(o,l):n(t,o,l)}}function h(t,e,i,r){var n;n=x?new Uint8ClampedArray(4*i):new Array(4*i);for(var o=4*e,s=2*r+1,a=0;e>a;a++){for(var h=4*a,l=0,u=0,c=0,p=0,d=0,f=0,g=-r*o,y=r*o+o;y>g;g+=o){var v=h+g;h>v||v>=h+i*o||(d=t[v+3],l+=t[v+0]*d,u+=t[v+1]*d,c+=t[v+2]*d,p+=d)}for(var g=h,y=h+i*o,$=0,m=h-r*o,b=h+(r+1)*o;y>g;g+=o,$+=4,b+=o,m+=o)0===p?(n[$+0]=0,n[$+1]=0,n[$+2]=0,n[$+3]=0):(n[$+0]=l/p,n[$+1]=u/p,n[$+2]=c/p,n[$+3]=p/s),d=t[b+3],f=t[m+3],d||0==d?f||0==f?(l+=t[b+0]*d-t[m+0]*f,u+=t[b+1]*d-t[m+1]*f,c+=t[b+2]*d-t[m+2]*f,p+=d-f):(l+=t[b+0]*d,u+=t[b+1]*d,c+=t[b+2]*d,p+=d):(f||0==f)&&(l+=-t[m+0]*f,u+=-t[m+1]*f,c+=-t[m+2]*f,p+=-f);for(var T=4*a,y=T+i*o,_=0;y>T;T+=o,_+=4)t[T+0]=n[_+0],t[T+1]=n[_+1],t[T+2]=n[_+2],t[T+3]=n[_+3]}}function l(t,e,i,r,o,a,h,l,f){var g=u(t,r);c(g,e,i,h,l),s(g,e,i,o,a),p(g,f),d(g,t),t.set(g),x?t.set(g):n(t,g)}function u(t,e){e||(e=[0,0,0,0]);var i;x?i=new Uint8ClampedArray(t):(i=new Array(t.length),n(i,t));for(var r=0,o=i.length;o>r;r+=4){var s=i[r+3];i[r+0]=e[0]*s,i[r+1]=e[1]*s,i[r+2]=e[2]*s}return i}function c(t,e,i,r,o){var s,a,h=Math.sin(r)*o|0,l=Math.cos(r)*o|0;if(x){s=new Int32Array(t.buffer),a=new Int32Array(s.length);for(var u=0;i>u;u++){var c=u+h;if(!(0>c||c>i))for(var p=0;e>p;p++){var d=p+l;0>d||d>e||(a[c*e+d]=s[u*e+p])}}s.set(a)}else{s=t,a=new Array(s.length);for(var u=0;i>u;u++){var c=u+h;if(!(0>c||c>i))for(var p=0;e>p;p++){var d=p+l;0>d||d>e||(a[4*(c*e+d)+0]=s[4*(u*e+p)+0],a[4*(c*e+d)+1]=s[4*(u*e+p)+1],a[4*(c*e+d)+2]=s[4*(u*e+p)+2],a[4*(c*e+d)+3]=s[4*(u*e+p)+3])}}n(s,a)}}function p(t,e){for(var i=0,r=t.length;r>i;i+=4)t[i+3]*=e}function d(t,e){for(var i=0,r=t.length;r>i;i+=4){var n=t[i+0],o=t[i+1],s=t[i+2],a=t[i+3]/255,h=e[i+0],l=e[i+1],u=e[i+2],c=e[i+3]/255;t[i+0]=h+n*(1-c),t[i+1]=l+o*(1-c),t[i+2]=u+s*(1-c),t[i+3]=255*(c+a*(1-c))}}function f(t,e,i){return t*(1-i)+e*i}function g(t,e,i,r,o,s,a,h,l,u,c,p){var d;d=x?new Uint8ClampedArray(t.length):new Array(t.length);for(var g,y,v=r[3],$=0,m=0,b=h*Math.cos(a),T=h*Math.sin(a),_=7,O=12,E=3.141592653589793,F=o/_,w=s/_,C=0;e>C;C++)for(var R=0;i>R;R++){for(var S=0,P=R*e*4+4*C,D=0,L=0,M=t[P+0]/255,A=t[P+1]/255,N=t[P+2]/255,B=t[P+3]/255,I=0;2*E>=I;I+=2*E/O){g=Math.cos(I+S),y=Math.sin(I+S);for(var j=0;_>j;j++){$=j*F*g,m=j*w*y;var k=Math.round(C+$-b),U=Math.round(R+m-T),X=0;if(k>=e||0>k||0>U||U>=i)X=0;else{var Y=U*e*4+4*k;X=t[Y+3]/255}D+=(_-j)*X,L+=_-j}}B=Math.max(B,1e-4);var H=D/L*l*v*(1-u)*Math.max(Math.min(p,c),1-B),W=(L-D)/L*l*v*u*B;B=Math.max(B*c*(1-p),1e-4);var G=W/(W+B),V=f(M,r[0],G),z=f(A,r[1],G),Z=f(N,r[2],G),q=H/(W+B+H),J=f(V,r[0],q),K=f(z,r[1],q),Q=f(Z,r[2],q),te=Math.min(B+H+W,1);d[P+0]=255*J,d[P+1]=255*K,d[P+2]=255*Q,d[P+3]=255*te}x?t.set(d):n(t,d)}var y=["source-over","lighter","destination-out"],v="source-over",$="#000000",m={none:"butt",square:"square",round:"round"},b=[],T=function(){function n(){this.nestLevel=0,this.renderingMask=!1}return n.prototype.render=function(t,e,i,r,n){this.nestLevel++;var o=e.context,s=n?t:null,a=this.drawDisplayObject(t,o,r,i,null,null,s);if(this.nestLevel--,0===this.nestLevel){b.length>6&&(b.length=6);for(var h=b.length,l=0;h>l;l++)b[l].resize(0,0)}return a},n.prototype.drawDisplayObject=function(e,i,r,n,o,s,a){var h,l=0;if(o&&!a?(o.isDirty&&(l+=o.drawToSurface()),h=o.$renderNode):h=e.$getRenderNode(),h){if(r){var u=h.renderRegion;if(s&&!s.intersects(u))h.needRedraw=!1;else if(!h.needRedraw)for(var c=r.length,p=0;c>p;p++)if(u.intersects(r[p])){h.needRedraw=!0;break}}else h.needRedraw=!0;if(h.needRedraw){var d=void 0,f=void 0;a?(d=e.$getConcatenatedAlphaAt(a,e.$getConcatenatedAlpha()),f=t.Matrix.create().copyFrom(e.$getConcatenatedMatrix()),e.$getConcatenatedMatrixAt(a,f),n.$preMultiplyInto(f,f),i.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),t.Matrix.release(f)):(d=h.renderAlpha,f=h.renderMatrix,i.setTransform(f.a,f.b,f.c,f.d,f.tx+n.tx,f.ty+n.ty)),i.globalAlpha=d,l+=this.renderNode(h,i),h.needRedraw=!1}}if(o&&!a)return l;var g=e.$children;if(g)for(var y=g.length,v=0;y>v;v++){var $=g[v];if(!(!$.$visible||$.$alpha<=0||$.$maskedObject)){var m=$.$getFilters();m&&m.length>0?l+=this.drawWithFilter($,i,r,n,s,a):0!==$.$blendMode||$.$mask&&($.$mask.$parentDisplayList||a)?l+=this.drawWithClip($,i,r,n,s,a):$.$scrollRect||$.$maskRect?l+=this.drawWithScrollRect($,i,r,n,s,a):$.isFPS?this.drawDisplayObject($,i,r,n,$.$displayList,s,a):l+=this.drawDisplayObject($,i,r,n,$.$displayList,s,a)}}return l},n.prototype.drawWithFilter=function(e,i,r,n,a,h){if(t.Capabilities.runtimeType==t.RuntimeType.NATIVE){var u,c=0,p=e.$getFilters(),d=0!==e.$blendMode;if(d&&(u=y[e.$blendMode],u||(u=v)),1==p.length&&"colorTransform"==p[0].type&&!e.$children)return d&&(i.globalCompositeOperation=u),i.setGlobalShader(p[0]),c+=e.$mask&&(e.$mask.$parentDisplayList||h)?this.drawWithClip(e,i,r,n,a,h):e.$scrollRect||e.$maskRect?this.drawWithScrollRect(e,i,r,n,a,h):this.drawDisplayObject(e,i,r,n,e.$displayList,a,h),i.setGlobalShader(null),d&&(i.globalCompositeOperation=v),c;var f=t.Matrix.create();f.copyFrom(e.$getConcatenatedMatrix()),h&&e.$getConcatenatedMatrixAt(h,f);var $;$=t.sys.Region.create();var m=e.$getOriginalBounds();$.updateRegion(m,f);var T=this.createRenderBuffer($.width,$.height);T.context.setTransform(1,0,0,1,-$.minX,-$.minY);var x=t.Matrix.create().setTo(1,0,0,1,-$.minX,-$.minY);return c+=e.$mask&&(e.$mask.$parentDisplayList||h)?this.drawWithClip(e,T.context,r,x,$,h):e.$scrollRect||e.$maskRect?this.drawWithScrollRect(e,T.context,r,x,$,h):this.drawDisplayObject(e,T.context,r,x,e.$displayList,$,h),t.Matrix.release(x),c>0&&(d&&(i.globalCompositeOperation=u),c++,i.globalAlpha=1,i.setTransform(1,0,0,1,$.minX+n.tx,$.minY+n.ty),i.setGlobalShader(p[0]),i.drawImage(T.surface,0,0,T.width,T.height,0,0,T.width,T.height),i.setGlobalShader(null),d&&(i.globalCompositeOperation=v)),b.push(T),t.sys.Region.release($),t.Matrix.release(f),c}var _,O=0,E=e.$getFilters(),F=E.length,w=0!==e.$blendMode;w&&(_=y[e.$blendMode],_||(_=v));var C=t.Matrix.create();C.copyFrom(e.$getConcatenatedMatrix()),h&&e.$getConcatenatedMatrixAt(h,C);var R;R=t.sys.Region.create();var S=e.$getOriginalBounds();R.updateRegion(S,C);var P=this.createRenderBuffer(R.width,R.height),D=P.context;D.setTransform(1,0,0,1,-R.minX,-R.minY);var L=t.Matrix.create().setTo(1,0,0,1,-R.minX,-R.minY);if(O+=e.$mask&&(e.$mask.$parentDisplayList||h)?this.drawWithClip(e,D,r,L,R,h):e.$scrollRect||e.$maskRect?this.drawWithScrollRect(e,D,r,L,R,h):this.drawDisplayObject(e,D,r,L,e.$displayList,R,h),t.Matrix.release(L),O>0){w&&(i.globalCompositeOperation=_),O++,i.globalAlpha=1,i.setTransform(1,0,0,1,R.minX+n.tx,R.minY+n.ty);for(var M=D.getImageData(0,0,P.surface.width,P.surface.height),A=0;F>A;A++){var N=E[A];if("colorTransform"==N.type)o(M.data,P.surface.width,P.surface.height,N.$matrix);else if("blur"==N.type)s(M.data,P.surface.width,P.surface.height,N.$blurX,N.$blurY);else if("glow"==N.type){var B=N.$red,I=N.$green,j=N.$blue,k=N.$alpha;N.$inner||N.$knockout||N.$hideObject?g(M.data,P.surface.width,P.surface.height,[B/255,I/255,j/255,k],N.$blurX,N.$blurY,N.$angle?N.$angle/180*Math.PI:0,N.$distance||0,N.$strength,N.$inner?1:0,N.$knockout?0:1,N.$hideObject?1:0):l(M.data,P.surface.width,P.surface.height,[B/255,I/255,j/255,k/255],N.$blurX,N.$blurY,N.$angle?N.$angle/180*Math.PI:0,N.$distance||0,N.$strength)}}D.putImageData(M,0,0),i.drawImage(P.surface,0,0),w&&(i.globalCompositeOperation=v)}return b.push(P),t.sys.Region.release(R),t.Matrix.release(C),O},n.prototype.drawWithClip=function(e,i,r,n,o,s){var a,h=0,l=0!==e.$blendMode;l&&(a=y[e.$blendMode],a||(a=v));var u,c=e.$scrollRect?e.$scrollRect:e.$maskRect,p=e.$mask;if(p&&(u=p.$getRenderNode())){var d=u.renderMatrix;if(0==d.a&&0==d.b||0==d.c&&0==d.d)return h}var f,g=t.Matrix.create();if(g.copyFrom(e.$getConcatenatedMatrix()),e.$parentDisplayList){var $=e.$parentDisplayList.root;$!==e.$stage&&e.$getConcatenatedMatrixAt($,g)}var m;if(p){m=p.$getOriginalBounds(),f=t.sys.Region.create();var T=t.Matrix.create();T.copyFrom(p.$getConcatenatedMatrix()),f.updateRegion(m,T),t.Matrix.release(T)}var x;if(c&&(x=t.sys.Region.create(),x.updateRegion(c,g)),x&&f?(x.intersect(f),t.sys.Region.release(f)):!x&&f&&(x=f),x){if(x.isEmpty()||o&&!o.intersects(x))return t.sys.Region.release(x),t.Matrix.release(g),h}else x=t.sys.Region.create(),m=e.$getOriginalBounds(),x.updateRegion(m,g);var _=!1;if(r){for(var O=r.length,E=0;O>E;E++)if(x.intersects(r[E])){_=!0;break}}else _=!0;if(!_)return t.sys.Region.release(x),t.Matrix.release(g),h;if(!(p||e.$children&&0!=e.$children.length)){if(c){var T=g;i.save(),i.setTransform(T.a,T.b,T.c,T.d,T.tx-x.minX,T.ty-x.minY),i.beginPath(),i.rect(c.x,c.y,c.width,c.height),i.clip()}return l&&(i.globalCompositeOperation=a),h+=this.drawDisplayObject(e,i,r,n,e.$displayList,o,s),l&&(i.globalCompositeOperation=v),c&&i.restore(),h}if(p&&t.Capabilities.$runtimeType==t.RuntimeType.WEB&&(!p.$children||0==p.$children.length)&&u&&3==u.type&&1==u.drawData.length&&1==u.drawData[0].type&&1==u.drawData[0].fillAlpha){this.renderingMask=!0,i.save();var F=this.drawDisplayObject(p,i,r,n,p.$displayList,o,s);if(this.renderingMask=!1,c){var T=g;i.setTransform(T.a,T.b,T.c,T.d,T.tx-x.minX,T.ty-x.minY),i.beginPath(),i.rect(c.x,c.y,c.width,c.height),i.clip()}return F+=this.drawDisplayObject(e,i,r,n,e.$displayList,o,s),i.restore(),F}var w=this.createRenderBuffer(x.width,x.height),C=w.context;if(!C)return h+=this.drawDisplayObject(e,i,r,n,e.$displayList,o,s),t.sys.Region.release(x),t.Matrix.release(g),h;C.setTransform(1,0,0,1,-x.minX,-x.minY);var R=t.Matrix.create().setTo(1,0,0,1,-x.minX,-x.minY);if(h+=this.drawDisplayObject(e,C,r,R,e.$displayList,x,s),p)if(t.Capabilities.$runtimeType==t.RuntimeType.WEB&&u&&1==u.$getRenderCount()||p.$displayList)C.globalCompositeOperation="destination-in",h+=this.drawDisplayObject(p,C,r,R,p.$displayList,x,s);else{var S=this.createRenderBuffer(x.width,x.height),P=S.context;if(!P)return h+=this.drawDisplayObject(e,i,r,n,e.$displayList,o,s),b.push(w),t.sys.Region.release(x),t.Matrix.release(g),h;P.setTransform(1,0,0,1,-x.minX,-x.minY),R=t.Matrix.create().setTo(1,0,0,1,-x.minX,-x.minY),h+=this.drawDisplayObject(p,P,r,R,p.$displayList,x,s),C.globalCompositeOperation="destination-in",C.setTransform(1,0,0,1,0,0),C.globalAlpha=1,C.drawImage(S.surface,0,0),b.push(S)}if(t.Matrix.release(R),h>0){if(h++,l&&(i.globalCompositeOperation=a),c){var T=g;i.save(),i.setTransform(T.a,T.b,T.c,T.d,T.tx-x.minX,T.ty-x.minY),i.beginPath(),i.rect(c.x,c.y,c.width,c.height),i.clip()}i.globalAlpha=1,i.setTransform(1,0,0,1,x.minX+n.tx,x.minY+n.ty),i.drawImage(w.surface,0,0),c&&i.restore(),l&&(i.globalCompositeOperation=v)}return b.push(w),t.sys.Region.release(x),t.Matrix.release(g),h},n.prototype.drawWithScrollRect=function(e,i,r,n,o,s){var a=0,h=e.$scrollRect?e.$scrollRect:e.$maskRect;if(h.isEmpty())return a;var l=t.Matrix.create();if(l.copyFrom(e.$getConcatenatedMatrix()),s)e.$getConcatenatedMatrixAt(s,l);else if(e.$parentDisplayList){var u=e.$parentDisplayList.root;u!==e.$stage&&e.$getConcatenatedMatrixAt(u,l)}var c=t.sys.Region.create();if(c.updateRegion(h,l),c.isEmpty()||o&&!o.intersects(c))return t.sys.Region.release(c),t.Matrix.release(l),a;
var p=!1;if(r){for(var d=r.length,f=0;d>f;f++)if(c.intersects(r[f])){p=!0;break}}else p=!0;return p?(i.save(),i.setTransform(l.a,l.b,l.c,l.d,l.tx+n.tx,l.ty+n.ty),i.beginPath(),i.rect(h.x,h.y,h.width,h.height),i.clip(),a+=this.drawDisplayObject(e,i,r,n,e.$displayList,c,s),i.restore(),t.sys.Region.release(c),t.Matrix.release(l),a):(t.sys.Region.release(c),t.Matrix.release(l),a)},n.prototype.drawNodeToBuffer=function(t,e,i,r){var n=e.context;n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,n,r)},n.prototype.renderNode=function(t,e,i){var r=0;switch(t.type){case 1:r=this.renderBitmap(t,e);break;case 2:r=1,this.renderText(t,e);break;case 3:r=this.renderGraphics(t,e,i);break;case 4:r=this.renderGroup(t,e);break;case 6:e.globalAlpha=t.drawData[0];break;case 7:r=this.renderMesh(t,e)}return r},n.prototype.renderMesh=function(e,i){if(t.Capabilities.runtimeType!=t.RuntimeType.NATIVE)return 0;var r=e.image,n=e.drawData,o=n.length,s=0,a=e.matrix;for(a&&(i.saveTransform(),i.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));o>s;)i.drawMesh(r.source,n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],e.imageWidth,e.imageHeight,e.uvs,e.vertices,e.indices,e.bounds);return a&&i.restoreTransform(),1},n.prototype.renderBitmap=function(e,i){var r=e.image;if(!r||!r.source)return 0;i.$imageSmoothingEnabled!=e.smoothing&&(i.imageSmoothingEnabled=e.smoothing,i.$imageSmoothingEnabled=e.smoothing);var n=e.drawData,s=n.length,a=0,h=e.matrix,l=e.blendMode,u=e.alpha,c=!1;h&&(i.saveTransform?i.saveTransform():i.save(),c=!0,i.transform(h.a,h.b,h.c,h.d,h.tx,h.ty)),l&&(i.globalCompositeOperation=y[l]);var p;u==u&&(p=i.globalAlpha,i.globalAlpha*=u);var d=0,f=e.filter;if(f&&8==s)if(t.Capabilities.runtimeType==t.RuntimeType.NATIVE){for(egret_native.Graphics.setGlobalShader(f);s>a;)d++,i.drawImage(r.source,n[a++],n[a++],n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);egret_native.Graphics.setGlobalShader(null)}else{var g=this.createRenderBuffer(n[6],n[7]),$=g.context;d++,$.drawImage(r.source,n[0],n[1],n[2],n[3],0,0,n[6],n[7]),d++;var m=$.getImageData(0,0,g.surface.width,g.surface.height);o(m.data,g.surface.width,g.surface.height,f.$matrix),$.putImageData(m,0,0),i.drawImage(g.surface,0,0,n[6],n[7],n[4],n[5],n[6],n[7]),b.push(g)}else for(;s>a;)d++,i.drawImage(r.source,n[a++],n[a++],n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);return c?i.restoreTransform?(i.restoreTransform(),l&&(i.globalCompositeOperation=v),u==u&&(i.globalAlpha=p)):i.restore():(l&&(i.globalCompositeOperation=v),u==u&&(i.globalAlpha=p)),d},n.prototype.renderText=function(i,r){r.textAlign="left",r.textBaseline="middle",r.lineJoin="round";for(var n=i.drawData,o=n.length,s=0;o>s;){var a=n[s++],h=n[s++],l=n[s++],u=n[s++];r.font=e(i,u);var c=null==u.textColor?i.textColor:u.textColor,p=null==u.strokeColor?i.strokeColor:u.strokeColor,d=null==u.stroke?i.stroke:u.stroke;r.fillStyle=t.toColorString(c),r.strokeStyle=t.toColorString(p),d&&(r.lineWidth=2*d,r.strokeText(l,a,h)),r.fillText(l,a,h)}},n.prototype.renderGraphics=function(t,e,n){var o=t.drawData,s=o.length;n=!!n;for(var a=0;s>a;a++){var h=o[a];switch(h.type){case 1:var l=h;e.fillStyle=n?$:i(l.fillColor,l.fillAlpha),this.renderPath(h,e),this.renderingMask?e.clip():e.fill();break;case 2:var u=h;e.fillStyle=n?$:r(e,u.gradientType,u.colors,u.alphas,u.ratios,u.matrix),e.save();var c=u.matrix;this.renderPath(h,e),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty),e.fill(),e.restore();break;case 3:var p=h,d=p.lineWidth;e.lineWidth=d,e.strokeStyle=n?$:i(p.lineColor,p.lineAlpha),e.lineCap=m[p.caps],e.lineJoin=p.joints,e.miterLimit=p.miterLimit;var f=1===d||3===d;f&&e.translate(.5,.5),this.renderPath(h,e),e.stroke(),f&&e.translate(-.5,-.5)}}return 0==s?0:1},n.prototype.renderPath=function(t,e){e.beginPath();for(var i=t.$data,r=t.$commands,n=r.length,o=0,s=0;n>s;s++){var a=r[s];switch(a){case 4:e.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case 3:e.quadraticCurveTo(i[o++],i[o++],i[o++],i[o++]);break;case 2:e.lineTo(i[o++],i[o++]);break;case 1:e.moveTo(i[o++],i[o++])}}},n.prototype.renderGroup=function(t,e){var i=t.matrix,r=!1;i&&(e.saveTransform?e.saveTransform():e.save(),r=!0,e.transform(i.a,i.b,i.c,i.d,i.tx,i.ty));for(var n=0,o=t.drawData,s=o.length,a=0;s>a;a++){var h=o[a];n+=this.renderNode(h,e)}return r&&(e.restoreTransform?e.restoreTransform():e.restore()),n},n.prototype.createRenderBuffer=function(e,i){var r=b.pop();return r?r.resize(e,i,!0):r=new t.sys.CanvasRenderBuffer(e,i),r},n}();t.CanvasRenderer=T,__reflect(T.prototype,"egret.CanvasRenderer",["egret.sys.SystemRenderer"]);var x=!1;try{x=void 0!==typeof Uint8ClampedArray}catch(_){}}(egret||(egret={}));var egret;!function(t){t.DeviceOrientation=null}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.WEB="web",e.NATIVE="native",t.RuntimeType=e,__reflect(e.prototype,"egret.RuntimeType");var i=function(){function t(){}return Object.defineProperty(t,"language",{get:function(){return t.$language},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMobile",{get:function(){return t.$isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t,"os",{get:function(){return t.$os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"runtimeType",{get:function(){return t.$runtimeType},enumerable:!0,configurable:!0}),Object.defineProperty(t,"supportVersion",{get:function(){return t.$supportVersion},enumerable:!0,configurable:!0}),Object.defineProperty(t,"engineVersion",{get:function(){return"4.0.0"},enumerable:!0,configurable:!0}),t.$setNativeCapabilities=function(e){var i=e.split("-");if(i.length<=4){var r=i[0];switch(r){case"android":r="Android";break;case"ios":r="iOS"}t.$os=r;var n=i[2].substring(1,i[2].length);t.$supportVersion=n}},Object.defineProperty(t,"renderMode",{get:function(){return t.$renderMode},enumerable:!0,configurable:!0}),Object.defineProperty(t,"boundingClientWidth",{get:function(){return t.$boundingClientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t,"boundingClientHeight",{get:function(){return t.$boundingClientHeight},enumerable:!0,configurable:!0}),t}();i.$language="zh-CN",i.$os="Unknown",i.$runtimeType="Unknown",i.$supportVersion="Unknown",i.$renderMode="Unknown",i.$boundingClientWidth=0,i.$boundingClientHeight=0,t.Capabilities=i,__reflect(i.prototype,"egret.Capabilities")}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};egret.Capabilities.$isMobile=testDeviceType(),egret.Capabilities.$runtimeType=testRuntimeType()?egret.RuntimeType.WEB:egret.RuntimeType.NATIVE;var egret;!function(t){t.BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"}}(egret||(egret={}));var egret;!function(t){function e(t,e){r[t]=e}function i(t){return r[t]}var r={};t.registerImplementation=e,t.getImplementation=i}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i){var r=t.call(this,e)||this;return r.firstCharHeight=0,"string"==typeof i?r.charList=r.parseConfig(i):i&&i.hasOwnProperty("frames")?r.charList=i.frames:r.charList={},r}return __extends(e,t),e.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},e.prototype.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},e.prototype._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var r=e.h;void 0===r&&(r=0);var n=e.offY;void 0===n&&(n=0),i=r+n}if(0>=i)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},e.prototype.parseConfig=function(t){t=t.split("\r\n").join("\n");for(var e=t.split("\n"),i=this.getConfigByKey(e[3],"count"),r={},n=4;4+i>n;n++){var o=e[n],s=String.fromCharCode(this.getConfigByKey(o,"id")),a={};r[s]=a,a.x=this.getConfigByKey(o,"x"),a.y=this.getConfigByKey(o,"y"),a.w=this.getConfigByKey(o,"width"),a.h=this.getConfigByKey(o,"height"),a.offX=this.getConfigByKey(o,"xoffset"),a.offY=this.getConfigByKey(o,"yoffset"),a.xadvance=this.getConfigByKey(o,"xadvance")}return r},e.prototype.getConfigByKey=function(t,e){for(var i=t.split(" "),r=0,n=i.length;n>r;r++){var o=i[r];if(e==o.substring(0,e.length)){var s=o.substring(e.length+1);return parseInt(s)}}return 0},e}(t.SpriteSheet);t.BitmapFont=e,__reflect(e.prototype,"egret.BitmapFont")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$textOffsetX=0,i.$textOffsetY=0,i.$textStartX=0,i.$textStartY=0,i.$lineHeights=[],i.$renderNode=new t.sys.BitmapNode,i.$BitmapText={0:0/0,1:0/0,2:"",3:0,4:0,5:null,6:!1,7:!1,8:!1,9:!1,10:"left",11:"top",12:t.Bitmap.defaultSmoothing},i}return __extends(i,e),Object.defineProperty(i.prototype,"smoothing",{get:function(){var t=this.$BitmapText;return t[12]},set:function(t){t=!!t;var e=this.$BitmapText;t!=e[12]&&(e[12]=t,this.$invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.$BitmapText[2]},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),i.prototype.$setText=function(t){null==t&&(t=""),t=String(t);var e=this.$BitmapText;return t==e[2]?!1:(e[2]=t,this.$invalidateContentBounds(),!0)},i.prototype.$getWidth=function(){var t=this.$BitmapText[0];return isNaN(t)?this.$getContentBounds().width:t},i.prototype.$setWidth=function(t){var e=this.$BitmapText;return 0>t||t==e[0]?!1:(e[0]=t,this.$invalidateContentBounds(),!0)},i.prototype.$invalidateContentBounds=function(){e.prototype.$invalidateContentBounds.call(this),this.$BitmapText[7]=!0},i.prototype.$getHeight=function(){var t=this.$BitmapText[1];return isNaN(t)?this.$getContentBounds().height:t},i.prototype.$setHeight=function(t){var e=this.$BitmapText;return 0>t||t==e[1]?!1:(e[1]=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"font",{get:function(){return this.$BitmapText[5]},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),i.prototype.$setFont=function(t){var e=this.$BitmapText;return e[5]==t?!1:(e[5]=t,this.$BitmapText[6]=!0,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this.$BitmapText[3]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLineSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[3]==t?!1:(e[3]=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this.$BitmapText[4]},set:function(t){this.$setLetterSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLetterSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[4]==t?!1:(e[4]=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"textAlign",{get:function(){return this.$BitmapText[10]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setTextAlign=function(t){var e=this.$BitmapText;return e[10]==t?!1:(e[10]=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.$BitmapText[11]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setVerticalAlign=function(t){var e=this.$BitmapText;return e[11]==t?!1:(e[11]=t,this.$invalidateContentBounds(),!0)},i.prototype.$render=function(){var e=this.$BitmapText,r=this.$getTextLines(),n=r.length;if(0!=n){var o=this.$textLinesWidth,s=e[5],a=this.$renderNode;s.$texture&&(a.image=s.$texture._bitmapData),a.smoothing=e[12];for(var h=s._getFirstCharHeight(),l=Math.ceil(h*i.EMPTY_FACTOR),u=!isNaN(e[1]),c=e[8],p=e[0],d=e[1],f=e[10],g=this.$textOffsetY+this.$textStartY,y=this.$lineHeights,v=0;n>v;v++){var $=y[v];if(u&&v>0&&g+$>d)break;var m=r[v],b=m.length,T=this.$textOffsetX;if(f!=t.HorizontalAlign.LEFT){var x=p>c?p:c;f==t.HorizontalAlign.RIGHT?T+=x-o[v]:f==t.HorizontalAlign.CENTER&&(T+=Math.floor((x-o[v])/2))}for(var _=0;b>_;_++){var O=m.charAt(_),E=s.getTexture(O);if(E){var F=E._bitmapWidth,w=E._bitmapHeight;a.imageWidth=E._sourceWidth,a.imageHeight=E._sourceHeight,a.drawImage(E._bitmapX,E._bitmapY,F,w,T+E._offsetX,g+E._offsetY,E.$getScaleBitmapWidth(),E.$getScaleBitmapHeight()),T+=(s.getConfig(O,"xadvance")||E.$getTextureWidth())+e[4]}else" "==O?T+=l:t.$warn(1046,O)}g+=$+e[3]}}},i.prototype.$measureContentBounds=function(t){var e=this.$getTextLines();0==e.length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$BitmapText[8]-this.$textOffsetX,this.$BitmapText[9]-this.$textOffsetY)},Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.$getTextLines(),this.$BitmapText[8]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.$getTextLines(),this.$BitmapText[9]},enumerable:!0,configurable:!0}),i.prototype.$getTextLines=function(){function e(t){return m&&n.length>0&&f>m?!1:(f+=l+c,a||h||(u-=p),n.push(t),s.push(l),o.push(u),d=Math.max(u,d),!0)}var r=this.$BitmapText;if(!r[7])return this.textLines;var n=[];this.textLines=n;var o=[];this.$textLinesWidth=o,r[7]=!1;var s=[];if(this.$lineHeights=s,!r[2]||!r[5])return n;for(var a,h,l,u,c=r[3],p=r[4],d=0,f=0,g=0,y=0,v=!isNaN(r[0]),$=r[0],m=r[1],b=r[5],T=b._getFirstCharHeight(),x=Math.ceil(T*i.EMPTY_FACTOR),_=r[2],O=_.split(/(?:\r\n|\r|\n)/),E=O.length,F=!0,w=0;E>w;w++){var C=O[w],R=C.length;l=0,u=0,a=!0,h=!1;for(var S=0;R>S;S++){a||(u+=p);var P=C.charAt(S),D=void 0,L=void 0,M=0,A=0,N=b.getTexture(P);if(N)D=N.$getTextureWidth(),L=N.$getTextureHeight(),M=N._offsetX,A=N._offsetY;else{if(" "!=P){t.$warn(1046,P),a&&(a=!1);continue}D=x,L=T}if(a&&(a=!1,g=Math.min(M,g)),F&&(F=!1,y=Math.min(A,y)),v&&S>0&&u+D>$){if(!e(C.substring(0,S)))break;C=C.substring(S),R=C.length,S=0,u=S==R-1?D:b.getConfig(P,"xadvance")||D,l=L}else u+=S==R-1?D:b.getConfig(P,"xadvance")||D,l=Math.max(L,l)}if(m&&w>0&&f>m)break;if(h=!0,!e(C))break}f-=c,r[8]=d,r[9]=f,this.$textOffsetX=g,this.$textOffsetY=y,this.$textStartX=0,this.$textStartY=0;var B;return $>d&&(B=r[10],B==t.HorizontalAlign.RIGHT?this.$textStartX=$-d:B==t.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor(($-d)/2))),m>f&&(B=r[11],B==t.VerticalAlign.BOTTOM?this.$textStartY=m-f:B==t.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((m-f)/2))),n},i}(t.DisplayObject);e.EMPTY_FACTOR=.33,t.BitmapText=e,__reflect(e.prototype,"egret.BitmapText")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.JUSTIFY="justify",e.CONTENT_JUSTIFY="contentJustify",t.HorizontalAlign=e,__reflect(e.prototype,"egret.HorizontalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}return e.prototype.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},e.prototype.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],r=this.replaceArr[e][1];t=t.replace(i,r)}return t},e.prototype.parse=function(e){this.stackArray=[],this.resutlArr=[];for(var i=0,r=e.length;r>i;){var n=e.indexOf("<",i);if(0>n)this.addToResultArr(e.substring(i)),i=r;else{this.addToResultArr(e.substring(i,n));var o=e.indexOf(">",n);-1==o?(t.$error(1038),o=n):"/"==e.charAt(n+1)?this.stackArray.pop():this.addToArray(e.substring(n+1,o)),i=o+1}}return this.resutlArr},e.prototype.parser=function(t){return this.parse(t)},e.prototype.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),this.stackArray.length>0?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.prototype.changeStringToObject=function(t){t=t.trim();var e={},i=[];if("i"==t.charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var r=0,n=void 0;n=t.match(this.getHeadReg());){var o=n[0],s="";t=t.substring(o.length).trim(),'"'==t.charAt(0)?(r=t.indexOf('"',1),s=t.substring(1,r),r+=1):"'"==t.charAt(0)?(r=t.indexOf("'",1),s=t.substring(1,r),r+=1):(s=t.match(/(\S)+/)[0],r=s.length),this.addProperty(e,o.substring(0,o.length-1).trim(),s.trim()),t=t.substring(r).trim()}}return e},e.prototype.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},e.prototype.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},e.prototype.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var r in i)null==e[r]&&(e[r]=i[r]);this.stackArray.push(e)}},e}();t.HtmlTextParser=e,__reflect(e.prototype,"egret.HtmlTextParser")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.stageTextAdded=!1,t._text=null,t._isFocus=!1,t}return __extends(i,e),i.prototype.init=function(e){this._text=e,this.stageText=new t.StageText,this.stageText.$setTextField(this._text)},i.prototype._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},i.prototype._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},i.prototype._getText=function(){return this.stageText.$getText()},i.prototype._setText=function(t){this.stageText.$setText(t)},i.prototype._setColor=function(t){this.stageText.$setColor(t)},i.prototype.focusHandler=function(e){this._isFocus||(this._isFocus=!0,e.showing||(this._text.$isTyping=!0),this._text.$invalidateContentBounds(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN,!0)))},i.prototype.blurHandler=function(e){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$isTyping=!1,this._text.$invalidateContentBounds(),this.stageText.$onBlur(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT,!0)))},i.prototype.onMouseDownHandler=function(t){this.$onFocus()},i.prototype.$onFocus=function(){this._text.visible&&(this._isFocus||(this.tempStage.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.$show()))},i.prototype.onStageDownHandler=function(t){t.$target!=this._text&&this.stageText.$hide()},i.prototype.updateTextHandler=function(e){var i,r,n=this._text.$TextField,o=this.stageText.$getText(),s=!1;null!=n[35]&&(i=new RegExp("["+n[35]+"]","g"),r=o.match(i),o=r?r.join(""):"",s=!0),null!=n[36]&&(i=new RegExp("[^"+n[36]+"]","g"),r=o.match(i),o=r?r.join(""):"",s=!0),s&&this.stageText.$getText()!=o&&this.stageText.$setText(o),this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE,!0))},i.prototype.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},i.prototype._hideInput=function(){this.stageText.$removeFromStage()},i.prototype.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},i.prototype._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this.updateInput();var t=this._text.$stage;if(null==t);else for(var e=this._text,i=e.$visible;;){if(!i)break;if(e=e.parent,e==t)break;i=e.$visible}this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this.updateInput()},i}(t.HashObject);t.InputController=e,__reflect(e.prototype,"egret.InputController")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i,n){n=n||{};var o=null==n.italic?i[16]:n.italic,s=null==n.bold?i[15]:n.bold,a=null==n.size?i[0]:n.size,h=n.fontFamily||i[8]||r.default_fontFamily;return t.sys.measureText(e,h,a,s,o)}var i=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![。，！、》…）)}”】\\.\\,\\!\\?\\]\\:])"),r=function(r){function n(){var e=r.call(this)||this;e.$inputEnabled=!1,e.inputUtils=null,e.graphicsNode=null,e.isFlow=!1,e.textArr=[],e.linesArr=[],e.$isTyping=!1;var i=new t.sys.TextNode;return i.fontFamily=n.default_fontFamily,e.textNode=i,e.$renderNode=i,e.$TextField={0:n.default_size,1:0,2:n.default_textColor,3:0/0,4:0/0,5:0,6:0,7:0,8:n.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT},e}return __extends(n,r),n.prototype.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},n.prototype.$setTouchEnabled=function(t){var e=r.prototype.$setTouchEnabled.call(this,t);return this.isInput()&&(this.$inputEnabled=!0),e},Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),n.prototype.$setFontFamily=function(t){var e=this.$TextField;return e[8]==t?!1:(e[8]=t,this.invalidateFontString(),!0)},Object.defineProperty(n.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),n.prototype.$setSize=function(t){t=+t||0;var e=this.$TextField;return e[0]==t?!1:(e[0]=t,this.invalidateFontString(),!0)},Object.defineProperty(n.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),n.prototype.$setBold=function(t){t=!!t;var e=this.$TextField;return t==e[15]?!1:(e[15]=t,this.invalidateFontString(),!0)},Object.defineProperty(n.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),n.prototype.$setItalic=function(t){t=!!t;var e=this.$TextField;return t==e[16]?!1:(e[16]=t,this.invalidateFontString(),!0)},n.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(n.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),n.prototype.$setTextAlign=function(t){var e=this.$TextField;return e[9]==t?!1:(e[9]=t,this.$invalidateTextField(),!0)},Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),n.prototype.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]==t?!1:(e[10]=t,this.$invalidateTextField(),!0)},Object.defineProperty(n.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),n.prototype.$setLineSpacing=function(t){t=+t||0;var e=this.$TextField;return e[1]==t?!1:(e[1]=t,this.$invalidateTextField(),!0)},Object.defineProperty(n.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setTextColor=function(t){t=0|+t;var e=this.$TextField;return e[2]==t?!1:(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidate(),!0)},Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),n.prototype.$setWordWrap=function(t){t=!!t;var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField()))},Object.defineProperty(n.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),n.prototype.$setType=function(e){var i=this.$TextField;return i[24]!=e?(i[24]=e,e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0):!1},Object.defineProperty(n.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(t){this.$TextField[37]=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),n.prototype.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},n.prototype.$setBaseText=function(t){null==t&&(t=""),t=t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]!=t){this.$invalidateTextField(),e[13]=t;var i="";return i=e[20]?this.changeToPassText(t):t,this.setMiddleStyle([{text:i}]),!0}return!1},n.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(n.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),n.prototype.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]!=t){e[20]=t,this.$invalidateTextField();var i="";return i=t?this.changeToPassText(e[13]):e[13],this.setMiddleStyle([{text:i}]),!0}return!1},Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){t=+t||0,this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setStrokeColor=function(e){var i=this.$TextField;return i[25]!=e?(this.$invalidateTextField(),i[25]=e,i[26]=t.toColorString(e),!0):!1},Object.defineProperty(n.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),n.prototype.$setStroke=function(t){return this.$TextField[27]!=t?(this.$invalidateTextField(),this.$TextField[27]=t,!0):!1},Object.defineProperty(n.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),n.prototype.$setMaxChars=function(t){return this.$TextField[21]!=t?(this.$TextField[21]=t,!0):!1},Object.defineProperty(n.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(t){this.$TextField[28]=Math.max(t,1),this.$invalidateTextField()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),n.prototype.$setSelection=function(t,e){return!1},n.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(n.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),n.prototype.$setMultiline=function(t){return this.$TextField[30]=t,this.$invalidateTextField(),!0},Object.defineProperty(n.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&(i=t.indexOf("^",i),0!=i)&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),n.prototype.$setWidth=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=0/0}else{if(e[3]==t)return!1;e[3]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),!0)},n.prototype.$setHeight=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=0/0}else{if(e[4]==t)return!1;e[4]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),!0)},n.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},n.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(n.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),n.prototype.$setBorder=function(t){this.$TextField[31]=!!t,this.$invalidate()},Object.defineProperty(n.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setBorderColor=function(t){this.$TextField[32]=+t||0,this.$invalidate()},Object.defineProperty(n.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),n.prototype.$setBackground=function(t){this.$TextField[33]=t,this.$invalidate()},Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),n.prototype.$setBackgroundColor=function(t){this.$TextField[34]=t,this.$invalidate()},n.prototype.fillBackground=function(e){var i=this.graphicsNode;i&&i.clear();var r=this.$TextField;if(r[33]||r[31]||e&&e.length>0){if(!i){i=this.graphicsNode=new t.sys.GraphicsNode;var n=new t.sys.GroupNode;n.addNode(i),n.addNode(this.textNode),this.$renderNode=n}var o=void 0,s=void 0;if(r[33]&&(o=i.beginFill(r[34]),o.drawRect(0,0,this.$getWidth(),this.$getHeight())),r[31]&&(s=i.lineStyle(1,r[32]),s.drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1)),e&&e.length>0)for(var a=r[2],h=-1,l=e.length,u=0;l>u;u+=4){var c=e[u],p=e[u+1],d=e[u+2],f=e[u+3]||a;(0>h||h!=f)&&(h=f,s=i.lineStyle(2,f,1,t.CapsStyle.NONE)),s.moveTo(c,p),s.lineTo(c+d,p)}}if(i){var g=this.$getRenderBounds();i.x=g.x,i.y=g.y,i.width=g.width,i.height=g.height,t.Rectangle.release(g)}},n.prototype.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},n.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&this.textNode.clean()
},n.prototype.$onAddToStage=function(e,i){r.prototype.$onAddToStage.call(this,e,i),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},n.prototype.$invalidateTextField=function(){this.$invalidateContentBounds(),this.$TextField[18]=!0},n.prototype.$update=function(e,i){var n=this.$getRenderBounds(),o=r.prototype.$update.call(this,e,n);return t.Rectangle.release(n),o},n.prototype.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var r=2*this.$TextField[27];return r>0&&(i.width+=2*r,i.height+=2*r),i.x-=r+2,i.y-=r+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},n.prototype.$measureContentBounds=function(e){this.$getLinesArr();var i=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],r=isNaN(this.$TextField[4])?t.TextFieldUtils.$getTextHeight(this):this.$TextField[4];e.setTo(0,0,i,r)},n.prototype.$render=function(){if(this.$TextField[24]==t.TextFieldType.INPUT){if((this.$hasAnyFlags(2032)||this.$hasAnyFlags(1648))&&this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3])return;var e=this.drawText();this.fillBackground(e);var i=this.$getRenderBounds(),r=this.textNode;r.x=i.x,r.y=i.y,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),t.Rectangle.release(i)},Object.defineProperty(n.prototype,"textFlow",{get:function(){return this.textArr},set:function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){var r=t[i];e+=r.text}this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t))},enumerable:!0,configurable:!0}),n.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,r=t.length;r>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},n.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(n.prototype,"textWidth",{get:function(){return this.$getLinesArr(),this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this.$getLinesArr(),t.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),n.prototype.appendText=function(t){this.appendElement({text:t})},n.prototype.appendElement=function(t){var e=this.$TextField[13]+t.text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},n.prototype.$getLinesArr=function(){var r=this.$TextField;if(!r[18])return this.linesArr;r[18]=!1;var n=this.textArr;this.linesArr.length=0,r[6]=0,r[5]=0;var o=r[3];if(!isNaN(o)&&0==o)return r[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var s,a=this.linesArr,h=0,l=0,u=0,c=0,p=0,d=n.length;d>p;p++){var f=n[p];if(f.text){f.style=f.style||{};for(var g=f.text.toString(),y=g.split(/(?:\r\n|\r|\n)/),v=0,$=y.length;$>v;v++){null==a[c]&&(s={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},a[c]=s,h=0,u=0,l=0),u=r[24]==t.TextFieldType.INPUT?r[0]:Math.max(u,f.style.size||r[0]);var m=!0;if(""==y[v])v==$-1&&(m=!1);else{var b=e(y[v],r,f.style);if(isNaN(o))h+=b,l+=y[v].length,s.elements.push({width:b,text:y[v],style:f.style}),v==$-1&&(m=!1);else if(o>=h+b)s.elements.push({width:b,text:y[v],style:f.style}),h+=b,l+=y[v].length,v==$-1&&(m=!1);else{var T=0,x=0,_=y[v],O=void 0;O=r[19]?_.split(i):_.match(/./g);for(var E=O.length,F=0;E>T;T++){var w=O[T].length,C=!1;if(1==w&&E-1>T){var R=O[T].charCodeAt(0),S=O[T+1].charCodeAt(0);if(R>=55296&&56319>=R&&56320==(64512&S)){var P=O[T]+O[T+1];w=2,C=!0,b=e(P,r,f.style)}else b=e(O[T],r,f.style)}else b=e(O[T],r,f.style);if(0!=h&&h+b>o&&h+T!=0)break;if(x+b>o)for(var D=O[T].match(/./g),L=0,M=D.length;M>L;L++){var w=D[L].length,A=!1;if(1==w&&M-1>L){var R=D[L].charCodeAt(0),S=D[L+1].charCodeAt(0);if(R>=55296&&56319>=R&&56320==(64512&S)){var P=D[L]+D[L+1];w=2,A=!0,b=e(P,r,f.style)}else b=e(D[L],r,f.style)}else b=e(D[L],r,f.style);if(L>0&&h+b>o)break;F+=w,x+=b,h+=b,l+=F,A&&L++}else F+=w,x+=b,h+=b,l+=F;C&&T++}if(T>0){s.elements.push({width:x,text:_.substring(0,F),style:f.style});var N=_.substring(F),B=void 0,I=N.length;for(B=0;I>B&&" "==N.charAt(B);B++);y[v]=N.substring(B)}""!=y[v]&&(v--,m=!1)}}m&&(l++,s.hasNextLine=!0),v<y.length-1&&(s.width=h,s.height=u,s.charNum=l,r[5]=Math.max(r[5],h),r[6]+=u,c++)}p==n.length-1&&s&&(s.width=h,s.height=u,s.charNum=l,r[5]=Math.max(r[5],h),r[6]+=u)}else s&&(s.width=h,s.height=u,s.charNum=l,r[5]=Math.max(r[5],h),r[6]+=u)}return r[29]=a.length,a},n.prototype.drawText=function(){var e=this.textNode,i=this.$TextField;e.bold=i[15],e.fontFamily=i[8]||n.default_fontFamily,e.italic=i[16],e.size=i[0],e.stroke=i[27],e.strokeColor=i[25],e.textColor=i[2];var r=this.$getLinesArr();if(0==i[5])return[];var o=isNaN(i[3])?i[5]:i[3],s=t.TextFieldUtils.$getTextHeight(this),a=0,h=t.TextFieldUtils.$getStartLine(this),l=i[4];if(!isNaN(l)&&l>s){var u=t.TextFieldUtils.$getValign(this);a+=u*(l-s)}a=Math.round(a);for(var c=t.TextFieldUtils.$getHalign(this),p=0,d=[],f=h,g=i[29];g>f;f++){var y=r[f],v=y.height;if(a+=v/2,f!=h){if(i[24]==t.TextFieldType.INPUT&&!i[30])break;if(!isNaN(l)&&a>l)break}p=Math.round((o-y.width)*c);for(var $=0,m=y.elements.length;m>$;$++){var b=y.elements[$],T=b.style.size||i[0];e.drawText(p,a+(v-T)/2,b.text,b.style),b.style.underline&&d.push(p,a+v/2,b.width,b.style.textColor),p+=b.width}a+=v/2+i[1]}return d},n.prototype.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.prototype.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},n.prototype.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils.$getTextElement(this,e.localX,e.localY);if(null!=i){var r=i.style;if(r&&r.href)if(r.href.match(/^event:/)){var n=r.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,r.href.substring(n.length))}else open(r.href,r.target||"_blank")}}},n}(t.DisplayObject);r.default_fontFamily="Arial",r.default_size=30,r.default_textColor=16777215,t.TextField=r,__reflect(r.prototype,"egret.TextField")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.TEXT="text",e.TEL="tel",e.PASSWORD="password",t.TextFieldInputType=e,__reflect(e.prototype,"egret.TextFieldInputType")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.DYNAMIC="dynamic",e.INPUT="input",t.TextFieldType=e,__reflect(e.prototype,"egret.TextFieldType")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}return e.$getStartLine=function(t){var i=t.$TextField,r=e.$getTextHeight(t),n=0,o=i[4];return isNaN(o)||(o>r||r>o&&(n=Math.max(i[28]-1,0),n=Math.min(i[29]-1,n)),i[30]||(n=Math.max(i[28]-1,0),i[29]>0&&(n=Math.min(i[29]-1,n)))),n},e.$getHalign=function(e){var i=e.$getLinesArr(),r=0;return e.$TextField[9]==t.HorizontalAlign.CENTER?r=.5:e.$TextField[9]==t.HorizontalAlign.RIGHT&&(r=1),e.$TextField[24]==t.TextFieldType.INPUT&&!e.$TextField[30]&&i.length>1&&(r=0),r},e.$getTextHeight=function(e){var i=t.TextFieldType.INPUT!=e.$TextField[24]||e.$TextField[30]?e.$TextField[6]+(e.$TextField[29]-1)*e.$TextField[1]:e.$TextField[0];return i},e.$getValign=function(i){var r=e.$getTextHeight(i),n=i.$TextField[4];if(!isNaN(n)&&n>r){var o=0;return i.$TextField[10]==t.VerticalAlign.MIDDLE?o=.5:i.$TextField[10]==t.VerticalAlign.BOTTOM&&(o=1),o}return 0},e.$getTextElement=function(t,i,r){var n=e.$getHit(t,i,r),o=t.$getLinesArr();return n&&o[n.lineIndex]&&o[n.lineIndex].elements[n.textElementIndex]?o[n.lineIndex].elements[n.textElementIndex]:null},e.$getHit=function(t,i,r){var n=t.$getLinesArr();if(0==t.$TextField[3])return null;var o=0,s=e.$getTextHeight(t),a=0,h=t.$TextField[4];if(!isNaN(h)&&h>s){var l=e.$getValign(t);a=l*(h-s),0!=a&&(r-=a)}for(var u=e.$getStartLine(t),c=0,p=u;p<n.length;p++){var d=n[p];if(c+d.height>=r){r>c&&(o=p+1);break}if(c+=d.height,c+t.$TextField[1]>r)return null;c+=t.$TextField[1]}if(0==o)return null;var f=n[o-1],g=t.$TextField[3];isNaN(g)&&(g=t.textWidth);var y=e.$getHalign(t);i-=y*(g-f.width);for(var v=0,p=0;p<f.elements.length;p++){var $=f.elements[p];if(v+$.width<=i)v+=$.width;else if(i>v)return{lineIndex:o-1,textElementIndex:p}}return null},e.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,r=t.size,n=t.lineSpacing;e=Math.floor(i/(r+n));var o=i-(r+n)*e;o>r/2&&e++}return e},e}();t.TextFieldUtils=e,__reflect(e.prototype,"egret.TextFieldUtils")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.TOP="top",e.BOTTOM="bottom",e.MIDDLE="middle",e.JUSTIFY="justify",e.CONTENT_JUSTIFY="contentJustify",t.VerticalAlign=e,__reflect(e.prototype,"egret.VerticalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",t.Endian=e,__reflect(e.prototype,"egret.Endian");var i=function(){function i(t){this.BUFFER_EXT_SIZE=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=e.BIG_ENDIAN}return i.prototype._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},i.prototype.setArrayBuffer=function(t){},Object.defineProperty(i.prototype,"buffer",{get:function(){return this.data.buffer},set:function(t){this.data=new DataView(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataView",{get:function(){return this.data},set:function(t){this.data=t,this.write_position=t.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.write_position=t>this.write_position?t:this.write_position},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t;var e=new Uint8Array(new ArrayBuffer(t)),i=this.data.buffer.byteLength;i>t&&(this._position=t);var r=Math.min(i,t);e.set(new Uint8Array(this.data.buffer,0,r)),this.buffer=e.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),i.prototype.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},i.prototype.readBoolean=function(){return this.validate(i.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},i.prototype.readByte=function(){return this.validate(i.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},i.prototype.readBytes=function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),0==r)r=this.bytesAvailable;else if(!this.validate(r))return null;t?t.validateBuffer(e+r):t=new i(new ArrayBuffer(e+r));for(var n=0;r>n;n++)t.data.setUint8(n+e,this.data.getUint8(this.position++))},i.prototype.readDouble=function(){if(!this.validate(i.SIZE_OF_FLOAT64))return null;var t=this.data.getFloat64(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT64,t},i.prototype.readFloat=function(){if(!this.validate(i.SIZE_OF_FLOAT32))return null;var t=this.data.getFloat32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT32,t},i.prototype.readInt=function(){if(!this.validate(i.SIZE_OF_INT32))return null;var t=this.data.getInt32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT32,t},i.prototype.readShort=function(){if(!this.validate(i.SIZE_OF_INT16))return null;var t=this.data.getInt16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT16,t},i.prototype.readUnsignedByte=function(){return this.validate(i.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},i.prototype.readUnsignedInt=function(){if(!this.validate(i.SIZE_OF_UINT32))return null;var t=this.data.getUint32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT32,t},i.prototype.readUnsignedShort=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t},i.prototype.readUTF=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t>0?this.readUTFBytes(t):""},i.prototype.readUTFBytes=function(t){if(!this.validate(t))return null;var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},i.prototype.writeBoolean=function(t){this.validateBuffer(i.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,t?1:0)},i.prototype.writeByte=function(t){this.validateBuffer(i.SIZE_OF_INT8),this.data.setInt8(this.position++,t)},i.prototype.writeBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var r;if(!(0>e)&&!(0>i)&&(r=0==i?t.length-e:Math.min(t.length-e,i),r>0)){this.validateBuffer(r);for(var n=new DataView(t.buffer),o=r,s=4;o>s;o-=s)this.data.setUint32(this._position,n.getUint32(e)),this.position+=s,e+=s;for(;o>0;o--)this.data.setUint8(this.position++,n.getUint8(e++))}},i.prototype.writeDouble=function(t){this.validateBuffer(i.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT64},i.prototype.writeFloat=function(t){this.validateBuffer(i.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT32},i.prototype.writeInt=function(t){this.validateBuffer(i.SIZE_OF_INT32),this.data.setInt32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT32},i.prototype.writeShort=function(t){this.validateBuffer(i.SIZE_OF_INT16),this.data.setInt16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT16},i.prototype.writeUnsignedInt=function(t){this.validateBuffer(i.SIZE_OF_UINT32),this.data.setUint32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT32},i.prototype.writeUnsignedShort=function(t){this.validateBuffer(i.SIZE_OF_UINT16),this.data.setUint16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16},i.prototype.writeUTF=function(t){var r=this.encodeUTF8(t),n=r.length;this.validateBuffer(i.SIZE_OF_UINT16+n),this.data.setUint16(this.position,n,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16,this._writeUint8Array(r,!1)},i.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},i.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},i.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},i.prototype.validate=function(e){return this.data.byteLength>0&&this._position+e<=this.data.byteLength?!0:void t.$error(1025)},i.prototype.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),r=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,r)),this.buffer=i.buffer}},i.prototype.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),r=[];i.length>e;){var n=i[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))r.push(n);else{var o=void 0,s=void 0;for(this.inRange(n,128,2047)?(o=1,s=192):this.inRange(n,2048,65535)?(o=2,s=224):this.inRange(n,65536,1114111)&&(o=3,s=240),r.push(this.div(n,Math.pow(64,o))+s);o>0;){var a=this.div(n,Math.pow(64,o-1));r.push(128+a%64),o-=1}}}return new Uint8Array(r)},i.prototype.decodeUTF8=function(t){for(var e,i=!1,r=0,n="",o=0,s=0,a=0,h=0;t.length>r;){var l=t[r++];if(l==this.EOF_byte)e=0!=s?this.decoderError(i):this.EOF_code_point;else if(0==s)this.inRange(l,0,127)?e=l:(this.inRange(l,194,223)?(s=1,h=128,o=l-192):this.inRange(l,224,239)?(s=2,h=2048,o=l-224):this.inRange(l,240,244)?(s=3,h=65536,o=l-240):this.decoderError(i),o*=Math.pow(64,s),e=null);else if(this.inRange(l,128,191))if(a+=1,o+=(l-128)*Math.pow(64,s-a),a!==s)e=null;else{var u=o,c=h;o=0,s=0,a=0,h=0,e=this.inRange(u,c,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(i,l)}else o=0,s=0,a=0,h=0,r--,e=this.decoderError(i,l);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(n+=String.fromCharCode(e)):(e-=65536,n+=String.fromCharCode(55296+(e>>10&1023)),n+=String.fromCharCode(56320+(1023&e))))}return n},i.prototype.encoderError=function(e){t.$error(1026,e)},i.prototype.decoderError=function(e,i){return e&&t.$error(1027),i||65533},i.prototype.inRange=function(t,e,i){return t>=e&&i>=t},i.prototype.div=function(t,e){return Math.floor(t/e)},i.prototype.stringToCodePoints=function(t){for(var e=[],i=0,r=t.length;i<t.length;){var n=t.charCodeAt(i);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))e.push(65533);else if(i==r-1)e.push(65533);else{var o=t.charCodeAt(i+1);if(this.inRange(o,56320,57343)){var s=1023&n,a=1023&o;i+=1,e.push(65536+(s<<10)+a)}else e.push(65533)}else e.push(n);i+=1}return e},i}();i.SIZE_OF_BOOLEAN=1,i.SIZE_OF_INT8=1,i.SIZE_OF_INT16=2,i.SIZE_OF_INT32=4,i.SIZE_OF_UINT8=1,i.SIZE_OF_UINT16=2,i.SIZE_OF_UINT32=4,i.SIZE_OF_FLOAT32=4,i.SIZE_OF_FLOAT64=8,t.ByteArray=i,__reflect(i.prototype,"egret.ByteArray")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.NORMAL="normal",e.ADD="add",e.ERASE="erase",t.BlendMode=e,__reflect(e.prototype,"egret.BlendMode")}(egret||(egret={})),function(t){var e;!function(t){function e(t){var e=n[t];return void 0===e?0:e}function i(t){var e=r[t];return void 0===e?"normal":e}for(var r=["normal","add","erase"],n={},o=r.length,s=0;o>s;s++){var a=r[s];n[a]=s}t.blendModeToNumber=e,t.numberToBlendMode=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(e,i){t.useFontMapping=!0,t.fontMapping[e]=i}t.fontMapping={},t.useFontMapping=!1,t.registerFontMapping=e}(egret||(egret={}));var egret;!function(t){function e(t,e,i){var r=t.prototype;r.__class__=e;var n=[e];i&&(n=n.concat(i));var o=r.__types__;if(r.__types__)for(var s=o.length,a=0;s>a;a++){var h=o[a];-1==n.indexOf(h)&&n.push(h)}r.__types__=n}t.registerClass=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$stageWidth=0,i.$stageHeight=0,i.$scaleMode=t.StageScaleMode.SHOW_ALL,i.$orientation=t.OrientationMode.AUTO,i.$maxTouches=99,i.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,i.$stage=i,i.$nestLevel=1,i}return __extends(i,e),Object.defineProperty(i.prototype,"frameRate",{get:function(){return t.sys.$ticker.$frameRate},set:function(e){t.sys.$ticker.$setFrameRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){t.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(e,i){t.registerImplementation(e,i)},i.prototype.getImplementation=function(e){return t.getImplementation(e)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return t.$TextureScaleFactor},set:function(e){t.$TextureScaleFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dirtyRegionPolicy",{get:function(){return this.$dirtyRegionPolicy},set:function(t){this.$dirtyRegionPolicy!=t&&(this.$dirtyRegionPolicy=t,this.$displayList.setDirtyRegionPolicy(t))},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.DisplayObjectContainer);t.Stage=e,__reflect(e.prototype,"egret.Stage")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"logLevel",{set:function(t){},enumerable:!0,configurable:!0}),t}();e.ALL="all",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e.OFF="off",t.Logger=e,__reflect(e.prototype,"egret.Logger")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),r=i+1,n=t.sinInt(i);if(i==e)return n;var o=t.sinInt(r);return(e-i)*o+(r-e)*n},t.sinInt=function(t){return t%=360,0>t&&(t+=360),egret_sin_map[t]},t.cos=function(e){var i=Math.floor(e),r=i+1,n=t.cosInt(i);if(i==e)return n;var o=t.cosInt(r);return(e-i)*o+(r-e)*n},t.cosInt=function(t){return t%=360,0>t&&(t+=360),egret_cos_map[t]},t}();t.NumberUtils=e,__reflect(e.prototype,"egret.NumberUtils")}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;360>NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n});var egret;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=0);var r=e.call(this)||this;return r._delay=0,r._currentCount=0,r._running=!1,r.updateInterval=1e3,r.lastCount=1e3,r.lastTimeStamp=0,r.delay=t,r.repeatCount=0|+i,r}return __extends(i,e),Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},set:function(t){1>t&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.stop(),this._currentCount=0},i.prototype.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=t.getTimer(),t.sys.$ticker.$startTick(this.$update,this),this._running=!0)},i.prototype.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},i.prototype.$update=function(e){var i=e-this.lastTimeStamp;if(i>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=e,this._currentCount++;var r=this.repeatCount>0&&this._currentCount>=this.repeatCount;return t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),r&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)),!1},i}(t.EventDispatcher);t.Timer=e,__reflect(e.prototype,"egret.Timer")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callLaterFunctionList.push(e),t.$callLaterThisList.push(i),t.$callLaterArgsList.push(r)}function i(e,i){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t.$callAsyncFunctionList.push(e),t.$callAsyncThisList.push(i),t.$callAsyncArgsList.push(r)}t.$callLaterFunctionList=[],t.$callLaterThisList=[],t.$callLaterArgsList=[],t.callLater=e,t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[],t.$callAsync=i}(egret||(egret={}));var egret;!function(t){function e(t,e,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var o,s=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}}),o=t.__sets__;var a=o[i];if(a)return a.apply(e,r);var h=Object.getPrototypeOf(s);if(null!=h){for(;!h.hasOwnProperty(i);)if(h=Object.getPrototypeOf(h),null==h)return;a=Object.getOwnPropertyDescriptor(h,i).set,o[i]=a,a.apply(e,r)}}function i(t,e,i){var r,n=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}}),r=t.__gets__;var o=r[i];if(o)return o.call(e);var s=Object.getPrototypeOf(n);if(null!=s){for(;!s.hasOwnProperty(i);)if(s=Object.getPrototypeOf(s),null==s)return;return o=Object.getOwnPropertyDescriptor(s,i).get,r[i]=o,o.call(e)}}t.superSetter=e,t.superGetter=i}(egret||(egret={}));var egret;!function(t){function e(t){if(!t)return null;var e=i[t];if(e)return e;var r=t.split("."),n=r.length;e=__global;for(var o=0;n>o;o++){var s=r[o];if(e=e[s],!e)return null}return i[t]=e,e}var i={};t.getDefinitionByName=e}(egret||(egret={}));var __global=this.__global||this,egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var r=i.constructor.toString().trim(),n=r.indexOf("("),o=r.substring(9,n);return Object.defineProperty(i,"__class__",{value:o,enumerable:!1,writable:!0}),o}t.getQualifiedClassName=e}(egret||(egret={}));var egret;!function(t){function e(e){if(!e||"object"!=typeof e&&!e.prototype)return null;var i=e.prototype?e.prototype:Object.getPrototypeOf(e),r=Object.getPrototypeOf(i);if(!r)return null;var n=t.getQualifiedClassName(r.constructor);return n?n:null}t.getQualifiedSuperclassName=e}(egret||(egret={}));var egret;!function(t){function e(){return Date.now()-t.sys.$START_TIME}t.getTimer=e}(egret||(egret={}));var egret;!function(t){function e(e){var i=t.getDefinitionByName(e);return i?!0:!1}t.hasDefinition=e}(egret||(egret={}));var egret;!function(t){function e(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),r=i?i.__types__:null;return r?-1!==r.indexOf(e):!1}t.is=e}(egret||(egret={}));var egret;!function(t){function e(e,i){t.sys.$ticker.$startTick(e,i)}t.startTick=e}(egret||(egret={}));var egret;!function(t){function e(e,i){t.sys.$ticker.$stopTick(e,i)}t.stopTick=e}(egret||(egret={}));var egret;!function(t){function e(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e}t.toColorString=e}(egret||(egret={}));/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/libs/modules/egret/egret.min.js*/var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},egret;!function(e){var t;!function(t){var r=function(){function t(e){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",this.fragmentSrc="",this.gl=null,this.program=null,this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0}},this.gl=e}return t.prototype.init=function(){var t=this.gl,r=e.WebGLUtils.compileProgram(t,this.defaultVertexSrc,this.fragmentSrc);t.useProgram(r),this.aVertexPosition=t.getAttribLocation(r,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(r,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(r,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var i in this.uniforms)this.uniforms[i].uniformLocation=t.getUniformLocation(r,i);this.initUniforms(),this.program=r},t.prototype.initUniforms=function(){if(this.uniforms){var e,t=this.gl;for(var r in this.uniforms){e=this.uniforms[r],e.dirty=!0;var i=e.type;"mat2"===i||"mat3"===i||"mat4"===i?(e.glMatrix=!0,e.glValueLength=1,"mat2"===i?e.glFunc=t.uniformMatrix2fv:"mat3"===i?e.glFunc=t.uniformMatrix3fv:"mat4"===i&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+i],"2f"===i||"2i"===i?e.glValueLength=2:"3f"===i||"3i"===i?e.glValueLength=3:"4f"===i||"4i"===i?e.glValueLength=4:e.glValueLength=1)}}},t.prototype.syncUniforms=function(){if(this.uniforms){var e,t=this.gl;for(var r in this.uniforms)e=this.uniforms[r],e.dirty&&(1===e.glValueLength?e.glMatrix===!0?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength&&e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w),e.dirty=!1)}},t.prototype.setProjection=function(e,t){var r=this.uniforms.projectionVector;(r.value.x!=e||r.value.y!=t)&&(r.value.x=e,r.value.y=t,r.dirty=!0)},t.prototype.setAttribPointer=function(e){var t=this.gl;t.vertexAttribPointer(this.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.colorAttribute,1,t.FLOAT,!1,e,16)},t}();t.EgretShader=r,__reflect(r.prototype,"egret.web.EgretShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\n}",t}return __extends(t,e),t}(e.EgretShader);e.TextureShader=t,__reflect(t.prototype,"egret.web.TextureShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e){if(window.location){var t=location.search;if(""==t)return"";t=t.slice(1);for(var r=t.split("&"),i=r.length,n=0;i>n;n++){var o=r[n],a=o.split("=");if(a[0]==e)return a[1]}}return""}t.getOption=r,e.getOption=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var e=r.call(this)||this;return e.loaded=!1,e}return __extends(i,r),Object.defineProperty(i.prototype,"length",{get:function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),i.prototype.load=function(t){function r(){o(),l.indexOf("firefox")>=0&&(s.pause(),s.muted=!1),a.loaded=!0,a.dispatchEventWith(e.Event.COMPLETE)}function n(){o(),a.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}function o(){s.removeEventListener("canplaythrough",r),s.removeEventListener("error",n)}var a=this;this.url=t;var s=new Audio(t);s.addEventListener("canplaythrough",r),s.addEventListener("error",n);var l=navigator.userAgent.toLowerCase();l.indexOf("firefox")>=0&&(s.autoplay=!0,s.muted=!0),s.load(),this.originAudio=s,i.$recycle(this.url,s)},i.prototype.play=function(r,n){r=+r||0,n=+n||0;var o=i.$pop(this.url);null==o&&(o=this.originAudio.cloneNode()),o.autoplay=!0;var a=new t.HtmlSoundChannel(o);return a.$url=this.url,a.$loops=n,a.$startTime=r,a.$play(),e.sys.$pushSoundChannel(a),a},i.prototype.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),i.$clear(this.url)},i.$clear=function(e){var t=i.audios[e];t&&(t.length=0)},i.$pop=function(e){var t=i.audios[e];return t&&t.length>0?t.pop():null},i.$recycle=function(e,t){var r=i.audios[e];null==i.audios[e]&&(r=i.audios[e]=[]),r.push(t)},i}(e.EventDispatcher);r.MUSIC="music",r.EFFECT="effect",r.audios={},t.HtmlSound=r,__reflect(r.prototype,"egret.web.HtmlSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(t){var i=r.call(this)||this;return i.$startTime=0,i.audio=null,i.isStopped=!1,i.canPlay=function(){i.audio.removeEventListener("canplay",i.canPlay);try{i.audio.currentTime=i.$startTime}catch(e){}finally{i.audio.play()}},i.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},i._volume=1,t.addEventListener("ended",i.onPlayEnd),i.audio=t,i}return __extends(i,r),i.prototype.$play=function(){if(this.isStopped)return void e.$error(1036);try{this.audio.volume=this._volume,this.audio.currentTime=this.$startTime}catch(t){return void this.audio.addEventListener("canplay",this.canPlay)}this.audio.play()},i.prototype.stop=function(){if(this.audio){this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0;var r=this.audio;r.removeEventListener("ended",this.onPlayEnd),r.volume=0,this._volume=0,this.audio=null;var i=this.$url;window.setTimeout(function(){r.pause(),t.HtmlSound.$recycle(i,r)},200)}},Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){return this.isStopped?void e.$error(1036):(this._volume=t,void(this.audio&&(this.audio.volume=t)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.audio?this.audio.currentTime:0},enumerable:!0,configurable:!0}),i}(e.EventDispatcher);t.HtmlSoundChannel=r,__reflect(r.prototype,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var e=r.call(this)||this;return e.loaded=!1,e}return __extends(i,r),i.prototype.load=function(r){var i=this;this.url=r,QZAppExternal.preloadSound(function(t){0==t.code?(i.loaded=!0,i.dispatchEventWith(e.Event.COMPLETE)):i.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},{bid:-1,url:t.Html5Capatibility._QQRootPath+r,refresh:1})},Object.defineProperty(i.prototype,"length",{get:function(){throw new Error("qq sound not supported!")},enumerable:!0,configurable:!0}),i.prototype.play=function(r,i){r=+r||0,i=+i||0;var n=new t.QQSoundChannel;return n.$url=this.url,n.$loops=i,n.$type=this.type,n.$startTime=r,n.$play(),e.sys.$pushSoundChannel(n),n},i.prototype.close=function(){},i}(e.EventDispatcher);r.MUSIC="music",r.EFFECT="effect",t.QQSound=r,__reflect(r.prototype,"egret.web.QQSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var r=t.call(this)||this;return r.$startTime=0,r.isStopped=!1,r.onPlayEnd=function(){return 1==r.$loops?(r.stop(),void r.dispatchEventWith(e.Event.SOUND_COMPLETE)):(r.$loops>0&&r.$loops--,void r.$play())},r._startTime=0,r}return __extends(r,t),r.prototype.$play=function(){if(this.isStopped)return void e.$error(1036);var t=this;this._startTime=Date.now();var r=0;r=t.$loops>0?t.$loops-1:-1,this.$type==e.Sound.EFFECT?QZAppExternal.playLocalSound(function(e){},{bid:-1,url:t.$url,loop:r}):QZAppExternal.playLocalBackSound(function(e){},{bid:-1,url:t.$url,loop:r})},r.prototype.stop=function(){this.$type==e.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound(),this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0},Object.defineProperty(r.prototype,"volume",{get:function(){return 1},set:function(t){return this.isStopped?void e.$error(1036):void 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return(Date.now()-this._startTime)/1e3},enumerable:!0,configurable:!0}),r}(e.EventDispatcher);t.QQSoundChannel=r,__reflect(r.prototype,"egret.web.QQSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(){function e(){}return e.decodeAudios=function(){if(!(e.decodeArr.length<=0||e.isDecoding)){e.isDecoding=!0;var t=e.decodeArr.shift();e.ctx.decodeAudioData(t.buffer,function(r){t.self.audioBuffer=r,t.success&&t.success(),e.isDecoding=!1,e.decodeAudios()},function(){alert("sound decode error: "+t.url+"！\nsee http://edn.egret.com/cn/docs/page/156"),t.fail&&t.fail(),e.isDecoding=!1,e.decodeAudios()})}},e}();r.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,r.ctx=r.canUseWebAudio?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,r.decodeArr=[],r.isDecoding=!1,t.WebAudioDecode=r,__reflect(r.prototype,"egret.web.WebAudioDecode");var i=function(i){function n(){var e=i.call(this)||this;return e.loaded=!1,e}return __extends(n,i),Object.defineProperty(n.prototype,"length",{get:function(){if(this.audioBuffer)return this.audioBuffer.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),n.prototype.load=function(t){function i(){o.loaded=!0,o.dispatchEventWith(e.Event.COMPLETE)}function n(){o.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}var o=this;this.url=t;var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){r.decodeArr.push({buffer:a.response,success:i,fail:n,self:o,url:o.url}),r.decodeAudios()},a.send()},n.prototype.play=function(r,i){r=+r||0,i=+i||0;var n=new t.WebAudioSoundChannel;return n.$url=this.url,n.$loops=i,n.$audioBuffer=this.audioBuffer,n.$startTime=r,n.$play(),e.sys.$pushSoundChannel(n),n},n.prototype.close=function(){},n}(e.EventDispatcher);i.MUSIC="music",i.EFFECT="effect",t.WebAudioSound=i,__reflect(i.prototype,"egret.web.WebAudioSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var i=r.call(this)||this;return i.$startTime=0,i.bufferSource=null,i.context=t.WebAudioDecode.ctx,i.isStopped=!1,i._currentTime=0,i._volume=1,i.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},i._startTime=0,i.context.createGain?i.gain=i.context.createGain():i.gain=i.context.createGainNode(),i}return __extends(i,r),i.prototype.$play=function(){if(this.isStopped)return void e.$error(1036);this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var t=this.context,r=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.$audioBuffer,i.connect(r),r.connect(t.destination),i.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,i.start(0,this.$startTime),this._currentTime=0},i.prototype.stop=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null,this.$audioBuffer=null}this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0},Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){return this.isStopped?void e.$error(1036):(this._volume=t,void(this.gain.gain.value=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.bufferSource?(Date.now()-this._startTime)/1e3+this.$startTime:0},enumerable:!0,configurable:!0}),i}(e.EventDispatcher);t.WebAudioSoundChannel=r,__reflect(r.prototype,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(r,i){void 0===i&&(i=!0);var n=t.call(this)||this;return n.loaded=!1,n.closed=!1,n.heightSet=0/0,n.widthSet=0/0,n.isPlayed=!1,n.screenChanged=function(t){var r=!!n.video.webkitDisplayingFullscreen;r||(n.checkFullScreen(!1),e.Capabilities.isMobile||(n._fullscreen=r))},n._fullscreen=!0,n.onVideoLoaded=function(){n.video.removeEventListener("canplay",n.onVideoLoaded);var t=n.video;n.loaded=!0,n.posterData&&(n.posterData.width=n.getPlayWidth(),n.posterData.height=n.getPlayHeight()),t.width=t.videoWidth,t.height=t.videoHeight,n.$invalidateContentBounds(),window.setTimeout(function(){n.dispatchEventWith(e.Event.COMPLETE)},200)},n.$renderNode=new e.sys.BitmapNode,n.src=r,n.once(e.Event.ADDED_TO_STAGE,n.loadPoster,n),r&&n.load(),n}return __extends(r,t),r.prototype.load=function(t,r){var i=this;if(void 0===r&&(r=!0),t=t||this.src,this.src=t,!this.video||this.video.src!=t){var n;!this.video||e.Capabilities.isMobile?(n=document.createElement("video"),this.video=n,n.controls=null):n=this.video,n.src=t,n.setAttribute("autoplay","autoplay"),n.setAttribute("webkit-playsinline","true"),n.addEventListener("canplay",this.onVideoLoaded),n.addEventListener("error",function(){return i.onVideoError()}),n.addEventListener("ended",function(){return i.onVideoEnded()}),n.load(),n.play(),n.style.position="absolute",n.style.top="0px",n.style.zIndex="-88888",n.style.left="0px",n.height=1,n.width=1,window.setTimeout(function(){return n.pause()},170)}},r.prototype.play=function(t,r){var i=this;if(void 0===r&&(r=!1),0==this.loaded)return this.load(this.src),void this.once(e.Event.COMPLETE,function(e){return i.play(t,r)},this);this.isPlayed=!0;var n=this.video;void 0!=t&&(n.currentTime=+t||0),n.loop=!!r,e.Capabilities.isMobile?n.style.zIndex="-88888":n.style.zIndex="9999",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.height=n.videoHeight,n.width=n.videoWidth,"Windows PC"!=e.Capabilities.os&&"Mac OS"!=e.Capabilities.os&&window.setTimeout(function(){n.width=0},1e3),this.checkFullScreen(this._fullscreen)},r.prototype.checkFullScreen=function(t){var r=this.video;if(t)null==r.parentElement&&(r.removeAttribute("webkit-playsinline"),document.body.appendChild(r)),e.stopTick(this.markDirty,this),this.goFullscreen();else if(null!=r.parentElement&&r.parentElement.removeChild(r),r.setAttribute("webkit-playsinline","true"),this.setFullScreenMonitor(!1),e.startTick(this.markDirty,this),e.Capabilities.isMobile)return this.video.currentTime=0,void this.onVideoEnded();r.play()},r.prototype.goFullscreen=function(){var t,r=this.video;return t=e.web.getPrefixStyleName("requestFullscreen",r),r[t]||(t=e.web.getPrefixStyleName("requestFullScreen",r),r[t])?(r.removeAttribute("webkit-playsinline"),r[t](),this.setFullScreenMonitor(!0),!0):!0},r.prototype.setFullScreenMonitor=function(e){var t=this.video;e?(t.addEventListener("mozfullscreenchange",this.screenChanged),t.addEventListener("webkitfullscreenchange",this.screenChanged),t.addEventListener("mozfullscreenerror",this.screenError),t.addEventListener("webkitfullscreenerror",this.screenError)):(t.removeEventListener("mozfullscreenchange",this.screenChanged),t.removeEventListener("webkitfullscreenchange",this.screenChanged),t.removeEventListener("mozfullscreenerror",this.screenError),t.removeEventListener("webkitfullscreenerror",this.screenError))},r.prototype.screenError=function(){e.$error(3014)},r.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oCancelFullScreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},r.prototype.onVideoEnded=function(){this.pause(),this.isPlayed=!1,this.$invalidateContentBounds(),this.dispatchEventWith(e.Event.ENDED)},r.prototype.onVideoError=function(){this.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},r.prototype.close=function(){var e=this;this.closed=!0,this.video.removeEventListener("canplay",this.onVideoLoaded),this.video.removeEventListener("error",function(){return e.onVideoError()}),this.video.removeEventListener("ended",function(){return e.onVideoEnded()}),this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&this.video.parentElement&&(this.video.parentElement.removeChild(this.video),this.video=null),this.loaded=!1},r.prototype.pause=function(){this.video&&this.video.pause(),e.stopTick(this.markDirty,this),this.$invalidate()},Object.defineProperty(r.prototype,"volume",{get:function(){return this.video?this.video.volume:1},set:function(e){this.video&&(this.video.volume=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.video?this.video.currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fullscreen",{get:function(){return this._fullscreen},set:function(t){e.Capabilities.isMobile||(this._fullscreen=!!t,this.video&&0==this.video.paused&&this.checkFullScreen(this._fullscreen))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bitmapData",{get:function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=new e.BitmapData(this.video),this._bitmapData.$deleteSource=!1),this._bitmapData):null},enumerable:!0,configurable:!0}),r.prototype.loadPoster=function(){var t=this,r=this.poster;if(r){var i=new e.ImageLoader;i.once(e.Event.COMPLETE,function(e){i.data;t.posterData=i.data,t.posterData.width=t.getPlayWidth(),t.posterData.height=t.getPlayHeight(),t.$invalidateContentBounds()},this),i.load(r)}},r.prototype.$measureContentBounds=function(e){var t=this.bitmapData,r=this.posterData;t?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):r?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):e.setEmpty()},r.prototype.getPlayWidth=function(){return isNaN(this.widthSet)?this.bitmapData?this.bitmapData.width:this.posterData?this.posterData.width:0/0:this.widthSet},r.prototype.getPlayHeight=function(){return isNaN(this.heightSet)?this.bitmapData?this.bitmapData.height:this.posterData?this.posterData.height:0/0:this.heightSet},r.prototype.$render=function(){var t=this.$renderNode,r=this.bitmapData,i=this.posterData,n=this.getPlayWidth(),o=this.getPlayHeight();this.isPlayed&&!e.Capabilities.isMobile||!i?this.isPlayed&&r&&(t.image=r,t.imageWidth=r.width,t.imageHeight=r.height,e.WebGLUtils.deleteWebGLTexture(r.webGLTexture),r.webGLTexture=null,t.drawImage(0,0,r.width,r.height,0,0,n,o)):(t.image=i,t.imageWidth=n,t.imageHeight=o,t.drawImage(0,0,i.width,i.height,0,0,n,o))},r.prototype.markDirty=function(){return this.$invalidate(),!0},r.prototype.$setHeight=function(e){return this.heightSet=+e||0,this.$invalidate(),this.$invalidateContentBounds(),t.prototype.$setHeight.call(this,e)},r.prototype.$setWidth=function(e){return this.widthSet=+e||0,this.$invalidate(),this.$invalidateContentBounds(),t.prototype.$setWidth.call(this,e)},Object.defineProperty(r.prototype,"paused",{get:function(){return this.video?this.video.paused:!0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){if(this.video)return this.video.duration;throw new Error("Video not loaded!")},enumerable:!0,configurable:!0}),r}(e.DisplayObject);t.WebVideo=r,__reflect(r.prototype,"egret.web.WebVideo",["egret.Video","egret.DisplayObject"]),e.Video=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var e=t.call(this)||this;return e._url="",e._method="",e}return __extends(r,t),Object.defineProperty(r.prototype,"response",{get:function(){if(!this._xhr)return null;if(void 0!=this._xhr.response)return this._xhr.response;if("text"==this._responseType)return this._xhr.responseText;if("arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)){var e=window;return e.convertResponseBodyToText(this._xhr.responseBody)}return"document"==this._responseType?this._xhr.responseXML:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"responseType",{get:function(){return this._responseType},set:function(e){this._responseType=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(e){this._withCredentials=e},enumerable:!0,configurable:!0}),r.prototype.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},r.prototype.open=function(e,t){void 0===t&&(t="GET"),this._url=e,this._method=t,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._xhr.open(this._method,this._url,!0)},r.prototype.send=function(e){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var t in this.headerObj)this._xhr.setRequestHeader(t,this.headerObj[t]);this._xhr.send(e)},r.prototype.abort=function(){this._xhr&&this._xhr.abort()},r.prototype.getAllResponseHeaders=function(){if(!this._xhr)return null;var e=this._xhr.getAllResponseHeaders();return e?e:""},r.prototype.setRequestHeader=function(e,t){this.headerObj||(this.headerObj={}),this.headerObj[e]=t},r.prototype.getResponseHeader=function(e){if(!this._xhr)return null;var t=this._xhr.getResponseHeader(e);return t?t:""},r.prototype.onReadyStateChange=function(){var t=this._xhr;if(4==t.readyState){var r=t.status>=400||0==t.status,i=(this._url,this);window.setTimeout(function(){r?i.dispatchEventWith(e.IOErrorEvent.IO_ERROR):i.dispatchEventWith(e.Event.COMPLETE)},0)}},r.prototype.updateProgress=function(t){t.lengthComputable&&e.ProgressEvent.dispatchProgressEvent(this,e.ProgressEvent.PROGRESS,t.loaded,t.total)},r}(e.EventDispatcher);t.WebHttpRequest=r,__reflect(r.prototype,"egret.web.WebHttpRequest",["egret.HttpRequest"]),e.HttpRequest=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=window.URL||window.webkitURL,i=function(i){function n(){var e=i.apply(this,arguments)||this;return e.data=null,e._crossOrigin=null,e._hasCrossOriginSet=!1,e.currentImage=null,e.request=null,e}return __extends(n,i),Object.defineProperty(n.prototype,"crossOrigin",{get:function(){return this._crossOrigin},set:function(e){this._hasCrossOriginSet=!0,this._crossOrigin=e},enumerable:!0,configurable:!0}),n.prototype.load=function(r){if(t.Html5Capatibility._canUseBlob&&0!=r.indexOf("wxLocalResource:")&&0!=r.indexOf("data:")&&0!=r.indexOf("http:")&&0!=r.indexOf("https:")){var i=this.request;i||(i=this.request=new e.web.WebHttpRequest,i.addEventListener(e.Event.COMPLETE,this.onBlobLoaded,this),i.addEventListener(e.IOErrorEvent.IO_ERROR,this.onBlobError,this),i.responseType="blob"),i.open(r),i.send()}else this.loadImage(r)},n.prototype.onBlobLoaded=function(e){var t=this.request.response;this.loadImage(r.createObjectURL(t))},n.prototype.onBlobError=function(e){this.dispatchIOError(this.currentURL)},n.prototype.loadImage=function(e){var t=new Image;this.data=null,this.currentImage=t,this._hasCrossOriginSet?this._crossOrigin&&(t.crossOrigin=this._crossOrigin):n.crossOrigin&&(t.crossOrigin=n.crossOrigin),t.onload=this.onImageComplete.bind(this),t.onerror=this.onLoadError.bind(this),t.src=e},n.prototype.onImageComplete=function(t){var r=this.getImage(t);if(r){this.data=new e.BitmapData(r);var i=this;window.setTimeout(function(){i.dispatchEventWith(e.Event.COMPLETE)},0)}},n.prototype.onLoadError=function(e){var t=this.getImage(e);t&&this.dispatchIOError(t.src)},n.prototype.dispatchIOError=function(t){var r=this;window.setTimeout(function(){r.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},0)},n.prototype.getImage=function(t){var i=t.target,n=i.src;if(0==n.indexOf("blob:"))try{r.revokeObjectURL(i.src)}catch(o){e.$warn(1037)}return i.onerror=null,i.onload=null,this.currentImage!==i?null:(this.currentImage=null,i)},n}(e.EventDispatcher);i.crossOrigin=null,t.WebImageLoader=i,__reflect(i.prototype,"egret.web.WebImageLoader",["egret.ImageLoader"]),e.ImageLoader=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(){var e=r.call(this)||this;return e._isNeedShow=!1,e.inputElement=null,e.inputDiv=null,e._gscaleX=0,e._gscaleY=0,e._isNeesHide=!1,e.textValue="",e.colorValue=16777215,e._styleInfoes={},e}return __extends(i,r),i.prototype.$setTextField=function(e){return this.$textfield=e,!0},i.prototype.$addToStage=function(){this.htmlInput=e.web.$getTextAdapter(this.$textfield)},i.prototype._initElement=function(){var t=this.$textfield.localToGlobal(0,0),r=t.x,i=t.y,n=this.htmlInput.$scaleX,o=this.htmlInput.$scaleY;this.inputDiv.style.left=r*n+"px",this.inputDiv.style.top=i*o+"px",this.$textfield.multiline&&this.$textfield.height>this.$textfield.size?(this.inputDiv.style.top=i*o+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2*o+"px"):(this.inputDiv.style.top=i*o+"px",this.inputElement.style.top="0px");for(var a=this.$textfield,s=1,l=1,h=0;a.parent;)s*=a.scaleX,l*=a.scaleY,h+=a.rotation,a=a.parent;var u=e.web.getPrefixStyleName("transform");this.inputDiv.style[u]="rotate("+h+"deg)",this._gscaleX=n*s,this._gscaleY=o*l},i.prototype.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.$textfield.multiline?this.inputElement.type="text":this.inputElement.type=this.$textfield.inputType,this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},i.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},i.prototype.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),this.$textfield.maxChars>0?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},i.prototype.$hide=function(){this._isNeesHide=!0,this.htmlInput&&e.web.Html5Capatibility._System_OS==e.web.SystemOSType.IOS&&this.htmlInput.disconnectStageText(this)},i.prototype.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},i.prototype.$setText=function(e){return this.textValue=e,this.resetText(),!0},i.prototype.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},i.prototype.$setColor=function(e){return this.colorValue=e,this.resetColor(),!0},i.prototype.resetColor=function(){this.inputElement&&this.setElementStyle("color",e.toColorString(this.colorValue))},i.prototype.$onBlur=function(){t.Html5Capatibility._System_OS==t.SystemOSType.WPHONE&&e.Event.dispatchEvent(this,"updateText",!1)},i.prototype._onInput=function(){var r=this;if(t.Html5Capatibility._System_OS==t.SystemOSType.WPHONE){var i=this.$textfield.$TextField;null==i[35]&&null==i[36]?(r.textValue=r.inputElement.value,e.Event.dispatchEvent(r,"updateText",!1)):window.setTimeout(function(){r.inputElement&&r.inputElement.selectionStart&&r.inputElement.selectionEnd&&r.inputElement.selectionStart==r.inputElement.selectionEnd&&(r.textValue=r.inputElement.value,e.Event.dispatchEvent(r,"updateText",!1))},0)}else window.setTimeout(function(){r.inputElement&&r.inputElement.selectionStart==r.inputElement.selectionEnd&&(r.textValue=r.inputElement.value,e.Event.dispatchEvent(r,"updateText",!1))},0)},i.prototype.setAreaHeight=function(){var t=this.$textfield;if(t.multiline){var r=e.TextFieldUtils.$getTextHeight(t);if(t.height<=t.size)this.setElementStyle("height",t.size*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.size*this._gscaleY+"px");else if(t.height<r)this.setElementStyle("height",t.height*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px");else{this.setElementStyle("height",(r+t.lineSpacing)*this._gscaleY+"px");var i=(t.height-r)*this._gscaleY,n=e.TextFieldUtils.$getValign(t),o=i*n,a=i-o;this.setElementStyle("padding",o+"px 0px "+a+"px 0px"),this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px")}}},i.prototype._onClickHandler=function(t){this._isNeedShow&&(t.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new e.Event("focus")))},i.prototype._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new e.Event("blur"))},i.prototype.setElementStyle=function(e,t){this.inputElement&&this._styleInfoes[e]!=t&&(this.inputElement.style[e]=t)},i.prototype.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},i.prototype.$resetStageText=function(){if(this.inputElement){var t=this.$textfield;this.setElementStyle("fontFamily",t.fontFamily),this.setElementStyle("fontStyle",t.italic?"italic":"normal"),this.setElementStyle("fontWeight",t.bold?"bold":"normal"),this.setElementStyle("textAlign",t.textAlign),this.setElementStyle("fontSize",t.size*this._gscaleY+"px"),this.setElementStyle("color",e.toColorString(t.textColor));var r=void 0;if(t.stage?(r=t.localToGlobal(0,0).x,r=Math.min(t.width,t.stage.stageWidth-r)):r=t.width,this.setElementStyle("width",r*this._gscaleX+"px"),this.setElementStyle("verticalAlign",t.verticalAlign),t.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",t.size*this._gscaleY+"px"),t.height<t.size){this.setElementStyle("height",t.size*this._gscaleY+"px");var i=t.size/2*this._gscaleY;this.setElementStyle("padding","0px 0px "+i+"px 0px")}else{this.setElementStyle("height",t.size*this._gscaleY+"px");var n=(t.height-t.size)*this._gscaleY,o=e.TextFieldUtils.$getValign(t),a=n*o,i=n-a;i<t.size/2*this._gscaleY&&(i=t.size/2*this._gscaleY),this.setElementStyle("padding",a+"px 0px "+i+"px 0px")}this.inputDiv.style.clip="rect(0px "+t.width*this._gscaleX+"px "+t.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=t.height*this._gscaleY+"px",this.inputDiv.style.width=r*this._gscaleX+"px"}},i}(e.EventDispatcher);t.HTML5StageText=r,__reflect(r.prototype,"egret.web.HTML5StageText",["egret.StageText"]),e.StageText=r}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){var t;!function(t){var r=function(){function t(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}return t.prototype.isInputOn=function(){return null!=this._stageText},t.prototype.isCurrentStageText=function(e){return this._stageText==e},t.prototype.initValue=function(e){e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.border="none",e.style.padding="0"},t.prototype.$updateSize=function(){if(this.canvas){var t=this.canvas.width,r=this.canvas.height,i=this.canvas.style.width.split("px")[0],n=this.canvas.style.height.split("px")[0];
this.$scaleX=i/t,this.$scaleY=n/r,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var o=e.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[o]=this.canvas.style[o],this.StageDelegateDiv.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"}},t.prototype._initStageDelegateDiv=function(t,r){this.canvas=r;var i,n=this;i||(i=document.createElement("div"),this.StageDelegateDiv=i,i.id="StageDelegateDiv",t.appendChild(i),n.initValue(i),n._inputDIV=document.createElement("div"),n.initValue(n._inputDIV),n._inputDIV.style.width="0px",n._inputDIV.style.height="0px",n._inputDIV.style.left="0px",n._inputDIV.style.top="-100px",n._inputDIV.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",i.appendChild(n._inputDIV),this.canvas.addEventListener("click",function(e){n._needShow?(n._needShow=!1,n._stageText._onClickHandler(e),n.show()):n._inputElement&&(n.clearInputElement(),n._inputElement.blur(),n._inputElement=null)}),n.initInputElement(!0),n.initInputElement(!1))},t.prototype.initInputElement=function(e){var t,r=this;e?(t=document.createElement("textarea"),t.style.resize="none",r._multiElement=t,t.id="egretTextarea"):(t=document.createElement("input"),r._simpleElement=t,t.id="egretInput"),t.type="text",r._inputDIV.appendChild(t),t.setAttribute("tabindex","-1"),t.style.width="1px",t.style.height="12px",r.initValue(t),t.style.outline="thin",t.style.background="none",t.style.overflow="hidden",t.style.wordBreak="break-all",t.style.opacity=0,t.oninput=function(){r._stageText&&r._stageText._onInput()}},t.prototype.show=function(){var t=this,r=t._inputElement;e.$callAsync(function(){r.style.opacity=1},t)},t.prototype.disconnectStageText=function(e){(null==this._stageText||this._stageText==e)&&(this.clearInputElement(),this._inputElement&&this._inputElement.blur())},t.prototype.clearInputElement=function(){var e=this;if(e._inputElement){e._inputElement.value="",e._inputElement.onblur=null,e._inputElement.style.width="1px",e._inputElement.style.height="12px",e._inputElement.style.left="0px",e._inputElement.style.top="0px",e._inputElement.style.opacity=0;var t=void 0;t=e._simpleElement==e._inputElement?e._multiElement:e._simpleElement,t.style.display="block",e._inputDIV.style.left="0px",e._inputDIV.style.top="-100px",e._inputDIV.style.height="0px",e._inputDIV.style.width="0px"}e._stageText&&(e._stageText._onDisconnect(),e._stageText=null,this.canvas.userTyping=!1)},t.prototype.getInputElement=function(e){var t=this;t.clearInputElement(),t._stageText=e,this.canvas.userTyping=!0,t._stageText.$textfield.multiline?t._inputElement=t._multiElement:t._inputElement=t._simpleElement;var r;return r=t._simpleElement==t._inputElement?t._multiElement:t._simpleElement,r.style.display="none",t._inputElement},t}();t.HTMLInput=r,__reflect(r.prototype,"egret.web.HTMLInput")}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){var t;!function(e){function t(e){var t=e.stage?e.stage.$hashCode:0,r=i[t],a=n[t],s=o[t];return a&&s&&(delete n[t],delete o[t]),r}function r(e,t,r,a){e._initStageDelegateDiv(r,a),i[t.$hashCode]=e,n[t.$hashCode]=a,o[t.$hashCode]=r}var i={},n={},o={};e.$getTextAdapter=t,e.$cacheTextAdapter=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t,r,o,a){n||i();var s="";return a&&(s+="italic "),o&&(s+="bold "),s+=(r||12)+"px ",s+=t||"Arial",n.font=s,n.measureText(e).width}function i(){n=e.sys.canvasHitTestBuffer.context,n.textAlign="left",n.textBaseline="middle"}var n=null;e.sys.measureText=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){function t(e,t){var r=document.createElement("canvas");isNaN(e)||isNaN(t)||(r.width=e,r.height=t);var i=r.getContext("2d");if(void 0===i.imageSmoothingEnabled){for(var n,o=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=o.length-1;a>=0&&(n=o[a],void 0===i[n]);a--);try{Object.defineProperty(i,"imageSmoothingEnabled",{get:function(){return this[n]},set:function(e){this[n]=e}})}catch(s){i.imageSmoothingEnabled=i[n]}}return r}var r,i=function(){function e(e,r,i){this.surface=t(e,r),this.context=this.surface.getContext("2d")}return Object.defineProperty(e.prototype,"width",{get:function(){return this.surface.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.surface.height},enumerable:!0,configurable:!0}),e.prototype.resize=function(e,t,r){var i=this.surface;if(r){var n=!1;i.width<e&&(i.width=e,n=!0),i.height<t&&(i.height=t,n=!0),n||(this.context.globalCompositeOperation="source-over",this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1)}else i.width!=e&&(i.width=e),i.height!=t&&(i.height=t);this.clear()},e.prototype.resizeTo=function(e,i,n,o){r||(r=t());var a=(this.context,this.surface),s=r,l=s.getContext("2d");r=a,this.context=l,this.surface=s,s.width=Math.max(e,257),s.height=Math.max(i,257),l.setTransform(1,0,0,1,0,0),l.drawImage(a,n,o),a.height=1,a.width=1},e.prototype.setDirtyRegionPolicy=function(e){},e.prototype.beginClip=function(e,t,r){t=+t||0,r=+r||0;var i=this.context;i.save(),i.beginPath(),i.setTransform(1,0,0,1,t,r);for(var n=e.length,o=0;n>o;o++){var a=e[o];i.clearRect(a.minX,a.minY,a.width,a.height),i.rect(a.minX,a.minY,a.width,a.height)}i.clip()},e.prototype.endClip=function(){this.context.restore()},e.prototype.getPixels=function(e,t,r,i){return void 0===r&&(r=1),void 0===i&&(i=1),this.context.getImageData(e,t,r,i).data},e.prototype.toDataURL=function(e,t){return this.surface.toDataURL(e,t)},e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},e.prototype.destroy=function(){this.surface.width=this.surface.height=0},e}();e.CanvasRenderBuffer=i,__reflect(i.prototype,"egret.web.CanvasRenderBuffer",["egret.sys.RenderBuffer"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(r,i){var n=t.call(this)||this;return n.onTouchBegin=function(e){var t=n.getLocation(e);n.touch.onTouchBegin(t.x,t.y,e.identifier)},n.onTouchMove=function(e){var t=n.getLocation(e);n.touch.onTouchMove(t.x,t.y,e.identifier)},n.onTouchEnd=function(e){var t=n.getLocation(e);n.touch.onTouchEnd(t.x,t.y,e.identifier)},n.scaleX=1,n.scaleY=1,n.rotation=0,n.canvas=i,n.touch=new e.sys.TouchHandler(r),n.addListeners(),n}return __extends(r,t),r.prototype.addListeners=function(){var t=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(e){e.identifier=e.pointerId,t.onTouchBegin(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerMove",function(e){e.identifier=e.pointerId,t.onTouchMove(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerUp",function(e){e.identifier=e.pointerId,t.onTouchEnd(e),t.prevent(e)},!1)):(e.Capabilities.$isMobile||this.addMouseListener(),this.addTouchListener())},r.prototype.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onTouchMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},r.prototype.addTouchListener=function(){var e=this;this.canvas.addEventListener("touchstart",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchBegin(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchmove",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchMove(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchend",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchEnd(t.changedTouches[i]);e.prevent(t)},!1),this.canvas.addEventListener("touchcancel",function(t){for(var r=t.changedTouches.length,i=0;r>i;i++)e.onTouchEnd(t.changedTouches[i]);e.prevent(t)},!1)},r.prototype.prevent=function(e){e.stopPropagation(),1==e.isScroll||this.canvas.userTyping||e.preventDefault()},r.prototype.getLocation=function(t){t.identifier=+t.identifier||0;var r=document.documentElement,i=this.canvas.getBoundingClientRect(),n=i.left+window.pageXOffset-r.clientLeft,o=i.top+window.pageYOffset-r.clientTop,a=t.pageX-n,s=a,l=t.pageY-o,h=l;return 90==this.rotation?(s=l,h=i.width-a):-90==this.rotation&&(s=i.height-l,h=a),s/=this.scaleX,h/=this.scaleY,e.$TempPoint.setTo(Math.round(s),Math.round(h))},r.prototype.updateScaleMode=function(e,t,r){this.scaleX=e,this.scaleY=t,this.rotation=r},r.prototype.$updateMaxTouches=function(){this.touch.$initMaxTouches()},r}(e.HashObject);t.WebTouchHandler=r,__reflect(r.prototype,"egret.web.WebTouchHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(e){var r=t.call(this)||this;return r.isActivate=!0,r.stage=e,r.registerListener(),r}return __extends(r,t),r.prototype.registerListener=function(){var t=this,r=function(){t.isActivate&&(t.isActivate=!1,t.stage.dispatchEvent(new e.Event(e.Event.DEACTIVATE)))},i=function(){t.isActivate||(t.isActivate=!0,t.stage.dispatchEvent(new e.Event(e.Event.ACTIVATE)))},n=function(){document[o]?r():i()};window.addEventListener("focus",i,!1),window.addEventListener("blur",r,!1);var o,a;"undefined"!=typeof document.hidden?(o="hidden",a="visibilitychange"):"undefined"!=typeof document.mozHidden?(o="mozHidden",a="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(o="msHidden",a="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(o="webkitHidden",a="webkitvisibilitychange"):"undefined"!=typeof document.oHidden&&(o="oHidden",a="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",i,!1),window.addEventListener("pagehide",r,!1)),o&&a&&document.addEventListener(a,n,!1);var s=navigator.userAgent,l=/micromessenger/gi.test(s),h=/mqq/gi.test(s),u=/mobile.*qq/gi.test(s);if((u||l)&&(h=!1),h){var c=window.browser||{};c.execWebFn=c.execWebFn||{},c.execWebFn.postX5GamePlayerMessage=function(e){var t=e.type;"app_enter_background"==t?r():"app_enter_foreground"==t&&i()},window.browser=c}},r}(e.HashObject);t.WebHideHandler=r,__reflect(r.prototype,"egret.web.WebHideHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t){var r="";if(null!=t)r=i(e,t);else{if(null==s){var n=document.createElement("div").style;s=i("transform",n)}r=s}return""==r?e:r+e.charAt(0).toUpperCase()+e.substring(1,e.length)}function i(e,t){if(e in t)return"";e=e.charAt(0).toUpperCase()+e.substring(1,e.length);for(var r=["webkit","ms","Moz","O"],i=0;i<r.length;i++){var n=r[i]+e;if(n in t)return r[i]}return""}var n=function(){function e(){}return e}();n.QQ_AUDIO=1,n.WEB_AUDIO=2,n.HTML5_AUDIO=3,t.AudioType=n,__reflect(n.prototype,"egret.web.AudioType");var o=function(){function e(){}return e}();o.WPHONE=1,o.IOS=2,o.ADNROID=3,t.SystemOSType=o,__reflect(o.prototype,"egret.web.SystemOSType");var a=function(t){function r(){return t.call(this)||this}return __extends(r,t),r.$init=function(){var t=navigator.userAgent.toLowerCase();r.ua=t,e.Capabilities.$isMobile=-1!=t.indexOf("mobile")||-1!=t.indexOf("android"),r._canUseBlob=!1;var i,a=r._audioType,s=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;if(1==a||2==a||3==a?(i=!1,r.setAudioType(a)):(i=!0,r.setAudioType(n.HTML5_AUDIO)),t.indexOf("windows phone")>=0)r._System_OS=o.WPHONE,e.Capabilities.$os="Windows Phone";else if(t.indexOf("android")>=0){if(e.Capabilities.$os="Android",r._System_OS=o.ADNROID,i&&(s?r.setAudioType(n.WEB_AUDIO):r.setAudioType(n.HTML5_AUDIO)),window.hasOwnProperty("QZAppExternal")&&t.indexOf("qzone")>=0){i&&r.setAudioType(n.QQ_AUDIO);var l=document.getElementsByTagName("base");if(l&&l.length>0)r._QQRootPath=l[0].baseURI;else{var h=window.location.href.indexOf("?");-1==h&&(h=window.location.href.length);var u=window.location.href.substring(0,h);u=u.substring(0,u.lastIndexOf("/")),r._QQRootPath=u+"/"}}}else t.indexOf("iphone")>=0||t.indexOf("ipad")>=0||t.indexOf("ipod")>=0?(e.Capabilities.$os="iOS",r._System_OS=o.IOS,r.getIOSVersion()>=7&&(r._canUseBlob=!0,i&&r.setAudioType(n.WEB_AUDIO))):-1!=t.indexOf("windows nt")?e.Capabilities.$os="Windows PC":-1!=t.indexOf("mac os")&&(e.Capabilities.$os="Mac OS");var c=window.URL||window.webkitURL;c||(r._canUseBlob=!1),e.Sound=r._AudioClass},r.setAudioType=function(t){switch(r._audioType=t,t){case n.QQ_AUDIO:r._AudioClass=e.web.QQSound;break;case n.WEB_AUDIO:r._AudioClass=e.web.WebAudioSound;break;case n.HTML5_AUDIO:r._AudioClass=e.web.HtmlSound}},r.getIOSVersion=function(){var e=r.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];return parseInt(e.match(/\d+(_\d)*/)[0])||0},r.checkHtml5Support=function(){var t=(navigator.language||navigator.browserLanguage).toLowerCase(),r=t.split("-");r.length>1&&(r[1]=r[1].toUpperCase()),e.Capabilities.$language=r.join("-")},r}(e.HashObject);a._canUseBlob=!1,a._audioType=0,a._QQRootPath="",a._System_OS=0,a.ua="",t.Html5Capatibility=a,__reflect(a.prototype,"egret.web.Html5Capatibility");var s=null;t.getPrefixStyleName=r,t.getPrefix=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(){if(s)for(var e=document.querySelectorAll(".egret-player"),t=e.length,r=0;t>r;r++){var i=e[r],n=i["egret-player"];n.updateScreenSize()}}function i(r){if(!s){if(s=!0,r||(r={}),t.Html5Capatibility._audioType=r.audioType,t.Html5Capatibility.$init(),"webgl"==r.renderMode){var i=r.antialias;t.WebGLRenderContext.antialias=!!i}e.sys.CanvasRenderBuffer=t.CanvasRenderBuffer,n(r.renderMode);var a=e.sys.$ticker;o(a),r.screenAdapter?e.sys.screenAdapter=r.screenAdapter:e.sys.screenAdapter||(e.sys.screenAdapter=new e.sys.DefaultScreenAdapter);for(var l=document.querySelectorAll(".egret-player"),h=l.length,u=0;h>u;u++){var c=l[u],d=new t.WebPlayer(c,r);c["egret-player"]=d,"webgl"==e.Capabilities.$renderMode&&(d.stage.dirtyRegionPolicy=e.DirtyRegionPolicy.OFF)}"webgl"==e.Capabilities.$renderMode&&(e.sys.DisplayList.prototype.setDirtyRegionPolicy=function(){})}}function n(r){"webgl"==r&&e.WebGLUtils.checkCanUseWebGL()?(e.sys.RenderBuffer=t.WebGLRenderBuffer,e.sys.systemRenderer=new t.WebGLRenderer,e.sys.canvasRenderer=new e.CanvasRenderer,e.sys.customHitTestBuffer=new t.WebGLRenderBuffer(3,3),e.sys.canvasHitTestBuffer=new t.CanvasRenderBuffer(3,3),e.Capabilities.$renderMode="webgl"):(e.sys.RenderBuffer=t.CanvasRenderBuffer,e.sys.systemRenderer=new e.CanvasRenderer,e.sys.canvasRenderer=e.sys.systemRenderer,e.sys.customHitTestBuffer=new t.CanvasRenderBuffer(3,3),e.sys.canvasHitTestBuffer=e.sys.customHitTestBuffer,e.Capabilities.$renderMode="canvas")}function o(e){function t(){e.update(),r.call(window,t)}var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;r||(r=function(e){return window.setTimeout(e,1e3/60)}),r.call(window,t)}function a(){l=0/0,e.updateAllScreens()}var s=!1;window.isNaN=function(e){return e=+e,e!==e},e.runEgret=i,e.updateAllScreens=r;var l=0/0;window.addEventListener("resize",function(){isNaN(l)&&(l=window.setTimeout(a,300))})}(t=e.web||(e.web={}))}(egret||(egret={}));var language,egret;!function(e){var t;!function(t){var r=function(){function t(){}return t.detect=function(){var r=e.Capabilities,i=navigator.userAgent.toLowerCase();r.$isMobile=-1!=i.indexOf("mobile")||-1!=i.indexOf("android"),r.$isMobile?i.indexOf("windows")<0&&(-1!=i.indexOf("iphone")||-1!=i.indexOf("ipad")||-1!=i.indexOf("ipod"))?r.$os="iOS":-1!=i.indexOf("android")&&-1!=i.indexOf("linux")?r.$os="Android":-1!=i.indexOf("windows")&&(r.$os="Windows Phone"):-1!=i.indexOf("windows nt")?r.$os="Windows PC":-1!=i.indexOf("mac os")&&(r.$os="Mac OS");var n=(navigator.language||navigator.browserLanguage).toLowerCase(),o=n.split("-");o.length>1&&(o[1]=o[1].toUpperCase()),r.$language=o.join("-"),t.injectUIntFixOnIE9()},t.injectUIntFixOnIE9=function(){if(/msie 9.0/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){var e="<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript' language='VBScript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n</script>\r\n<!-- convertResponseBodyToText -->\r\n<script>\r\nlet convertResponseBodyToText = function (binary) {\r\n   let byteMapping = {};\r\n   for ( let i = 0; i < 256; i++ ) {\r\n       for ( let j = 0; j < 256; j++ ) {\r\n           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n           String.fromCharCode(i) + String.fromCharCode(j);\r\n       }\r\n   }\r\n   let rawBytes = IEBinaryToArray_ByteStr(binary);\r\n   let lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n   return rawBytes.replace(/[\\s\\S]/g,                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n};\r\n</script>\r\n";document.write(e)}},t}();t.WebCapability=r,__reflect(r.prototype,"egret.web.WebCapability"),r.detect()}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(r,i,n,o,a){var s=t.call(this)||this;if(s.showPanle=!0,s.fpsHeight=0,s.WIDTH=101,s.HEIGHT=20,s.bgCanvasColor="#18304b",s.fpsFrontColor="#18fefe",s.WIDTH_COST=33,s.cost1Color="#18fefe",s.cost2Color="#ffff00",s.cost3Color="#ff0000",s.arrFps=[],s.arrCost=[],s.arrLog=[],i||n){"canvas"==e.Capabilities.renderMode?s.renderMode="Canvas":s.renderMode="WebGL",s.panelX=void 0===a.x?0:parseInt(a.x),s.panelY=void 0===a.y?0:parseInt(a.y),s.fontColor=void 0===a.textColor?"#ffffff":a.textColor.replace("0x","#"),s.fontSize=void 0===a.size?12:parseInt(a.size),e.Capabilities.isMobile&&(s.fontSize-=2);var l=document.createElement("div");l.style.position="absolute",l.style.background="rgba(0,0,0,"+a.bgAlpha+")",l.style.left=s.panelX+"px",l.style.top=s.panelY+"px",l.style.pointerEvents="none",document.body.appendChild(l);var h=document.createElement("div");h.style.color=s.fontColor,h.style.fontSize=s.fontSize+"px",h.style.lineHeight=s.fontSize+"px",h.style.margin="4px 4px 4px 4px",s.container=h,l.appendChild(h),i&&s.addFps(),n&&s.addLog()}return s}return __extends(r,t),r.prototype.addFps=function(){var e=document.createElement("div");e.style.display="inline-block",this.containerFps=e,this.container.appendChild(e);var t=document.createElement("div");t.style.paddingBottom="2px",this.fps=t,this.containerFps.appendChild(t),t.innerHTML="0 FPS "+this.renderMode+"<br/>min0 max0 avg0";var r=document.createElement("canvas");this.containerFps.appendChild(r),r.width=this.WIDTH,r.height=this.HEIGHT,this.canvasFps=r;var i=r.getContext("2d");this.contextFps=i,i.fillStyle=this.bgCanvasColor,i.fillRect(0,0,this.WIDTH,this.HEIGHT);var n=document.createElement("div");this.divDatas=n,this.containerFps.appendChild(n);var o=document.createElement("div");o.style["float"]="left",o.innerHTML="Draw<br/>Dirty<br/>Cost",n.appendChild(o);var a=document.createElement("div");a.style.paddingLeft=o.offsetWidth+20+"px",n.appendChild(a);var s=document.createElement("div");this.divDraw=s,s.innerHTML="0<br/>0<br/>",a.appendChild(s);var l=document.createElement("div");this.divCost=l,l.innerHTML='<font  style="color:'+this.cost1Color+'">0<font/> <font  style="color:'+this.cost2Color+'">0<font/> <font  style="color:'+this.cost3Color+'">0<font/>',a.appendChild(l),r=document.createElement("canvas"),this.canvasCost=r,this.containerFps.appendChild(r),r.width=this.WIDTH,r.height=this.HEIGHT,i=r.getContext("2d"),this.contextCost=i,i.fillStyle=this.bgCanvasColor,i.fillRect(0,0,this.WIDTH,this.HEIGHT),i.fillStyle="#000000",i.fillRect(this.WIDTH_COST,0,1,this.HEIGHT),i.fillRect(2*this.WIDTH_COST+1,0,1,this.HEIGHT),this.fpsHeight=this.container.offsetHeight},r.prototype.addLog=function(){var e=document.createElement("div");e.style.maxWidth=document.body.clientWidth-8-this.panelX+"px",e.style.wordWrap="break-word",this.log=e,this.container.appendChild(e)},r.prototype.update=function(e,t){void 0===t&&(t=!1);var r,i,n,o;t?(r=this.arrFps[this.arrFps.length-1],i=this.arrCost[this.arrCost.length-1][0],n=this.arrCost[this.arrCost.length-1][1],o=this.arrCost[this.arrCost.length-1][2]):(r=e.fps,i=e.costTicker,n=e.costDirty,o=e.costRender,this.lastNumDraw=e.draw,this.lastNumDirty=e.dirty,this.arrFps.push(r),this.arrCost.push([i,n,o]));var a=0,s=this.arrFps.length;s>101&&(s=101,this.arrFps.shift());for(var l=this.arrFps[0],h=this.arrFps[0],u=0;s>u;u++){var c=this.arrFps[u];a+=c,l>c?l=c:c>h&&(h=c)}var d=this.WIDTH,p=this.HEIGHT,f=this.contextFps;f.drawImage(this.canvasFps,1,0,d-1,p,0,0,d-1,p),f.fillStyle=this.bgCanvasColor,f.fillRect(d-1,0,1,p);var v=Math.floor(r/60*20);1>v&&(v=1),f.fillStyle=this.fpsFrontColor,f.fillRect(d-1,20-v,1,v);var g=this.WIDTH_COST;f=this.contextCost,f.drawImage(this.canvasCost,1,0,g-1,p,0,0,g-1,p),f.drawImage(this.canvasCost,g+2,0,g-1,p,g+1,0,g-1,p),f.drawImage(this.canvasCost,2*g+3,0,g-1,p,2*g+2,0,g-1,p);var y=Math.floor(i/2);1>y?y=1:y>20&&(y=20);var m=Math.floor(n/2);1>m?m=1:m>20&&(m=20);var x=Math.floor(o/2);1>x?x=1:x>20&&(x=20),f.fillStyle=this.bgCanvasColor,f.fillRect(g-1,0,1,p),f.fillRect(2*g,0,1,p),f.fillRect(3*g+1,0,1,p),f.fillStyle=this.cost1Color,f.fillRect(g-1,20-y,1,y),f.fillStyle=this.cost2Color,f.fillRect(2*g,20-m,1,m),f.fillStyle=this.cost3Color,f.fillRect(3*g+1,20-x,1,x);var b=Math.floor(a/s),w=r+" FPS "+this.renderMode;this.showPanle&&(w+="<br/>min"+l+" max"+h+" avg"+b,this.divDraw.innerHTML=this.lastNumDraw+"<br/>"+this.lastNumDirty+"%<br/>",this.divCost.innerHTML='<font  style="color:#18fefe">'+i+'<font/> <font  style="color:#ffff00">'+n+'<font/> <font  style="color:#ff0000">'+o+"<font/>"),this.fps.innerHTML=w},r.prototype.updateInfo=function(e){for(this.arrLog.push(e),this.log.innerHTML=this.arrLog.join("<br/>");document.body.clientHeight<this.log.offsetHeight+this.fpsHeight+this.panelY+2*this.fontSize;)this.arrLog.shift(),this.log.innerHTML=this.arrLog.join("<br/>")},r}(e.DisplayObject);t.WebFps=r,__reflect(r.prototype,"egret.web.WebFps",["egret.FPSDisplay","egret.DisplayObject"]),e.FPSDisplay=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(){function e(){}return e.call=function(e,t){},e.addCallback=function(e,t){},e}();t.WebExternalInterface=r,__reflect(r.prototype,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),e.ExternalInterface=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(r){function i(e,t){var i=r.call(this)||this;return i.init(e,t),i.initOrientation(),i}return __extends(i,r),i.prototype.init=function(r,i){var n=this.readOption(r,i),o=new e.Stage;o.$screen=this,o.$scaleMode=n.scaleMode,o.$orientation=n.orientation,o.$maxTouches=n.maxTouches,o.frameRate=n.frameRate,o.textureScaleFactor=n.textureScaleFactor;var a=new e.sys.RenderBuffer(void 0,void 0,!0),s=a.surface;this.attachCanvas(r,s);var l=new t.WebTouchHandler(o,s),h=new e.sys.Player(a,o,n.entryClassName),u=new e.web.WebHideHandler(o),c=new t.HTMLInput;h.showPaintRect(n.showPaintRect),(n.showFPS||n.showLog)&&h.displayFPS(n.showFPS,n.showLog,n.logFilter,n.fpsStyles),this.playerOption=n,this.container=r,this.canvas=s,this.stage=o,this.player=h,this.webTouchHandler=l,this.webInput=c,this.webHide=u,e.web.$cacheTextAdapter(c,o,r,s),this.updateScreenSize(),this.updateMaxTouches(),h.start()},i.prototype.initOrientation=function(){var t=this;window.addEventListener("orientationchange",function(){window.setTimeout(function(){e.StageOrientationEvent.dispatchStageOrientationEvent(t.stage,e.StageOrientationEvent.ORIENTATION_CHANGE)},350)})},i.prototype.readOption=function(t,r){var i={};i.entryClassName=t.getAttribute("data-entry-class"),i.scaleMode=t.getAttribute("data-scale-mode")||e.StageScaleMode.NO_SCALE,i.frameRate=+t.getAttribute("data-frame-rate")||30,i.contentWidth=+t.getAttribute("data-content-width")||480,i.contentHeight=+t.getAttribute("data-content-height")||800,i.orientation=t.getAttribute("data-orientation")||e.OrientationMode.AUTO,i.maxTouches=+t.getAttribute("data-multi-fingered")||2,i.textureScaleFactor=+t.getAttribute("texture-scale-factor")||1,"webgl"==r.renderMode?i.showPaintRect=!1:i.showPaintRect="true"==t.getAttribute("data-show-paint-rect"),i.showFPS="true"==t.getAttribute("data-show-fps");for(var n=t.getAttribute("data-show-fps-style")||"",o=n.split(","),a={},s=0;s<o.length;s++){var l=o[s].split(":");a[l[0]]=l[1]}return i.fpsStyles=a,i.showLog="true"==t.getAttribute("data-show-log"),i.logFilter=t.getAttribute("data-log-filter"),i},i.prototype.attachCanvas=function(e,t){var r=t.style;r.cursor="inherit",r.position="absolute",r.top="0",r.bottom="0",r.left="0",r.right="0",e.appendChild(t),r=e.style,r.overflow="hidden",r.position="relative",r.webkitTransform="translateZ(0)"},i.prototype.updateScreenSize=function(){var t=this.canvas;if(!t.userTyping){var r=this.playerOption,i=this.container.getBoundingClientRect(),n=!1,o=this.stage.$orientation;o!=e.OrientationMode.AUTO&&(n=o!=e.OrientationMode.PORTRAIT&&i.height>i.width||o==e.OrientationMode.PORTRAIT&&i.width>i.height);var a=n?i.height:i.width,s=n?i.width:i.height;e.Capabilities.$boundingClientWidth=a,e.Capabilities.$boundingClientHeight=s;var l=e.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,a,s,r.contentWidth,r.contentHeight),h=l.stageWidth,u=l.stageHeight,c=l.displayWidth,d=l.displayHeight;t.width!==h&&(t.width=h),t.height!==u&&(t.height=u),t.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",t.style.width=c+"px",t.style.height=d+"px";var p=0;n?o==e.OrientationMode.LANDSCAPE?(p=90,t.style.top=(i.height-c)/2+"px",t.style.left=(i.width+d)/2+"px"):(p=-90,t.style.top=(i.height+c)/2+"px",t.style.left=(i.width-d)/2+"px"):(t.style.top=(i.height-d)/2+"px",t.style.left=(i.width-c)/2+"px");var f="rotate("+p+"deg)";t.style[e.web.getPrefixStyleName("transform")]=f;var v=c/h,g=d/u;this.webTouchHandler.updateScaleMode(v,g,p),this.webInput.$updateSize(),this.player.updateStageSize(h,u)}},i.prototype.setContentSize=function(e,t){var r=this.playerOption;r.contentWidth=e,r.contentHeight=t,this.updateScreenSize()},i.prototype.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},i}(e.HashObject);t.WebPlayer=r,__reflect(r.prototype,"egret.web.WebPlayer",["egret.sys.Screen"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(t,r){s||(s=document.createElement("canvas"),l=s.getContext("2d"));var i=t.$getTextureWidth(),n=t.$getTextureHeight();null==r&&(r=e.$TempRectangle,r.x=0,r.y=0,r.width=i,r.height=n),r.x=Math.min(r.x,i-1),r.y=Math.min(r.y,n-1),r.width=Math.min(r.width,i-r.x),r.height=Math.min(r.height,n-r.y);var o=r.width,a=r.height,h=s;if(h.style.width=o+"px",h.style.height=a+"px",s.width=o,s.height=a,"webgl"==e.Capabilities.$renderMode){var u=void 0;t.$renderBuffer?u=t:(u=new e.RenderTexture,u.drawToTexture(new e.Bitmap(t)));for(var c=u.$renderBuffer.getPixels(r.x,r.y,o,a),d=new ImageData(o,a),p=0;p<c.length;p++)d.data[p]=c[p];return l.putImageData(d,0,0),t.$renderBuffer||u.dispose(),h}var f=t,v=Math.round(f._offsetX),g=Math.round(f._offsetY),y=f._bitmapWidth,m=f._bitmapHeight;return l.drawImage(f._bitmapData.source,f._bitmapX+r.x/e.$TextureScaleFactor,f._bitmapY+r.y/e.$TextureScaleFactor,y*r.width/i,m*r.height/n,v,g,r.width,r.height),h}function i(t,i){try{var n=r(this,i),o=n.toDataURL(t);return o}catch(a){e.$error(1033)}return null}function n(e,t,r){var n=i.call(this,e,r);if(null!=n){var o=n.replace(/^data:image[^;]*/,"data:image/octet-stream"),a=document.createElement("a");a.download=t,a.href=o;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(s)}}function o(t,r){return e.$warn(1041,"getPixel32","getPixels"),this.getPixels(t,r)}function a(t,i,n,o){void 0===n&&(n=1),void 0===o&&(o=1);try{var a=(r(this),l.getImageData(t,i,n,o).data);return a}catch(s){e.$error(1039)}}var s,l;e.Texture.prototype.toDataURL=i,e.Texture.prototype.saveToFile=n,e.Texture.prototype.getPixel32=o,e.Texture.prototype.getPixels=a}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e){for(var t=s.parseFromString(e,"text/xml"),r=t.childNodes.length,n=0;r>n;n++){var o=t.childNodes[n];if(1==o.nodeType)return i(o,null)}return null}function i(e,t){if("parsererror"==e.localName)throw new Error(e.textContent);for(var r=new o(e.localName,t,e.prefix,e.namespaceURI,e.nodeName),n=e.attributes,s=r.attributes,l=n.length,h=0;l>h;h++){var u=n[h],c=u.name;0!=c.indexOf("xmlns:")&&(s[c]=u.value,r["$"+c]=u.value)}var d=e.childNodes;l=d.length;for(var p=r.children,h=0;l>h;h++){var f=d[h],v=f.nodeType,g=null;if(1==v)g=i(f,r);else if(3==v){var y=f.textContent.trim();y&&(g=new a(y,r))}g&&p.push(g)}return r}var n=function(){function e(e,t){this.nodeType=e,this.parent=t}return e}();t.XMLNode=n,__reflect(n.prototype,"egret.web.XMLNode");var o=function(e){function t(t,r,i,n,o){var a=e.call(this,1,r)||this;return a.attributes={},a.children=[],a.localName=t,a.prefix=i,a.namespace=n,a.name=o,a}return __extends(t,e),t}(n);t.XML=o,__reflect(o.prototype,"egret.web.XML");var a=function(e){function t(t,r){var i=e.call(this,3,r)||this;return i.text=t,i}return __extends(t,e),t}(n);t.XMLText=a,__reflect(a.prototype,"egret.web.XMLText");var s=new DOMParser;e.XML={parse:r}}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var r=t.apply(this,arguments)||this;return r.onChange=function(t){var i=new e.OrientationEvent(e.Event.CHANGE);i.beta=t.beta,i.gamma=t.gamma,i.alpha=t.alpha,r.dispatchEvent(i)},r}return __extends(r,t),r.prototype.start=function(){window.addEventListener("deviceorientation",this.onChange)},r.prototype.stop=function(){window.removeEventListener("deviceorientation",this.onChange)},r}(e.EventDispatcher);t.WebDeviceOrientation=r,__reflect(r.prototype,"egret.web.WebDeviceOrientation",["egret.DeviceOrientation"])}(t=e.web||(e.web={}))}(egret||(egret={})),egret.DeviceOrientation=egret.web.WebDeviceOrientation;var egret;!function(e){var t;!function(t){var r=function(t){function r(r){var i=t.call(this)||this;return i.onUpdate=function(t){var r=new e.GeolocationEvent(e.Event.CHANGE),n=t.coords;r.altitude=n.altitude,r.heading=n.heading,r.accuracy=n.accuracy,r.latitude=n.latitude,r.longitude=n.longitude,r.speed=n.speed,r.altitudeAccuracy=n.altitudeAccuracy,i.dispatchEvent(r)},i.onError=function(t){var r=e.GeolocationEvent.UNAVAILABLE;t.code==t.PERMISSION_DENIED&&(r=e.GeolocationEvent.PERMISSION_DENIED);var n=new e.GeolocationEvent(e.IOErrorEvent.IO_ERROR);n.errorType=r,n.errorMessage=t.message,i.dispatchEvent(n)},i.geolocation=navigator.geolocation,i}return __extends(r,t),r.prototype.start=function(){var t=this.geolocation;t?this.watchId=t.watchPosition(this.onUpdate,this.onError):this.onError({code:2,message:e.sys.tr(3004),PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2})},r.prototype.stop=function(){var e=this.geolocation;e.clearWatch(this.watchId)},r}(e.EventDispatcher);t.WebGeolocation=r,__reflect(r.prototype,"egret.web.WebGeolocation",["egret.Geolocation"]),e.Geolocation=e.web.WebGeolocation}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(t){function r(){var r=t.apply(this,arguments)||this;return r.onChange=function(t){var i=new e.MotionEvent(e.Event.CHANGE),n={x:t.acceleration.x,y:t.acceleration.y,z:t.acceleration.z},o={x:t.accelerationIncludingGravity.x,y:t.accelerationIncludingGravity.y,z:t.accelerationIncludingGravity.z},a={alpha:t.rotationRate.alpha,beta:t.rotationRate.beta,gamma:t.rotationRate.gamma};i.acceleration=n,i.accelerationIncludingGravity=o,i.rotationRate=a,r.dispatchEvent(i)},r}return __extends(r,t),r.prototype.start=function(){window.addEventListener("devicemotion",this.onChange)
},r.prototype.stop=function(){window.removeEventListener("devicemotion",this.onChange)},r}(e.EventDispatcher);t.WebMotion=r,__reflect(r.prototype,"egret.web.WebMotion",["egret.Motion"]),e.Motion=e.web.WebMotion}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r="egret.BitmapData";e.registerClass(HTMLImageElement,r),e.registerClass(HTMLCanvasElement,r),e.registerClass(HTMLVideoElement,r)}(t=e.web||(e.web={}))}(egret||(egret={})),function(e){function t(t){return t.hashCode=t.$hashCode=e.$hashCount++,t}e.$toBitmapData=t}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r;!function(r){function i(e){return window.localStorage.getItem(e)}function n(t,r){try{return window.localStorage.setItem(t,r),!0}catch(i){return e.$warn(1047,t,r),!1}}function o(e){window.localStorage.removeItem(e)}function a(){window.localStorage.clear()}t.getItem=i,t.setItem=n,t.removeItem=o,t.clear=a}(r=t.web||(t.web={}))}(t=e.localStorage||(e.localStorage={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void) {\ngl_FragColor = vColor;\n}",t}return __extends(t,e),t}(e.EgretShader);e.PrimitiveShader=t,__reflect(t.prototype,"egret.web.PrimitiveShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;uniform vec2 uTextureSize;void main(){const int sampleRadius = 5;const int samples = sampleRadius * 2 + 1;vec2 blurUv = blur / uTextureSize;vec4 color = vec4(0, 0, 0, 0);vec2 uv = vec2(0.0, 0.0);blurUv /= float(sampleRadius);for (int i = -sampleRadius; i <= sampleRadius; i++) {uv.x = vTextureCoord.x + float(i) * blurUv.x;uv.y = vTextureCoord.y + float(i) * blurUv.y;color += texture2D(uSampler, uv);}color /= float(samples);gl_FragColor = color;}",t.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},blur:{type:"2f",value:{x:2,y:2},dirty:!0},uTextureSize:{type:"2f",value:{x:100,y:100},dirty:!0}},t}return __extends(t,e),t.prototype.setBlur=function(e,t){var r=this.uniforms.blur;(r.value.x!=e||r.value.y!=t)&&(r.value.x=e,r.value.y=t,r.dirty=!0)},t.prototype.setTextureSize=function(e,t){var r=this.uniforms.uTextureSize;(e!=r.value.x||t!=r.value.y)&&(r.value.x=e,r.value.y=t,r.dirty=!0)},t}(e.TextureShader);e.BlurShader=t,__reflect(t.prototype,"egret.web.BlurShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nif(texColor.a > 0.) {texColor = vec4(texColor.rgb / texColor.a, texColor.a);\n}vec4 locColor = clamp(texColor * matrix + colorAdd, 0., 1.);\ngl_FragColor = vColor * vec4(locColor.rgb * locColor.a, locColor.a);\n}",t.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],dirty:!0},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0},dirty:!0}},t}return __extends(t,e),t.prototype.setMatrix=function(e){var t=this.uniforms.matrix;(t.value[0]!=e[0]||t.value[0]!=e[0]||t.value[1]!=e[1]||t.value[2]!=e[2]||t.value[3]!=e[3]||t.value[4]!=e[5]||t.value[5]!=e[6]||t.value[6]!=e[7]||t.value[7]!=e[8]||t.value[8]!=e[10]||t.value[9]!=e[11]||t.value[10]!=e[12]||t.value[11]!=e[13]||t.value[12]!=e[15]||t.value[13]!=e[16]||t.value[14]!=e[17]||t.value[15]!=e[18])&&(t.value[0]=e[0],t.value[1]=e[1],t.value[2]=e[2],t.value[3]=e[3],t.value[4]=e[5],t.value[5]=e[6],t.value[6]=e[7],t.value[7]=e[8],t.value[8]=e[10],t.value[9]=e[11],t.value[10]=e[12],t.value[11]=e[13],t.value[12]=e[15],t.value[13]=e[16],t.value[14]=e[17],t.value[15]=e[18],t.dirty=!0);var r=this.uniforms.colorAdd;(r.value.x!=e[4]/255||r.value.y!=e[9]/255||r.value.z!=e[14]/255||r.value.w!=e[19]/255)&&(r.value.x=e[4]/255,r.value.y=e[9]/255,r.value.z=e[14]/255,r.value.w=e[19]/255,r.dirty=!0)},t}(e.TextureShader);e.ColorTransformShader=t,__reflect(t.prototype,"egret.web.ColorTransformShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform float distance;","uniform float angle;","uniform vec4 color;","uniform float alpha;","uniform float blurX;","uniform float blurY;","uniform float strength;","uniform float inner;","uniform float knockout;","uniform float hideObject;","uniform vec2 uTextureSize;vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);","float random(vec3 scale, float seed)","{","return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);","}","void main(void) {","const float linearSamplingTimes = 7.0;","const float circleSamplingTimes = 12.0;","vec4 ownColor = texture2D(uSampler, vTextureCoord);","vec4 curColor;","float totalAlpha = 0.0;","float maxTotalAlpha = 0.0;","float curDistanceX = 0.0;","float curDistanceY = 0.0;","float offsetX = distance * cos(angle) * px.x;","float offsetY = distance * sin(angle) * px.y;","const float PI = 3.14159265358979323846264;","float cosAngle;","float sinAngle;","float offset = PI * 2.0 / circleSamplingTimes * random(vec3(12.9898, 78.233, 151.7182), 0.0);","float stepX = blurX * px.x / linearSamplingTimes;","float stepY = blurY * px.y / linearSamplingTimes;","for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {","cosAngle = cos(a + offset);","sinAngle = sin(a + offset);","for (float i = 1.0; i <= linearSamplingTimes; i++) {","curDistanceX = i * stepX * cosAngle;","curDistanceY = i * stepY * sinAngle;","curColor = texture2D(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));","totalAlpha += (linearSamplingTimes - i) * curColor.a;","maxTotalAlpha += (linearSamplingTimes - i);","}","}","ownColor.a = max(ownColor.a, 0.0001);","ownColor.rgb = ownColor.rgb / ownColor.a;","float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);","float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;","ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);","vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));","vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));","float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);","gl_FragColor = vec4(mix2 * resultAlpha, resultAlpha);","}"].join("\n"),t.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},distance:{type:"1f",value:15,dirty:!0},angle:{type:"1f",value:1,dirty:!0},color:{type:"4f",value:{x:1,y:0,z:0,w:0},dirty:!0},alpha:{type:"1f",value:1,dirty:!0},blurX:{type:"1f",value:1,dirty:!0},blurY:{type:"1f",value:1,dirty:!0},strength:{type:"1f",value:1,dirty:!0},inner:{type:"1f",value:1,dirty:!0},knockout:{type:"1f",value:1,dirty:!0},hideObject:{type:"1f",value:0,dirty:!0},uTextureSize:{type:"2f",value:{x:100,y:100},dirty:!0}},t}return __extends(t,e),t.prototype.setDistance=function(e){var t=this.uniforms.distance;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setAngle=function(e){var t=this.uniforms.angle;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setColor=function(e,t,r){var i=this.uniforms.color;(i.value.x!=e||i.value.y!=t||i.value.z!=r)&&(i.value.x=e,i.value.y=t,i.value.z=r,i.dirty=!0)},t.prototype.setAlpha=function(e){var t=this.uniforms.alpha;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setBlurX=function(e){var t=this.uniforms.blurX;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setBlurY=function(e){var t=this.uniforms.blurY;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setStrength=function(e){var t=this.uniforms.strength;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setInner=function(e){var t=this.uniforms.inner;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setKnockout=function(e){var t=this.uniforms.knockout;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setHideObject=function(e){var t=this.uniforms.hideObject;t.value!=e&&(t.value=e,t.dirty=!0)},t.prototype.setTextureSize=function(e,t){var r=this.uniforms.uTextureSize;(e!=r.value.x||t!=r.value.y)&&(r.value.x=e,r.value.y=t,r.dirty=!0)},t}(e.TextureShader);e.GlowShader=t,__reflect(t.prototype,"egret.web.GlowShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function t(e){this.gl=null,this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.currentShader=null,this.defaultShader=null,this.primitiveShader=null,this.colorTransformShader=null,this.blurShader=null,this.glowShader=null;for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.setContext(e)}return t.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new e.PrimitiveShader(t),this.defaultShader=new e.TextureShader(t),this.colorTransformShader=new e.ColorTransformShader(t),this.glowShader=new e.GlowShader(t),this.blurShader=new e.BlurShader(t),this.primitiveShader.init(),this.defaultShader.init(),this.colorTransformShader.init(),this.blurShader.init(),this.glowShader.init()},t.prototype.activateShader=function(e,t){this.currentShader!=e&&(this.gl.useProgram(e.program),this.setAttribs(e.attributes),e.setAttribPointer(t),this.currentShader=e)},t.prototype.setAttribs=function(e){var t,r;for(r=this.tempAttribState.length,t=0;r>t;t++)this.tempAttribState[t]=!1;for(r=e.length,t=0;r>t;t++){var i=e[t];this.tempAttribState[i]=!0}var n=this.gl;for(r=this.attribState.length,t=0;r>t;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},t}();e.WebGLShaderManager=t,__reflect(t.prototype,"egret.web.WebGLShaderManager")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(){this.drawData=[],this.drawDataLen=0}return e.prototype.pushDrawRect=function(){if(0==this.drawDataLen||1!=this.drawData[this.drawDataLen-1].type){var e=this.drawData[this.drawDataLen]||{};e.type=1,e.count=0,this.drawData[this.drawDataLen]=e,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=2},e.prototype.pushDrawTexture=function(e,t,r,i,n){if(void 0===t&&(t=2),r){var o=this.drawData[this.drawDataLen]||{};o.type=0,o.texture=e,o.filter=r,o.count=t,o.textureWidth=i,o.textureHeight=n,this.drawData[this.drawDataLen]=o,this.drawDataLen++}else{if(0==this.drawDataLen||0!=this.drawData[this.drawDataLen-1].type||e!=this.drawData[this.drawDataLen-1].texture||this.drawData[this.drawDataLen-1].filter){var o=this.drawData[this.drawDataLen]||{};o.type=0,o.texture=e,o.count=0,this.drawData[this.drawDataLen]=o,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=t}},e.prototype.pushPushMask=function(e){void 0===e&&(e=1);var t=this.drawData[this.drawDataLen]||{};t.type=2,t.count=2*e,this.drawData[this.drawDataLen]=t,this.drawDataLen++},e.prototype.pushPopMask=function(e){void 0===e&&(e=1);var t=this.drawData[this.drawDataLen]||{};t.type=3,t.count=2*e,this.drawData[this.drawDataLen]=t,this.drawDataLen++},e.prototype.pushSetBlend=function(e){for(var t=this.drawDataLen,r=!1,i=t-1;i>=0;i--){var n=this.drawData[i];if(n){if((0==n.type||1==n.type)&&(r=!0),!r&&4==n.type){this.drawData.splice(i,1),this.drawDataLen--;continue}if(4==n.type){if(n.value==e)return;break}}}var o=this.drawData[this.drawDataLen]||{};o.type=4,o.value=e,this.drawData[this.drawDataLen]=o,this.drawDataLen++},e.prototype.pushResize=function(e,t,r){var i=this.drawData[this.drawDataLen]||{};i.type=5,i.buffer=e,i.width=t,i.height=r,this.drawData[this.drawDataLen]=i,this.drawDataLen++},e.prototype.pushClearColor=function(){var e=this.drawData[this.drawDataLen]||{};e.type=6,this.drawData[this.drawDataLen]=e,this.drawDataLen++},e.prototype.pushActivateBuffer=function(e){for(var t=this.drawDataLen,r=!1,i=t-1;i>=0;i--){var n=this.drawData[i];!n||(4!=n.type&&7!=n.type&&(r=!0),r||7!=n.type)||(this.drawData.splice(i,1),this.drawDataLen--)}var o=this.drawData[this.drawDataLen]||{};o.type=7,o.buffer=e,o.width=e.rootRenderTarget.width,o.height=e.rootRenderTarget.height,this.drawData[this.drawDataLen]=o,this.drawDataLen++},e.prototype.pushEnableScissor=function(e,t,r,i){var n=this.drawData[this.drawDataLen]||{};n.type=8,n.x=e,n.y=t,n.width=r,n.height=i,this.drawData[this.drawDataLen]=n,this.drawDataLen++},e.prototype.pushDisableScissor=function(){var e=this.drawData[this.drawDataLen]||{};e.type=9,this.drawData[this.drawDataLen]=e,this.drawDataLen++},e.prototype.clear=function(){for(var e=0;e<this.drawDataLen;e++){var t=this.drawData[e];t.type=0,t.count=0,t.texture=null,t.filter=null,t.uv=null,t.value="",t.buffer=null,t.width=0,t.height=0}this.drawDataLen=0},e}();e.WebGLDrawCmdManager=t,__reflect(t.prototype,"egret.web.WebGLDrawCmdManager")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){var t=function(){function e(){this.size=2e3,this.vertexMaxSize=4*this.size,this.indicesMaxSize=6*this.size,this.vertSize=5,this.vertices=null,this.indices=null,this.indicesForMesh=null,this.vertexIndex=0,this.indexIndex=0,this.hasMesh=!1;var e=this.vertexMaxSize*this.vertSize,t=this.indicesMaxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(t),this.indicesForMesh=new Uint16Array(t);for(var r=0,i=0;t>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3}return e.prototype.reachMaxSize=function(e,t){return void 0===e&&(e=4),void 0===t&&(t=6),this.vertexIndex>this.vertexMaxSize-e||this.indexIndex>this.indicesMaxSize-t},e.prototype.getVertices=function(){var e=this.vertices.subarray(0,this.vertexIndex*this.vertSize);return e},e.prototype.getIndices=function(){return this.indices},e.prototype.getMeshIndices=function(){return this.indicesForMesh},e.prototype.changeToMeshIndices=function(){if(!this.hasMesh){for(var e=0,t=this.indexIndex;t>e;++e)this.indicesForMesh[e]=this.indices[e];this.hasMesh=!0}},e.prototype.isMesh=function(){return this.hasMesh},e.prototype.cacheArrays=function(e,t,r,i,n,o,a,s,l,h,u,c,d,p,f){var v=e,g=v.a,y=v.b,m=v.c,x=v.d,b=v.tx,w=v.ty;(0!=a||0!=s)&&v.append(1,0,0,1,a,s),(n/l!=1||o/h!=1)&&v.append(l/n,0,0,h/o,0,0);var T=v.a,E=v.b,S=v.c,_=v.d,C=v.tx,R=v.ty;if(v.a=g,v.b=y,v.c=m,v.d=x,v.tx=b,v.ty=w,p){var L=this.vertices,D=this.vertexIndex*this.vertSize,A=0,M=0,$=0,I=0,O=0,B=0,P=0;for(A=0,$=d.length;$>A;A+=2)M=5*A/2,B=p[A],P=p[A+1],I=d[A],O=d[A+1],L[D+M+0]=T*B+S*P+C,L[D+M+1]=E*B+_*P+R,L[D+M+2]=(r+I*n)/u,L[D+M+3]=(i+O*o)/c,L[D+M+4]=t;if(this.hasMesh)for(var F=0,W=f.length;W>F;++F)this.indicesForMesh[this.indexIndex+F]=f[F]+this.vertexIndex;this.vertexIndex+=d.length/2,this.indexIndex+=f.length}else{var H=u,G=c,k=n,U=o;r/=H,i/=G,n/=H,o/=G;var L=this.vertices,D=this.vertexIndex*this.vertSize;if(L[D++]=C,L[D++]=R,L[D++]=r,L[D++]=i,L[D++]=t,L[D++]=T*k+C,L[D++]=E*k+R,L[D++]=n+r,L[D++]=i,L[D++]=t,L[D++]=T*k+S*U+C,L[D++]=_*U+E*k+R,L[D++]=n+r,L[D++]=o+i,L[D++]=t,L[D++]=S*U+C,L[D++]=_*U+R,L[D++]=r,L[D++]=o+i,L[D++]=t,this.hasMesh){var N=this.indicesForMesh;N[this.indexIndex+0]=0+this.vertexIndex,N[this.indexIndex+1]=1+this.vertexIndex,N[this.indexIndex+2]=2+this.vertexIndex,N[this.indexIndex+3]=0+this.vertexIndex,N[this.indexIndex+4]=2+this.vertexIndex,N[this.indexIndex+5]=3+this.vertexIndex}this.vertexIndex+=4,this.indexIndex+=6}},e.prototype.clear=function(){this.hasMesh=!1,this.vertexIndex=0,this.indexIndex=0},e}();e.WebGLVertexArrayObject=t,__reflect(t.prototype,"egret.web.WebGLVertexArrayObject")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(e){function t(t,r,i){var n=e.call(this)||this;return n.clearColor=[0,0,0,0],n.useFrameBuffer=!0,n.gl=t,n.width=r||1,n.height=i||1,n.texture=n.createTexture(),n.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,n.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n.texture,0),n.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,n.stencilBuffer),n}return __extends(t,e),t.prototype.resize=function(e,t){var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindFramebuffer(r.FRAMEBUFFER,this.frameBuffer),r.bindRenderbuffer(r.RENDERBUFFER,this.stencilBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t),this.width=e,this.height=t},t.prototype.activate=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer())},t.prototype.getFrameBuffer=function(){return this.useFrameBuffer?this.frameBuffer:null},t.prototype.createTexture=function(){var e=this.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t},t.prototype.clear=function(e){var t=this.gl;e&&this.activate(),t.colorMask(!0,!0,!0,!0),t.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),t.clear(t.COLOR_BUFFER_BIT)},t}(e.HashObject);t.WebGLRenderTarget=r,__reflect(r.prototype,"egret.web.WebGLRenderTarget")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function r(e,t){var r=document.createElement("canvas");return isNaN(e)||isNaN(t)||(r.width=e,r.height=t),r}var i=function(){function i(e,i){this.glID=null,this.projectionX=0/0,this.projectionY=0/0,this.shaderManager=null,this.contextLost=!1,this.$scissorState=!1,this.vertSize=5,this.blurFilter=null,this.surface=r(e,i),this.initWebGL(),this.$bufferStack=[];var n=this.context;this.vertexBuffer=n.createBuffer(),this.indexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.drawCmdManager=new t.WebGLDrawCmdManager,this.vao=new t.WebGLVertexArrayObject,this.setGlobalCompositeOperation("source-over")}return i.getInstance=function(e,t){return this.instance?this.instance:(this.instance=new i(e,t),this.instance)},i.prototype.pushBuffer=function(e){this.$bufferStack.push(e),e!=this.currentBuffer&&(this.currentBuffer,this.drawCmdManager.pushActivateBuffer(e)),this.currentBuffer=e},i.prototype.popBuffer=function(){if(!(this.$bufferStack.length<=1)){var e=this.$bufferStack.pop(),t=this.$bufferStack[this.$bufferStack.length-1];e!=t&&this.drawCmdManager.pushActivateBuffer(t),this.currentBuffer=t}},i.prototype.activateBuffer=function(e){e.rootRenderTarget.activate(),this.bindIndices||(this.uploadIndicesArray(this.vao.getIndices()),this.bindIndices=!0),e.restoreStencil(),e.restoreScissor(),this.onResize(e.width,e.height)},i.prototype.uploadVerticesArray=function(e){var t=this.context;t.bufferData(t.ARRAY_BUFFER,e,t.STREAM_DRAW)},i.prototype.uploadIndicesArray=function(e){var t=this.context;t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)},i.prototype.destroy=function(){this.surface.width=this.surface.height=0},i.prototype.onResize=function(e,t){e=e||this.surface.width,t=t||this.surface.height,this.projectionX=e/2,this.projectionY=-t/2,this.context&&this.context.viewport(0,0,e,t)},i.prototype.resize=function(e,t,r){var i=this.surface;r?(i.width<e&&(i.width=e),i.height<t&&(i.height=t)):(i.width!=e&&(i.width=e),i.height!=t&&(i.height=t)),this.onResize()},i.prototype.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.getWebGLContext(),this.shaderManager=new t.WebGLShaderManager(this.context)},i.prototype.handleContextLost=function(){this.contextLost=!0},i.prototype.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},i.prototype.getWebGLContext=function(){for(var t,r={antialias:i.antialias,stencil:!0},n=["webgl","experimental-webgl"],o=0;o<n.length;o++){try{t=this.surface.getContext(n[o],r)}catch(a){}if(t)break}t||e.$error(1021),this.setContext(t)},i.prototype.setContext=function(e){this.context=e,e.id=i.glContextId++,this.glID=e.id,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.colorMask(!0,!0,!0,!0),e.activeTexture(e.TEXTURE0)},i.prototype.enableStencilTest=function(){var e=this.context;e.enable(e.STENCIL_TEST)},i.prototype.disableStencilTest=function(){var e=this.context;e.disable(e.STENCIL_TEST)},i.prototype.enableScissorTest=function(e){var t=this.context;t.enable(t.SCISSOR_TEST),t.scissor(e.x,e.y,e.width,e.height)},i.prototype.disableScissorTest=function(){var e=this.context;e.disable(e.SCISSOR_TEST)},i.prototype.getPixels=function(e,t,r,i,n){var o=this.context;o.readPixels(e,t,r,i,o.RGBA,o.UNSIGNED_BYTE,n)},i.prototype.createTexture=function(e){var t=this.context,r=t.createTexture();return r?(r.glContext=t,t.bindTexture(t.TEXTURE_2D,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r):void(this.contextLost=!0)},i.prototype.createTextureFromCompressedData=function(e,t,r,i,n){return null},i.prototype.updateTexture=function(e,t){var r=this.context;r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)},i.prototype.getWebGLTexture=function(e){return e.webGLTexture||("image"==e.format?e.webGLTexture=this.createTexture(e.source):"pvr"==e.format&&(e.webGLTexture=this.createTextureFromCompressedData(e.source.pvrtcData,e.width,e.height,e.source.mipmapsCount,e.source.format)),e.$deleteSource&&e.webGLTexture&&(e.source=null)),e.webGLTexture},i.prototype.clearRect=function(e,t,r,i){if(0!=e||0!=t||r!=this.surface.width||i!=this.surface.height){var n=this.currentBuffer;if(n.$hasScissor)this.setGlobalCompositeOperation("destination-out"),this.drawRect(e,t,r,i),this.setGlobalCompositeOperation("source-over");else{var o=n.globalMatrix;0==o.b&&0==o.c?(e=e*o.a+o.tx,t=t*o.d+o.ty,r*=o.a,i*=o.d,this.enableScissor(e,-t-i+n.height,r,i),this.clear(),this.disableScissor()):(this.setGlobalCompositeOperation("destination-out"),this.drawRect(e,t,r,i),this.setGlobalCompositeOperation("source-over"))}}else this.clear()},i.prototype.setGlobalCompositeOperation=function(e){this.drawCmdManager.pushSetBlend(e)},i.prototype.drawImage=function(e,t,r,i,n,o,a,s,l,h,u){var c=this.currentBuffer;if(!this.contextLost&&e&&c){var d;if(e.texture||e.source&&e.source.texture)d=e.texture||e.source.texture,c.saveTransform(),c.transform(1,0,0,-1,0,l+2*a);else{if(!e.source&&!e.webGLTexture)return;d=this.getWebGLTexture(e)}d&&(this.drawTexture(d,t,r,i,n,o,a,s,l,h,u),e.source&&e.source.texture&&c.restoreTransform())}},i.prototype.drawMesh=function(e,t,r,i,n,o,a,s,l,h,u,c,d,p,f){var v=this.currentBuffer;if(!this.contextLost&&e&&v){var g;if(e.texture||e.source&&e.source.texture)g=e.texture||e.source.texture,v.saveTransform(),v.transform(1,0,0,-1,0,l+2*a);else{if(!e.source&&!e.webGLTexture)return;g=this.getWebGLTexture(e)}g&&this.drawTexture(g,t,r,i,n,o,a,s,l,h,u,c,d,p,f)}},i.prototype.drawTexture=function(e,t,r,i,n,o,a,s,l,h,u,c,d,p,f){var v=this.currentBuffer;if(!this.contextLost&&e&&v){d&&p?this.vao.reachMaxSize(d.length/2,p.length)&&this.$drawWebGL():this.vao.reachMaxSize()&&this.$drawWebGL(),c&&this.vao.changeToMeshIndices();var g=v.globalMatrix,y=v.globalAlpha,m=p?p.length/3:2;this.drawCmdManager.pushDrawTexture(e,m,this.$filter),this.vao.cacheArrays(g,y,t,r,i,n,o,a,s,l,h,u,c,d,p)}},i.prototype.drawRect=function(e,t,r,i){var n=this.currentBuffer;!this.contextLost&&n&&(this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushDrawRect(),this.vao.cacheArrays(n.globalMatrix,n.globalAlpha,0,0,r,i,e,t,r,i,r,i))},i.prototype.pushMask=function(e){var t=this.currentBuffer;if(!this.contextLost&&t){t.$stencilList.push(e),this.vao.reachMaxSize()&&this.$drawWebGL();var r=e.length;if(r){this.drawCmdManager.pushPushMask(r);for(var i=0;r>i;i++){var n=e[i];this.vao.cacheArrays(t.globalMatrix,t.globalAlpha,0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height)}}else this.drawCmdManager.pushPushMask(),this.vao.cacheArrays(t.globalMatrix,t.globalAlpha,0,0,e.width,e.height,e.x,e.y,e.width,e.height,e.width,e.height)}},i.prototype.popMask=function(){var e=this.currentBuffer;if(!this.contextLost&&e){var t=e.$stencilList.pop();this.vao.reachMaxSize()&&this.$drawWebGL();var r=t.length;if(r){this.drawCmdManager.pushPopMask(r);for(var i=0;r>i;i++){var n=t[i];this.vao.cacheArrays(e.globalMatrix,e.globalAlpha,0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height)}}else this.drawCmdManager.pushPopMask(),this.vao.cacheArrays(e.globalMatrix,e.globalAlpha,0,0,t.width,t.height,t.x,t.y,t.width,t.height,t.width,t.height)}},i.prototype.clear=function(){this.drawCmdManager.pushClearColor()},i.prototype.enableScissor=function(e,t,r,i){var n=this.currentBuffer;this.drawCmdManager.pushEnableScissor(e,t,r,i),n.$hasScissor=!0},i.prototype.disableScissor=function(){var e=this.currentBuffer;this.drawCmdManager.pushDisableScissor(),e.$hasScissor=!1},i.prototype.$drawWebGL=function(){if(0!=this.drawCmdManager.drawDataLen&&!this.contextLost){this.uploadVerticesArray(this.vao.getVertices()),this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getMeshIndices());for(var e=this.drawCmdManager.drawDataLen,t=0,r=0;e>r;r++){var i=this.drawCmdManager.drawData[r];t=this.drawData(i,t),7==i.type&&(this.activatedBuffer=i.buffer),(0==i.type||1==i.type||2==i.type||3==i.type)&&this.activatedBuffer&&this.activatedBuffer.$computeDrawCall&&this.activatedBuffer.$drawCalls++}this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getIndices()),this.drawCmdManager.clear(),this.vao.clear()}},i.prototype.drawData=function(e,t){if(e){var r;switch(e.type){case 0:var i=e.filter;i?"colorTransform"==i.type?(r=this.shaderManager.colorTransformShader,r.setMatrix(i.$matrix)):"blur"==i.type?(r=this.shaderManager.blurShader,r.setBlur(i.$blurX,i.$blurY),r.setTextureSize(e.textureWidth,e.textureHeight)):"glow"==i.type&&(r=this.shaderManager.glowShader,r.setDistance(i.$distance||0),r.setAngle(i.$angle?i.$angle/180*Math.PI:0),r.setColor(i.$red/255,i.$green/255,i.$blue/255),r.setAlpha(i.$alpha),r.setBlurX(i.$blurX),r.setBlurY(i.$blurY),r.setStrength(i.$strength),r.setInner(i.$inner?1:0),r.setKnockout(i.$knockout?0:1),r.setHideObject(i.$hideObject?1:0),r.setTextureSize(e.textureWidth,e.textureHeight)):r=this.shaderManager.defaultShader,r.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(r,4*this.vertSize),r.syncUniforms(),t+=this.drawTextureElements(e,t);break;case 1:r=this.shaderManager.primitiveShader,r.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(r,4*this.vertSize),r.syncUniforms(),t+=this.drawRectElements(e,t);break;case 2:r=this.shaderManager.primitiveShader,r.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(r,4*this.vertSize),r.syncUniforms(),t+=this.drawPushMaskElements(e,t);break;case 3:r=this.shaderManager.primitiveShader,r.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(r,4*this.vertSize),r.syncUniforms(),t+=this.drawPopMaskElements(e,t);break;case 4:this.setBlendMode(e.value);break;case 5:e.buffer.rootRenderTarget.resize(e.width,e.height),this.onResize(e.width,e.height);break;case 6:if(this.activatedBuffer){var n=this.activatedBuffer.rootRenderTarget;(0!=n.width||0!=n.height)&&n.clear()}break;case 7:this.activateBuffer(e.buffer);break;case 8:var o=this.activatedBuffer;o&&o.enableScissor(e.x,e.y,e.width,e.height);break;case 9:o=this.activatedBuffer,o&&o.disableScissor()}return t}},i.prototype.drawTextureElements=function(e,t){var r=this.context;r.bindTexture(r.TEXTURE_2D,e.texture);var i=3*e.count;return r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),i},i.prototype.drawRectElements=function(e,t){var r=this.context,i=3*e.count;return r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),i},i.prototype.drawPushMaskElements=function(e,t){var r=this.context,i=3*e.count,n=this.activatedBuffer;if(n){0==n.stencilHandleCount&&(n.enableStencil(),r.clear(r.STENCIL_BUFFER_BIT));var o=n.stencilHandleCount;n.stencilHandleCount++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,o,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR),r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),r.stencilFunc(r.EQUAL,o+1,255),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}return i},i.prototype.drawPopMaskElements=function(e,t){var r=this.context,i=3*e.count,n=this.activatedBuffer;if(n)if(n.stencilHandleCount--,0==n.stencilHandleCount)n.disableStencil();else{var o=n.stencilHandleCount;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,o+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR),r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*t),r.stencilFunc(r.EQUAL,o,255),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}return i},i.prototype.setBlendMode=function(e){var t=this.context,r=i.blendModesForGL[e];r&&t.blendFunc(r[0],r[1])},i.prototype.drawTargetWidthFilters=function(e,r){var i,n=r,o=e.length;if(o>1)for(var a=0;o-1>a;a++){var s=e[a],l=r.rootRenderTarget.width,h=r.rootRenderTarget.height;i=t.WebGLRenderBuffer.create(l,h),i.setTransform(1,0,0,1,0,0),i.globalAlpha=1,this.drawToRenderTarget(s,r,i),r!=n&&t.WebGLRenderBuffer.release(r),r=i}var u=e[o-1];this.drawToRenderTarget(u,r,this.currentBuffer),r!=n&&t.WebGLRenderBuffer.release(r)},i.prototype.drawToRenderTarget=function(r,i,n){if(!this.contextLost){this.vao.reachMaxSize()&&this.$drawWebGL(),this.pushBuffer(n);var o,a=i,s=i.rootRenderTarget.width,l=i.rootRenderTarget.height;"blur"==r.type&&(this.blurFilter||(this.blurFilter=new e.BlurFilter(2,2)),0!=r.blurX&&0!=r.blurY?(this.blurFilter.blurX=r.blurX,this.blurFilter.blurY=0,o=t.WebGLRenderBuffer.create(s,l),o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,this.drawToRenderTarget(this.blurFilter,i,o),i!=a&&t.WebGLRenderBuffer.release(i),i=o,this.blurFilter.blurX=0,this.blurFilter.blurY=r.blurY):(this.blurFilter.blurX=r.blurX,this.blurFilter.blurY=r.blurY),r=this.blurFilter),n.saveTransform(),n.transform(1,0,0,-1,0,l),this.vao.cacheArrays(n.globalMatrix,n.globalAlpha,0,0,s,l,0,0,s,l,s,l),n.restoreTransform();var h;h="blur"==r.type?{type:"blur",$blurX:r.$blurX,$blurY:r.$blurY}:r,this.drawCmdManager.pushDrawTexture(i.rootRenderTarget.texture,2,h,s,l),i!=a&&t.WebGLRenderBuffer.release(i),this.popBuffer()}},i.initBlendMode=function(){i.blendModesForGL={},i.blendModesForGL["source-over"]=[1,771],i.blendModesForGL.lighter=[1,1],i.blendModesForGL["lighter-in"]=[770,771],i.blendModesForGL["destination-out"]=[0,771],i.blendModesForGL["destination-in"]=[0,770]},i}();i.glContextId=0,i.blendModesForGL=null,t.WebGLRenderContext=i,__reflect(i.prototype,"egret.web.WebGLRenderContext"),i.initBlendMode()}(t=e.web||(e.web={}))}(egret||(egret={}));
var egret;!function(e){var t;!function(t){var r=function(r){function n(i,n,o){var a=r.call(this)||this;if(a.globalAlpha=1,a.stencilState=!1,a.$stencilList=[],a.stencilHandleCount=0,a.$scissorState=!1,a.scissorRect=new e.Rectangle,a.$hasScissor=!1,a.dirtyRegionPolicy=!0,a._dirtyRegionPolicy=!0,a.$drawCalls=0,a.$computeDrawCall=!1,a.globalMatrix=new e.Matrix,a.savedGlobalMatrix=new e.Matrix,a.context=t.WebGLRenderContext.getInstance(i,n),a.rootRenderTarget=new t.WebGLRenderTarget(a.context.context,3,3),i&&n&&a.resize(i,n),a.root=o,a.root)a.context.pushBuffer(a),a.surface=a.context.surface;else{var s=a.context.activatedBuffer;s&&s.rootRenderTarget.activate(),a.surface=a.rootRenderTarget}return a}return __extends(n,r),n.prototype.enableStencil=function(){this.stencilState||(this.context.enableStencilTest(),this.stencilState=!0)},n.prototype.disableStencil=function(){this.stencilState&&(this.context.disableStencilTest(),this.stencilState=!1)},n.prototype.restoreStencil=function(){this.stencilState?this.context.enableStencilTest():this.context.disableStencilTest()},n.prototype.enableScissor=function(e,t,r,i){this.$scissorState||(this.$scissorState=!0,this.scissorRect.setTo(e,t,r,i),this.context.enableScissorTest(this.scissorRect))},n.prototype.disableScissor=function(){this.$scissorState&&(this.$scissorState=!1,this.scissorRect.setEmpty(),this.context.disableScissorTest())},n.prototype.restoreScissor=function(){this.$scissorState?this.context.enableScissorTest(this.scissorRect):this.context.disableScissorTest()},Object.defineProperty(n.prototype,"width",{get:function(){return this.rootRenderTarget.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.rootRenderTarget.height},enumerable:!0,configurable:!0}),n.prototype.resize=function(e,t,r){this.context.pushBuffer(this),e=e||1,t=t||1,(e!=this.rootRenderTarget.width||t!=this.rootRenderTarget.height)&&(this.context.drawCmdManager.pushResize(this,e,t),this.rootRenderTarget.width=e,this.rootRenderTarget.height=t),this.root&&this.context.resize(e,t,r),this.context.clear(),this.context.popBuffer()},n.prototype.resizeTo=function(e,t,r,i){this.context.pushBuffer(this);var o=this.rootRenderTarget.width,a=this.rootRenderTarget.height,s=n.create(o,a);this.context.pushBuffer(s),this.context.drawImage(this.rootRenderTarget,0,0,o,a,0,0,o,a,o,a),this.context.popBuffer(),this.resize(e,t),this.setTransform(1,0,0,1,0,0),this.context.drawImage(s.rootRenderTarget,0,0,o,a,r,i,o,a,o,a),n.release(s),this.context.popBuffer()},n.prototype.setDirtyRegionPolicy=function(e){this.dirtyRegionPolicy="on"==e},n.prototype.beginClip=function(e,t,r){this.context.pushBuffer(this),this.root&&(this._dirtyRegionPolicy?(this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate()):(this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.clear())),t=+t||0,r=+r||0,this.setTransform(1,0,0,1,t,r);var i=e.length;if(1==i&&0==e[0].minX&&0==e[0].minY&&e[0].width==this.rootRenderTarget.width&&e[0].height==this.rootRenderTarget.height)return this.maskPushed=!1,this.rootRenderTarget.useFrameBuffer&&this.context.clear(),void this.context.popBuffer();for(var n=0;i>n;n++){var o=e[n];this.context.clearRect(o.minX,o.minY,o.width,o.height)}if(i>0){if(this.$hasScissor||1!=i)this.scissorEnabled=!1;else{var o=e[0];e=e.slice(1);var a=o.minX+t,s=o.minY+r,l=o.width,h=o.height;this.context.enableScissor(a,-s-h+this.height,l,h),this.scissorEnabled=!0}e.length>0?(this.context.pushMask(e),this.maskPushed=!0):this.maskPushed=!1,this.offsetX=t,this.offsetY=r}else this.maskPushed=!1;this.context.popBuffer()},n.prototype.endClip=function(){(this.maskPushed||this.scissorEnabled)&&(this.context.pushBuffer(this),this.maskPushed&&(this.setTransform(1,0,0,1,this.offsetX,this.offsetY),this.context.popMask()),this.scissorEnabled&&this.context.disableScissor(),this.context.popBuffer())},n.prototype.getPixels=function(e,t,r,i){void 0===r&&(r=1),void 0===i&&(i=1);var n=new Uint8Array(4*r*i),o=this.rootRenderTarget.useFrameBuffer;this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.getPixels(e,t,r,i,n),this.rootRenderTarget.useFrameBuffer=o,this.rootRenderTarget.activate();for(var a=new Uint8Array(4*r*i),s=0;i>s;s++)for(var l=0;r>l;l++)a[4*(r*(i-s-1)+l)]=n[4*(r*s+l)],a[4*(r*(i-s-1)+l)+1]=n[4*(r*s+l)+1],a[4*(r*(i-s-1)+l)+2]=n[4*(r*s+l)+2],a[4*(r*(i-s-1)+l)+3]=n[4*(r*s+l)+3];return a},n.prototype.toDataURL=function(e,t){return this.context.surface.toDataURL(e,t)},n.prototype.destroy=function(){this.context.destroy()},n.prototype.onRenderFinish=function(){this.$drawCalls=0,this.root&&(!this._dirtyRegionPolicy&&this.dirtyRegionPolicy&&this.drawSurfaceToFrameBuffer(0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,!0),this._dirtyRegionPolicy&&this.drawFrameBufferToSurface(0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,0,0,this.rootRenderTarget.width,this.rootRenderTarget.height),this._dirtyRegionPolicy=this.dirtyRegionPolicy)},n.prototype.drawFrameBufferToSurface=function(e,t,r,i,n,o,a,s,l){void 0===l&&(l=!1),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),l&&this.context.clear(),this.context.drawImage(this.rootRenderTarget,e,t,r,i,n,o,a,s,r,i),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},n.prototype.drawSurfaceToFrameBuffer=function(e,t,r,i,n,o,a,s,l){void 0===l&&(l=!1),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),l&&this.context.clear(),this.context.drawImage(this.context.surface,e,t,r,i,n,o,a,s,r,i),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},n.prototype.clear=function(){this.context.clear()},n.prototype.setTransform=function(e,t,r,i,n,o){var a=this.globalMatrix;a.a=e,a.b=t,a.c=r,a.d=i,a.tx=n,a.ty=o},n.prototype.transform=function(e,t,r,i,n,o){var a=this.globalMatrix,s=a.a,l=a.b,h=a.c,u=a.d;(1!=e||0!=t||0!=r||1!=i)&&(a.a=e*s+t*h,a.b=e*l+t*u,a.c=r*s+i*h,a.d=r*l+i*u),a.tx=n*s+o*h+a.tx,a.ty=n*l+o*u+a.ty},n.prototype.translate=function(e,t){var r=this.globalMatrix;r.tx+=e,r.ty+=t},n.prototype.saveTransform=function(){var e=this.globalMatrix,t=this.savedGlobalMatrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},n.prototype.restoreTransform=function(){var e=this.globalMatrix,t=this.savedGlobalMatrix;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},n.create=function(e,t){var r=i.pop();if(r){r.resize(e,t);var o=r.globalMatrix;o.a=1,o.b=0,o.c=0,o.d=1,o.tx=0,o.ty=0}else r=new n(e,t),r.$computeDrawCall=!1;return r},n.release=function(e){i.push(e)},n}(e.HashObject);t.WebGLRenderBuffer=r,__reflect(r.prototype,"egret.web.WebGLRenderBuffer",["egret.sys.RenderBuffer"]);var i=[]}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=["source-over","lighter","destination-out"],i="source-over",n=[],o=function(){function o(){this.nestLevel=0}return o.prototype.render=function(e,t,r,i,o){this.nestLevel++;var a=t,s=a.context,l=o?e:null;s.pushBuffer(a),this.drawDisplayObject(e,a,i,r,null,null,l),s.$drawWebGL();var h=a.$drawCalls;if(a.onRenderFinish(),s.popBuffer(),this.nestLevel--,0===this.nestLevel){n.length>6&&(n.length=6);for(var u=n.length,c=0;u>c;c++)n[c].resize(0,0)}return h},o.prototype.drawDisplayObject=function(t,r,i,n,o,a,s){var l,h=0;if(o&&!s?(o.isDirty&&(h+=o.drawToSurface()),l=o.$renderNode):l=t.$getRenderNode(),l){if(i){var u=l.renderRegion;if(a&&!a.intersects(u))l.needRedraw=!1;else if(!l.needRedraw)for(var c=i.length,d=0;c>d;d++)if(u.intersects(i[d])){l.needRedraw=!0;break}}else l.needRedraw=!0;if(l.needRedraw){h++;var p=void 0,f=void 0;s?(p=t.$getConcatenatedAlphaAt(s,t.$getConcatenatedAlpha()),f=e.Matrix.create().copyFrom(t.$getConcatenatedMatrix()),t.$getConcatenatedMatrixAt(s,f),n.$preMultiplyInto(f,f),r.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),e.Matrix.release(f)):(p=l.renderAlpha,f=l.renderMatrix,r.setTransform(f.a,f.b,f.c,f.d,f.tx+n.tx,f.ty+n.ty)),r.globalAlpha=p,this.renderNode(l,r),l.needRedraw=!1}}if(o&&!s)return h;var v=t.$children;if(v)for(var g=v.length,y=0;g>y;y++){var m=v[y];if(!(!m.$visible||m.$alpha<=0||m.$maskedObject)){var x=m.$getFilters();x&&x.length>0?h+=this.drawWithFilter(m,r,i,n,a,s):0!==m.$blendMode||m.$mask&&(m.$mask.$parentDisplayList||s)?h+=this.drawWithClip(m,r,i,n,a,s):m.$scrollRect||m.$maskRect?h+=this.drawWithScrollRect(m,r,i,n,a,s):m.isFPS?(r.context.$drawWebGL(),r.$computeDrawCall=!1,this.drawDisplayObject(m,r,i,n,m.$displayList,a,s),r.context.$drawWebGL(),r.$computeDrawCall=!0):h+=this.drawDisplayObject(m,r,i,n,m.$displayList,a,s)}}return h},o.prototype.drawWithFilter=function(t,o,a,s,l,h){var u,c=0,d=t.$getFilters(),p=0!==t.$blendMode;if(p&&(u=r[t.$blendMode],u||(u=i)),1==d.length&&"colorTransform"==d[0].type&&!t.$children)return p&&o.context.setGlobalCompositeOperation(u),o.context.$filter=d[0],c+=t.$mask&&(t.$mask.$parentDisplayList||h)?this.drawWithClip(t,o,a,s,l,h):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,o,a,s,l,h):this.drawDisplayObject(t,o,a,s,t.$displayList,l,h),o.context.$filter=null,p&&o.context.setGlobalCompositeOperation(i),c;var f=e.Matrix.create();f.copyFrom(t.$getConcatenatedMatrix()),h&&t.$getConcatenatedMatrixAt(h,f);var v;v=e.sys.Region.create();var g=t.$getOriginalBounds();v.updateRegion(g,f);var y=this.createRenderBuffer(v.width,v.height);y.context.pushBuffer(y),y.setTransform(1,0,0,1,-v.minX,-v.minY);var m=e.Matrix.create().setTo(1,0,0,1,-v.minX,-v.minY);return c+=t.$mask&&(t.$mask.$parentDisplayList||h)?this.drawWithClip(t,y,a,m,v,h):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,y,a,m,v,h):this.drawDisplayObject(t,y,a,m,t.$displayList,v,h),e.Matrix.release(m),y.context.popBuffer(),c>0&&(p&&o.context.setGlobalCompositeOperation(u),c++,o.globalAlpha=1,o.setTransform(1,0,0,1,v.minX+s.tx,v.minY+s.ty),o.context.drawTargetWidthFilters(d,y),p&&o.context.setGlobalCompositeOperation(i)),n.push(y),e.sys.Region.release(v),e.Matrix.release(f),c},o.prototype.drawWithClip=function(t,o,a,s,l,h){var u,c=0,d=0!==t.$blendMode;d&&(u=r[t.$blendMode],u||(u=i));var p=t.$scrollRect?t.$scrollRect:t.$maskRect,f=t.$mask;if(f){var v=f.$getRenderNode();if(v){var g=v.renderMatrix;if(0==g.a&&0==g.b||0==g.c&&0==g.d)return c}}var y,m=e.Matrix.create();if(m.copyFrom(t.$getConcatenatedMatrix()),t.$parentDisplayList){var x=t.$parentDisplayList.root;x!==t.$stage&&t.$getConcatenatedMatrixAt(x,m)}var b;if(f){b=f.$getOriginalBounds(),y=e.sys.Region.create();var w=e.Matrix.create();w.copyFrom(f.$getConcatenatedMatrix()),y.updateRegion(b,w),e.Matrix.release(w)}var T;if(p&&(T=e.sys.Region.create(),T.updateRegion(p,m)),T&&y?(T.intersect(y),e.sys.Region.release(y)):!T&&y&&(T=y),T){if(T.isEmpty()||l&&!l.intersects(T))return e.sys.Region.release(T),e.Matrix.release(m),c}else T=e.sys.Region.create(),b=t.$getOriginalBounds(),T.updateRegion(b,m);var E=!1;if(a){for(var S=a.length,_=0;S>_;_++)if(T.intersects(a[_])){E=!0;break}}else E=!0;if(!E)return e.sys.Region.release(T),e.Matrix.release(m),c;if(f||t.$children&&0!=t.$children.length){var C=this.createRenderBuffer(T.width,T.height);C.context.pushBuffer(C),C.setTransform(1,0,0,1,-T.minX,-T.minY);var R=e.Matrix.create().setTo(1,0,0,1,-T.minX,-T.minY);if(c+=this.drawDisplayObject(t,C,a,R,t.$displayList,T,h),f){var L=this.createRenderBuffer(T.width,T.height);L.context.pushBuffer(L),L.setTransform(1,0,0,1,-T.minX,-T.minY),R=e.Matrix.create().setTo(1,0,0,1,-T.minX,-T.minY),c+=this.drawDisplayObject(f,L,a,R,f.$displayList,T,h),L.context.popBuffer(),C.context.setGlobalCompositeOperation("destination-in"),C.setTransform(1,0,0,-1,0,L.height),C.globalAlpha=1;var D=L.rootRenderTarget.width,A=L.rootRenderTarget.height;C.context.drawTexture(L.rootRenderTarget.texture,0,0,D,A,0,0,D,A,D,A),C.context.setGlobalCompositeOperation("source-over"),n.push(L)}if(e.Matrix.release(R),C.context.setGlobalCompositeOperation(i),C.context.popBuffer(),c>0){if(c++,d&&o.context.setGlobalCompositeOperation(u),p){var w=m;C.setTransform(w.a,w.b,w.c,w.d,w.tx-T.minX,w.ty-T.minY),C.context.pushMask(p)}o.globalAlpha=1,o.setTransform(1,0,0,-1,T.minX+s.tx,T.minY+s.ty+C.height);var M=C.rootRenderTarget.width,$=C.rootRenderTarget.height;o.context.drawTexture(C.rootRenderTarget.texture,0,0,M,$,0,0,M,$,M,$),p&&C.context.popMask(),d&&o.context.setGlobalCompositeOperation(i)}return n.push(C),e.sys.Region.release(T),e.Matrix.release(m),c}if(p){var w=m;o.setTransform(w.a,w.b,w.c,w.d,w.tx-T.minX,w.ty-T.minY),o.context.pushMask(p)}return d&&o.context.setGlobalCompositeOperation(u),c+=this.drawDisplayObject(t,o,a,s,t.$displayList,l,h),d&&o.context.setGlobalCompositeOperation(i),p&&o.context.popMask(),e.sys.Region.release(T),e.Matrix.release(m),c},o.prototype.drawWithScrollRect=function(t,r,i,n,o,a){var s=0,l=t.$scrollRect?t.$scrollRect:t.$maskRect;if(l.isEmpty())return s;var h=e.Matrix.create();if(h.copyFrom(t.$getConcatenatedMatrix()),a)t.$getConcatenatedMatrixAt(a,h);else if(t.$parentDisplayList){var u=t.$parentDisplayList.root;u!==t.$stage&&t.$getConcatenatedMatrixAt(u,h)}var c=e.sys.Region.create();if(c.updateRegion(l,h),c.isEmpty()||o&&!o.intersects(c))return e.sys.Region.release(c),e.Matrix.release(h),s;var d=!1;if(i){for(var p=i.length,f=0;p>f;f++)if(c.intersects(i[f])){d=!0;break}}else d=!0;if(!d)return e.sys.Region.release(c),e.Matrix.release(h),s;r.setTransform(h.a,h.b,h.c,h.d,h.tx+n.tx,h.ty+n.ty);var v=r.context,g=!1;if(r.$hasScissor||0!=h.b||0!=h.c)v.pushMask(l);else{var y=l.x,m=l.y,x=l.width,b=l.height;y=y*h.a+h.tx+n.tx,m=m*h.d+h.ty+n.ty,x*=h.a,b*=h.d,v.enableScissor(y,-m-b+r.height,x,b),g=!0}return s+=this.drawDisplayObject(t,r,i,n,t.$displayList,c,a),r.setTransform(h.a,h.b,h.c,h.d,h.tx+n.tx,h.ty+n.ty),g?v.disableScissor():v.popMask(),e.sys.Region.release(c),e.Matrix.release(h),s},o.prototype.drawNodeToBuffer=function(e,t,r,i){var n=t;n.context.pushBuffer(n),n.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.renderNode(e,t,i),n.context.$drawWebGL(),n.onRenderFinish(),n.context.popBuffer()},o.prototype.renderNode=function(e,t,r){switch(e.type){case 1:this.renderBitmap(e,t);break;case 2:this.renderText(e,t);break;case 3:this.renderGraphics(e,t,r);break;case 4:this.renderGroup(e,t);break;case 6:t.globalAlpha=e.drawData[0];break;case 7:this.renderMesh(e,t)}},o.prototype.renderBitmap=function(e,t){var n=e.image;if(n){var o=e.drawData,a=o.length,s=0,l=e.matrix,h=e.blendMode,u=e.alpha;l&&(t.saveTransform(),t.transform(l.a,l.b,l.c,l.d,l.tx,l.ty)),h&&t.context.setGlobalCompositeOperation(r[h]);var c;if(u==u&&(c=t.globalAlpha,t.globalAlpha*=u),e.filter){for(t.context.$filter=e.filter;a>s;)t.context.drawImage(n,o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],e.imageWidth,e.imageHeight);t.context.$filter=null}else for(;a>s;)t.context.drawImage(n,o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],o[s++],e.imageWidth,e.imageHeight);h&&t.context.setGlobalCompositeOperation(i),u==u&&(t.globalAlpha=c),l&&t.restoreTransform()}},o.prototype.renderMesh=function(e,t){var r=e.image,i=e.drawData,n=i.length,o=0,a=e.matrix;for(a&&(t.saveTransform(),t.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));n>o;)t.context.drawMesh(r,i[o++],i[o++],i[o++],i[o++],i[o++],i[o++],i[o++],i[o++],e.imageWidth,e.imageHeight,e.uvs,e.vertices,e.indices,e.bounds);a&&t.restoreTransform()},o.prototype.renderText=function(r,i){var n=r.width-r.x,o=r.height-r.y;if(0!=r.drawData.length&&(this.canvasRenderBuffer&&this.canvasRenderBuffer.context?r.dirtyRender&&this.canvasRenderBuffer.resize(n,o):(this.canvasRenderer=new e.CanvasRenderer,this.canvasRenderBuffer=new t.CanvasRenderBuffer(n,o)),this.canvasRenderBuffer.context)){if((r.x||r.y)&&(r.dirtyRender&&this.canvasRenderBuffer.context.translate(-r.x,-r.y),i.transform(1,0,0,1,r.x,r.y)),r.dirtyRender){var a=this.canvasRenderBuffer.surface;this.canvasRenderer.renderText(r,this.canvasRenderBuffer.context);var s=r.$texture;s?i.context.updateTexture(s,a):(s=i.context.createTexture(a),r.$texture=s),r.$textureWidth=a.width,r.$textureHeight=a.height}var l=r.$textureWidth,h=r.$textureHeight;i.context.drawTexture(r.$texture,0,0,l,h,0,0,l,h,l,h),(r.x||r.y)&&(r.dirtyRender&&this.canvasRenderBuffer.context.translate(r.x,r.y),i.transform(1,0,0,1,-r.x,-r.y)),r.dirtyRender=!1}},o.prototype.renderGraphics=function(r,i,n){var o=r.width,a=r.height;if(!(0>=o||0>=a)&&o&&a&&0!=r.drawData.length&&(this.canvasRenderBuffer&&this.canvasRenderBuffer.context?(r.dirtyRender||n)&&this.canvasRenderBuffer.resize(o,a):(this.canvasRenderer=new e.CanvasRenderer,this.canvasRenderBuffer=new t.CanvasRenderBuffer(o,a)),this.canvasRenderBuffer.context)){(r.x||r.y)&&((r.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(-r.x,-r.y),i.transform(1,0,0,1,r.x,r.y));var s=this.canvasRenderBuffer.surface;if(n){this.canvasRenderer.renderGraphics(r,this.canvasRenderBuffer.context,!0),e.WebGLUtils.deleteWebGLTexture(s);var l=i.context.getWebGLTexture(s);i.context.drawTexture(l,0,0,o,a,0,0,o,a,s.width,s.height)}else{if(r.dirtyRender){this.canvasRenderer.renderGraphics(r,this.canvasRenderBuffer.context);var l=r.$texture;l?i.context.updateTexture(l,s):(l=i.context.createTexture(s),r.$texture=l),r.$textureWidth=s.width,r.$textureHeight=s.height}var h=r.$textureWidth,u=r.$textureHeight;i.context.drawTexture(r.$texture,0,0,h,u,0,0,h,u,h,u)}(r.x||r.y)&&((r.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(r.x,r.y),i.transform(1,0,0,1,-r.x,-r.y)),n||(r.dirtyRender=!1)}},o.prototype.renderGroup=function(e,t){var r=e.matrix;r&&(t.saveTransform(),t.transform(r.a,r.b,r.c,r.d,r.tx,r.ty));for(var i=e.drawData,n=i.length,o=0;n>o;o++){var a=i[o];this.renderNode(a,t)}r&&t.restoreTransform()},o.prototype.createRenderBuffer=function(e,r){var i=n.pop();return i?i.resize(e,r):(i=new t.WebGLRenderBuffer(e,r),i.$computeDrawCall=!1),i},o}();t.WebGLRenderer=o,__reflect(o.prototype,"egret.web.WebGLRenderer",["egret.sys.SystemRenderer"])}(t=e.web||(e.web={}))}(egret||(egret={}));/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/libs/modules/egret/egret.web.min.js*/var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},eui;!function(t){var e;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.targetLevel=Number.POSITIVE_INFINITY,e.invalidatePropertiesFlag=!1,e.invalidateClientPropertiesFlag=!1,e.invalidatePropertiesQueue=new i,e.invalidateSizeFlag=!1,e.invalidateClientSizeFlag=!1,e.invalidateSizeQueue=new i,e.invalidateDisplayListFlag=!1,e.invalidateDisplayListQueue=new i,e.eventDisplay=new egret.Bitmap,e.listenersAttached=!1,e}return __extends(e,t),e.prototype.invalidateProperties=function(t){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientPropertiesFlag=!0),this.invalidatePropertiesQueue.insert(t)},e.prototype.validateProperties=function(){for(var t=this.invalidatePropertiesQueue,e=t.shift();e;)e.$stage&&e.validateProperties(),e=t.shift();t.isEmpty()&&(this.invalidatePropertiesFlag=!1)},e.prototype.invalidateSize=function(t){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientSizeFlag=!0),this.invalidateSizeQueue.insert(t)},e.prototype.validateSize=function(){for(var t=this.invalidateSizeQueue,e=t.pop();e;)e.$stage&&e.validateSize(),e=t.pop();t.isEmpty()&&(this.invalidateSizeFlag=!1)},e.prototype.invalidateDisplayList=function(t){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners()),this.invalidateDisplayListQueue.insert(t)},e.prototype.validateDisplayList=function(){for(var t=this.invalidateDisplayListQueue,e=t.shift();e;)e.$stage&&e.validateDisplayList(),e=t.shift();t.isEmpty()&&(this.invalidateDisplayListFlag=!1)},e.prototype.attachListeners=function(){this.eventDisplay.addEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.addEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),egret.sys.$invalidateRenderFlag=!0,this.listenersAttached=!0},e.prototype.doPhasedInstantiationCallBack=function(t){this.eventDisplay.removeEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.removeEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),this.doPhasedInstantiation()},e.prototype.doPhasedInstantiation=function(){this.invalidatePropertiesFlag&&this.validateProperties(),this.invalidateSizeFlag&&this.validateSize(),this.invalidateDisplayListFlag&&this.validateDisplayList(),this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag?this.attachListeners():this.listenersAttached=!1},e.prototype.validateClient=function(t){var e,i=!1,n=this.targetLevel;this.targetLevel===Number.POSITIVE_INFINITY&&(this.targetLevel=t.$nestLevel);for(var r=this.invalidatePropertiesQueue,o=this.invalidateSizeQueue,s=this.invalidateDisplayListQueue;!i;){for(i=!0,e=r.removeSmallestChild(t);e;)e.$stage&&e.validateProperties(),e=r.removeSmallestChild(t);for(r.isEmpty()&&(this.invalidatePropertiesFlag=!1),this.invalidateClientPropertiesFlag=!1,e=o.removeLargestChild(t);e;){if(e.$stage&&e.validateSize(),this.invalidateClientPropertiesFlag&&(e=r.removeSmallestChild(t))){r.insert(e),i=!1;break}e=o.removeLargestChild(t)}for(o.isEmpty()&&(this.invalidateSizeFlag=!1),this.invalidateClientPropertiesFlag=!1,this.invalidateClientSizeFlag=!1,e=s.removeSmallestChild(t);e;){if(e.$stage&&e.validateDisplayList(),this.invalidateClientPropertiesFlag&&(e=r.removeSmallestChild(t))){r.insert(e),i=!1;break}if(this.invalidateClientSizeFlag&&(e=o.removeLargestChild(t))){o.insert(e),i=!1;break}e=s.removeSmallestChild(t)}s.isEmpty()&&(this.invalidateDisplayListFlag=!1)}n===Number.POSITIVE_INFINITY&&(this.targetLevel=Number.POSITIVE_INFINITY)},e}(egret.EventDispatcher);t.Validator=e,__reflect(e.prototype,"eui.sys.Validator");var i=function(){function t(){this.depthBins={},this.minDepth=0,this.maxDepth=-1}return t.prototype.insert=function(t){var e=t.$nestLevel;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=e:(e<this.minDepth&&(this.minDepth=e),e>this.maxDepth&&(this.maxDepth=e));var i=this.depthBins[e];i||(i=this.depthBins[e]=new n),i.insert(t)},t.prototype.pop=function(){var t,e=this.minDepth;if(e<=this.maxDepth){for(var i=this.depthBins[this.maxDepth];!i||0===i.length;){if(this.maxDepth--,this.maxDepth<e)return null;i=this.depthBins[this.maxDepth]}for(t=i.pop();!(i&&0!=i.length||(this.maxDepth--,this.maxDepth<e));)i=this.depthBins[this.maxDepth]}return t},t.prototype.shift=function(){var t,e=this.maxDepth;if(this.minDepth<=e){for(var i=this.depthBins[this.minDepth];!i||0===i.length;){if(this.minDepth++,this.minDepth>e)return null;i=this.depthBins[this.minDepth]}for(t=i.pop();!(i&&0!=i.length||(this.minDepth++,this.minDepth>e));)i=this.depthBins[this.minDepth]}return t},t.prototype.removeLargestChild=function(t){for(var e=t.$hashCode,i=t.$nestLevel,n=this.maxDepth,r=i;n>=r;){var o=this.depthBins[n];if(o&&o.length>0){if(n===i){if(o.map[e])return o.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var s=o.items,a=o.length,h=0;a>h;h++){var l=s[h];if(t.contains(l))return o.remove(l),l}}n--}else if(n==this.maxDepth&&this.maxDepth--,n--,r>n)break}return null},t.prototype.removeSmallestChild=function(t){for(var e=t.$nestLevel,i=e,n=this.maxDepth,r=t.$hashCode;n>=i;){var o=this.depthBins[i];if(o&&o.length>0){if(i===e){if(o.map[r])return o.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var s=o.items,a=o.length,h=0;a>h;h++){var l=s[h];if(t.contains(l))return o.remove(l),l}}i++}else if(i==this.minDepth&&this.minDepth++,i++,i>n)break}return null},t.prototype.isEmpty=function(){return this.minDepth>this.maxDepth},t}();__reflect(i.prototype,"DepthQueue");var n=function(){function t(){this.map={},this.items=[],this.length=0}return t.prototype.insert=function(t){var e=t.$hashCode;this.map[e]||(this.map[e]=!0,this.length++,this.items.push(t))},t.prototype.pop=function(){var t=this.items.pop();return t&&(this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1),t},t.prototype.remove=function(t){var e=this.items.indexOf(t);e>=0&&(this.items.splice(e,1),this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1)},t}();__reflect(n.prototype,"DepthBin")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){function e(t,e,i,n){var r=t.prototype;r.__meta__=r.__meta__||{},r.__meta__[e]=i,n&&(r.__defaultProperty__=e)}t.registerProperty=e}(eui||(eui={}));var eui;!function(t){var e;!function(e){function i(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d}function n(t,e){if("function"!=typeof t[e])return!1;var i=t[e].toString(),n=i.indexOf("{"),r=i.lastIndexOf("}");return i=i.substring(n+1,r),""==i.trim()}function r(t,e){for(var i in e)"prototype"!=i&&e.hasOwnProperty(i)&&(t[i]=e[i]);for(var r=t.prototype,o=e.prototype,s=Object.keys(o),a=s.length,h=0;a>h;h++){var l=s[h];if("__meta__"!=l&&(!r.hasOwnProperty(l)||n(r,l))){var u=Object.getOwnPropertyDescriptor(o,l);Object.defineProperty(r,l,u)}}}function o(e,i,n){r(e,h);var o=e.prototype;o.$super=i.prototype,t.registerProperty(e,"left","Percentage"),t.registerProperty(e,"right","Percentage"),t.registerProperty(e,"top","Percentage"),t.registerProperty(e,"bottom","Percentage"),t.registerProperty(e,"horizontalCenter","Percentage"),t.registerProperty(e,"verticalCenter","Percentage"),n&&(o.$childAdded=function(t,e){this.invalidateSize(),this.invalidateDisplayList()},o.$childRemoved=function(t,e){this.invalidateSize(),this.invalidateDisplayList()})}var s="eui.UIComponent",a=new e.Validator,h=function(n){function r(){var t=n.call(this)||this;return t.initializeUIValues(),t}return __extends(r,n),r.prototype.initializeUIValues=function(){this.$UIComponent={0:0/0,1:0/0,2:0/0,3:0/0,4:0/0,5:0/0,6:0/0,7:0/0,8:0/0,9:0/0,10:0,11:0,12:0,13:1e5,14:0,15:1e5,16:0,17:0,18:0/0,19:0/0,20:0,21:0,22:0,23:0,24:!0,25:!0,26:!0,27:!1,28:!1,29:!1},this.$includeInLayout=!0,this.$touchEnabled=!0},r.prototype.createChildren=function(){},r.prototype.childrenCreated=function(){},r.prototype.commitProperties=function(){var e=this.$UIComponent;(e[22]!=e[10]||e[23]!=e[11])&&(this.dispatchEventWith(egret.Event.RESIZE),e[22]=e[10],e[23]=e[11]),(e[20]!=this.$getX()||e[21]!=this.$getY())&&(t.UIEvent.dispatchUIEvent(this,t.UIEvent.MOVE),e[20]=this.$getX(),e[21]=this.$getY())},r.prototype.measure=function(){},r.prototype.updateDisplayList=function(t,e){},Object.defineProperty(r.prototype,"includeInLayout",{get:function(){return this.$includeInLayout},set:function(t){t=!!t,this.$includeInLayout!==t&&(this.$includeInLayout=!0,this.invalidateParentLayout(),this.$includeInLayout=t)},enumerable:!0,configurable:!0}),r.prototype.$onAddToStage=function(e,i){this.$super.$onAddToStage.call(this,e,i),this.checkInvalidateFlag();var n=this.$UIComponent;n[29]||(n[29]=!0,this.createChildren(),this.childrenCreated(),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CREATION_COMPLETE))},r.prototype.checkInvalidateFlag=function(t){var e=this.$UIComponent;e[24]&&a.invalidateProperties(this),e[25]&&a.invalidateSize(this),e[26]&&a.invalidateDisplayList(this)},Object.defineProperty(r.prototype,"left",{get:function(){return this.$UIComponent[0]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[0]!==t&&(e[0]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$UIComponent[1]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[1]!==t&&(e[1]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$UIComponent[2]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[2]!==t&&(e[2]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$UIComponent[3]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[3]!=t&&(e[3]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalCenter",{get:function(){return this.$UIComponent[4]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[4]!==t&&(e[4]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"verticalCenter",{get:function(){return this.$UIComponent[5]},set:function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[5]!==t&&(e[5]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percentWidth",{get:function(){return this.$UIComponent[6]},set:function(t){t=+t;var e=this.$UIComponent;e[6]!==t&&(e[6]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percentHeight",{get:function(){return this.$UIComponent[7]},set:function(t){t=+t;var e=this.$UIComponent;e[7]!==t&&(e[7]=t,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"explicitWidth",{get:function(){return this.$UIComponent[8]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"explicitHeight",{get:function(){return this.$UIComponent[9]},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){return this.validateSizeNow(),this.$UIComponent[10]},r.prototype.$setWidth=function(t){t=+t;var e=this.$UIComponent;return 0>t||e[10]===t&&e[8]===t?!1:(e[8]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},r.prototype.validateSizeNow=function(){this.validateSize(!0),this.updateFinalSize()},r.prototype.$getHeight=function(){return this.validateSizeNow(),this.$UIComponent[11]},r.prototype.$setHeight=function(t){t=+t;var e=this.$UIComponent;return 0>t||e[11]===t&&e[9]===t?!1:(e[9]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},Object.defineProperty(r.prototype,"minWidth",{get:function(){return this.$UIComponent[12]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[12]===t||(e[12]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this.$UIComponent[13]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[13]===t||(e[13]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minHeight",{get:function(){return this.$UIComponent[14]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[14]===t||(e[14]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxHeight",{get:function(){return this.$UIComponent[15]},set:function(t){t=+t||0;var e=this.$UIComponent;0>t||e[15]===t||(e[15]=t,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),r.prototype.setMeasuredSize=function(t,e){var i=this.$UIComponent;i[16]=Math.ceil(+t||0),i[17]=Math.ceil(+e||0)},r.prototype.setActualSize=function(t,e){var i=!1,n=this.$UIComponent;n[10]!==t&&(n[10]=t,i=!0),n[11]!==e&&(n[11]=e,i=!0),i&&(this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.RESIZE))},r.prototype.$invalidateMatrix=function(){this.$super.$invalidateMatrix.call(this),this.invalidateParentLayout()},r.prototype.$setMatrix=function(t,e){return void 0===e&&(e=!0),this.$super.$setMatrix.call(this,t,e),this.invalidateParentLayout(),!0},r.prototype.$setAnchorOffsetX=function(t){return this.$super.$setAnchorOffsetX.call(this,t),this.invalidateParentLayout(),!0},r.prototype.$setAnchorOffsetY=function(t){return this.$super.$setAnchorOffsetY.call(this,t),this.invalidateParentLayout(),!0},r.prototype.$setX=function(t){var e=this.$super.$setX.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},r.prototype.$setY=function(t){var e=this.$super.$setY.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},r.prototype.invalidateProperties=function(){var t=this.$UIComponent;t[24]||(t[24]=!0,this.$stage&&a.invalidateProperties(this))},r.prototype.validateProperties=function(){var t=this.$UIComponent;t[24]&&(this.commitProperties(),t[24]=!1)},r.prototype.invalidateSize=function(){var t=this.$UIComponent;t[25]||(t[25]=!0,this.$stage&&a.invalidateSize(this))},r.prototype.validateSize=function(t){if(t){var e=this.$children;if(e)for(var i=e.length,n=0;i>n;n++){var r=e[n];egret.is(r,s)&&r.validateSize(!0)}}var o=this.$UIComponent;if(o[25]){var a=this.measureSizes();a&&(this.invalidateDisplayList(),this.invalidateParentLayout()),o[25]=!1}},r.prototype.measureSizes=function(){var t=!1,e=this.$UIComponent;if(!e[25])return t;(isNaN(e[8])||isNaN(e[9]))&&(this.measure(),e[16]<e[12]&&(e[16]=e[12]),e[16]>e[13]&&(e[16]=e[13]),e[17]<e[14]&&(e[17]=e[14]),e[17]>e[15]&&(e[17]=e[15]));var i=this.getPreferredUWidth(),n=this.getPreferredUHeight();return(i!==e[18]||n!==e[19])&&(e[18]=i,e[19]=n,t=!0),t},r.prototype.invalidateDisplayList=function(){var t=this.$UIComponent;t[26]||(t[26]=!0,this.$stage&&a.invalidateDisplayList(this))},r.prototype.validateDisplayList=function(){var t=this.$UIComponent;t[26]&&(this.updateFinalSize(),this.updateDisplayList(t[10],t[11]),t[26]=!1)},r.prototype.updateFinalSize=function(){var t=0,e=0,i=this.$UIComponent;t=i[27]?i[10]:isNaN(i[8])?i[16]:i[8],e=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.setActualSize(t,e)},r.prototype.validateNow=function(){this.$stage&&a.validateClient(this)},r.prototype.invalidateParentLayout=function(){var t=this.$parent;t&&this.$includeInLayout&&egret.is(t,s)&&(t.invalidateSize(),t.invalidateDisplayList())},r.prototype.setLayoutBoundsSize=function(t,n){if(n=+n,t=+t,!(0>n||0>t)){var r,o,s=this.$UIComponent,a=s[13],h=s[15],l=Math.min(s[12],a),u=Math.min(s[14],h);isNaN(t)?(s[27]=!1,r=this.getPreferredUWidth()):(s[27]=!0,r=Math.max(l,Math.min(a,t))),isNaN(n)?(s[28]=!1,o=this.getPreferredUHeight()):(s[28]=!0,o=Math.max(u,Math.min(h,n)));var p=this.getAnchorMatrix();if(i(p))return void this.setActualSize(r,o);var c=e.MatrixUtil.fitBounds(t,n,p,s[8],s[9],this.getPreferredUWidth(),this.getPreferredUHeight(),l,u,a,h);c||(c=egret.Point.create(l,u)),this.setActualSize(c.x,c.y),egret.Point.release(c)}},r.prototype.setLayoutBoundsPosition=function(e,n){var r=this.$getMatrix();if(!i(r)||0!=this.anchorOffsetX||0!=this.anchorOffsetY){var o=egret.$TempRectangle;this.getLayoutBounds(o),e+=this.$getX()-o.x,n+=this.$getY()-o.y}var s=this.$super.$setX.call(this,e);(this.$super.$setY.call(this,n)||s)&&t.UIEvent.dispatchUIEvent(this,t.UIEvent.MOVE)},r.prototype.getLayoutBounds=function(t){var e,i=this.$UIComponent;e=i[27]?i[10]:isNaN(i[8])?i[16]:i[8];var n;n=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.applyMatrix(t,e,n)},r.prototype.getPreferredUWidth=function(){var t=this.$UIComponent;return isNaN(t[8])?t[16]:t[8]},r.prototype.getPreferredUHeight=function(){var t=this.$UIComponent;return isNaN(t[9])?t[17]:t[9]},r.prototype.getPreferredBounds=function(t){var e=this.getPreferredUWidth(),i=this.getPreferredUHeight();this.applyMatrix(t,e,i)},r.prototype.applyMatrix=function(t,e,n){t.setTo(0,0,e,n);var r=this.getAnchorMatrix();i(r)?(t.x+=r.tx,t.y+=r.ty):r.$transformBounds(t)},r.prototype.getAnchorMatrix=function(){var t=this.$getMatrix(),e=this.anchorOffsetX,i=this.anchorOffsetY;if(0!=e||0!=i){var n=egret.$TempMatrix;return t.$preMultiplyInto(n.setTo(1,0,0,1,-e,-i),n),n}return t},r}(egret.DisplayObject);e.UIComponentImpl=h,__reflect(h.prototype,"eui.sys.UIComponentImpl",["eui.UIComponent","egret.DisplayObject"]),e.mixin=r,e.implementUIComponent=o}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=[]);var n=e.call(this)||this;return n.name=t,n.overrides=i,n}return __extends(i,e),i.prototype.initialize=function(e,i){for(var n=this.overrides,r=n.length,o=0;r>o;o++){var s=n[o];if(s instanceof t.AddItems){var a=e[s.target];a&&a instanceof t.Image&&!a.$parent&&(i.addChild(a),i.removeChild(a))}}},i}(egret.HashObject);t.State=e,__reflect(e.prototype,"eui.State")}(eui||(eui={})),function(t){var e;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"states",{get:function(){return this.$stateValues.states},set:function(t){t||(t=[]);var e=this.$stateValues;e.states=t;for(var i={},n=t.length,r=0;n>r;r++){var o=t[r];i[o.name]=o}e.statesMap=i,e.parent&&this.commitCurrentState()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentState",{get:function(){return this.$stateValues.currentState},set:function(t){var e=this.$stateValues;e.explicitState=t,e.currentState=t,this.commitCurrentState()},enumerable:!0,configurable:!0}),t.prototype.commitCurrentState=function(){var t=this.$stateValues;if(t.parent){var e=t.statesMap[t.currentState];if(!e){if(!(t.states.length>0))return;t.currentState=t.states[0].name}if(t.oldState!=t.currentState){var i=t.parent,n=t.statesMap[t.oldState];if(n)for(var r=n.overrides,o=r.length,s=0;o>s;s++)r[s].remove(this,i);if(t.oldState=t.currentState,n=t.statesMap[t.currentState])for(var r=n.overrides,a=r.length,s=0;a>s;s++)r[s].apply(this,i)}}},t.prototype.hasState=function(t){return!!this.$stateValues.statesMap[t]},t.prototype.initializeStates=function(t){this.$stateValues.intialized=!0;for(var e=this.states,i=e.length,n=0;i>n;n++)e[n].initialize(this,t)},t}();t.StateClient=e,__reflect(e.prototype,"eui.sys.StateClient");var i=function(){function t(){this.intialized=!1,this.statesMap={},this.states=[],this.oldState=null,this.explicitState=null,this.currentState=null,this.parent=null,this.stateIsDirty=!1}return t}();t.StateValues=i,__reflect(i.prototype,"eui.sys.StateValues")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initializeUIValues(),t.$Component={0:null,1:null,2:"",3:!0,4:!1,5:!1,6:!0,7:!0,8:null},t.$touchEnabled=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"hostComponentKey",{get:function(){return this.$Component[0]},set:function(t){this.$Component[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skinName",{get:function(){return this.$Component[1]},set:function(t){var e=this.$Component;if(e[5]=!0,e[1]!=t){if(t)e[1]=t;else{var i=egret.getImplementation("eui.Theme");if(i){var n=i.getSkinName(this);n&&(e[1]=n)}}this.$parseSkinName()}},enumerable:!0,configurable:!0}),i.prototype.$parseSkinName=function(){var t,e=this.skinName;if(e)if(e.prototype)t=new e;else if("string"==typeof e){var i=void 0,n=e.trim();if("<"==n.charAt(0))i=EXML.parse(n);else if(i=egret.getDefinitionByName(e),!i&&-1!=n.toLowerCase().indexOf(".exml"))return void EXML.load(e,this.onExmlLoaded,this,!0);i&&(t=new i)}else t=e;this.setSkin(t)},i.prototype.onExmlLoaded=function(t,e){if(this.skinName==e){var i=new t;this.setSkin(i)}},Object.defineProperty(i.prototype,"skin",{get:function(){return this.$Component[8]},enumerable:!0,configurable:!0}),i.prototype.setSkin=function(e){!e||e instanceof t.Skin||(e=null);var i=this.$Component,n=i[8];if(n){for(var r=n.skinParts,o=r.length,s=0;o>s;s++){var a=r[s];this[a]&&this.setSkinPart(a,null)}var h=n.$elementsContent;if(h){o=h.length;for(var s=0;o>s;s++){var l=h[s];l.$parent==this&&this.removeChild(l)}}n.hostComponent=null}if(i[8]=e,e){for(var r=e.skinParts,u=r.length,s=0;u>s;s++){var a=r[s],p=e[a];p&&this.setSkinPart(a,p)}var h=e.$elementsContent;if(h)for(var s=h.length-1;s>=0;s--)this.addChildAt(h[s],0);e.hostComponent=this}this.invalidateSize(),this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.COMPLETE)},i.prototype.setSkinPart=function(t,e){var i=this[t];i&&this.partRemoved(t,i),this[t]=e,e&&this.partAdded(t,e)},i.prototype.partAdded=function(t,e){},i.prototype.partRemoved=function(t,e){},i.prototype.$setTouchChildren=function(t){t=!!t;var i=this.$Component;return i[6]=t,i[3]?(i[6]=t,e.prototype.$setTouchChildren.call(this,t)):!0},i.prototype.$setTouchEnabled=function(t){t=!!t;var i=this.$Component;return i[7]=t,i[3]?e.prototype.$setTouchEnabled.call(this,t):!0},Object.defineProperty(i.prototype,"enabled",{get:function(){return this.$Component[3]},set:function(t){t=!!t,this.$setEnabled(t)},enumerable:!0,configurable:!0}),i.prototype.$setEnabled=function(t){var e=this.$Component;return t===e[3]?!1:(e[3]=t,t?(this.$touchEnabled=e[7],this.$touchChildren=e[6]):(this.$touchEnabled=!1,this.$touchChildren=!1),this.invalidateState(),!0)},Object.defineProperty(i.prototype,"currentState",{get:function(){var t=this.$Component;return t[2]?t[2]:this.getCurrentState()},set:function(t){var e=this.$Component;t!=e[2]&&(e[2]=t,this.invalidateState())},enumerable:!0,configurable:!0}),i.prototype.invalidateState=function(){var t=this.$Component;t[4]||(t[4]=!0,this.invalidateProperties())},i.prototype.getCurrentState=function(){return""},i.prototype.createChildren=function(){var t=this.$Component;if(!t[1]){var e=egret.getImplementation("eui.Theme");if(e){var i=e.getSkinName(this);i&&(t[1]=i,this.$parseSkinName())}}},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$Component;e[4]&&(e[4]=!1,e[8]&&(e[8].currentState=this.currentState))},i.prototype.measure=function(){t.sys.measure(this);var e=this.$Component[8];if(e){var i=this.$UIComponent;isNaN(e.width)?(i[16]<e.minWidth&&(i[16]=e.minWidth),i[16]>e.maxWidth&&(i[16]=e.maxWidth)):i[16]=e.width,isNaN(e.height)?(i[17]<e.minHeight&&(i[17]=e.minHeight),i[17]>e.maxHeight&&(i[17]=e.maxHeight)):i[17]=e.height}},i.prototype.updateDisplayList=function(e,i){t.sys.updateDisplayList(this,e,i)},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(t,e){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(t){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(t,e){},i.prototype.setLayoutBoundsPosition=function(t,e){},i.prototype.getLayoutBounds=function(t){},i.prototype.getPreferredBounds=function(t){},i}(egret.DisplayObjectContainer);t.Component=e,__reflect(e.prototype,"eui.Component",["eui.UIComponent","egret.DisplayObject"]),t.registerProperty(e,"skinName","Class"),t.sys.implementUIComponent(e,egret.DisplayObjectContainer,!0)}(eui||(eui={}));var eui;!function(t){function e(t,e){if(t.hasOwnProperty(i))t[i].push(e);else{var n=[e];t[i]&&(n=t[i].concat(n)),t[i]=n}}var i="__bindables__";t.registerBindable=e}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$layout=null,i.$stateValues=new t.sys.StateValues,i.initializeUIValues(),i.$Group={0:0,1:0,2:0,3:0,4:!1,5:!1},i.$stateValues.parent=i,i}return __extends(i,e),Object.defineProperty(i.prototype,"elementsContent",{set:function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this.$layout},set:function(t){this.$setLayout(t)},enumerable:!0,configurable:!0}),i.prototype.$setLayout=function(t){return this.$layout==t?!1:(this.$layout&&(this.$layout.target=null),this.$layout=t,t&&(t.target=this),this.invalidateSize(),this.invalidateDisplayList(),!0)},Object.defineProperty(i.prototype,"contentWidth",{get:function(){return this.$Group[0]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHeight",{get:function(){return this.$Group[1]},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(e,i){e=Math.ceil(+e||0),i=Math.ceil(+i||0);var n=this.$Group,r=n[0]!==e,o=n[1]!==i;(r||o)&&(n[0]=e,n[1]=i,r&&t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentWidth"),o&&t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentHeight"))},Object.defineProperty(i.prototype,"scrollEnabled",{get:function(){return this.$Group[4]},set:function(t){t=!!t;var e=this.$Group;t!==e[4]&&(e[4]=t,this.updateScrollRect())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollH",{get:function(){return this.$Group[2]},set:function(e){e=+e||0;var i=this.$Group;e!==i[2]&&(i[2]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollH"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollV",{get:function(){return this.$Group[3]},set:function(e){e=+e||0;var i=this.$Group;e!=i[3]&&(i[3]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollV"))},enumerable:!0,configurable:!0}),i.prototype.updateScrollRect=function(){var t=this.$Group,e=t[4];if(e){var i=this.$UIComponent;this.scrollRect=egret.$TempRectangle.setTo(t[2],t[3],i[10],i[11])}else this.$scrollRect&&(this.scrollRect=null);return e},Object.defineProperty(i.prototype,"numElements",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.getElementAt=function(t){return this.$children[t]},i.prototype.getVirtualElementAt=function(t){return this.getElementAt(t)},i.prototype.setVirtualElementIndicesInView=function(t,e){},Object.defineProperty(i.prototype,"touchThrough",{get:function(){return this.$Group[5]},set:function(t){this.$Group[5]=!!t},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);if(n||this.$Group[5])return n;if(!this.$visible||!this.touchEnabled)return null;var r=this.globalToLocal(t,i,egret.$TempPoint),o=this.$UIComponent,s=egret.$TempRectangle.setTo(0,0,o[10],o[11]),a=this.$scrollRect;return a&&(s.x=a.x,s.y=a.y),s.contains(r.x,r.y)?this:null},i.prototype.invalidateState=function(){var t=this.$stateValues;t.stateIsDirty||(t.stateIsDirty=!0,this.invalidateProperties())},i.prototype.getCurrentState=function(){return""},i.prototype.createChildren=function(){this.$layout||this.$setLayout(new t.BasicLayout),this.initializeStates(this.$stage)},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$stateValues;e.stateIsDirty&&(e.stateIsDirty=!1,e.explicitState||(e.currentState=this.getCurrentState(),this.commitCurrentState()))},i.prototype.measure=function(){return this.$layout?void this.$layout.measure():void this.setMeasuredSize(0,0)},i.prototype.updateDisplayList=function(t,e){this.$layout&&this.$layout.updateDisplayList(t,e),this.updateScrollRect()},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(t,e){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(t){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(t,e){},i.prototype.setLayoutBoundsPosition=function(t,e){},i.prototype.getLayoutBounds=function(t){},i.prototype.getPreferredBounds=function(t){},i}(egret.DisplayObjectContainer);t.Group=e,__reflect(e.prototype,"eui.Group",["eui.IViewport","eui.UIComponent","egret.DisplayObject"]),t.sys.implementUIComponent(e,egret.DisplayObjectContainer,!0),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$dataProviderChanged=!1,t.$dataProvider=null,t.$indexToRenderer=[],t.$DataGroup={0:!0,1:!1,2:{},3:{},4:!1,5:!1,6:null,7:null,8:!1,9:null,10:!1,11:!1,12:null,13:null,14:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"useVirtualLayout",{get:function(){return this.$layout?this.$layout.$useVirtualLayout:this.$DataGroup[0]},set:function(t){t=!!t;var e=this.$DataGroup;t!==e[0]&&(e[0]=t,this.$layout&&(this.$layout.useVirtualLayout=t))},enumerable:!0,configurable:!0}),i.prototype.$setLayout=function(t){if(t==this.$layout)return!1;this.$layout&&(this.$layout.setTypicalSize(0,0),this.$layout.removeEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)),this.$layout&&t&&this.$layout.$useVirtualLayout!=t.$useVirtualLayout&&this.onUseVirtualLayoutChanged();var i=e.prototype.$setLayout.call(this,t);if(t){var n=this.$DataGroup[9];n&&t.setTypicalSize(n.width,n.height),t.useVirtualLayout=this.$DataGroup[0],t.addEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}return i},i.prototype.onUseVirtualLayoutChanged=function(t){var e=this.$DataGroup;e[1]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties()},i.prototype.setVirtualElementIndicesInView=function(t,e){if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),r=n.length,o=0;r>o;o++){var s=+n[o];(t>s||s>e)&&this.freeRendererByIndex(s)}},i.prototype.getElementAt=function(t){return this.$indexToRenderer[t]},i.prototype.getVirtualElementAt=function(t){if(t=0|+t,0>t||t>=this.$dataProvider.length)return null;var e=this.$indexToRenderer[t];if(!e){var i=this.$dataProvider.getItemAt(t);e=this.createVirtualRenderer(i),this.$indexToRenderer[t]=e,this.updateRenderer(e,t,i);var n=this.$DataGroup;
n[4]&&(e.validateNow(),n[4]=!1,this.rendererAdded(e,t,i))}return e},i.prototype.freeRendererByIndex=function(t){var e=this.$indexToRenderer[t];e&&(delete this.$indexToRenderer[t],this.doFreeRenderer(e))},i.prototype.doFreeRenderer=function(t){var e=this.$DataGroup,i=e[2][t.$hashCode],n=i.$hashCode;e[3][n]||(e[3][n]=[]),e[3][n].push(t),t.visible=!1},i.prototype.invalidateSize=function(){this.$DataGroup[4]||e.prototype.invalidateSize.call(this)},i.prototype.createVirtualRenderer=function(t){var e,i=this.itemToRendererClass(t),n=i.$hashCode,r=this.$DataGroup,o=r[3];return o[n]&&o[n].length>0?(e=o[n].pop(),e.visible=!0,this.invalidateDisplayList(),e):(r[4]=!0,this.createOneRenderer(i))},i.prototype.createOneRenderer=function(t){var e=new t,i=this.$DataGroup;return i[2][e.$hashCode]=t,egret.is(e,"eui.IItemRenderer")?(i[13]&&this.setItemRenderSkinName(e,i[13]),this.addChild(e),e):null},i.prototype.setItemRenderSkinName=function(e,i){if(e&&e instanceof t.Component){var n=e;n.$Component[5]||(n.skinName=i,n.$Component[5]=!1)}},Object.defineProperty(i.prototype,"dataProvider",{get:function(){return this.$dataProvider},set:function(t){this.$setDataProvider(t)},enumerable:!0,configurable:!0}),i.prototype.$setDataProvider=function(t){return this.$dataProvider==t||t&&!t.getItemAt?!1:(this.removeDataProviderListener(),this.$dataProvider=t,this.$dataProviderChanged=!0,this.$DataGroup[10]=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList(),!0)},i.prototype.removeDataProviderListener=function(){this.$dataProvider&&this.$dataProvider.removeEventListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)},i.prototype.onCollectionChange=function(e){switch(e.kind){case t.CollectionEventKind.ADD:this.itemAddedHandler(e.items,e.location);break;case t.CollectionEventKind.REMOVE:this.itemRemovedHandler(e.items,e.location);break;case t.CollectionEventKind.UPDATE:case t.CollectionEventKind.REPLACE:this.itemUpdatedHandler(e.items[0],e.location);break;case t.CollectionEventKind.RESET:case t.CollectionEventKind.REFRESH:if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),r=n.length,o=r-1;o>=0;o--){var s=+n[o];this.freeRendererByIndex(s)}this.$dataProviderChanged=!0,this.invalidateProperties()}this.invalidateSize(),this.invalidateDisplayList()},i.prototype.itemAddedHandler=function(t,e){for(var i=t.length,n=0;i>n;n++)this.itemAdded(t[n],e+n);this.resetRenderersIndices()},i.prototype.itemRemovedHandler=function(t,e){for(var i=t.length,n=i-1;n>=0;n--)this.itemRemoved(t[n],e+n);this.resetRenderersIndices()},i.prototype.itemAdded=function(t,e){if(this.$layout&&this.$layout.elementAdded(e),this.$layout&&this.$layout.$useVirtualLayout)return void this.$indexToRenderer.splice(e,0,null);var i=this.createVirtualRenderer(t);if(this.$indexToRenderer.splice(e,0,i),i){this.updateRenderer(i,e,t);var n=this.$DataGroup;n[4]&&(n[4]=!1,this.rendererAdded(i,e,t))}},i.prototype.itemRemoved=function(t,e){this.$layout&&this.$layout.elementRemoved(e);var i=this.$indexToRenderer[e];this.$indexToRenderer.length>e&&this.$indexToRenderer.splice(e,1),i&&(this.$layout&&this.$layout.$useVirtualLayout?this.doFreeRenderer(i):(this.rendererRemoved(i,e,t),this.removeChild(i)))},i.prototype.resetRenderersIndices=function(){var t=this.$indexToRenderer;if(0!=t.length)if(this.$layout&&this.$layout.$useVirtualLayout)for(var e=Object.keys(t),i=e.length,n=0;i>n;n++){var r=+e[n];this.resetRendererItemIndex(r)}else for(var o=t.length,r=0;o>r;r++)this.resetRendererItemIndex(r)},i.prototype.itemUpdatedHandler=function(t,e){if(!this.$DataGroup[11]){var i=this.$indexToRenderer[e];i&&this.updateRenderer(i,e,t)}},i.prototype.resetRendererItemIndex=function(t){var e=this.$indexToRenderer[t];e&&(e.itemIndex=t)},Object.defineProperty(i.prototype,"itemRenderer",{get:function(){return this.$DataGroup[6]},set:function(t){var e=this.$DataGroup;e[6]!=t&&(e[6]=t,e[5]=!0,e[8]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererSkinName",{get:function(){return this.$DataGroup[13]},set:function(t){var e=this.$DataGroup;e[13]!=t&&(e[13]=t,this.$UIComponent[29]&&(e[14]=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererFunction",{get:function(){return this.$DataGroup[7]},set:function(t){var e=this.$DataGroup;e[7]!=t&&(e[7]=t,e[5]=!0,e[8]=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.itemToRendererClass=function(e){var i,n=this.$DataGroup;return n[7]&&(i=n[7](e)),i||(i=n[6]),i||(i=t.ItemRenderer),i.$hashCode||(i.$hashCode=egret.$hashCount++),i},i.prototype.createChildren=function(){if(!this.$layout){var i=new t.VerticalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},i.prototype.commitProperties=function(){var i=this.$DataGroup;if((i[5]||this.$dataProviderChanged||i[1])&&(this.removeAllRenderers(),this.$layout&&this.$layout.clearVirtualLayoutCache(),this.setTypicalLayoutRect(null),i[1]=!1,i[5]=!1,this.$dataProvider&&this.$dataProvider.addEventListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this),this.$layout&&this.$layout.$useVirtualLayout?(this.invalidateSize(),this.invalidateDisplayList()):this.createRenderers(),this.$dataProviderChanged&&(this.$dataProviderChanged=!1,this.scrollV=this.scrollH=0)),e.prototype.commitProperties.call(this),i[8]&&(i[8]=!1,this.$dataProvider&&this.$dataProvider.length>0&&(i[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())),i[14]){i[14]=!1;for(var n=i[13],r=this.$indexToRenderer,o=Object.keys(r),s=o.length,a=0;s>a;a++){var h=o[a];this.setItemRenderSkinName(r[h],n)}var l=i[3];o=Object.keys(l),s=o.length;for(var a=0;s>a;a++)for(var u=o[a],p=l[u],c=p.length,d=0;c>d;d++)this.setItemRenderSkinName(p[d],n)}},i.prototype.measure=function(){this.$layout&&this.$layout.$useVirtualLayout&&this.ensureTypicalLayoutElement(),e.prototype.measure.call(this)},i.prototype.updateDisplayList=function(t,i){var n=this.$layout&&this.$layout.$useVirtualLayout;n&&this.ensureTypicalLayoutElement(),e.prototype.updateDisplayList.call(this,t,i);var r=this.$DataGroup;if(n){var o=r[9];if(o){var s=this.$indexToRenderer[0];if(s){var a=egret.$TempRectangle;s.getPreferredBounds(a),(a.width!=o.width||a.height!=o.height)&&(r[9]=null)}}}},i.prototype.ensureTypicalLayoutElement=function(){this.$DataGroup[9]||this.$dataProvider&&this.$dataProvider.length>0&&(this.$DataGroup[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())},i.prototype.measureRendererSize=function(){var t=this.$DataGroup;if(!t[12])return void this.setTypicalLayoutRect(null);var e=this.createVirtualRenderer(t[12]);if(!e)return void this.setTypicalLayoutRect(null);this.updateRenderer(e,0,t[12]),e.validateNow();var i=egret.$TempRectangle;e.getPreferredBounds(i);var n=new egret.Rectangle(0,0,i.width,i.height);this.$layout&&this.$layout.$useVirtualLayout?(t[4]&&this.rendererAdded(e,0,t[12]),this.doFreeRenderer(e)):this.removeChild(e),this.setTypicalLayoutRect(n),t[4]=!1},i.prototype.setTypicalLayoutRect=function(t){this.$DataGroup[9]=t,this.$layout&&(t?this.$layout.setTypicalSize(t.width,t.height):this.$layout.setTypicalSize(0,0))},i.prototype.removeAllRenderers=function(){for(var t=this.$indexToRenderer,e=Object.keys(t),i=e.length,n=0;i>n;n++){var r=e[n],o=t[r];o&&(this.rendererRemoved(o,o.itemIndex,o.data),this.removeChild(o))}this.$indexToRenderer=[];var s=this.$DataGroup;if(s[10]){for(var a=s[3],h=Object.keys(a),l=h.length,n=0;l>n;n++)for(var u=h[n],p=a[u],c=p.length,d=0;c>d;d++){var o=p[d];this.rendererRemoved(o,o.itemIndex,o.data),this.removeChild(o)}s[3]={},s[2]={},s[10]=!1}},i.prototype.createRenderers=function(){if(this.$dataProvider)for(var t=0,e=this.$dataProvider.length,i=0;e>i;i++){var n=this.$dataProvider.getItemAt(i),r=this.itemToRendererClass(n),o=this.createOneRenderer(r);o&&(this.$indexToRenderer[t]=o,this.updateRenderer(o,t,n),this.rendererAdded(o,t,n),t++)}},i.prototype.updateRenderer=function(t,e,i){var n=this.$DataGroup;return n[11]=!0,t.itemIndex=e,t.data=i,n[11]=!1,t},Object.defineProperty(i.prototype,"numElements",{get:function(){return this.$dataProvider?this.$dataProvider.length:0},enumerable:!0,configurable:!0}),i.prototype.rendererAdded=function(t,e,i){},i.prototype.rendererRemoved=function(t,e,i){},i}(t.Group);t.DataGroup=e,__reflect(e.prototype,"eui.DataGroup"),t.registerProperty(e,"itemRenderer","Class"),t.registerProperty(e,"itemRendererSkinName","Class"),t.registerProperty(e,"dataProvider","eui.ICollection",!0)}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.labelDisplay=null,e._label="",e.iconDisplay=null,e._icon=null,e.touchCaptured=!1,e.touchChildren=!1,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),e}return __extends(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t,this.labelDisplay&&(this.labelDisplay.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=t)},enumerable:!0,configurable:!0}),e.prototype.onTouchCancle=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},e.prototype.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},e.prototype.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.contains(t.target)&&this.buttonReleased(),this.touchCaptured=!1,this.invalidateState()},e.prototype.getCurrentState=function(){return this.enabled?this.touchCaptured?"down":"up":"disabled"},e.prototype.partAdded=function(t,e){e===this.labelDisplay?this.labelDisplay.text=this._label:e==this.iconDisplay&&(this.iconDisplay.source=this._icon)},e.prototype.buttonReleased=function(){},e}(t.Component);t.Button=e,__reflect(e.prototype,"eui.Button")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$Range={0:100,1:!1,2:0,3:!1,4:0,5:0,6:!1,7:1,8:!1,9:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"maximum",{get:function(){return this.$Range[0]},set:function(t){t=+t||0;var e=this.$Range;t!==e[0]&&(e[0]=t,e[1]=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this.$Range[2]},set:function(t){t=+t||0;var e=this.$Range;t!==e[2]&&(e[2]=t,e[3]=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this.$Range;return t[6]?t[5]:t[4]},set:function(t){t=+t||0,this.$setValue(t)},enumerable:!0,configurable:!0}),i.prototype.$setValue=function(t){if(t===this.value)return!1;var e=this.$Range;return e[5]=t,e[6]=!0,this.invalidateProperties(),!0},Object.defineProperty(i.prototype,"snapInterval",{get:function(){return this.$Range[7]},set:function(t){var e=this.$Range;e[9]=!0,t=+t||0,t!==e[7]&&(isNaN(t)?(e[7]=1,e[9]=!1):e[7]=t,e[8]=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this);var t=this.$Range;if(t[2]>t[0]&&(t[1]?t[0]=t[2]:t[2]=t[0]),t[6]||t[1]||t[3]||t[8]){var i=t[6]?t[5]:t[4];t[6]=!1,t[1]=!1,t[3]=!1,t[8]=!1,this.setValue(this.nearestValidValue(i,t[7]))}},i.prototype.nearestValidSize=function(t){var e=this.snapInterval;if(0==e)return t;var i=Math.round(t/e)*e;return Math.abs(i)<e?e:i},i.prototype.nearestValidValue=function(t,e){var i=this.$Range;if(0==e)return Math.max(i[2],Math.min(i[0],t));var n=i[0]-i[2],r=1;if(t-=i[2],e!=Math.round(e)){var o=(1+e).toString().split(".");r=Math.pow(10,o[1].length),n*=r,t=Math.round(t*r),e=Math.round(e*r)}var s=Math.max(0,Math.floor(t/e)*e),a=Math.min(n,Math.floor((t+e)/e)*e),h=t-s>=(a-s)/2?a:s;return h/r+i[2]},i.prototype.setValue=function(e){var i=this.$Range;i[4]!==e&&(i[0]>i[2]?i[4]=Math.min(i[0],Math.max(i[2],e)):i[4]=e,i[6]=!1,this.invalidateDisplayList(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"value"))},i.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this.updateSkinDisplayList()},i.prototype.updateSkinDisplayList=function(){},i}(t.Component);t.Range=e,__reflect(e.prototype,"eui.Range"),t.registerBindable(e.prototype,"value")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.$target=null,e.$useVirtualLayout=!1,e.$typicalWidth=71,e.$typicalHeight=22,e}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},set:function(t){this.$target!==t&&(this.$target=t,this.clearVirtualLayoutCache())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useVirtualLayout",{get:function(){return this.$useVirtualLayout},set:function(t){t=!!t,this.$useVirtualLayout!=t&&(this.$useVirtualLayout=t,this.dispatchEventWith("useVirtualLayoutChanged"),this.$useVirtualLayout&&!t&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),e.prototype.setTypicalSize=function(t,e){t=+t||71,e=+e||22,(t!==this.$typicalWidth||e!==this.$typicalHeight)&&(this.$typicalWidth=t,this.$typicalHeight=e,this.$target&&this.$target.invalidateSize())},e.prototype.scrollPositionChanged=function(){},e.prototype.clearVirtualLayoutCache=function(){},e.prototype.elementAdded=function(t){},e.prototype.elementRemoved=function(t){},e.prototype.getElementIndicesInView=function(){return null},e.prototype.measure=function(){},e.prototype.updateDisplayList=function(t,e){},e}(egret.EventDispatcher);t.LayoutBase=e,__reflect(e.prototype,"eui.LayoutBase")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.apply(this,arguments)||this;return t.$selected=!1,t.$autoSelected=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"selected",{get:function(){return this.$selected},set:function(t){this.$setSelected(t)},enumerable:!0,configurable:!0}),i.prototype.$setSelected=function(e){return e=!!e,e===this.$selected?!1:(this.$selected=e,this.invalidateState(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selected"),!0)},i.prototype.getCurrentState=function(){var t=e.prototype.getCurrentState.call(this);if(this.$selected){var i=t+"AndSelected",n=this.skin;return n&&n.hasState(i)?i:"disabled"==t?"disabled":"down"}return t},i.prototype.buttonReleased=function(){this.$autoSelected&&(this.selected=!this.$selected,this.dispatchEventWith(egret.Event.CHANGE))},i}(t.Button);t.ToggleButton=e,__reflect(e.prototype,"eui.ToggleButton"),t.registerBindable(e.prototype,"selected")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$ListBase={0:!1,1:!1,2:-2,3:-1,4:!1,5:void 0,6:!1,7:null,8:!1},t}return __extends(i,e),Object.defineProperty(i.prototype,"requireSelection",{get:function(){return this.$ListBase[0]},set:function(t){t=!!t;var e=this.$ListBase;t!==e[0]&&(e[0]=t,t&&(e[1]=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.$getSelectedIndex()},set:function(t){t=0|+t,this.setSelectedIndex(t,!1)},enumerable:!0,configurable:!0}),i.prototype.$getSelectedIndex=function(){var t=this.$ListBase;return t[2]!=i.NO_PROPOSED_SELECTION?t[2]:t[3]},i.prototype.setSelectedIndex=function(t,e){if(t!=this.selectedIndex){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[2]=t,this.invalidateProperties()}},Object.defineProperty(i.prototype,"selectedItem",{get:function(){var t=this.$ListBase;if(void 0!==t[5])return t[5];var e=this.$getSelectedIndex();if(e!=i.NO_SELECTION&&null!=this.$dataProvider)return this.$dataProvider.length>e?this.$dataProvider.getItemAt(e):void 0},set:function(t){this.setSelectedItem(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setSelectedItem=function(t,e){if(void 0===e&&(e=!1),this.selectedItem!==t){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[5]=t,this.invalidateProperties()}},i.prototype.commitProperties=function(){var n=this.$dataProviderChanged;e.prototype.commitProperties.call(this);var r=this.$ListBase,o=this.$getSelectedIndex(),s=this.$dataProvider;n&&(o>=0&&s&&o<s.length?this.itemSelected(o,!0):this.requireSelection?r[2]=0:this.setSelectedIndex(-1,!1)),r[1]&&(r[1]=!1,r[0]&&o==i.NO_SELECTION&&s&&s.length>0&&(r[2]=0)),void 0!==r[5]&&(s?r[2]=s.getItemIndex(r[5]):r[2]=i.NO_SELECTION,r[5]=void 0);var a=!1;r[2]!=i.NO_PROPOSED_SELECTION&&(a=this.commitSelection()),r[6]&&(r[6]=!1,a||t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.prototype.updateRenderer=function(t,i,n){return this.itemSelected(i,this.$isItemIndexSelected(i)),e.prototype.updateRenderer.call(this,t,i,n)},i.prototype.itemSelected=function(t,e){var i=this.$indexToRenderer[t];i&&(i.selected=e)},i.prototype.$isItemIndexSelected=function(t){return t==this.selectedIndex},i.prototype.commitSelection=function(e){void 0===e&&(e=!0);var n=this.$dataProvider,r=this.$ListBase,o=n?n.length-1:-1,s=r[3],a=r[2];if(a<i.NO_SELECTION&&(a=i.NO_SELECTION),a>o&&(a=o),r[0]&&a==i.NO_SELECTION&&n&&n.length>0)return r[2]=i.NO_PROPOSED_SELECTION,r[4]=!1,!1;if(r[4]){var h=this.dispatchEventWith(egret.Event.CHANGING,!1,!0,!0);if(!h)return this.itemSelected(r[2],!1),r[2]=i.NO_PROPOSED_SELECTION,r[4]=!1,!1}return r[3]=a,r[2]=i.NO_PROPOSED_SELECTION,s!=i.NO_SELECTION&&this.itemSelected(s,!1),r[3]!=i.NO_SELECTION&&this.itemSelected(r[3],!0),e&&(r[4]&&(this.dispatchEventWith(egret.Event.CHANGE),r[4]=!1),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),!0},i.prototype.adjustSelection=function(t,e){void 0===e&&(e=!1);var n=this.$ListBase;n[2]!=i.NO_PROPOSED_SELECTION?n[2]=t:n[3]=t,n[6]=!0,this.invalidateProperties()},i.prototype.itemAdded=function(t,n){e.prototype.itemAdded.call(this,t,n);var r=this.$getSelectedIndex();r==i.NO_SELECTION?this.$ListBase[0]&&this.adjustSelection(n,!0):r>=n&&this.adjustSelection(r+1,!0)},i.prototype.itemRemoved=function(t,n){if(e.prototype.itemRemoved.call(this,t,n),this.selectedIndex!=i.NO_SELECTION){var r=this.$getSelectedIndex();n==r?this.requireSelection&&this.$dataProvider&&this.$dataProvider.length>0?0==n?(this.$ListBase[2]=0,this.invalidateProperties()):this.setSelectedIndex(0,!1):this.adjustSelection(-1,!1):r>n&&this.adjustSelection(r-1,!1)}},i.prototype.onCollectionChange=function(n){e.prototype.onCollectionChange.call(this,n),n.kind==t.CollectionEventKind.RESET?0==this.$dataProvider.length&&this.setSelectedIndex(i.NO_SELECTION,!1):n.kind==t.CollectionEventKind.REFRESH&&this.dataProviderRefreshed()},i.prototype.dataProviderRefreshed=function(){this.setSelectedIndex(i.NO_SELECTION,!1)},i.prototype.rendererAdded=function(t,e,i){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},i.prototype.rendererRemoved=function(t,e,i){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},i.prototype.onRendererTouchBegin=function(t){var e=this.$ListBase;t.$isDefaultPrevented||(e[8]=!1,e[7]=t.$currentTarget,this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this))},i.prototype.onRendererTouchCancle=function(t){var e=this.$ListBase;e[7]=null,e[8]=!0,this.$stage&&this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this)},i.prototype.onRendererTouchEnd=function(e){var i=this.$ListBase,n=e.$currentTarget,r=i[7];n==r&&(i[8]||(this.setSelectedIndex(n.itemIndex,!0),t.ItemTapEvent.dispatchItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)),i[8]=!1)},i.prototype.stage_touchEndHandler=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this),this.$ListBase[7]=null},i}(t.DataGroup);e.NO_SELECTION=-1,e.NO_PROPOSED_SELECTION=-2,t.ListBase=e,__reflect(e.prototype,"eui.ListBase"),t.registerBindable(e.prototype,"selectedIndex"),t.registerBindable(e.prototype,"selectedItem")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.thumb=null,t.$viewport=null,t.autoVisibility=!0,t}return __extends(i,e),Object.defineProperty(i.prototype,"viewport",{get:function(){return this.$viewport},set:function(e){if(e!=this.$viewport){var i=this.$viewport;i&&(i.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),i.removeEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.$viewport=e,e&&(e.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),e.addEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.invalidateDisplayList()}},enumerable:!0,configurable:!0}),i.prototype.onViewportResize=function(t){this.invalidateDisplayList()},i.prototype.onPropertyChanged=function(t){},i}(t.Component);t.ScrollBarBase=e,__reflect(e.prototype,"eui.ScrollBarBase")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.trackHighlight=null,t.thumb=null,t.track=null,t.$SliderBase={0:0,1:0,2:0,3:0,4:null,5:null,6:300,7:0,8:0,9:!0},t.maximum=10,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"slideDuration",{get:function(){return this.$SliderBase[6]},set:function(t){this.$SliderBase[6]=+t||0},enumerable:!0,configurable:!0}),i.prototype.pointToValue=function(t,e){return this.minimum},Object.defineProperty(i.prototype,"liveDragging",{get:function(){return this.$SliderBase[9]},set:function(t){this.$SliderBase[9]=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pendingValue",{get:function(){return this.$SliderBase[7]},set:function(t){t=+t||0;var e=this.$SliderBase;t!==e[7]&&(e[7]=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.setValue=function(t){this.$SliderBase[7]=t,e.prototype.setValue.call(this,t)},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.thumb?(this.thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track?(this.track.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i===this.trackHighlight&&(this.trackHighlight.touchEnabled=!1,egret.is(this.trackHighlight,"egret.DisplayObjectContainer")&&(this.trackHighlight.touchChildren=!1))},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.thumb?(this.thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track&&(this.track.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this))},i.prototype.onTrackOrThumbResize=function(t){this.updateSkinDisplayList()},i.prototype.onThumbTouchBegin=function(e){var i=this.$SliderBase;i[5]&&i[5].isPlaying&&this.stopAnimation();var n=this.$stage;n.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);var r=this.thumb.globalToLocal(e.stageX,e.stageY,egret.$TempPoint);i[0]=r.x,i[1]=r.y,t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START)},i.prototype.onStageTouchMove=function(t){var e=this.$SliderBase;e[2]=t.$stageX,e[3]=t.$stageY;var i=this.track;if(i){var n=i.globalToLocal(e[2],e[3],egret.$TempPoint),r=this.pointToValue(n.x-e[0],n.y-e[1]);r=this.nearestValidValue(r,this.snapInterval),this.updateWhenTouchMove(r),t.updateAfterEvent()}},i.prototype.updateWhenTouchMove=function(t){t!=this.$SliderBase[7]&&(this.liveDragging?(this.setValue(t),this.dispatchEventWith(egret.Event.CHANGE)):this.pendingValue=t)},i.prototype.onStageTouchEnd=function(e){var i=e.$currentTarget;i.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END);var n=this.$SliderBase;this.liveDragging||this.value==n[7]||(this.setValue(n[7]),this.dispatchEventWith(egret.Event.CHANGE))},i.prototype.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),this.$SliderBase[4]=t.$target},i.prototype.stageTouchEndHandler=function(t){var e=t.$target,i=this.$SliderBase;t.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),i[4]!=e&&this.contains(e)&&egret.TouchEvent.dispatchTouchEvent(this,egret.TouchEvent.TOUCH_TAP,!0,!0,t.$stageX,t.$stageY,t.touchPointID),i[4]=null},i.prototype.$animationUpdateHandler=function(t){this.pendingValue=t.currentValue},i.prototype.animationEndHandler=function(e){this.setValue(this.$SliderBase[8]),this.dispatchEventWith(egret.Event.CHANGE),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},i.prototype.stopAnimation=function(){this.$SliderBase[5].stop(),this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval)),this.dispatchEventWith(egret.Event.CHANGE),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},i.prototype.onTrackTouchBegin=function(e){var i=this.thumb?this.thumb.width:0,n=this.thumb?this.thumb.height:0,r=e.$stageX-i/2,o=e.$stageY-n/2,s=this.track.globalToLocal(r,o,egret.$TempPoint),a=this.$Range,h=this.pointToValue(s.x,s.y);h=this.nearestValidValue(h,a[7]);var l=this.$SliderBase;if(h!=l[7])if(0!=l[6]){l[5]||(l[5]=new t.sys.Animation(this.$animationUpdateHandler,this),l[5].endFunction=this.animationEndHandler);var u=l[5];u.isPlaying&&this.stopAnimation(),l[8]=h,u.duration=l[6]*(Math.abs(l[7]-l[8])/(a[0]-a[2])),u.from=l[7],u.to=l[8],t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START),u.play()}else this.setValue(h),this.dispatchEventWith(egret.Event.CHANGE)},i}(t.Range);t.SliderBase=e,__reflect(e.prototype,"eui.SliderBase")}(eui||(eui={}));var eui;!function(eui){var sys;!function(sys){function getRepeatedIds(t){var e=[];return this.repeatedIdMap={},this.getIds(t,e),e}function getIds(t,e){if(t.namespace!=sys.NS_W&&t.attributes.id){var i=t.attributes.id;this.repeatedIdMap[i]?e.push(toXMLString(t)):this.repeatedIdMap[i]=!0}var n=t.children;if(n)for(var r=n.length,o=0;r>o;o++){var s=n[o];1!==s.nodeType||this.isInnerClass(s)||this.getIds(s,e)}}function toXMLString(t){if(!t)return"";for(var e="  at <"+t.name,i=t.attributes,n=Object.keys(i),r=n.length,o=0;r>o;o++){var s=n[o],a=i[s];("id"!=s||"__"!=a.substring(0,2))&&(e+=" "+s+'="'+a+'"')}return e+=0==t.children.length?"/>":">"}function checkDeclarations(t,e){if(t){var i=t.children;if(i)for(var n=i.length,r=0;n>r;r++){var o=i[r];1==o.nodeType&&(o.attributes.includeIn&&e.push(toXMLString(o)),o.attributes.excludeFrom&&e.push(toXMLString(o)),checkDeclarations(o,e))}}}function getPropertyStr(t){var e=toXMLString(t.parent),i=toXMLString(t).substring(5);return e+"\n      	"+i}var exmlParserPool=[],parsedClasses={},innerClassCount=1,HOST_COMPONENT="hostComponent",SKIN_CLASS="eui.Skin",DECLARATIONS="Declarations",RECTANGLE="egret.Rectangle",TYPE_CLASS="Class",TYPE_ARRAY="Array",TYPE_PERCENTAGE="Percentage",TYPE_STATE="State[]",SKIN_NAME="skinName",ELEMENTS_CONTENT="elementsContent",basicTypes=[TYPE_ARRAY,"boolean","string","number"],wingKeys=["id","locked","includeIn","excludeFrom"],htmlEntities=[["<","&lt;"],[">","&gt;"],["&","&amp;"],['"',"&quot;"],["'","&apos;"]],jsKeyWords=["null","NaN","undefined","true","false"],EXMLParser=function(){function EXMLParser(){this.delayAssignmentDic={}}return EXMLParser.prototype.$parseCode=function(codeText,classStr){var className=classStr?classStr:"$exmlClass"+innerClassCount++,clazz=eval(codeText),hasClass=!0;if(hasClass&&clazz){egret.registerClass(clazz,className);for(var paths=className.split("."),length_15=paths.length,definition=__global,i=0;length_15-1>i;i++){var path=paths[i];definition=definition[path]||(definition[path]={})}definition[paths[length_15-1]]||(definition[paths[length_15-1]]=clazz)}return clazz},EXMLParser.prototype.parse=function(text){var xmlData=null;xmlData=egret.XML.parse(text);var hasClass=!1,className="";xmlData.attributes["class"]?(className=xmlData.attributes["class"],delete xmlData.attributes["class"],hasClass=!!className):className="$exmlClass"+innerClassCount++;var exClass=this.parseClass(xmlData,className),code=exClass.toCode(),clazz=null;if(clazz=eval(code),hasClass&&clazz){egret.registerClass(clazz,className);for(var paths=className.split("."),length_16=paths.length,definition=__global,i=0;length_16-1>i;i++){var path=paths[i];definition=definition[path]||(definition[path]={})}definition[paths[length_16-1]]||(definition[paths[length_16-1]]=clazz)}return clazz},EXMLParser.prototype.parseClass=function(t,e){sys.exmlConfig||(sys.exmlConfig=new sys.EXMLConfig),this.currentXML=t,this.currentClassName=e,this.delayAssignmentDic={},this.idDic={},this.stateCode=[],this.stateNames=[],this.skinParts=[],this.bindings=[],this.declarations=null,this.currentClass=new sys.EXClass,this.stateIds=[];var i=e.lastIndexOf(".");-1!=i?this.currentClass.className=e.substring(i+1):this.currentClass.className=e,this.startCompile();var n=this.currentClass;return this.currentClass=null,n},EXMLParser.prototype.startCompile=function(){var t=this.getClassNameOfNode(this.currentXML);this.isSkinClass=t==SKIN_CLASS,this.currentClass.superClass=t,this.getStateNames();var e=this.currentXML.children;if(e)for(var i=e.length,n=0;i>n;n++){var r=e[n];if(1===r.nodeType&&r.namespace==sys.NS_W&&r.localName==DECLARATIONS){this.declarations=r;break}}this.currentXML.namespace&&(this.addIds(this.currentXML.children),this.createConstructFunc())},EXMLParser.prototype.addIds=function(t){if(t)for(var e=t.length,i=0;e>i;i++){var n=t[i];if(1==n.nodeType&&n.namespace&&!this.isInnerClass(n))if(this.addIds(n.children),n.namespace!=sys.NS_W&&n.localName){if(this.isProperty(n)){var r=n.localName,o=r.indexOf("."),s=n.children;if(-1==o||!s||0==s.length)continue;var a=s[0];this.stateIds.push(a.attributes.id)}else if(1===n.nodeType){var h=n.attributes.id;if(h){var l=new RegExp("^[a-zA-Z_$]{1}[a-z0-9A-Z_$]*");null==h.match(l)&&egret.$warn(2022,h),-1==this.skinParts.indexOf(h)&&this.skinParts.push(h),this.createVarForNode(n),this.isStateNode(n)&&this.stateIds.push(h)}else this.createIdForNode(n),this.isStateNode(n)&&this.stateIds.push(n.attributes.id)}}else;}},EXMLParser.prototype.isInnerClass=function(t){if(t.hasOwnProperty("isInnerClass"))return t.isInnerClass;var e="Skin"==t.localName&&t.namespace==sys.NS_S;if(!e)if(this.isProperty(t))e=!1;else{var i=void 0,n=t.parent;if(this.isProperty(n)){i=n.localName;var r=i.indexOf(".");if(-1!=r){i.substring(r+1);i=i.substring(0,r)}n=n.parent}else i=sys.exmlConfig.getDefaultPropById(n.localName,n.namespace);
var o=sys.exmlConfig.getClassNameById(n.localName,n.namespace);e=sys.exmlConfig.getPropertyType(i,o)==TYPE_CLASS}return t.isInnerClass=e,e},EXMLParser.prototype.containsState=function(t){var e=t.attributes;if(e.includeIn||e.excludeFrom)return!0;for(var i=Object.keys(e),n=i.length,r=0;n>r;r++){var o=i[r];if(-1!=o.indexOf("."))return!0}return!1},EXMLParser.prototype.createIdForNode=function(t){var e=this.getNodeId(t);this.idDic[e]?this.idDic[e]++:this.idDic[e]=1,e+=this.idDic[e],t.attributes.id=e},EXMLParser.prototype.getNodeId=function(t){return t.attributes.id?t.attributes.id:"_"+t.localName},EXMLParser.prototype.createVarForNode=function(t){var e=this.getClassNameOfNode(t);""!=e&&(this.currentClass.getVariableByName(t.attributes.id)||this.currentClass.addVariable(new sys.EXVariable(t.attributes.id)))},EXMLParser.prototype.createFuncForNode=function(t){var e=t.localName,i=this.isBasicTypeData(e);if(i)return this.createBasicTypeForNode(t);var n=this.getClassNameOfNode(t),r=new sys.EXFunction,o="_i",s=t.attributes.id;r.name=s+o,this.currentClass.addFunction(r);var a=new sys.EXCodeBlock;r.codeBlock=a;var h="t";"Object"==e?a.addVar(h,"{}"):a.addVar(h,"new "+n+"()");var l=!!this.currentClass.getVariableByName(s);l&&a.addAssignment("this."+s,h),this.addAttributesToCodeBlock(a,h,t),this.initlizeChildNode(t,a,h);var u=this.delayAssignmentDic[s];if(u)for(var p=u.length,c=0;p>c;c++){var d=u[c];a.concat(d)}return a.addReturn(h),"this."+r.name+"()"},EXMLParser.prototype.isBasicTypeData=function(t){return-1!=basicTypes.indexOf(t)},EXMLParser.prototype.createBasicTypeForNode=function(t){var e=t.localName,i="",n=this.currentClass.getVariableByName(t.attributes.id),r=t.children,o="";if(r&&r.length>0){var s=r[0];3==s.nodeType&&(o=s.text.trim())}switch(e){case TYPE_ARRAY:var a=[];if(r)for(var h=r.length,l=0;h>l;l++){var u=r[l];1==u.nodeType&&a.push(this.createFuncForNode(u))}i="["+a.join(",")+"]";break;case"boolean":i="false"!=o&&o?"true":"false";break;case"number":i=o,-1!=i.indexOf("%")&&(i=i.substring(0,i.length-1));break;case"string":i=this.formatString(o)}return n&&(n.defaultValue=i),i},EXMLParser.prototype.addAttributesToCodeBlock=function(t,e,i){var n,r,o=i.attributes,s=Object.keys(o);s.sort();for(var a=s.length,h=0;a>h;h++)if(n=s[h],this.isNormalKey(n)&&(r=o[n],n=this.formatKey(n,r),r=this.formatValue(n,r,i))){if(this.currentClass.getVariableByName(r)){var l="this.",u=o.id,p=l+u+" = t;";this.currentClass.getVariableByName(u)||this.createVarForNode(i),t.containsCodeLine(p)||t.addCodeLineAt(p,1);var c=new sys.EXCodeBlock;"this"==e?c.addAssignment(e,l+r,n):(c.startIf(l+u),c.addAssignment(l+u,l+r,n),c.endBlock()),this.delayAssignmentDic[r]||(this.delayAssignmentDic[r]=[]),this.delayAssignmentDic[r].push(c),r=l+r}t.addAssignment(e,r,n)}},EXMLParser.prototype.initlizeChildNode=function(t,e,i){var n=t.children;if(n&&0!=n.length){for(var r,o=sys.exmlConfig.getClassNameById(t.localName,t.namespace),s=[],a=n.length,h=[],l=0;a>l;l++){var u=n[l];if(1==u.nodeType&&u.namespace!=sys.NS_W)if(this.isInnerClass(u)){if("Skin"==u.localName){var p=this.parseInnerClass(u),c=sys.exmlConfig.getPropertyType(SKIN_NAME,o);c?e.addAssignment(i,p,SKIN_NAME):egret.$error(2005,this.currentClassName,SKIN_NAME,getPropertyStr(u))}}else{var d=u.localName;if(this.isProperty(u)){if(!this.isNormalKey(d))continue;var c=sys.exmlConfig.getPropertyType(u.localName,o);if(!c)continue;if(!u.children||0==u.children.length)continue;this.addChildrenToProp(u.children,c,d,e,i,r,h,t)}else s.push(u)}}if(0!=s.length){var f=sys.exmlConfig.getDefaultPropById(t.localName,t.namespace),y=sys.exmlConfig.getPropertyType(f,o);f&&y&&this.addChildrenToProp(s,y,f,e,i,r,h,t)}}},EXMLParser.prototype.parseInnerClass=function(t){var e=exmlParserPool.pop();e||(e=new EXMLParser);var i=this.currentClass.className+"$"+t.localName+innerClassCount++,n=e.parseClass(t,i);return this.currentClass.addInnerClass(n),exmlParserPool.push(e),i},EXMLParser.prototype.addChildrenToProp=function(t,e,i,n,r,o,s,a){var h="",l=t.length;if(l>1){if(e!=TYPE_ARRAY)return;for(var u=[],p=0;l>p;p++){var c=t[p];if(1==c.nodeType){h=this.createFuncForNode(c);this.getClassNameOfNode(c);this.isStateNode(c)||u.push(h)}}h="["+u.join(",")+"]"}else{var d=t[0];if(e==TYPE_ARRAY)if(d.localName==TYPE_ARRAY){var u=[];if(d.children)for(var f=d.children.length,y=0;f>y;y++){var c=d.children[y];if(1==c.nodeType){h=this.createFuncForNode(c);this.getClassNameOfNode(c);this.isStateNode(c)||u.push(h)}}h="["+u.join(",")+"]"}else{h=this.createFuncForNode(d);this.getClassNameOfNode(d);h=this.isStateNode(d)?"[]":"["+h+"]"}else if(1==d.nodeType)if(e==TYPE_CLASS){if(l>1)return;h=this.parseInnerClass(t[0])}else{this.getClassNameOfNode(d);h=this.createFuncForNode(d)}else h=this.formatValue(i,d.text,a)}""!=h&&(-1==h.indexOf("()")&&(i=this.formatKey(i,h)),-1==s.indexOf(i)&&s.push(i),n.addAssignment(r,h,i))},EXMLParser.prototype.isProperty=function(t){if(t.hasOwnProperty("isProperty"))return t.isProperty;var e,i=t.localName;if(i&&1===t.nodeType&&t.parent&&!this.isBasicTypeData(i)){var n=t.parent,r=i.indexOf(".");-1!=r&&(i=i.substr(0,r));var o=sys.exmlConfig.getClassNameById(n.localName,n.namespace);e=!!sys.exmlConfig.getPropertyType(i,o)}else e=!1;return t.isProperty=e,e},EXMLParser.prototype.isNormalKey=function(t){return t&&-1==t.indexOf(".")&&-1==t.indexOf(":")&&-1==wingKeys.indexOf(t)?!0:!1},EXMLParser.prototype.formatKey=function(t,e){return-1!=e.indexOf("%")&&("height"==t?t="percentHeight":"width"==t&&(t="percentWidth")),t},EXMLParser.prototype.formatValue=function(t,e,i){e||(e="");var n=e;e=e.trim();var r=this.getClassNameOfNode(i),o=sys.exmlConfig.getPropertyType(t,r),s=this.formatBinding(t,e,i);if(s){this.checkIdForState(i);var a="this";i!==this.currentXML&&(a+="."+i.attributes.id),this.bindings.push(new sys.EXBinding(a,t,s.templates,s.chainIndex)),e=""}else if(o==RECTANGLE){e="new "+RECTANGLE+"("+e+")"}else if(o==TYPE_PERCENTAGE)-1!=e.indexOf("%")&&(e=this.formatString(e));else{switch(o){case TYPE_CLASS:t==SKIN_NAME&&(e=this.formatString(n));break;case"number":0==e.indexOf("#")?e="0x"+e.substring(1):-1!=e.indexOf("%")&&(e=parseFloat(e.substr(0,e.length-1)).toString());break;case"boolean":e="false"!=e&&e?"true":"false";break;case"string":case"any":e=this.formatString(n)}}return e},EXMLParser.prototype.formatString=function(t){return t=this.unescapeHTMLEntity(t),t=t.split("\n").join("\\n"),t=t.split("\r").join("\\n"),t=t.split('"').join('\\"'),t='"'+t+'"'},EXMLParser.prototype.formatBinding=function(t,e,i){if(!e)return null;if(e=e.trim(),"{"!=e.charAt(0)||"}"!=e.charAt(e.length-1))return null;e=e.substring(1,e.length-1).trim();for(var n=-1==e.indexOf("+")?[e]:this.parseTemplates(e),r=[],o=n.length,s=0;o>s;s++){var a=n[s].trim();if(a){var h=a.charAt(0);if(!("'"==h||'"'==h||h>="0"&&"9">=h||"-"==h||-1==a.indexOf(".")&&-1!=jsKeyWords.indexOf(a))){0==a.indexOf("this.")&&(a=a.substring(5));var l=a.split(".")[0];l!=HOST_COMPONENT&&-1==this.skinParts.indexOf(l)&&(a=HOST_COMPONENT+"."+a),n[s]='"'+a+'"',r.push(s)}}else n.splice(s,1),s--,o--}return{templates:n,chainIndex:r}},EXMLParser.prototype.parseTemplates=function(t){if(-1==t.indexOf("'"))return t.split("+");var e=!1,i="";for(t=t.split("\\'").join("0");t.length>0;){var n=t.indexOf("'");if(-1==n){i+=t;break}i+=t.substring(0,n+1),t=t.substring(n+1),n=t.indexOf("'"),-1==n&&(n=t.length-1,e=!0);var r=t.substring(0,n+1);i+=r.split("+").join("1"),t=t.substring(n+1)}t=i.split("0").join("\\'"),e&&(t+="'");for(var o=t.split("+"),s=o.length,a=0;s>a;a++)o[a]=o[a].split("1").join("+");return o},EXMLParser.prototype.unescapeHTMLEntity=function(t){if(!t)return"";for(var e=htmlEntities.length,i=0;e>i;i++){var n=htmlEntities[i],r=n[0],o=n[1];t=t.split(o).join(r)}return t},EXMLParser.prototype.createConstructFunc=function(){var t=new sys.EXCodeBlock;t.addEmptyLine();var e="this";if(this.addAttributesToCodeBlock(t,e,this.currentXML),this.declarations){var i=this.declarations.children;if(i&&i.length>0)for(var n=i.length,r=0;n>r;r++){var o=i[r];if(1==o.nodeType){var s=this.createFuncForNode(o);s&&t.addCodeLine(s+";")}}}this.initlizeChildNode(this.currentXML,t,e);var a,h,l=this.stateIds;if(l.length>0){h=l.length;for(var r=0;h>r;r++)a=l[r],t.addCodeLine("this."+a+"_i();");t.addEmptyLine()}var u=this.skinParts,p="[]";if(h=u.length,h>0){for(var r=0;h>r;r++)u[r]='"'+u[r]+'"';p="["+u.join(",")+"]"}var c=new sys.EXFunction;c.name="skinParts",c.isGet=!0;var d=new sys.EXCodeBlock;d.addReturn(p),c.codeBlock=d,this.currentClass.addFunction(c),this.currentXML.attributes.id="",this.createStates(this.currentXML);for(var f,y=this.currentXML,v=(this.getClassNameOfNode(y),y.attributes),g=Object.keys(v),m=g.length,$=0;m>$;$++){var E=g[$],C=v[E],_=E.indexOf(".");if(-1!=_){var S=E.substring(0,_);S=this.formatKey(S,C);var P=this.formatValue(S,C,y);if(!P)continue;var T=E.substr(_+1);f=this.getStateByName(T,y);var x=f.length;if(x>0)for(var r=0;x>r;r++){var b=f[r];b.addOverride(new sys.EXSetProperty("",S,P))}}}var I=this.stateCode;if(h=I.length,h>0){var L="	";t.addCodeLine("this.states = [");for(var N=!0,r=0;h>r;r++){var b=I[r];N?N=!1:t.addCodeLine(L+",");for(var O=b.toCode().split("\n"),A=0;A<O.length;){var M=O[A];M&&t.addCodeLine(L+M),A++}}t.addCodeLine("];")}var B=this.bindings;if(h=B.length,h>0){t.addEmptyLine();for(var r=0;h>r;r++){var D=B[r];t.addCodeLine(D.toCode())}}this.currentClass.constructCode=t},EXMLParser.prototype.isStateNode=function(t){var e=t.attributes;return e.hasOwnProperty("includeIn")||e.hasOwnProperty("excludeFrom")},EXMLParser.prototype.getStateNames=function(){var t=this.currentXML,e=sys.exmlConfig.getClassNameById(t.localName,t.namespace),i=sys.exmlConfig.getPropertyType("states",e);if(i==TYPE_STATE){var n=t.attributes.states;n&&delete t.attributes.states;var r,o,s=this.stateNames,a=t.children;if(a)for(var h=a.length,l=0;h>l;l++)if(o=a[l],1==o.nodeType&&"states"==o.localName){o.namespace=sys.NS_W,r=o.children;break}if(r||n)if(n)for(var u=n.split(","),p=u.length,l=0;p>l;l++){var c=u[l].trim();c&&(-1==s.indexOf(c)&&s.push(c),this.stateCode.push(new sys.EXState(c)))}else for(var d=r.length,l=0;d>l;l++){var f=r[l];if(1==f.nodeType){var y=[],v=f.attributes;if(v.stateGroups)for(var g=v.stateGroups.split(","),m=g.length,$=0;m>$;$++){var E=g[$].trim();E&&(-1==s.indexOf(E)&&s.push(E),y.push(E))}var c=v.name;-1==s.indexOf(c)&&s.push(c),this.stateCode.push(new sys.EXState(c,y))}}}},EXMLParser.prototype.createStates=function(t){var e=t.children;if(e)for(var i=e.length,n=0;i>n;n++){var r=e[n];if(1==r.nodeType&&!this.isInnerClass(r)&&(this.createStates(r),r.namespace!=sys.NS_W&&r.localName))if(this.isProperty(r)){var o=r.localName,s=o.indexOf("."),a=r.children;if(-1==s||!a||0==a.length)continue;var h=o.substring(s+1);o=o.substring(0,s);var l=this.getClassNameOfNode(t),u=(sys.exmlConfig.getPropertyType(o,l),a[0]),p=void 0;1==u.nodeType?(this.createFuncForNode(u),this.checkIdForState(u),p="this."+u.attributes.id):p=this.formatValue(o,u.text,t);var c=this.getStateByName(h,r),d=c.length;if(d>0)for(var f=0;d>f;f++){var y=c[f];y.addOverride(new sys.EXSetProperty(t.attributes.id,o,p))}}else if(this.containsState(r)){var v=r.attributes,g=v.id;this.getClassNameOfNode(r);this.checkIdForState(r);var h=void 0,c=void 0,y=void 0;if(this.isStateNode(r)){var m="",$=r.parent;$.localName==TYPE_ARRAY&&($=$.parent),$&&$.parent&&this.isProperty($)&&($=$.parent),$&&$!=this.currentXML&&(m=$.attributes.id,this.checkIdForState($));var E=this.findNearNodeId(r),C=[];if(v.includeIn)C=v.includeIn.split(",");else{for(var _=v.excludeFrom.split(","),S=_.length,f=0;S>f;f++){var P=_[f];this.getStateByName(P,r)}S=this.stateCode.length;for(var f=0;S>f;f++)y=this.stateCode[f],-1==_.indexOf(y.name)&&C.push(y.name)}for(var T=C.length,x=0;T>x;x++)if(h=C[x],c=this.getStateByName(h,r),c.length>0)for(var d=c.length,f=0;d>f;f++)y=c[f],y.addOverride(new sys.EXAddItems(g,m,E.position,E.relativeTo))}for(var b=Object.keys(v),I=b.length,L=0;I>L;L++){var N=b[L],p=v[N],s=N.indexOf(".");if(-1!=s){var O=N.substring(0,s);O=this.formatKey(O,p);var A=this.formatBinding(O,p,r);if(!A&&(p=this.formatValue(O,p,r),!p))continue;h=N.substr(s+1),c=this.getStateByName(h,r);var d=c.length;if(d>0)for(var f=0;d>f;f++)y=c[f],A?y.addOverride(new sys.EXSetStateProperty(g,O,A.templates,A.chainIndex)):y.addOverride(new sys.EXSetProperty(g,O,p))}}}}},EXMLParser.prototype.checkIdForState=function(t){if(t&&!this.currentClass.getVariableByName(t.attributes.id)){this.createVarForNode(t);var e=t.attributes.id,i=e+"_i",n=this.currentClass.getFuncByName(i);if(n){var r="this."+e+" = t;",o=n.codeBlock;o&&(o.containsCodeLine(r)||o.addCodeLineAt(r,1))}}},EXMLParser.prototype.getStateByName=function(t,e){for(var i=[],n=this.stateCode,r=n.length,o=0;r>o;o++){var s=n[o];if(s.name==t)-1==i.indexOf(s)&&i.push(s);else if(s.stateGroups.length>0){for(var a=!1,h=s.stateGroups.length,l=0;h>l;l++){var u=s.stateGroups[l];if(u==t){a=!0;break}}a&&-1==i.indexOf(s)&&i.push(s)}}return i},EXMLParser.prototype.findNearNodeId=function(t){for(var e,i,n,r=t.parent,o="",s=-1,a=!1,h=r.children,l=h.length,u=0;l>u;u++){var p=h[u];this.isProperty(p)||(p==t?(a=!0,s=u):!a||n||this.isStateNode(p)||(n=p),a||this.isStateNode(p)||(i=p))}return 0==s?(e=0,{position:e,relativeTo:o}):s==l-1?(e=1,{position:e,relativeTo:o}):n&&(e=2,o=n.attributes.id)?(this.checkIdForState(n),{position:e,relativeTo:o}):{position:1,relativeTo:o}},EXMLParser.prototype.getClassNameOfNode=function(t){var e=sys.exmlConfig.getClassNameById(t.localName,t.namespace);return e},EXMLParser}();sys.EXMLParser=EXMLParser,__reflect(EXMLParser.prototype,"eui.sys.EXMLParser")}(sys=eui.sys||(eui.sys={}))}(eui||(eui={}));var eui;!function(t){var e=[],i={},n={},r=function(){function t(){}return t.prototype.getAsset=function(t,r,o){var s=i[t];if(s)return void s.push([r,o]);var a=e.pop();a||(a=new egret.ImageLoader),i[t]=[[r,o]],n[a.$hashCode]=t,a.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),a.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),a.load(t)},t.prototype.onLoadFinish=function(t){var r=t.currentTarget;r.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),r.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var o;t.$type==egret.Event.COMPLETE&&(o=new egret.Texture,o._setBitmapData(r.data),r.data=null),e.push(r);var s=n[r.$hashCode];delete n[r.$hashCode];var a=i[s];delete i[s];for(var h=a.length,l=0;h>l;l++){var u=a[l];u[0].call(u[1],o,s)}},t}();t.DefaultAssetAdapter=r,__reflect(r.prototype,"eui.DefaultAssetAdapter",["eui.IAssetAdapter"])}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e.$horizontalAlign="left",e.$verticalAlign="top",e.$gap=6,e.$paddingLeft=0,e.$paddingRight=0,e.$paddingTop=0,e.$paddingBottom=0,e.elementSizeTable=[],e.startIndex=-1,e.endIndex=-1,e.indexInViewCalculated=!1,e.maxElementSize=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"horizontalAlign",{get:function(){return this.$horizontalAlign},set:function(t){this.$horizontalAlign!=t&&(this.$horizontalAlign=t,this.$target&&this.$target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$target&&this.$target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gap",{get:function(){return this.$gap},set:function(t){t=+t||0,this.$gap!==t&&(this.$gap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return this.$paddingLeft},set:function(t){t=+t||0,this.$paddingLeft!==t&&(this.$paddingLeft=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return this.$paddingRight},set:function(t){t=+t||0,this.$paddingRight!==t&&(this.$paddingRight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return this.$paddingTop},set:function(t){t=+t||0,this.$paddingTop!==t&&(this.$paddingTop=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return this.$paddingBottom},set:function(t){t=+t||0,this.$paddingBottom!==t&&(this.$paddingBottom=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),e.prototype.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},e.prototype.measure=function(){this.$target&&(this.$useVirtualLayout?this.measureVirtual():this.measureReal())},e.prototype.measureReal=function(){},e.prototype.measureVirtual=function(){},e.prototype.updateDisplayList=function(t,e){var i=this.$target;if(i)return 0==i.numElements?void i.setContentSize(Math.ceil(this.$paddingLeft+this.$paddingRight),Math.ceil(this.$paddingTop+this.$paddingBottom)):void(this.$useVirtualLayout?this.updateDisplayListVirtual(t,e):this.updateDisplayListReal(t,e))},e.prototype.getStartPosition=function(t){return 0},e.prototype.getElementSize=function(t){return 0},e.prototype.getElementTotalSize=function(){return 0},e.prototype.elementRemoved=function(e){this.$useVirtualLayout&&(t.prototype.elementRemoved.call(this,e),this.elementSizeTable.splice(e,1))},e.prototype.clearVirtualLayoutCache=function(){this.$useVirtualLayout&&(this.elementSizeTable=[],this.maxElementSize=0)},e.prototype.findIndexAt=function(t,e,i){var n=.5*(e+i)|0,r=this.getStartPosition(n),o=this.getElementSize(n);return t>=r&&t<r+o+this.$gap?n:e==i?-1:r>t?this.findIndexAt(t,e,Math.max(e,n-1)):this.findIndexAt(t,Math.min(n+1,i),i)},e.prototype.scrollPositionChanged=function(){if(t.prototype.scrollPositionChanged.call(this),this.$useVirtualLayout){var e=this.getIndexInView();e&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList())}},e.prototype.getIndexInView=function(){return!1},e.prototype.updateDisplayListVirtual=function(t,e){},e.prototype.updateDisplayListReal=function(t,e){},e.prototype.flexChildrenProportionally=function(t,e,i,n){var r,o=n.length;do{r=!0;var s=e-t*i/100;s>0?e-=s:s=0;for(var a=e/i,h=0;o>h;h++){var l=n[h],u=l.percent*a;if(u<l.min){var p=l.min;l.size=p,n[h]=n[--o],n[o]=l,i-=l.percent,s>=p?s-=p:(e-=p-s,s=0),r=!1;break}if(u>l.max){var c=l.max;l.size=c,n[h]=n[--o],n[o]=l,i-=l.percent,s>=c?s-=c:(e-=c-s,s=0),r=!1;break}l.size=u}}while(!r)},e}(t.LayoutBase);t.LinearLayoutBase=e,__reflect(e.prototype,"eui.LinearLayoutBase")}(eui||(eui={})),function(t){var e;!function(t){var e=function(){function t(){this.layoutElement=null,this.size=0,this.percent=0/0,this.min=0/0,this.max=0/0}return t}();t.ChildInfo=e,__reflect(e.prototype,"eui.sys.ChildInfo")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ToggleButton);t.CheckBox=e,__reflect(e.prototype,"eui.CheckBox")}(eui||(eui={}));var eui;!function(t){var e=new t.DefaultAssetAdapter,i=function(i){function n(t){var e=i.call(this)||this;return e.sourceChanged=!1,e._source=null,e.initializeUIValues(),t&&(e.source=t),e}return __extends(n,i),Object.defineProperty(n.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$scale9Grid=t,this.$invalidateContentBounds(),this.invalidateDisplayList()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){t!=this.$fillMode&&(this.$fillMode=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.$setFillMode=function(t){var e=i.prototype.$setFillMode.call(this,t);return this.invalidateDisplayList(),e},Object.defineProperty(n.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this.$stage?this.parseSource():(this.sourceChanged=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),n.prototype.$setBitmapData=function(t){if(t==this.$Bitmap[0])return!1;var e=i.prototype.$setBitmapData.call(this,t);return this.sourceChanged=!1,this.invalidateSize(),this.invalidateDisplayList(),e},n.prototype.parseSource=function(){this.sourceChanged=!1;var t=this._source;if(t&&"string"==typeof t){var i=egret.getImplementation("eui.IAssetAdapter");i||(i=e),i.getAsset(this._source,this.contentChanged,this)}else this.$setBitmapData(t)},n.prototype.contentChanged=function(t,e){e===this._source&&egret.is(t,"egret.Texture")&&(this.$setBitmapData(t),t&&this.dispatchEventWith(egret.Event.COMPLETE))},n.prototype.$measureContentBounds=function(t){var e=(this.$Bitmap,this.$Bitmap[0]);if(e){var i=this.$UIComponent,n=i[10],r=i[11];if(isNaN(n)||isNaN(r))return void t.setEmpty();"clip"==this.$fillMode&&(n>e.$getTextureWidth()&&(n=e.$getTextureWidth()),r>e.$getTextureHeight()&&(r=e.$getTextureHeight())),t.setTo(0,0,n,r)}else t.setEmpty()},n.prototype.$render=function(){var t=this.$Bitmap[0];if(t){var e=this.$UIComponent,i=e[10],n=e[11];if(0!==i&&0!==n){var r=this.$Bitmap;egret.sys.BitmapNode.$updateTextureData(this.$renderNode,r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],i,n,r[13],r[14],this.scale9Grid||r[0].scale9Grid,this.$fillMode,r[10])}}},n.prototype.createChildren=function(){this.sourceChanged&&this.parseSource()},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this),this.sourceChanged&&this.parseSource()},n.prototype.measure=function(){var t=this.$Bitmap[0];t?this.setMeasuredSize(t.$getTextureWidth(),t.$getTextureHeight()):this.setMeasuredSize(0,0)},n.prototype.updateDisplayList=function(t,e){this.$invalidateContentBounds()},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,e){},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.Bitmap);t.Image=i,__reflect(i.prototype,"eui.Image",["eui.UIComponent","egret.DisplayObject"]),t.sys.implementUIComponent(i,egret.Bitmap),t.registerProperty(i,"scale9Grid","egret.Rectangle")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._data=null,t._selected=!1,t.itemIndex=-1,t.touchCaptured=!1,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged()},enumerable:!0,configurable:!0}),i.prototype.dataChanged=function(){},Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!=t&&(this._selected=t,this.invalidateState())},enumerable:!0,configurable:!0}),i.prototype.onTouchCancle=function(t){this.touchCaptured=!1;var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.invalidateState()},i.prototype.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},i.prototype.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},i.prototype.getCurrentState=function(){var t="up";if(this.touchCaptured&&(t="down"),this._selected){var e=t+"AndSelected",i=this.skin;return i&&i.hasState(e)?e:"disabled"==t?"disabled":"down"}return t},i}(t.Component);t.ItemRenderer=e,__reflect(e.prototype,"eui.ItemRenderer",["eui.IItemRenderer"]),t.registerBindable(e.prototype,"data")}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){var e=i.call(this)||this;return e.$styleSetMap={fontFamily:!0,size:!0,bold:!0,italic:!0,textAlign:!0,verticalAlign:!0,lineSpacing:!0,textColor:!0,wordWrap:!0,displayAsPassword:!0,strokeColor:!0,stroke:!0,maxChars:!0,multiline:!0,border:!0,borderColor:!0,background:!0,backgroundColor:!0},e.$revertStyle={},e.$style=null,e.$changeFromStyle=!1,e._widthConstraint=0/0,e.initializeUIValues(),e.text=t,e}return __extends(n,i),Object.defineProperty(n.prototype,"style",{get:function(){return this.$style},set:function(t){this.$setStyle(t)},enumerable:!0,configurable:!0}),n.prototype.$setStyle=function(t){if(this.$style!=t){this.$style=t;var e=egret.getImplementation("eui.Theme");if(e){this.$changeFromStyle=!0;for(var i in this.$revertStyle)this[i]=this.$revertStyle[i];if(this.$revertStyle={},null==t)return void(this.$changeFromStyle=!1);for(var n=t.split(","),r=0;r<n.length;r++){var o=e.$getStyleConfig(n[r]);if(o)for(var i in o)if(this.$styleSetMap[i]){var s=this[i];this[i]=o[i],this.$revertStyle[i]=s}}this.$changeFromStyle=!1}}},n.prototype.$setFontFamily=function(t){return this.$changeFromStyle||(delete this.$revertStyle.fontFanily,this.$styleSetMap.fontFanily=!1),i.prototype.$setFontFamily.call(this,t)},n.prototype.$setSize=function(t){return this.$changeFromStyle||(delete this.$revertStyle.size,this.$styleSetMap.size=!1),i.prototype.$setSize.call(this,t)},n.prototype.$setBold=function(t){return this.$changeFromStyle||(delete this.$revertStyle.bold,this.$styleSetMap.bold=!1),i.prototype.$setBold.call(this,t)},n.prototype.$setItalic=function(t){return this.$changeFromStyle||(delete this.$revertStyle.italic,this.$styleSetMap.italic=!1),i.prototype.$setItalic.call(this,t)},n.prototype.$setTextAlign=function(t){return this.$changeFromStyle||(delete this.$revertStyle.textAlign,this.$styleSetMap.textAlign=!1),i.prototype.$setTextAlign.call(this,t)},n.prototype.$setVerticalAlign=function(t){return this.$changeFromStyle||(delete this.$revertStyle.verticalAlign,this.$styleSetMap.verticalAlign=!1),i.prototype.$setVerticalAlign.call(this,t)},n.prototype.$setLineSpacing=function(t){return this.$changeFromStyle||(delete this.$revertStyle.lineSpacing,this.$styleSetMap.lineSpacing=!1),i.prototype.$setLineSpacing.call(this,t)},n.prototype.$setTextColor=function(t){return this.$changeFromStyle||(delete this.$revertStyle.textColor,this.$styleSetMap.textColor=!1),i.prototype.$setTextColor.call(this,t)},n.prototype.$setWordWrap=function(t){this.$changeFromStyle||(delete this.$revertStyle.wordWrap,this.$styleSetMap.wordWrap=!1),i.prototype.$setWordWrap.call(this,t)},n.prototype.$setDisplayAsPassword=function(t){return this.$changeFromStyle||(delete this.$revertStyle.displayAsPassword,this.$styleSetMap.displayAsPassword=!1),i.prototype.$setDisplayAsPassword.call(this,t)},n.prototype.$setStrokeColor=function(t){return this.$changeFromStyle||(delete this.$revertStyle.strokeColor,this.$styleSetMap.strokeColor=!1),i.prototype.$setStrokeColor.call(this,t)},n.prototype.$setStroke=function(t){return this.$changeFromStyle||(delete this.$revertStyle.stroke,this.$styleSetMap.stroke=!1),i.prototype.$setStroke.call(this,t)},n.prototype.$setMaxChars=function(t){return this.$changeFromStyle||(delete this.$revertStyle.maxChars,this.$styleSetMap.maxChars=!1),i.prototype.$setMaxChars.call(this,t)},n.prototype.$setMultiline=function(t){return this.$changeFromStyle||(delete this.$revertStyle.multiline,this.$styleSetMap.multiline=!1),i.prototype.$setMultiline.call(this,t)},n.prototype.$setBorder=function(t){this.$changeFromStyle||(delete this.$revertStyle.border,this.$styleSetMap.border=!1),i.prototype.$setBorder.call(this,t)},n.prototype.$setBorderColor=function(t){this.$changeFromStyle||(delete this.$revertStyle.borderColor,this.$styleSetMap.borderColor=!1),i.prototype.$setBorderColor.call(this,t)},n.prototype.$setBackground=function(t){this.$changeFromStyle||(delete this.$revertStyle.background,this.$styleSetMap.background=!1),i.prototype.$setBackground.call(this,t)},n.prototype.$setBackgroundColor=function(t){this.$changeFromStyle||(delete this.$revertStyle.backgroundColor,this.$styleSetMap.backgroundColor=!1),i.prototype.$setBackgroundColor.call(this,t)},n.prototype.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$setText=function(e){var n=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),n},n.prototype.createChildren=function(){},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$TextField,n=e[3],r=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(r=t[13]):r=t[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),isNaN(t)||t===this._widthConstraint||0==t)return void(this._widthConstraint=t);this._widthConstraint=t;var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&this.invalidateSize()},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.TextField);t.Label=i,__reflect(i.prototype,"eui.Label",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.TextField),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.apply(this,arguments)||this;return t.allowMultipleSelection=!1,t._selectedIndices=[],t.isValidIndex=function(e,i,n){return t.$dataProvider&&e>=0&&e<t.$dataProvider.length&&e%1==0},t}return __extends(i,e),Object.defineProperty(i.prototype,"selectedIndices",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices:this._selectedIndices},set:function(t){this.setSelectedIndices(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices.length>0?this._proposedSelectedIndices[0]:-1:this.$getSelectedIndex()},set:function(t){this.setSelectedIndex(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedItems",{get:function(){var t=[],e=this.selectedIndices;if(e)for(var i=e.length,n=0;i>n;n++)t[n]=this.$dataProvider.getItemAt(e[n]);return t},set:function(t){var e=[];if(t)for(var i=t.length,n=0;i>n;n++){var r=this.$dataProvider.getItemIndex(t[n]);if(-1!=r&&e.splice(0,0,r),-1==r){e=[];break}}this.setSelectedIndices(e,!1)},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndices=function(t,e){var i=this.$ListBase;
e&&(i[4]=i[4]||e),t?this._proposedSelectedIndices=t:this._proposedSelectedIndices=[],this.invalidateProperties()},i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this._proposedSelectedIndices&&this.commitSelection()},i.prototype.commitSelection=function(i){void 0===i&&(i=!0);var n=this.$ListBase,r=n[3];if(this._proposedSelectedIndices){if(this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex),!this.allowMultipleSelection&&this._proposedSelectedIndices.length>0){var o=[];o.push(this._proposedSelectedIndices[0]),this._proposedSelectedIndices=o}this._proposedSelectedIndices.length>0?n[2]=this._proposedSelectedIndices[0]:n[2]=-1}var s=e.prototype.commitSelection.call(this,!1);if(!s)return this._proposedSelectedIndices=null,!1;var a=this.$getSelectedIndex();return a>t.ListBase.NO_SELECTION&&(this._proposedSelectedIndices?-1==this._proposedSelectedIndices.indexOf(a)&&this._proposedSelectedIndices.push(a):this._proposedSelectedIndices=[a]),this._proposedSelectedIndices&&(-1!=this._proposedSelectedIndices.indexOf(r)&&this.itemSelected(r,!0),this.commitMultipleSelection()),i&&s&&(n[4]&&(this.dispatchEventWith(egret.Event.CHANGE),n[4]=!1),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),s},i.prototype.commitMultipleSelection=function(){var t,e,i=[],n=[],r=this._selectedIndices,o=this._proposedSelectedIndices;if(r.length>0&&o.length>0){for(e=o.length,t=0;e>t;t++)-1==r.indexOf(o[t])&&n.push(o[t]);for(e=r.length,t=0;e>t;t++)-1==o.indexOf(r[t])&&i.push(r[t])}else r.length>0?i=r:o.length>0&&(n=o);if(this._selectedIndices=o,i.length>0)for(e=i.length,t=0;e>t;t++)this.itemSelected(i[t],!1);if(n.length>0)for(e=n.length,t=0;e>t;t++)this.itemSelected(n[t],!0);this._proposedSelectedIndices=null},i.prototype.$isItemIndexSelected=function(t){return this.allowMultipleSelection?-1!=this._selectedIndices.indexOf(t):e.prototype.$isItemIndexSelected.call(this,t)},i.prototype.dataProviderRefreshed=function(){this.allowMultipleSelection||e.prototype.dataProviderRefreshed.call(this)},i.prototype.calculateSelectedIndices=function(t){var e=[],i=this._selectedIndices,n=i.length;if(n>0){if(1==n&&i[0]==t)return this.$ListBase[0]?(e.splice(0,0,i[0]),e):e;for(var r=!1,o=0;n>o;o++)i[o]==t?r=!0:i[o]!=t&&e.splice(0,0,i[o]);return r||e.splice(0,0,t),e}return e.splice(0,0,t),e},i.prototype.onRendererTouchEnd=function(i){if(this.allowMultipleSelection){var n=i.currentTarget,r=this.$ListBase[7];if(n!=r)return;this.setSelectedIndices(this.calculateSelectedIndices(n.itemIndex),!0),t.ItemTapEvent.dispatchItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)}else e.prototype.onRendererTouchEnd.call(this,i)},i}(t.ListBase);t.List=e,__reflect(e.prototype,"eui.List")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.closeButton=null,t.moveArea=null,t.titleDisplay=null,t._title="",t.offsetPointX=0,t.offsetPointY=0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onWindowTouchBegin,t,!1,100),t}return __extends(i,e),i.prototype.onWindowTouchBegin=function(t){this.$parent.addChild(this)},Object.defineProperty(i.prototype,"elementsContent",{set:function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this.titleDisplay&&(this.titleDisplay.text=this.title)},enumerable:!0,configurable:!0}),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.titleDisplay?this.titleDisplay.text=this._title:i==this.moveArea?this.moveArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.moveArea?this.moveArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},i.prototype.onCloseButtonClick=function(e){t.UIEvent.dispatchUIEvent(this,t.UIEvent.CLOSING,!0,!0)&&this.close()},i.prototype.close=function(){this.$parent&&this.$parent.removeChild(this)},i.prototype.onTouchBegin=function(t){this.$includeInLayout=!1,this.offsetPointX=this.x-t.$stageX,this.offsetPointY=this.y-t.$stageY,this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i.prototype.onTouchMove=function(t){this.x=t.$stageX+this.offsetPointX,this.y=t.$stageY+this.offsetPointY},i.prototype.onTouchEnd=function(t){this.$stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i}(t.Component);t.Panel=e,__reflect(e.prototype,"eui.Panel"),t.registerProperty(e,"elementsContent","Array",!0)}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.thumb=null,i.labelDisplay=null,i._labelFunction=null,i._slideDuration=500,i._direction=t.Direction.LTR,i.slideToValue=0,i.animationValue=0,i.thumbInitX=0,i.thumbInitY=0,i.animation=new t.sys.Animation(i.animationUpdateHandler,i),i}return __extends(i,e),Object.defineProperty(i.prototype,"labelFunction",{get:function(){return this._labelFunction},set:function(t){this._labelFunction!=t&&(this._labelFunction=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.valueToLabel=function(t,e){return null!=this.labelFunction?this._labelFunction(t,e):t+" / "+e},Object.defineProperty(i.prototype,"slideDuration",{get:function(){return this._slideDuration},set:function(t){t=0|+t,this._slideDuration!==t&&(this._slideDuration=t,this.animation.isPlaying&&(this.animation.stop(),this.setValue(this.slideToValue)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction!=t&&(this.thumb&&(this.thumb.x=this.thumbInitX),this.thumb&&(this.thumb.y=this.thumbInitY),this._direction=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.$setValue=function(t){if(this.value===t)return!1;var i=this.$Range,n=e.prototype.$setValue.call(this,t);if(this._slideDuration>0&&this.$stage){this.validateProperties();var r=this.animation;if(r.isPlaying&&(this.animationValue=this.slideToValue,this.invalidateDisplayList(),r.stop()),this.slideToValue=this.nearestValidValue(t,i[7]),this.slideToValue===this.animationValue)return n;var o=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(i[0]-i[2]));r.duration=o===1/0?0:o,r.from=this.animationValue,r.to=this.slideToValue,r.play()}else this.animationValue=this.value;return n},i.prototype.animationUpdateHandler=function(t){var e=this.$Range,i=this.nearestValidValue(t.currentValue,e[7]);this.animationValue=Math.min(e[0],Math.max(e[2],i)),this.invalidateDisplayList()},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i===this.thumb&&(this.thumb.x&&(this.thumbInitX=this.thumb.x),this.thumb.y&&(this.thumbInitY=this.thumb.y),this.thumb.addEventListener(egret.Event.RESIZE,this.onThumbResize,this))},i.prototype.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i===this.thumb&&this.thumb.removeEventListener(egret.Event.RESIZE,this.onThumbResize,this)},i.prototype.onThumbResize=function(t){this.updateSkinDisplayList()},i.prototype.updateSkinDisplayList=function(){var e=this.animation.isPlaying?this.animationValue:this.value,i=this.maximum,n=this.thumb;if(n){var r=n.width,o=n.height,s=Math.round(e/i*r);(0>s||s===1/0)&&(s=0);var a=Math.round(e/i*o);(0>a||a===1/0)&&(a=0);var h=n.$scrollRect;h||(h=egret.$TempRectangle),h.setTo(0,0,r,o);var l=n.x-h.x,u=n.y-h.y;switch(this._direction){case t.Direction.LTR:h.width=s,n.x=l;break;case t.Direction.RTL:h.width=s,h.x=r-s,n.x=h.x;break;case t.Direction.TTB:h.height=a,n.y=u;break;case t.Direction.BTT:h.height=a,h.y=o-a,n.y=h.y}n.scrollRect=h}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(e,i))},i}(t.Range);t.ProgressBar=e,__reflect(e.prototype,"eui.ProgressBar")}(eui||(eui={}));var eui;!function(t){var e={},i=function(i){function n(){var t=i.call(this)||this;return t.$indexNumber=0,t.$radioButtonGroup=null,t._group=null,t.groupChanged=!1,t._groupName="radioGroup",t._value=null,t.groupName="radioGroup",t}return __extends(n,i),Object.defineProperty(n.prototype,"enabled",{get:function(){return this.$Component[3]?!this.$radioButtonGroup||this.$radioButtonGroup.$enabled:!1},set:function(t){this.$setEnabled(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"group",{get:function(){if(!this._group&&this._groupName){var i=e[this._groupName];i||(i=new t.RadioButtonGroup,i.$name=this._groupName,e[this._groupName]=i),this._group=i}return this._group},set:function(t){this._group!=t&&(this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=t,this._groupName=t?this.group.$name:"radioGroup",this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupName",{get:function(){return this._groupName},set:function(t){t&&""!=t&&(this._groupName=t,this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=null,this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.$setSelected=function(t){var e=i.prototype.$setSelected.call(this,t);return this.invalidateDisplayList(),e},Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(e){this._value!=e&&(this._value=e,this.$selected&&this.group&&t.PropertyEvent.dispatchPropertyEvent(this.group,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"))},enumerable:!0,configurable:!0}),n.prototype.commitProperties=function(){this.groupChanged&&(this.addToGroup(),this.groupChanged=!1),i.prototype.commitProperties.call(this)},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.group&&(this.$selected?this._group.$setSelection(this,!1):this.group.selection==this&&this._group.$setSelection(null,!1))},n.prototype.buttonReleased=function(){this.enabled&&!this.selected&&(this.$radioButtonGroup||this.addToGroup(),i.prototype.buttonReleased.call(this),this.group.$setSelection(this,!0))},n.prototype.addToGroup=function(){var t=this.group;return t&&t.$addInstance(this),t},n}(t.ToggleButton);t.RadioButton=i,__reflect(i.prototype,"eui.RadioButton")}(eui||(eui={}));var eui;!function(t){function e(t,i){var n=t.parent,r=i.parent;if(!n||!r)return 0;var o=t.$nestLevel,s=i.$nestLevel,a=0,h=0;return n==r&&(a=n.getChildIndex(t),h=r.getChildIndex(i)),o>s||a>h?1:s>o||h>a?-1:t==i?0:e(n,r)}var i=0,n=function(n){function r(){var t=n.call(this)||this;return t.$name=null,t.radioButtons=[],t.$enabled=!0,t._selectedValue=null,t._selection=null,t.$name="_radioButtonGroup"+i++,t}return __extends(r,n),r.prototype.getRadioButtonAt=function(t){return this.radioButtons[t]},Object.defineProperty(r.prototype,"enabled",{get:function(){return this.$enabled},set:function(t){if(t=!!t,this.$enabled!==t){this.$enabled=t;for(var e=this.radioButtons,i=e.length,n=0;i>n;n++)e[n].invalidateState()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"numRadioButtons",{get:function(){return this.radioButtons.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedValue",{get:function(){return this.selection?null!=this.selection.value?this.selection.value:this.selection.label:null},set:function(e){if(this._selectedValue=e,null==e)return void this.$setSelection(null,!1);for(var i=this.numRadioButtons,n=0;i>n;n++){var r=this.radioButtons[n];if(r.value==e||r.label==e){this.changeSelection(n,!1),this._selectedValue=null,t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue");break}}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){return this._selection},set:function(t){this._selection!=t&&this.$setSelection(t,!1)},enumerable:!0,configurable:!0}),r.prototype.$addInstance=function(t){t.addEventListener(egret.Event.REMOVED,this.removedHandler,this);var i=this.radioButtons;i.push(t),i.sort(e);for(var n=i.length,r=0;n>r;r++)i[r].$indexNumber=r;this._selectedValue&&(this.selectedValue=this._selectedValue),1==t.selected&&(this.selection=t),t.$radioButtonGroup=this,t.invalidateState()},r.prototype.$removeInstance=function(t,e){if(t)for(var i=!1,n=this.radioButtons,r=n.length,o=0;r>o;o++){var s=n[o];i?s.$indexNumber=s.$indexNumber-1:s==t&&(e&&t.addEventListener(egret.Event.ADDED,this.addedHandler,this),t==this._selection&&(this._selection=null),t.$radioButtonGroup=null,t.invalidateState(),this.radioButtons.splice(o,1),i=!0,o--,r--)}},r.prototype.$setSelection=function(e,i){if(this._selection==e)return!1;if(e){for(var n=this.numRadioButtons,r=0;n>r;r++)if(e==this.getRadioButtonAt(r)){this.changeSelection(r,i);break}}else this._selection&&(this._selection.selected=!1,this._selection=null,i&&this.dispatchEventWith(egret.Event.CHANGE));return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"),!0},r.prototype.changeSelection=function(t,e){var i=this.getRadioButtonAt(t);i&&i!=this._selection&&(this._selection&&(this._selection.selected=!1),this._selection=i,this._selection.selected=!0,e&&this.dispatchEventWith(egret.Event.CHANGE))},r.prototype.addedHandler=function(t){var e=t.target;e&&(e.removeEventListener(egret.Event.ADDED,this.addedHandler,this),this.$addInstance(e))},r.prototype.removedHandler=function(t){var e=t.target;e&&(e.removeEventListener(egret.Event.REMOVED,this.removedHandler,this),this.$removeInstance(e,!0))},r}(egret.EventDispatcher);t.RadioButtonGroup=n,__reflect(n.prototype,"eui.RadioButtonGroup"),t.registerBindable(n.prototype,"selectedValue")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n){var r=t.call(this)||this;return r.$fillColor=0,r.$fillAlpha=1,r.$strokeColor=4473924,r.$strokeAlpha=1,r.$strokeWeight=0,r.$ellipseWidth=0,r.$ellipseHeight=0,r.touchChildren=!1,r.$graphics=new egret.Graphics,r.$graphics.$setTarget(r),r.width=e,r.height=i,r.fillColor=n,r}return __extends(e,t),Object.defineProperty(e.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),e.prototype.$measureContentBounds=function(t){this.$graphics&&t.setTo(0,0,this.width,this.height)},Object.defineProperty(e.prototype,"fillColor",{get:function(){return this.$fillColor},set:function(t){void 0!=t&&this.$fillColor!=t&&(this.$fillColor=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillAlpha",{get:function(){return this.$fillAlpha},set:function(t){this.$fillAlpha!=t&&(this.$fillAlpha=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeColor",{get:function(){return this.$strokeColor},set:function(t){this.$strokeColor!=t&&(this.$strokeColor=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeAlpha",{get:function(){return this.$strokeAlpha},set:function(t){this.$strokeAlpha!=t&&(this.$strokeAlpha=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWeight",{get:function(){return this.$strokeWeight},set:function(t){this.$strokeWeight!=t&&(this.$strokeWeight=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipseWidth",{get:function(){return this.$ellipseWidth},set:function(t){this.$ellipseWidth!=t&&(this.$ellipseWidth=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipseHeight",{get:function(){return this.$ellipseHeight},set:function(t){this.$ellipseHeight!=t&&(this.$ellipseHeight=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),e.prototype.updateDisplayList=function(t,e){var i=this.graphics;i.clear(),this.$strokeWeight>0&&(i.beginFill(this.$fillColor,0),i.lineStyle(this.$strokeWeight,this.$strokeColor,this.$strokeAlpha,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight):i.drawRoundRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill()),i.beginFill(this.$fillColor,this.$fillAlpha),i.lineStyle(this.$strokeWeight,this.$strokeColor,0,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight):i.drawRoundRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill(),this.$invalidateContentBounds()},e}(t.Component);t.Rect=e,__reflect(e.prototype,"eui.Rect")}(eui||(eui={}));var eui;!function(t){var e,i=function(i){function n(){var e=i.call(this)||this;e.$bounces=!0,e.horizontalScrollBar=null,e.verticalScrollBar=null;var n=new t.sys.TouchScroll(e.horizontalUpdateHandler,e.horizontalEndHandler,e),r=new t.sys.TouchScroll(e.verticalUpdateHandler,e.verticalEndHanlder,e);return e.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:!1,6:!1,7:!1,8:n,9:r,10:null,11:!1,12:!1},e}return __extends(n,i),Object.defineProperty(n.prototype,"bounces",{get:function(){return this.$bounces},set:function(t){this.$bounces=!!t;var e=this.$Scroller[8];e&&(e.$bounces=this.$bounces);var i=this.$Scroller[9];i&&(i.$bounces=this.$bounces)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"throwSpeed",{get:function(){return this.$Scroller[8].$scrollFactor},set:function(t){t=+t,0>t&&(t=0),this.$Scroller[8].$scrollFactor=t,this.$Scroller[9].$scrollFactor=t},enumerable:!0,configurable:!0}),n.prototype.$getThrowInfo=function(i,n){return e?(e.currentPos=i,e.toPos=n):e=new t.ScrollerThrowEvent(t.ScrollerThrowEvent.THROW,!1,!1,i,n),e},Object.defineProperty(n.prototype,"scrollPolicyV",{get:function(){return this.$Scroller[0]},set:function(t){var e=this.$Scroller;e[0]!=t&&(e[0]=t,this.checkScrollPolicy())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollPolicyH",{get:function(){return this.$Scroller[1]},set:function(t){var e=this.$Scroller;e[1]!=t&&(e[1]=t,this.checkScrollPolicy())},enumerable:!0,configurable:!0}),n.prototype.stopAnimation=function(){var e=this.$Scroller,i=e[9],n=e[8];i.animation.isPlaying?t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END):n.animation.isPlaying&&t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END),i.stop(),n.stop();var r=this.verticalScrollBar,o=this.horizontalScrollBar;r&&r.autoVisibility&&(r.visible=!1),o&&o.autoVisibility&&(o.visible=!1)},Object.defineProperty(n.prototype,"viewport",{get:function(){return this.$Scroller[10]},set:function(t){var e=this.$Scroller;t!=e[10]&&(this.uninstallViewport(),e[10]=t,e[11]=!1,this.installViewport())},enumerable:!0,configurable:!0}),n.prototype.installViewport=function(){var t=this.viewport;t&&(this.addChildAt(t,0),t.scrollEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.addEventListener(egret.Event.REMOVED,this.onViewPortRemove,this)),this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=t),this.verticalScrollBar&&(this.verticalScrollBar.viewport=t)},n.prototype.uninstallViewport=function(){this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=null),this.verticalScrollBar&&(this.verticalScrollBar.viewport=null);var t=this.viewport;t&&(t.scrollEnabled=!1,t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.removeEventListener(egret.Event.REMOVED,this.onViewPortRemove,this),0==this.$Scroller[11]&&this.removeChild(t))},n.prototype.onViewPortRemove=function(t){t.target==this.viewport&&(this.$Scroller[11]=!0,this.viewport=null)},n.prototype.setSkin=function(t){i.prototype.setSkin.call(this,t);var e=this.viewport;e&&this.addChildAt(e,0)},n.prototype.onTouchBeginCapture=function(t){this.$Scroller[12]=!1;var e=this.checkScrollPolicy();e&&this.onTouchBegin(t)},n.prototype.onTouchEndCapture=function(t){this.$Scroller[12]&&(t.stopPropagation(),this.onTouchEnd(t))},n.prototype.onTouchTapCapture=function(t){this.$Scroller[12]&&t.stopPropagation()},n.prototype.checkScrollPolicy=function(){var t=this.$Scroller,e=t[10];if(!e)return!1;var i,n=e.$UIComponent;switch(t[1]){case"auto":i=e.contentWidth>n[10]||0!==e.scrollH?!0:!1;break;case"on":i=!0;break;case"off":i=!1}t[6]=i;var r;switch(t[0]){case"auto":r=e.contentHeight>n[11]||0!==e.scrollV?!0:!1;break;case"on":r=!0;break;case"off":r=!1}return t[7]=r,i||r},n.prototype.onTouchBegin=function(t){if(!t.isDefaultPrevented()&&this.checkScrollPolicy()){this.downTarget=t.target;var e=this.$Scroller;this.stopAnimation(),e[3]=t.$stageX,e[4]=t.$stageY,e[6]&&e[8].start(t.$stageX),e[7]&&e[9].start(t.$stageY);var i=this.$stage;this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)}},n.prototype.onTouchMove=function(e){if(!e.isDefaultPrevented()){var i=this.$Scroller;if(!i[5]){var r=void 0;r=Math.abs(i[3]-e.$stageX)<n.scrollThreshold?!1:!0;var o=void 0;if(o=Math.abs(i[4]-e.$stageY)<n.scrollThreshold?!1:!0,!r&&!o)return;if(!o&&r&&"off"==i[1])return;if(!r&&o&&"off"==i[0])return;i[12]=!0,i[5]=!0,this.dispatchCancelEvent(e);var s=this.horizontalScrollBar,a=this.verticalScrollBar;s&&s.autoVisibility&&i[6]&&(s.visible=!0),a&&a.autoVisibility&&i[7]&&(a.visible=!0),i[2]&&i[2].reset(),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START),this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}e.preventDefault();var h=i[10],l=h.$UIComponent;i[6]&&i[8].update(e.$stageX,h.contentWidth-l[10],h.scrollH),i[7]&&i[9].update(e.$stageY,h.contentHeight-l[11],h.scrollV)}},n.prototype.onTouchCancel=function(t){this.$Scroller[5]||this.onRemoveListeners()},n.prototype.dispatchCancelEvent=function(t){var e=this.$Scroller[10];if(e){for(var i=new egret.TouchEvent(egret.TouchEvent.TOUCH_CANCEL,t.bubbles,t.cancelable),n=this.downTarget,r=this.$getPropagationList(n),o=r.length,s=.5*r.length,a=-1,h=0;o>h;h++)if(r[h]===e){a=h;break}r.splice(0,a+1),s-=a+1,this.$dispatchPropagationEvent(i,r,s),egret.Event.release(i)}},n.prototype.onTouchEnd=function(t){var e=this.$Scroller;e[5]=!1,this.onRemoveListeners();var i=e[10],n=i.$UIComponent;e[8].isStarted()&&e[8].finish(i.scrollH,i.contentWidth-n[10]),e[9].isStarted()&&e[9].finish(i.scrollV,i.contentHeight-n[11])},n.prototype.onRemoveListeners=function(){var t=this.$stage;this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,!0),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)},n.prototype.horizontalUpdateHandler=function(t){this.$Scroller[10].scrollH=t,this.dispatchEventWith(egret.Event.CHANGE)},n.prototype.verticalUpdateHandler=function(t){this.$Scroller[10].scrollV=t,this.dispatchEventWith(egret.Event.CHANGE)},n.prototype.horizontalEndHandler=function(){this.$Scroller[9].isPlaying()||this.onChangeEnd()},n.prototype.verticalEndHanlder=function(){this.$Scroller[8].isPlaying()||this.onChangeEnd()},n.prototype.onChangeEnd=function(){var e=this.$Scroller,i=this.horizontalScrollBar,n=this.verticalScrollBar;(i&&i.visible||n&&n.visible)&&(e[2]||(e[2]=new egret.Timer(200,1),e[2].addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onAutoHideTimer,this)),e[2].reset(),e[2].start()),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},n.prototype.onAutoHideTimer=function(t){var e=this.horizontalScrollBar,i=this.verticalScrollBar;e&&e.autoVisibility&&(e.visible=!1),i&&i.autoVisibility&&(i.visible=!1)},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e);var n=this.viewport;n&&(n.setLayoutBoundsSize(t,e),n.setLayoutBoundsPosition(0,0))},n.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),e==this.horizontalScrollBar?(this.horizontalScrollBar.touchChildren=!1,this.horizontalScrollBar.touchEnabled=!1,this.horizontalScrollBar.viewport=this.viewport,this.horizontalScrollBar.autoVisibility&&(this.horizontalScrollBar.visible=!1)):e==this.verticalScrollBar&&(this.verticalScrollBar.touchChildren=!1,this.verticalScrollBar.touchEnabled=!1,this.verticalScrollBar.viewport=this.viewport,this.verticalScrollBar.autoVisibility&&(this.verticalScrollBar.visible=!1))},n}(t.Component);i.scrollThreshold=5,t.Scroller=i,__reflect(i.prototype,"eui.Scroller"),t.registerProperty(i,"viewport","eui.IViewport",!0)}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var i=e.apply(this,arguments)||this;return i.maxWidth=1e5,i.minWidth=0,i.maxHeight=1e5,i.minHeight=0,i.width=0/0,i.height=0/0,i.$elementsContent=[],i._hostComponent=null,i.$stateValues=new t.sys.StateValues,i}return __extends(i,e),Object.defineProperty(i.prototype,"elementsContent",{set:function(t){this.$elementsContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hostComponent",{get:function(){return this._hostComponent},set:function(e){if(this._hostComponent!=e){this._hostComponent&&this._hostComponent.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._hostComponent=e;var i=this.$stateValues;i.parent=e,e&&(this.commitCurrentState(),this.$stateValues.intialized||(e.$stage?this.initializeStates(e.$stage):e.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this))),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"hostComponent")}},enumerable:!0,configurable:!0}),i.prototype.onAddedToStage=function(t){this.initializeStates(this._hostComponent.$stage)},i}(egret.EventDispatcher);t.Skin=e,__reflect(e.prototype,"eui.Skin"),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]"),t.registerBindable(e.prototype,"hostComponent")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.indexBeingUpdated=!1,t.requireSelection=!0,t.useVirtualLayout=!1,t}return __extends(i,e),i.prototype.createChildren=function(){if(!this.$layout){var i=new t.HorizontalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.JUSTIFY,i.verticalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},i.prototype.$setDataProvider=function(i){var n=this.$dataProvider;return n&&n instanceof t.ViewStack&&(n.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.removeEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),i&&i instanceof t.ViewStack&&(i.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.addEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),e.prototype.$setDataProvider.call(this,i)},i.prototype.onIndexChanged=function(t){this.indexBeingUpdated=!0,this.$dataProvider.selectedIndex=this.selectedIndex,this.indexBeingUpdated=!1},i.prototype.onViewStackIndexChange=function(t){"selectedIndex"!=t.property||this.indexBeingUpdated||this.setSelectedIndex(this.$dataProvider.selectedIndex,!1)},i}(t.ListBase);t.TabBar=e,__reflect(e.prototype,"eui.TabBar")}(eui||(eui={}));var eui;!function(t){var e=egret.FocusEvent,i=function(i){function n(){var t=i.call(this)||this;return t.isFocus=!1,t.$TextInput={0:null,1:null,2:null,3:null,4:null,5:null,6:"",7:null,8:egret.TextFieldInputType.TEXT},t}return __extends(n,i),Object.defineProperty(n.prototype,"prompt",{get:function(){return this.promptDisplay?this.promptDisplay.text:this.$TextInput[0]},set:function(t){this.$TextInput[0]=t,this.promptDisplay&&(this.promptDisplay.text=t),this.invalidateProperties(),this.invalidateState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayAsPassword",{get:function(){if(this.textDisplay)return this.textDisplay.displayAsPassword;var t=this.$TextInput[1];return t?t:!1},set:function(t){this.$TextInput[1]=t,this.textDisplay&&(this.textDisplay.displayAsPassword=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputType",{get:function(){return this.textDisplay?this.textDisplay.inputType:this.$TextInput[8]},set:function(t){this.$TextInput[8]=t,this.textDisplay&&(this.textDisplay.inputType=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textColor",{get:function(){return this.textDisplay?this.textDisplay.textColor:this.$TextInput[2]},set:function(t){this.$TextInput[2]=t,this.textDisplay&&(this.textDisplay.textColor=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxChars",{get:function(){if(this.textDisplay)return this.textDisplay.maxChars;var t=this.$TextInput[3];return t?t:0},set:function(t){this.$TextInput[3]=t,this.textDisplay&&(this.textDisplay.maxChars=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){if(this.textDisplay)return this.textDisplay.maxWidth;var t=this.$TextInput[4];return t?t:1e5},set:function(t){this.$TextInput[4]=t,this.textDisplay&&(this.textDisplay.maxWidth=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxHeight",{get:function(){this.textDisplay;var t=this.$TextInput[5];return t?t:1e5},set:function(t){this.$TextInput[5]=t,this.textDisplay&&(this.textDisplay.maxHeight=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.textDisplay?this.textDisplay.text:this.$TextInput[6]},set:function(t){this.$TextInput[6]=t,this.textDisplay&&(this.textDisplay.text=t),this.invalidateProperties(),this.invalidateState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"restrict",{get:function(){return this.textDisplay?this.textDisplay.restrict:this.$TextInput[7]},set:function(t){this.$TextInput[7]=t,this.textDisplay&&(this.textDisplay.restrict=t),this.invalidateProperties()},enumerable:!0,configurable:!0}),n.prototype.focusInHandler=function(t){this.isFocus=!0,this.invalidateState()},n.prototype.focusOutHandler=function(t){this.isFocus=!1,this.invalidateState()},n.prototype.getCurrentState=function(){var t=this.skin;return!this.prompt||this.isFocus||this.text?this.enabled?"normal":"disabled":this.enabled&&t.hasState("normalWithPrompt")?"normalWithPrompt":!this.enabled&&t.hasState("disabledWithPrompt")?"disabledWithPrompt":void 0},n.prototype.partAdded=function(n,r){i.prototype.partAdded.call(this,n,r);var o=this.$TextInput;r==this.textDisplay?(this.textDisplayAdded(),this.textDisplay instanceof t.EditableText&&(this.textDisplay.addEventListener(e.FOCUS_IN,this.focusInHandler,this),this.textDisplay.addEventListener(e.FOCUS_OUT,this.focusOutHandler,this))):r==this.promptDisplay&&o[0]&&(this.promptDisplay.text=o[0])
},n.prototype.partRemoved=function(n,r){i.prototype.partRemoved.call(this,n,r),r==this.textDisplay?(this.textDisplayRemoved(),this.textDisplay instanceof t.EditableText&&(this.textDisplay.removeEventListener(e.FOCUS_IN,this.focusInHandler,this),this.textDisplay.removeEventListener(e.FOCUS_OUT,this.focusOutHandler,this))):r==this.promptDisplay&&(this.$TextInput[0]=this.promptDisplay.text)},n.prototype.textDisplayAdded=function(){var t=this.$TextInput;t[1]&&(this.textDisplay.displayAsPassword=t[1]),t[2]&&(this.textDisplay.textColor=t[2]),t[3]&&(this.textDisplay.maxChars=t[3]),t[4]&&(this.textDisplay.maxWidth=t[4]),t[5]&&(this.textDisplay.maxHeight=t[5]),t[6]&&(this.textDisplay.text=t[6]),t[7]&&(this.textDisplay.restrict=t[7]),t[8]&&(this.textDisplay.inputType=t[8])},n.prototype.textDisplayRemoved=function(){var t=this.$TextInput;t[1]=this.textDisplay.displayAsPassword,t[2]=this.textDisplay.textColor,t[3]=this.textDisplay.maxChars,t[4]=this.textDisplay.maxWidth,t[5]=this.textDisplay.maxHeight,t[6]=this.textDisplay.text,t[7]=this.textDisplay.restrict,t[8]=this.textDisplay.inputType},n}(t.Component);t.TextInput=i,__reflect(i.prototype,"eui.TextInput")}(eui||(eui={}));var eui;!function(t){function e(e){for(var i=e[0],n=i instanceof t.Watcher?i.getValue():i,r=e.length,o=1;r>o;o++){var s=e[o];s instanceof t.Watcher&&(s=s.getValue()),n+=s}return n}var i=function(){function i(){}return i.bindProperty=function(e,i,n,r){var o=t.Watcher.watch(e,i,null,null);if(o){var s=function(t){n[r]=t};o.setHandler(s,null),s(o.getValue())}return o},i.bindHandler=function(e,i,n,r){var o=t.Watcher.watch(e,i,n,r);return o&&n.call(r,o.getValue()),o},i.$bindProperties=function(n,r,o,s,a){if(1==r.length&&1==o.length)return i.bindProperty(n,r[0].split("."),s,a);for(var h,l=function(){s[a]=e(r)},u=o.length,p=0;u>p;p++){var c=o[p],d=r[c].split(".");h=t.Watcher.watch(n,d,null,null),h&&(r[c]=h,h.setHandler(l,null))}return l(),h},i}();t.Binding=i,__reflect(i.prototype,"eui.Binding")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(t.ToggleButton);t.ToggleSwitch=e,__reflect(e.prototype,"eui.ToggleSwitch")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemoveFromStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.$stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize()},e.prototype.onRemoveFromStage=function(t){this.$stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},e.prototype.onResize=function(t){var e=this.$stage;this.$setWidth(e.$stageWidth),this.$setHeight(e.$stageHeight)},e}(t.Group);t.UILayer=e,__reflect(e.prototype,"eui.UILayer")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,r=this.$viewport;if(n&&r){var o=egret.$TempRectangle;n.getPreferredBounds(o);var s=o.height,a=o.x,h=r.scrollV,l=r.contentHeight,u=r.height;if(0>=h){var p=s*(1- -h/(.5*u));p=Math.max(5,Math.round(p)),n.setLayoutBoundsSize(0/0,p),n.setLayoutBoundsPosition(a,0)}else if(h>=l-u){var p=s*(1-(h-l+u)/(.5*u));p=Math.max(5,Math.round(p)),n.setLayoutBoundsSize(0/0,p),n.setLayoutBoundsPosition(a,i-p)}else{var c=(i-s)*h/(l-u);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(a,c)}}},e.prototype.onPropertyChanged=function(t){switch(t.property){case"scrollV":case"contentHeight":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.VScrollBar=e,__reflect(e.prototype,"eui.VScrollBar")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],r=this.getThumbRange();return i[2]+(0!=r?(r-e)/r*n:0)},e.prototype.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.height;return this.thumb.getLayoutBounds(t),e-t.height},e.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?e-(this.pendingValue-t[2])/i*e:0,r=this.track.localToGlobal(0,n,egret.$TempPoint),o=r.x,s=r.y,a=this.thumb.$parent.globalToLocal(o,s,egret.$TempPoint).y,h=egret.$TempRectangle,l=h.height;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(h.x,Math.round(a)),this.trackHighlight){var u=this.trackHighlight.$parent.globalToLocal(o,s,egret.$TempPoint).y;this.trackHighlight.y=Math.round(u+l),this.trackHighlight.height=Math.round(e-u)}}},e}(t.SliderBase);t.VSlider=e,__reflect(e.prototype,"eui.VSlider")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._selectedChild=null,i.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION,i._selectedIndex=-1,i}return __extends(i,e),Object.defineProperty(i.prototype,"layout",{get:function(){return this.$layout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedChild",{get:function(){var t=this.selectedIndex;return t>=0&&t<this.numChildren?this.getChildAt(t):null},set:function(t){var e=this.getChildIndex(t);e>=0&&e<this.numChildren&&this.setSelectedIndex(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},set:function(t){t=0|+t,this.setSelectedIndex(t)},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndex=function(e){e!=this.selectedIndex&&(this.proposedSelectedIndex=e,this.invalidateProperties(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.prototype.$childAdded=function(i,n){e.prototype.$childAdded.call(this,i,n),this.showOrHide(i,!1);var r=this.selectedIndex;-1==r?this.setSelectedIndex(n):n<=this.selectedIndex&&this.$stage&&this.setSelectedIndex(r+1),t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.ADD,n,-1,[i.name])},i.prototype.$childRemoved=function(i,n){e.prototype.$childRemoved.call(this,i,n),this.showOrHide(i,!0);var r=this.selectedIndex;n==r?this.numChildren>0?0==n?(this.proposedSelectedIndex=0,this.invalidateProperties()):this.setSelectedIndex(0):this.setSelectedIndex(-1):r>n&&this.setSelectedIndex(r-1),t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.REMOVE,n,-1,[i.name])},i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION)},i.prototype.commitSelection=function(t){t>=0&&t<this.numChildren?(this._selectedIndex=t,this._selectedChild&&this.showOrHide(this._selectedChild,!1),this._selectedChild=this.getElementAt(this._selectedIndex),this.showOrHide(this._selectedChild,!0)):(this._selectedChild=null,this._selectedIndex=-1),this.invalidateSize(),this.invalidateDisplayList()},i.prototype.showOrHide=function(t,e){egret.is(t,"eui.UIComponent")&&(t.includeInLayout=e),t.visible=e},Object.defineProperty(i.prototype,"length",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.getItemAt=function(t){var e=this.$children[t];return e?e.name:""},i.prototype.getItemIndex=function(t){for(var e=this.$children,i=e.length,n=0;i>n;n++)if(e[n].name==t)return n;return-1},i}(t.Group);t.ViewStack=e,__reflect(e.prototype,"eui.ViewStack",["eui.ICollection","egret.IEventDispatcher"]),t.registerBindable(e.prototype,"selectedIndex")}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t){return-.5*(Math.cos(Math.PI*t)-1)}var i=function(){function t(t,i){this.easerFunction=e,this.isPlaying=!1,this.duration=500,this.currentValue=0,this.from=0,this.to=0,this.startTime=0,this.endFunction=null,this.updateFunction=t,this.thisObject=i}return t.prototype.play=function(){this.stop(),this.start()},t.prototype.start=function(){this.isPlaying=!1,this.currentValue=0,this.startTime=egret.getTimer(),this.doInterval(this.startTime),egret.startTick(this.doInterval,this)},t.prototype.stop=function(){this.isPlaying=!1,this.startTime=0,egret.stopTick(this.doInterval,this)},t.prototype.doInterval=function(t){var e=t-this.startTime;this.isPlaying||(this.isPlaying=!0);var i=this.duration,n=0==i?1:Math.min(e,i)/i;this.easerFunction&&(n=this.easerFunction(n)),this.currentValue=this.from+(this.to-this.from)*n,this.updateFunction&&this.updateFunction.call(this.thisObject,this);var r=e>=i;return r&&this.stop(),r&&this.endFunction&&this.endFunction.call(this.thisObject,this),!0},t}();t.Animation=i,__reflect(i.prototype,"eui.sys.Animation")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){var i=t.target;e.call(n,i.response)}function o(t){i.call(n)}var s=new egret.HttpRequest;s.addEventListener(egret.Event.COMPLETE,r,n),s.addEventListener(egret.IOErrorEvent.IO_ERROR,o,n),s.responseType=egret.HttpResponseType.TEXT,s.open(t),s.send()},t}();t.DefaultThemeAdapter=e,__reflect(e.prototype,"eui.DefaultThemeAdapter",["eui.IThemeAdapter"])}(eui||(eui={}));var eui;!function(t){function e(t,i){var n=Object.getOwnPropertyDescriptor(t,i);if(n)return n;var r=Object.getPrototypeOf(t);return r?e(r,i):null}function i(t,e){for(var i=t[n],r=i.length,o=0;r>o;o+=2){var s=i[o],a=i[o+1];s.call(a,e)}}var n="__listeners__",r="__bindables__",o=0,s=function(){function s(t,e,i,n){this.isExecuting=!1,this.property=t,this.handler=e,this.next=n,this.thisObject=i}return s.watch=function(t,e,i,n){if(e.length>0){var r=e.shift(),o=s.watch(null,e,i,n),a=new s(r,i,n,o);return a.reset(t),a}return null},s.checkBindable=function(s,a){var h=s[r];if(h&&-1!=h.indexOf(a))return!0;var l=egret.is(s,"egret.IEventDispatcher");l||s[n]||(s[n]=[]);var u=e(s,a);if(u&&u.set&&u.get){var p=u.set;u.set=function(e){this[a]!=e&&(p.call(this,e),l?t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,a):i(this,a))}}else{if(u&&(u.get||u.set))return!1;o++;var c="_"+o+a;s[c]=u?u.value:null,u={enumerable:!0,configurable:!0},u.get=function(){return this[c]},u.set=function(e){this[c]!=e&&(this[c]=e,l?t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,a):i(this,a))}}Object.defineProperty(s,a,u),t.registerBindable(s,a)},s.prototype.unwatch=function(){this.reset(null),this.handler=null,this.next&&(this.next.handler=null)},s.prototype.getValue=function(){return this.next?this.next.getValue():this.getHostPropertyValue()},s.prototype.setHandler=function(t,e){this.handler=t,this.thisObject=e,this.next&&this.next.setHandler(t,e)},s.prototype.reset=function(e){var i=this.host;if(i)if(egret.is(i,"egret.IEventDispatcher"))i.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this);else{var r=i[n],o=r.indexOf(this);r.splice(o-1,2)}if(this.host=e,e)if(s.checkBindable(e,this.property),egret.is(e,"egret.IEventDispatcher"))e.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this,!1,100);else{var r=e[n];r.push(this.onPropertyChange),r.push(this)}this.next&&this.next.reset(this.getHostPropertyValue())},s.prototype.getHostPropertyValue=function(){return this.host?this.host[this.property]:null},s.prototype.wrapHandler=function(t){this.onPropertyChange(t.property)},s.prototype.onPropertyChange=function(t){if(t==this.property&&!this.isExecuting)try{this.isExecuting=!0,this.next&&this.next.reset(this.getHostPropertyValue()),this.handler.call(this.thisObject,this.getValue())}finally{this.isExecuting=!1}},s}();t.Watcher=s,__reflect(s.prototype,"eui.Watcher")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return t?i._source=t:i._source=[],i}return __extends(i,e),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(e){e||(e=[]),this._source=e,this.dispatchCoEvent(t.CollectionEventKind.RESET)},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){this.dispatchCoEvent(t.CollectionEventKind.REFRESH)},Object.defineProperty(i.prototype,"length",{get:function(){return this._source.length},enumerable:!0,configurable:!0}),i.prototype.addItem=function(e){this._source.push(e),this.dispatchCoEvent(t.CollectionEventKind.ADD,this._source.length-1,-1,[e])},i.prototype.addItemAt=function(e,i){0>i||i>this._source.length,this._source.splice(i,0,e),this.dispatchCoEvent(t.CollectionEventKind.ADD,i,-1,[e])},i.prototype.getItemAt=function(t){return this._source[t]},i.prototype.getItemIndex=function(t){for(var e=this._source.length,i=0;e>i;i++)if(this._source[i]===t)return i;return-1},i.prototype.itemUpdated=function(e){var i=this.getItemIndex(e);-1!=i&&this.dispatchCoEvent(t.CollectionEventKind.UPDATE,i,-1,[e])},i.prototype.removeAll=function(){var e=this._source.concat();this._source=[],this.dispatchCoEvent(t.CollectionEventKind.REMOVE,0,-1,e)},i.prototype.removeItemAt=function(e){if(!(0>e||e>=this._source.length)){var i=this._source.splice(e,1)[0];return this.dispatchCoEvent(t.CollectionEventKind.REMOVE,e,-1,[i]),i}},i.prototype.replaceItemAt=function(e,i){if(!(0>i||i>=this._source.length)){var n=this._source.splice(i,1,e)[0];return this.dispatchCoEvent(t.CollectionEventKind.REPLACE,i,-1,[e],[n]),n}},i.prototype.replaceAll=function(t){t||(t=[]);for(var e=t.length,i=this._source.length,n=e;i>n;n++)this.removeItemAt(e);for(var n=0;e>n;n++)n>=i?this.addItemAt(t[n],n):this.replaceItemAt(t[n],n);this._source=t},i.prototype.dispatchCoEvent=function(e,i,n,r,o){t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,e,i,n,r,o)},i}(egret.EventDispatcher);t.ArrayCollection=e,__reflect(e.prototype,"eui.ArrayCollection",["eui.ICollection","egret.IEventDispatcher"]),t.registerProperty(e,"source","Array",!0)}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(){var t=i.call(this)||this;return t._widthConstraint=0/0,t.$isShowPrompt=!1,t.$promptColor=6710886,t.$isFocusIn=!1,t.initializeUIValues(),t.type=egret.TextFieldType.INPUT,t.$EditableText={0:null,1:16777215,2:!1},t}return __extends(n,i),n.prototype.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$getText=function(){var t=i.prototype.$getText.call(this);return t==this.$EditableText[0]&&(t=""),t},n.prototype.$setText=function(e){var n=this.$EditableText[0];(n!=e||null==n)&&(this.$isShowPrompt=!1,this.textColor=this.$EditableText[1],this.displayAsPassword=this.$EditableText[2]),this.$isFocusIn||(""==e||null==e)&&(e=n,this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1));var r=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),r},n.prototype.$onAddToStage=function(e,i){t.sys.UIComponentImpl.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},n.prototype.$onRemoveFromStage=function(){t.sys.UIComponentImpl.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},Object.defineProperty(n.prototype,"prompt",{get:function(){return this.$EditableText[0]},set:function(t){var e=this.$EditableText,i=e[0];if(i!=t){e[0]=t;var n=this.text;n&&n!=i||this.showPromptText()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"promptColor",{get:function(){return this.$promptColor},set:function(t){if(t=0|+t,this.$promptColor!=t){this.$promptColor=t;var e=this.text;e&&e!=this.$EditableText[0]||this.showPromptText()}},enumerable:!0,configurable:!0}),n.prototype.onfocusOut=function(){this.$isFocusIn=!1,this.text||this.showPromptText()},n.prototype.onfocusIn=function(){this.$isFocusIn=!0,this.$isShowPrompt=!1,this.displayAsPassword=this.$EditableText[2];var t=this.$EditableText,e=this.text;e&&e!=t[0]||(this.textColor=t[1],this.text="")},n.prototype.showPromptText=function(){var t=this.$EditableText;this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1),this.text=t[0]},n.prototype.$setTextColor=function(t){return t=0|+t,this.$EditableText[1]=t,this.$isShowPrompt||i.prototype.$setTextColor.call(this,t),!0},n.prototype.$setDisplayAsPassword=function(t){return this.$EditableText[2]=t,this.$isShowPrompt||i.prototype.$setDisplayAsPassword.call(this,t),!0},n.prototype.createChildren=function(){this.onfocusOut()},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$TextField,n=e[3],r=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(r=t[13]):r=t[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this.invalidateSize())}},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.TextField);t.EditableText=i,__reflect(i.prototype,"eui.EditableText",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.TextField),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){var e=i.call(this)||this;return e.$createChildrenCalled=!1,e.$fontChanged=!1,e._widthConstraint=0/0,e.initializeUIValues(),e.text=t,e}return __extends(n,i),n.prototype.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},n.prototype.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),r=e.prototype.$setWidth.call(this,t);return n&&r},n.prototype.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),r=e.prototype.$setHeight.call(this,t);return n&&r},n.prototype.$setText=function(e){var n=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),n},n.prototype.$setFont=function(t){this.$BitmapText;return this.$font==t?!1:(this.$font=t,this.$createChildrenCalled?this.$parseFont():this.$fontChanged=!0,this.$BitmapText[6]=!0,!0)},n.prototype.$parseFont=function(){if(this.$fontChanged=!1,this.$font&&"string"==typeof this.$font){var e=egret.getImplementation("eui.IAssetAdapter");e||(e=new t.DefaultAssetAdapter),e.getAsset(this.$font,this.$onFontChanged,this)}else this.$setFontData(this.$font)},n.prototype.$onFontChanged=function(t,e){e===this.$font&&this.$setFontData(t)},n.prototype.$setFontData=function(t){return t==this.$BitmapText[5]?!1:(this.$BitmapText[5]=t,this.$invalidateContentBounds(),!0)},n.prototype.createChildren=function(){this.$fontChanged&&this.$parseFont(),this.$createChildrenCalled=!0},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var t=this.$UIComponent,e=this.$BitmapText,n=e[0],r=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(r=t[13]):r=t[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},n.prototype.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(t,e){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(t){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this.invalidateSize())}},n.prototype.setLayoutBoundsPosition=function(t,e){},n.prototype.getLayoutBounds=function(t){},n.prototype.getPreferredBounds=function(t){},n}(egret.BitmapText);t.BitmapLabel=i,__reflect(i.prototype,"eui.BitmapLabel",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.BitmapText),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t){var e=t-1;return e*e*e+1}var i=4,n=[1,1.33,1.66,2],r=2.33,o=.02,s=.998,a=.95,h=Math.log(s),l=function(){function l(i,n,r){this.$scrollFactor=1,this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.$bounces=!0,this.started=!0,this.updateFunction=i,this.endFunction=n,this.target=r,this.animation=new t.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=e}return l.prototype.isPlaying=function(){return this.animation.isPlaying},l.prototype.stop=function(){this.animation.stop(),egret.stopTick(this.onTick,this),this.started=!1},l.prototype.isStarted=function(){return this.started},l.prototype.start=function(t){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=egret.getTimer(),this.previousPosition=this.currentPosition=t,this.offsetPoint=t,egret.startTick(this.onTick,this)},l.prototype.update=function(t,e,i){e=Math.max(e,0),this.currentPosition=t,this.maxScrollPos=e;var n=this.offsetPoint-t,r=n+i;this.offsetPoint=t,0>r&&(this.$bounces?r-=.5*n:r=0),r>e&&(this.$bounces?r-=.5*n:r=e),this.currentScrollPos=r,this.updateFunction.call(this.target,r)},l.prototype.finish=function(t,e){egret.stopTick(this.onTick,this),this.started=!1;for(var i=this.velocity*r,l=this.previousVelocity,u=l.length,p=r,c=0;u>c;c++){var d=n[c];i+=l[0]*d,p+=d}var f=i/p,y=Math.abs(f),v=0,g=0;if(y>o)if(g=t+(f-o)/h*2*this.$scrollFactor,0>g||g>e)for(g=t;Math.abs(f)>o;)g-=f,f*=0>g||g>e?s*a:s,v++;else v=Math.log(o/y)/h;else g=t;if(this.target.$getThrowInfo){var m=this.target.$getThrowInfo(t,g);g=m.toPos}v>0?(this.$bounces||(0>g?g=0:g>e&&(g=e)),this.throwTo(g,v)):this.finishScrolling()},l.prototype.onTick=function(t){var e=t-this.previousTime;if(e>10){var n=this.previousVelocity;n.length>=i&&n.shift(),this.velocity=(this.currentPosition-this.previousPosition)/e,n.push(this.velocity),this.previousTime=t,this.previousPosition=this.currentPosition}return!0},l.prototype.finishScrolling=function(t){var e=this.currentScrollPos,i=this.maxScrollPos,n=e;0>e&&(n=0),e>i&&(n=i),this.throwTo(n,300)},l.prototype.throwTo=function(t,e){void 0===e&&(e=500);var i=this.currentScrollPos;if(i==t)return void this.endFunction.call(this.target);var n=this.animation;n.duration=e,n.from=i,n.to=t,n.play()},l.prototype.onScrollingUpdate=function(t){this.currentScrollPos=t.currentValue,this.updateFunction.call(this.target,t.currentValue)},l}();t.TouchScroll=l,__reflect(l.prototype,"eui.sys.TouchScroll")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t}();e.LTR="ltr",e.RTL="rtl",e.TTB="ttb",e.BTT="btt",t.Direction=e,__reflect(e.prototype,"eui.Direction")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t}();e.AUTO="auto",e.OFF="off",e.ON="on",t.ScrollPolicy=e,__reflect(e.prototype,"eui.ScrollPolicy")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n.delayList=[],n.skinMap={},n.$styles={},n.initialized=!t,i&&egret.registerImplementation("eui.Theme",n),n.$configURL=t,n.load(t),n}return __extends(i,e),i.prototype.load=function(e){var i=egret.getImplementation("eui.IThemeAdapter");i||(i=new t.DefaultThemeAdapter),i.getTheme(e,this.onConfigLoaded,this.onConfigLoaded,this)},i.prototype.onConfigLoaded=function(t){var e;if(t&&(e=JSON.parse(t)),e&&e.skins)for(var i=this.skinMap,n=e.skins,r=Object.keys(n),o=r.length,s=0;o>s;s++){var a=r[s];i[a]||this.mapSkin(a,n[a])}e.styles&&(this.$styles=e.styles),e.exmls&&0!=e.exmls.length?e.exmls[0].gjs?(e.exmls.forEach(function(t){return EXML.$parseURLContentAsJs(t.path,t.gjs,t.className)}),this.onLoaded()):e.exmls[0].content?(e.exmls.forEach(function(t){return EXML.$parseURLContent(t.path,t.content)}),this.onLoaded()):EXML.$loadAll(e.exmls,this.onLoaded,this,!0):this.onLoaded()},i.prototype.onLoaded=function(t,e){this.initialized=!0,this.handleDelayList(),this.dispatchEventWith(egret.Event.COMPLETE)},i.prototype.handleDelayList=function(){for(var t=this.delayList,e=t.length,i=0;e>i;i++){var n=t[i];if(!n.$Component[5]){var r=this.getSkinName(n);r&&(n.$Component[1]=r,n.$parseSkinName())}}t.length=0},i.prototype.getSkinName=function(t){if(!this.initialized)return-1==this.delayList.indexOf(t)&&this.delayList.push(t),"";var e=this.skinMap,i=e[t.hostComponentKey];return i||(i=this.findSkinName(t)),i},i.prototype.findSkinName=function(t){if(!t)return"";var e=t.__class__;if(void 0===e)return"";var i=this.skinMap[e];return i||"eui.Component"==e?i:this.findSkinName(Object.getPrototypeOf(t))},i.prototype.mapSkin=function(t,e){this.skinMap[t]=e},i.prototype.$getStyleConfig=function(t){return this.$styles[t]},i}(egret.EventDispatcher);t.Theme=e,__reflect(e.prototype,"eui.Theme")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,r,o,s,a,h){var l=t.call(this,e,i,n)||this;return l.$initTo(r,o,s,a,h),l}return __extends(e,t),e.prototype.$initTo=function(t,e,i,n,r){this.kind=t,this.location=0|+e,this.oldLocation=0|+i,this.items=n||[],this.oldItems=r||[]},e.prototype.clean=function(){t.prototype.clean.call(this),this.items=this.oldItems=null},e.dispatchCollectionEvent=function(t,i,n,r,o,s,a){if(!t.hasEventListener(i))return!0;var h=egret.Event.create(e,i);h.$initTo(n,r,o,s,a);var l=t.dispatchEvent(h);return egret.Event.release(h),l},e}(egret.Event);e.COLLECTION_CHANGE="collectionChange",t.CollectionEvent=e,__reflect(e.prototype,"eui.CollectionEvent")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t}();e.ADD="add",e.REFRESH="refresh",e.REMOVE="remove",e.REPLACE="replace",e.RESET="reset",e.UPDATE="update",t.CollectionEventKind=e,__reflect(e.prototype,"eui.CollectionEventKind")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e.item=null,e.itemRenderer=null,e.itemIndex=-1,e}return __extends(e,t),e.prototype.clean=function(){t.prototype.clean.call(this),this.item=this.itemRenderer=null},e.dispatchItemTapEvent=function(t,i,n){if(!t.hasEventListener(i))return!0;var r=egret.Event.create(e,i);r.item=n.data,r.itemIndex=n.itemIndex,r.itemRenderer=n;var o=t.dispatchEvent(r);return egret.Event.release(r),o},e}(egret.Event);e.ITEM_TAP="itemTap",t.ItemTapEvent=e,__reflect(e.prototype,"eui.ItemTapEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n)||this;return o.property=r,o}return __extends(e,t),e.dispatchPropertyEvent=function(t,i,n){if(!t.hasEventListener(i))return!0;var r=egret.Event.create(e,i);r.property=n;var o=t.dispatchEvent(r);return egret.Event.release(r),o},e}(egret.Event);e.PROPERTY_CHANGE="propertyChange",t.PropertyEvent=e,__reflect(e.prototype,"eui.PropertyEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,r,o){var s=t.call(this,e,i,n)||this;return r=+r,o=+o,s.currentPos=r,s.toPos=o,s}return __extends(e,t),e}(egret.Event);e.THROW="throw",t.ScrollerThrowEvent=e,__reflect(e.prototype,"eui.ScrollerThrowEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return __extends(e,t),e.dispatchUIEvent=function(t,i,n,r){if(!t.hasEventListener(i))return!0;var o=egret.Event.create(e,i,n,r),s=t.dispatchEvent(o);return egret.Event.release(o),s},e}(egret.Event);e.CREATION_COMPLETE="creationComplete",e.CHANGE_END="changeEnd",e.CHANGE_START="changeStart",e.CLOSING="closing",e.MOVE="move",t.UIEvent=e,__reflect(e.prototype,"eui.UIEvent")}(eui||(eui={}));var eui;!function(t){var e;!function(t){var e="eui.State",i="eui.AddItems",n="eui.SetProperty",r="eui.SetStateProperty",o="eui.Binding.$bindProperties",s=function(){function t(){this.indent=0}return t.prototype.toCode=function(){return""},t.prototype.getIndent=function(t){void 0===t&&(t=this.indent);for(var e="",i=0;t>i;i++)e+="	";return e},t}();t.CodeBase=s,__reflect(s.prototype,"eui.sys.CodeBase");var a=function(t){function e(){var e=t.apply(this,arguments)||this;return e.className="",e.superClass="",e.innerClassBlock=[],e.variableBlock=[],e.functionBlock=[],e}return __extends(e,t),e.prototype.addInnerClass=function(t){-1==this.innerClassBlock.indexOf(t)&&this.innerClassBlock.push(t)},e.prototype.addVariable=function(t){-1==this.variableBlock.indexOf(t)&&this.variableBlock.push(t)},e.prototype.getVariableByName=function(t){for(var e=this.variableBlock,i=e.length,n=0;i>n;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.addFunction=function(t){-1==this.functionBlock.indexOf(t)&&this.functionBlock.push(t)},e.prototype.getFuncByName=function(t){for(var e=this.functionBlock,i=e.length,n=0;i>n;n++){var r=e[n];if(r.name==t)return r}return null},e.prototype.toCode=function(){var t=this.indent,e=this.getIndent(t),i=this.getIndent(t+1),n=this.getIndent(t+2),r=e+"(function (";r+=this.superClass?"_super) {\n"+i+"__extends("+this.className+", _super);\n":") {\n";for(var o=this.innerClassBlock,s=o.length,a=0;s>a;a++){var h=o[a];h.indent=t+1,r+=i+"var "+h.className+" = "+h.toCode()+"\n\n"}r+=i+"function "+this.className+"() {\n",this.superClass&&(r+=n+"_super.call(this);\n");var l=this.variableBlock;s=l.length;for(var a=0;s>a;a++){var u=l[a];u.defaultValue&&(r+=n+u.toCode()+"\n")}if(this.constructCode){var p=this.constructCode.toCode().split("\n");s=p.length;for(var a=0;s>a;a++){var c=p[a];r+=n+c+"\n"}}r+=i+"}\n",r+=i+"var _proto = "+this.className+".prototype;\n\n";var d=this.functionBlock;s=d.length;for(var a=0;s>a;a++){var f=d[a];f.indent=t+1,r+=f.toCode()+"\n"}return r+=i+"return "+this.className+";\n"+e,r+=this.superClass?"})("+this.superClass+");":"})();"},e}(s);t.EXClass=a,__reflect(a.prototype,"eui.sys.EXClass");var h=function(t){function e(){var e=t.apply(this,arguments)||this;return e.lines=[],e}return __extends(e,t),e.prototype.addVar=function(t,e){var i=e?" = "+e:"";this.addCodeLine("var "+t+i+";")},e.prototype.addAssignment=function(t,e,i){var n=i?"."+i:"";this.addCodeLine(t+n+" = "+e+";")},e.prototype.addReturn=function(t){this.addCodeLine("return "+t+";")
},e.prototype.addEmptyLine=function(){this.addCodeLine("")},e.prototype.startIf=function(t){this.addCodeLine("if("+t+")"),this.startBlock()},e.prototype.startElse=function(){this.addCodeLine("else"),this.startBlock()},e.prototype.startElseIf=function(t){this.addCodeLine("else if("+t+")"),this.startBlock()},e.prototype.startBlock=function(){this.addCodeLine("{"),this.indent++},e.prototype.endBlock=function(){this.indent--,this.addCodeLine("}")},e.prototype.doFunction=function(t,e){var i=e.join(",");this.addCodeLine(t+"("+i+")")},e.prototype.addCodeLine=function(t){this.lines.push(this.getIndent()+t)},e.prototype.addCodeLineAt=function(t,e){this.lines.splice(e,0,this.getIndent()+t)},e.prototype.containsCodeLine=function(t){return-1!=this.lines.indexOf(t)},e.prototype.concat=function(t){this.lines=this.lines.concat(t.lines)},e.prototype.toCode=function(){return this.lines.join("\n")},e}(s);t.EXCodeBlock=h,__reflect(h.prototype,"eui.sys.EXCodeBlock");var l=function(t){function e(){var e=t.apply(this,arguments)||this;return e.codeBlock=null,e.isGet=!1,e.name="",e}return __extends(e,t),e.prototype.toCode=function(){var t,e=this.getIndent(),i=this.getIndent(this.indent+1),n=e;if(this.isGet?(t=this.getIndent(this.indent+2),n+='Object.defineProperty(_proto, "skinParts", {\n',n+=i+"get: function () {\n"):(t=i,n+="_proto."+this.name+" = function () {\n"),this.codeBlock)for(var r=this.codeBlock.toCode().split("\n"),o=r.length,s=0;o>s;s++){var a=r[s];n+=t+a+"\n"}return n+=this.isGet?i+"},\n"+i+"enumerable: true,\n"+i+"configurable: true\n"+e+"});":e+"};"},e}(s);t.EXFunction=l,__reflect(l.prototype,"eui.sys.EXFunction");var u=function(t){function e(e,i){var n=t.call(this)||this;return n.indent=2,n.name=e,n.defaultValue=i,n}return __extends(e,t),e.prototype.toCode=function(){return this.defaultValue?"this."+this.name+" = "+this.defaultValue+";":""},e}(s);t.EXVariable=u,__reflect(u.prototype,"eui.sys.EXVariable");var p=function(t){function i(e,i){var n=t.call(this)||this;return n.name="",n.stateGroups=[],n.addItems=[],n.setProperty=[],n.name=e,i&&(n.stateGroups=i),n}return __extends(i,t),i.prototype.addOverride=function(t){t instanceof c?this.addItems.push(t):this.setProperty.push(t)},i.prototype.toCode=function(){for(var t=this.getIndent(1),i="new "+e+' ("'+this.name+'",\n'+t+"[\n",n=0,r=!0,o=this.addItems.concat(this.setProperty);n<o.length;){r?r=!1:i+=",\n";for(var s=o[n],a=s.toCode().split("\n"),h=a.length,l=0;h>l;l++){var u=a[l];a[l]=t+t+u}i+=a.join("\n"),n++}return i+="\n"+t+"])"},i}(s);t.EXState=p,__reflect(p.prototype,"eui.sys.EXState");var c=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.target=e,o.property=i,o.position=n,o.relativeTo=r,o}return __extends(e,t),e.prototype.toCode=function(){var t="new "+i+'("'+this.target+'","'+this.property+'",'+this.position+',"'+this.relativeTo+'")';return t},e}(s);t.EXAddItems=c,__reflect(c.prototype,"eui.sys.EXAddItems");var d=function(t){function e(e,i,n){var r=t.call(this)||this;return r.target=e,r.name=i,r.value=n,r}return __extends(e,t),e.prototype.toCode=function(){return"new "+n+'("'+this.target+'","'+this.name+'",'+this.value+")"},e}(s);t.EXSetProperty=d,__reflect(d.prototype,"eui.sys.EXSetProperty");var f=function(t){function e(e,i,n,r){var o=t.call(this)||this;return e=e?"this."+e:"this",o.target=e,o.property=i,o.templates=n,o.chainIndex=r,o}return __extends(e,t),e.prototype.toCode=function(){var t=this.templates.join(","),e=this.chainIndex.join(",");return"new "+r+"(this, ["+t+"],["+e+"],"+this.target+',"'+this.property+'")'},e}(s);t.EXSetStateProperty=f,__reflect(f.prototype,"eui.sys.EXSetStateProperty");var y=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.target=e,o.property=i,o.templates=n,o.chainIndex=r,o}return __extends(e,t),e.prototype.toCode=function(){var t=this.templates.join(","),e=this.chainIndex.join(",");return o+"(this, ["+t+"],["+e+"],"+this.target+',"'+this.property+'")'},e}(s);t.EXBinding=y,__reflect(y.prototype,"eui.sys.EXBinding")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var EXML;!function(t){function e(t){return h.parse(t)}function i(t,e,i,n){if(void 0===n&&(n=!1),n&&t in u)return void(e&&e.call(i,u[t],t));var r=l[t];return r?void r.push([e,i]):(l[t]=[[e,i]],void a(t,s))}function n(t,e,i,n){if(void 0===n&&(n=!1),!t||0==t.length)return void(e&&e.call(i,[],t));var o=[];t.forEach(function(s){if(n&&s in u)return o[s]="",void o.push(s);var h=function(n,s){o[n]=s,o.push(n),o.length==t.length&&r(t,o,e,i)};a(s,h)})}function r(t,e,i,n){var r=[];t.forEach(function(t,i){if(t in u&&!e[t])return void(r[i]=u[t]);var n=e[t],o=s(t,n);r[i]=o}),i&&i.call(n,r,t)}function o(t,e,i){var n=null;if(e&&(n=h.$parseCode(e,i)),t){u[t]=n;var r=l[t];delete l[t];for(var o=r?r.length:0,s=0;o>s;s++){var a=r[s];a[0]&&a[1]&&a[0].call(a[1],n,t)}}return n}function s(t,i){var n=null;if(i&&(n=e(i)),t){u[t]=n;var r=l[t];delete l[t];for(var o=r?r.length:0,s=0;o>s;s++){var a=r[s];a[0]&&a[1]&&a[0].call(a[1],n,t)}}return n}function a(t,e){var i=t;-1==t.indexOf("://")&&(i=p+t);var n=function(i){i||(i=""),e(t,i)},r=egret.getImplementation("eui.IThemeAdapter");r||(r=new eui.DefaultThemeAdapter),r.getTheme(i,n,n,this)}var h=new eui.sys.EXMLParser,l={},u={},p="";Object.defineProperty(t,"prefixURL",{get:function(){return p},set:function(t){p=t},enumerable:!0,configurable:!0}),t.parse=e,t.load=i,t.$loadAll=n,t.$parseURLContentAsJs=o,t.$parseURLContent=s}(EXML||(EXML={}));var eui;!function(t){var e;!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){var e=egret.getDefinitionByName(t);return e?e.prototype:null}function n(t){if(!t)return null;var e;return e=new t}t.NS_S="http://ns.egret.com/eui",t.NS_W="http://ns.egret.com/wing";var r=["Point","Matrix","Rectangle"],o=["Array","boolean","string","number"],s="eui.",a=0,h={},l=function(){function l(){}return l.prototype.$describe=function(t){if(!t)return null;var i=Object.getPrototypeOf(t);if(!i)return null;var r;if(i.hasOwnProperty("__hashCode__")&&(r=h[i.__hashCode__]))return r;var s=Object.getPrototypeOf(i);if(!s)return null;var l=n(s.constructor),u=this.$describe(l);if(u){var p=function(){};p.prototype=u,r=new p}else r={};for(var c=Object.keys(i).concat(Object.keys(t)),d=c.length,f=t.__meta__,y=0;d>y;y++){var v=c[y];if("constructor"!=v&&"_"!=v.charAt(0)&&"$"!=v.charAt(0)){var g=void 0;if(f&&f[v])g=f[v];else if(e(t[v]))g="Array";else{if(g=typeof t[v],"function"==g)continue;-1==o.indexOf(g)&&(g="any")}r[v]=g}}return Object.getPrototypeOf(s)&&(i.__hashCode__=a++,h[i.__hashCode__]=r),r},l.prototype.getClassNameById=function(e,n){if(n==t.NS_S){if("Object"==e)return e;if(-1!=r.indexOf(e))return"egret."+e}var a="";return-1!=o.indexOf(e)?e:(n==t.NS_W||(a=n&&n!=t.NS_S?n.substring(0,n.length-1)+e:s+e),i(a)||(a=""),a)},l.prototype.getDefaultPropById=function(t,e){var n,r=this.getClassNameById(t,e),o=i(r);return o&&(n=o.__defaultProperty__),n?n:""},l.prototype.getPropertyType=function(t,e){if("Object"==e)return"any";var r="",o=i(e);if(o){if(!o.hasOwnProperty("__hashCode__")){var s=egret.getDefinitionByName(e),a=n(s);if(!a)return r;this.$describe(a)}var l=h[o.__hashCode__];l&&(r=l[t])}return r},l}();t.EXMLConfig=l,__reflect(l.prototype,"eui.sys.EXMLConfig")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.en_US=egret.$locale_strings.en_US||{};var e=egret.$locale_strings.en_US;e[2001]="EXML parsing error {0}: EXML file can't be found ",e[2002]="EXML parsing error : invalid XML file:\n{0}",e[2003]="EXML parsing error {0}: the class definitions corresponding to nodes can't be found  \n {1}",e[2004]="EXML parsing error {0}: nodes cannot contain id property with the same name \n {1}",e[2005]="EXML parsing error {0}: property with the name of '{1}' does not exist on the node, or the property does not have a default value: \n {2}",e[2006]="EXML parsing error {0}: undefined view state name: '{1}' \n {2}",e[2007]="EXML parsing error {0}: only UIComponent objects within the container can use the includeIn and excludeFrom properties\n {1}",e[2008]="EXML parsing error {0}: fail to assign values of '{1}' class to property: '{2}' \n {3}",e[2009]="EXML parsing error {0}: only one ID can be referenced in the node property value '{}' label; and complex expression is not allowed to use \n {1}",e[2010]="EXML parsing error {0}: ID referenced by property: '{1}':  '{2}' does not exist \n {3}",e[2011]="EXML parsing error {0}: fail to assign more than one child nodes to the same property: '{1}' \n {2}",e[2012]="EXML parsing error {0}: no default property exists on the node; and you must explicitly declare the property name that the child node  is assigned to \n {1}",e[2013]="EXML parsing error {0}: view state grammar is not allowed to use on property nodes of Array class \n {1} ",e[2014]="EXML parsing error {0}: assigning the skin class itself to the node property is not allowed \n {1}",e[2015]="EXML parsing error {0}: class definition referenced by node: {1} does not exist \n {2}",e[2016]="EXML parsing error {0}: format error of 'scale9Grid' property value on the node: {1}",e[2017]="EXML parsing error {0}: namespace prefix missing on the node: {1}",e[2018]="EXML parsing error {0}: format error of 'skinName' property value on the node: {1}",e[2019]="EXML parsing error {0}: the container’s child item must be visible nodes: {1}",e[2020]="EXML parsing error {0}: for child nodes in w: Declarations, the includeIn and excludeFrom properties are not allowed to use \n {1}",e[2021]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[2022]="EXML parsing error: there contains illegal characters in the id `{0}`",e[2101]="EXML parsing warnning : fail to register the class property : {0},there is already a class with the same name in the global,please try to rename the class name for the exml. \n {1}",e[2102]="EXML parsing warnning {0}: no child node can be found on the property code \n {1}",e[2103]="EXML parsing warnning {0}: the same property '{1}' on the node is assigned multiple times \n {2}",e[2104]="EXML parsing warnning, Instantiate class {0} error，the parameters of its constructor method must be empty.",e[2201]="BasicLayout doesn't support virtualization.",e[2202]="parse skinName error，the parsing result of skinName must be a instance of eui.Skin.",e[2203]="Could not find the skin class '{0}'。",e[2301]="parse source failed，could not find asset from URL：{0} ."}(eui||(eui={}));var eui;!function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.zh_CN=egret.$locale_strings.zh_CN||{};var e=egret.$locale_strings.zh_CN;e[2001]="EXML解析错误 {0}: 找不到EXML文件",e[2002]="EXML解析错误: 不是有效的XML文件:\n{0}",e[2003]="EXML解析错误 {0}: 无法找到节点所对应的类定义\n{1}",e[2004]="EXML解析错误 {0}: 节点不能含有同名的id属性\n{1}",e[2005]="EXML解析错误 {0}: 节点上不存在名为'{1}'的属性，或者该属性没有初始值:\n{2}",e[2006]="EXML解析错误 {0}: 未定义的视图状态名称:'{1}'\n{2}",e[2007]="EXML解析错误 {0}: 只有处于容器内的 UIComponent 对象可以使用includeIn和excludeFrom属性\n{1}",e[2008]="EXML解析错误 {0}: 无法将'{1}'类型的值赋给属性:'{2}'\n{3}",e[2009]="EXML解析错误 {0}: 在节点属性值的‘{}’标签内只能引用一个ID，不允许使用复杂表达式\n{1}",e[2010]="EXML解析错误 {0}: 属性:'{1}'所引用的ID: '{2}'不存在\n{3}",e[2011]="EXML解析错误 {0}: 无法将多个子节点赋值给同一个属性:'{1}'\n{2}",e[2012]="EXML解析错误 {0}: 节点上不存在默认属性，必须显式声明子节点要赋值到的属性名\n{1}",e[2013]="EXML解析错误 {0}: 类型为Array的属性节点上不允许使用视图状态语法\n{1}",e[2014]="EXML解析错误 {0}: 不允许将皮肤类自身赋值给节点属性\n{1}",e[2015]="EXML解析错误 {0}: 节点引用的类定义:{1}不存在\n{2}",e[2016]="EXML解析错误 {0}: 节点上'scale9Grid'属性值的格式错误:{1}",e[2017]="EXML解析错误 {0}: 节点上缺少命名空间前缀:{1}",e[2018]="EXML解析错误 {0}: 节点上'skinName'属性值的格式错误:{1}",e[2019]="EXML解析错误 {0}: 容器的子项必须是可视节点:{1}",e[2020]="EXML解析错误 {0}: 在w:Declarations内的子节点，不允许使用includeIn和excludeFrom属性\n{1}",e[2021]="{0} 中存在编译错误，属性名 : {1}，属性值 : {2}",e[2022]="EXML解析错误: id `{0}` 中含有非法字符",e[2101]="EXML解析警告: 在EXML根节点上声明的 class 属性: {0} 注册失败，所对应的类已经存在，请尝试重命名要注册的类名。\n{1}",e[2102]="EXML解析警告 {0}: 在属性节点上找不到任何子节点\n{1}",e[2103]="EXML解析警告 {0}: 节点上的同一个属性'{1}'被多次赋值\n{2}",e[2104]="EXML解析警告，无法直接实例化自定义组件：{0} ，在EXML中使用的自定义组件必须要能直接被实例化，否则可能导致后续EXML解析报错。",e[2201]="BasicLayout 不支持虚拟化。",e[2202]="皮肤解析出错，属性 skinName 的值必须要能够解析为一个 eui.Skin 的实例。",e[2203]="找不到指定的皮肤类 '{0}'。",e[2301]="素材解析失败，找不到URL：{0} 所对应的资源。"}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.measure=function(){e.prototype.measure.call(this),t.sys.measure(this.$target)},i.prototype.updateDisplayList=function(i,n){e.prototype.updateDisplayList.call(this,i,n);var r=this.$target,o=t.sys.updateDisplayList(r,i,n);r.setContentSize(Math.ceil(o.x),Math.ceil(o.y))},i}(t.LayoutBase);t.BasicLayout=e,__reflect(e.prototype,"eui.BasicLayout")}(eui||(eui={})),function(t){var e;!function(t){function e(t,e){if(!t||"number"==typeof t)return t;var i=t,n=i.indexOf("%");if(-1==n)return+i;var r=+i.substring(0,n);return.01*r*e}function i(t){if(t){for(var e=0,i=0,n=egret.$TempRectangle,o=t.numChildren,s=0;o>s;s++){var a=t.getChildAt(s);if(egret.is(a,r)&&a.$includeInLayout){var h=a.$UIComponent,l=+h[4],u=+h[5],p=+h[0],c=+h[1],d=+h[2],f=+h[3],y=void 0,v=void 0;a.getPreferredBounds(n),isNaN(p)||isNaN(c)?isNaN(l)?isNaN(p)&&isNaN(c)?y=n.x:(y=isNaN(p)?0:p,y+=isNaN(c)?0:c):y=2*Math.abs(l):y=p+c,isNaN(d)||isNaN(f)?isNaN(u)?isNaN(d)&&isNaN(f)?v=n.y:(v=isNaN(d)?0:d,v+=isNaN(f)?0:f):v=2*Math.abs(u):v=d+f;var g=n.width,m=n.height;e=Math.ceil(Math.max(e,y+g)),i=Math.ceil(Math.max(i,v+m))}}t.setMeasuredSize(e,i)}}function n(t,i,n){if(t){for(var o=t.numChildren,s=0,a=0,h=egret.$TempRectangle,l=0;o>l;l++){var u=t.getChildAt(l);if(egret.is(u,r)&&u.$includeInLayout){var p=u.$UIComponent,c=e(p[4],.5*i),d=e(p[5],.5*n),f=e(p[0],i),y=e(p[1],i),v=e(p[2],n),g=e(p[3],n),m=p[6],$=p[7],E=0/0,C=0/0;isNaN(f)||isNaN(y)?isNaN(m)||(E=Math.round(i*Math.min(.01*m,1))):E=i-y-f,isNaN(v)||isNaN(g)?isNaN($)||(C=Math.round(n*Math.min(.01*$,1))):C=n-g-v,u.setLayoutBoundsSize(E,C),u.getLayoutBounds(h);var _=h.width,S=h.height,P=0/0,T=0/0;P=isNaN(c)?isNaN(f)?isNaN(y)?h.x:i-_-y:f:Math.round((i-_)/2+c),T=isNaN(d)?isNaN(v)?isNaN(g)?h.y:n-S-g:v:Math.round((n-S)/2+d),u.setLayoutBoundsPosition(P,T),s=Math.max(s,P+_),a=Math.max(a,T+S)}}return egret.$TempPoint.setTo(s,a)}}var r="eui.UIComponent";t.measure=i,t.updateDisplayList=n}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t}();e.LEFT="left",e.JUSTIFY_USING_GAP="justifyUsingGap",e.JUSTIFY_USING_WIDTH="justifyUsingWidth",t.ColumnAlign=e,__reflect(e.prototype,"eui.ColumnAlign")}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){return i.apply(this,arguments)||this}return __extends(n,i),n.prototype.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,r=0,o=0,s=egret.$TempRectangle,a=0;i>a;a++){var h=t.getElementAt(a);egret.is(h,e)&&h.$includeInLayout?(h.getPreferredBounds(s),r+=s.width,o=Math.max(o,s.height)):n--}r+=(n-1)*this.$gap;var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+l,o+u)},n.prototype.measureVirtual=function(){for(var t=this.$target,i=this.$typicalWidth,n=this.getElementTotalSize(),r=Math.max(this.maxElementSize,this.$typicalHeight),o=egret.$TempRectangle,s=this.endIndex,a=this.elementSizeTable,h=this.startIndex;s>h;h++){var l=t.getElementAt(h);egret.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(o),n+=o.width,n-=isNaN(a[h])?i:a[h],r=Math.max(r,o.height))}var u=this.$paddingLeft+this.$paddingRight,p=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(n+u,r+p)},n.prototype.updateDisplayListReal=function(i,n){var r=this.$target,o=this.$paddingLeft,s=this.$paddingRight,a=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=Math.max(0,i-o-s),p=Math.max(0,n-a-h),c=this.$horizontalAlign==t.JustifyAlign.JUSTIFY,d=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;d||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?f=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(f=1));var y,v,g,m=r.numElements,$=m,E=o,C=a,_=0,S=0,P=[],T=u,x=this.maxElementSize,b=egret.$TempRectangle;for(y=0;m>y;y++){var I=r.getElementAt(y);if(egret.is(I,e)&&I.$includeInLayout)if(I.getPreferredBounds(b),x=Math.max(x,b.height),c)_+=b.width;else{var L=I.$UIComponent;isNaN(L[6])?T-=b.width:(S+=L[6],g=new t.sys.ChildInfo,g.layoutElement=I,g.percent=L[6],g.min=L[12],g.max=L[13],P.push(g))}else $--}T-=l*($-1),T=T>0?T:0;var N,O=u-_-l*($-1),A=$,M={};if(c){if(0>O){for(N=T/$,y=0;m>y;y++)v=r.getElementAt(y),egret.is(v,e)&&v.$includeInLayout&&(v.getPreferredBounds(b),b.width<=N&&(T-=b.width,A--));T=T>0?T:0}}else if(S>0){this.flexChildrenProportionally(u,T,S,P);var B=0,D=P.length;for(y=0;D>y;y++){g=P[y];var R=Math.round(g.size+B);B+=g.size-R,M[g.layoutElement.$hashCode]=R,T-=R}T=T>0?T:0}this.$horizontalAlign==egret.HorizontalAlign.CENTER?E=o+.5*T:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(E=o+T);var w=o,V=a,z=0,H=0,U=Math.ceil(p);this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(U=Math.ceil(Math.max(p,x)));var k,F,G=0;for(y=0;m>y;y++){var j=0;if(v=r.getElementAt(y),egret.is(v,e)&&v.$includeInLayout){if(v.getPreferredBounds(b),k=0/0,c?(F=0/0,O>0?F=T*b.width/_:0>O&&b.width>N&&(F=T/A),isNaN(F)||(k=Math.round(F+G),G+=F-k)):k=M[v.$hashCode],d)C=a,v.setLayoutBoundsSize(k,U),v.getLayoutBounds(b);else{var X=0/0,L=v.$UIComponent;if(!isNaN(v.percentHeight)){var W=Math.min(100,L[7]);X=Math.round(p*W*.01)}v.setLayoutBoundsSize(k,X),v.getLayoutBounds(b),j=(p-b.height)*f,j=j>0?j:0,C=a+j}v.setLayoutBoundsPosition(Math.round(E),Math.round(C)),z=Math.ceil(b.width),H=Math.ceil(b.height),w=Math.max(w,E+z),V=Math.max(V,C+H),E+=z+l}}this.maxElementSize=x,r.setContentSize(w+s,V+h)},n.prototype.updateDisplayListVirtual=function(i,n){var r=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,s=this.$paddingRight,a=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=r.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=this.getStartPosition(u)-l+s,void r.setContentSize(o,r.contentHeight);var p=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,p);var c=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,d=this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;c||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?f=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(f=1));var y,v=egret.$TempRectangle,g=Math.max(0,n-a-h),m=Math.ceil(g),$=this.$typicalHeight,E=this.$typicalWidth,C=this.maxElementSize,_=Math.max($,this.maxElementSize);if(d){for(var S=this.startIndex;p>=S;S++)y=r.getVirtualElementAt(S),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(v),C=Math.max(C,v.height));m=Math.ceil(Math.max(g,C))}for(var P,T=0,x=0,b=0,I=!1,L=this.elementSizeTable,N=this.startIndex;p>=N;N++){var O=0;y=r.getVirtualElementAt(N),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(v),d||(C=Math.max(C,v.height)),c?(x=a,y.setLayoutBoundsSize(0/0,m),y.getLayoutBounds(v)):(y.getLayoutBounds(v),O=(g-v.height)*f,O=O>0?O:0,x=a+O),b=Math.max(b,v.height),I||(P=isNaN(L[N])?E:L[N],P!=v.width&&(I=!0)),L[N]=v.width,T=this.getStartPosition(N),y.setLayoutBoundsPosition(Math.round(T),Math.round(x)))}b+=a+h,o=this.getStartPosition(u)-l+s,this.maxElementSize=C,r.setContentSize(o,b),(I||_<this.maxElementSize)&&r.invalidateSize()},n.prototype.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.x}for(var i=this.$typicalWidth,n=this.$paddingLeft,r=this.$gap,o=this.elementSizeTable,s=0;t>s;s++){var a=o[s];isNaN(a)&&(a=i),n+=a+r}return n},n.prototype.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalWidth),e}return this.$target?this.$target.getElementAt(t).width:0},n.prototype.getElementTotalSize=function(){for(var t=this.$typicalWidth,e=this.$gap,i=0,n=this.$target.numElements,r=this.elementSizeTable,o=0;n>o;o++){var s=r[o];isNaN(s)&&(s=t),i+=s+e}return i-=e},n.prototype.elementAdded=function(t){this.useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalWidth))},n.prototype.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(e[10]<=0||e[11]<=0)return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingRight,r=t.scrollH;if(r>n-this.$paddingRight)return this.startIndex=-1,this.endIndex=-1,!1;var o=t.scrollH+e[10];if(o<this.$paddingLeft)return this.startIndex=-1,this.endIndex=-1,!1;var s=this.startIndex,a=this.endIndex;return this.startIndex=this.findIndexAt(r,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(o,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),s!=this.startIndex||a!=this.endIndex},n}(t.LinearLayoutBase);t.HorizontalLayout=i,__reflect(i.prototype,"eui.HorizontalLayout")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t}();e.JUSTIFY="justify",e.CONTENT_JUSTIFY="contentJustify",t.JustifyAlign=e,__reflect(e.prototype,"eui.JustifyAlign")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t}();e.TOP="top",e.JUSTIFY_USING_GAP="justifyUsingGap",e.JUSTIFY_USING_HEIGHT="justifyUsingHeight",t.RowAlign=e,__reflect(e.prototype,"eui.RowAlign")}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){var e=i.call(this)||this;return e.explicitHorizontalGap=0/0,e._horizontalGap=6,e.explicitVerticalGap=0/0,e._verticalGap=6,e._columnCount=-1,e._requestedColumnCount=0,e._rowCount=-1,e._requestedRowCount=0,e.explicitColumnWidth=0/0,e._columnWidth=0/0,e.explicitRowHeight=0/0,e._rowHeight=0/0,e._paddingLeft=0,e._paddingRight=0,e._paddingTop=0,e._paddingBottom=0,e._horizontalAlign=t.JustifyAlign.JUSTIFY,e._verticalAlign=t.JustifyAlign.JUSTIFY,e._columnAlign=t.ColumnAlign.LEFT,e._rowAlign=t.RowAlign.TOP,e._orientation=t.TileOrientation.ROWS,e.maxElementWidth=0,e.maxElementHeight=0,e.startIndex=-1,e.endIndex=-1,e.indexInViewCalculated=!1,e}return __extends(n,i),Object.defineProperty(n.prototype,"horizontalGap",{get:function(){return this._horizontalGap},set:function(t){t=+t,t!==this._horizontalGap&&(this.explicitHorizontalGap=t,this._horizontalGap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalGap",{get:function(){return this._verticalGap},set:function(t){t=+t,t!==this._verticalGap&&(this.explicitVerticalGap=t,this._verticalGap=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this._columnCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedColumnCount",{get:function(){return this._requestedColumnCount},set:function(t){t=+t||0,this._requestedColumnCount!==t&&(this._requestedColumnCount=t,this._columnCount=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowCount",{get:function(){return this._rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedRowCount",{get:function(){return this._requestedRowCount},set:function(t){t=+t||0,this._requestedRowCount!=t&&(this._requestedRowCount=t,this._rowCount=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnWidth",{get:function(){return this._columnWidth},set:function(t){t=+t,t!==this._columnWidth&&(this.explicitColumnWidth=t,this._columnWidth=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t=+t,t!==this._rowHeight&&(this.explicitRowHeight=t,this._rowHeight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){t=+t||0,this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){t=+t||0,this._paddingRight!==t&&(this._paddingRight=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){t=+t||0,this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){t=+t||0,this._paddingBottom!==t&&(this._paddingBottom=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnAlign",{get:function(){return this._columnAlign},set:function(t){this._columnAlign!=t&&(this._columnAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowAlign",{get:function(){return this._rowAlign},set:function(t){this._rowAlign!=t&&(this._rowAlign=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation!=t&&(this._orientation=t,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),n.prototype.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},n.prototype.measure=function(){var t=this.$target;if(t){var e=this._columnCount,i=this._rowCount,n=this._columnWidth,r=this._rowHeight,o=0,s=0,a=t.$UIComponent;this.calculateRowAndColumn(a[8],a[9]);var h=this._requestedColumnCount>0?this._requestedColumnCount:this._columnCount,l=this._requestedRowCount>0?this._requestedRowCount:this._rowCount,u=isNaN(this._horizontalGap)?0:this._horizontalGap,p=isNaN(this._verticalGap)?0:this._verticalGap;h>0&&(o=h*(this._columnWidth+u)-u),l>0&&(s=l*(this._rowHeight+p)-p);var c=this._paddingLeft+this._paddingRight,d=this._paddingTop+this._paddingBottom;t.setMeasuredSize(o+c,s+d),this._columnCount=e,this._rowCount=i,this._columnWidth=n,this._rowHeight=r}},n.prototype.calculateRowAndColumn=function(i,n){var r=this.$target,o=isNaN(this._horizontalGap)?0:this._horizontalGap,s=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;for(var a=r.numElements,h=a,l=0;h>l;l++){var u=r.getElementAt(l);!u||egret.is(u,e)&&u.$includeInLayout||a--}if(0==a)return void(this._rowCount=this._columnCount=0);(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))&&this.updateMaxElementSize(),isNaN(this.explicitColumnWidth)?this._columnWidth=this.maxElementWidth:this._columnWidth=this.explicitColumnWidth,isNaN(this.explicitRowHeight)?this._rowHeight=this.maxElementHeight:this._rowHeight=this.explicitRowHeight;var p=this._columnWidth+o;0>=p&&(p=1);var c=this._rowHeight+s;0>=c&&(c=1);var d=this._orientation==t.TileOrientation.COLUMNS,f=!isNaN(i),y=!isNaN(n),v=this._paddingLeft,g=this._paddingRight,m=this._paddingTop,$=this._paddingBottom;if(this._requestedColumnCount>0||this._requestedRowCount>0)this._requestedRowCount>0&&(this._rowCount=Math.min(this._requestedRowCount,a)),this._requestedColumnCount>0&&(this._columnCount=Math.min(this._requestedColumnCount,a));else if(f||y)if(!f||y&&d){var E=Math.max(0,n-m-$);this._rowCount=Math.floor((E+s)/c),this._rowCount=Math.max(1,Math.min(this._rowCount,a))}else{var C=Math.max(0,i-v-g);this._columnCount=Math.floor((C+o)/p),this._columnCount=Math.max(1,Math.min(this._columnCount,a))}else{var _=Math.sqrt(a*p*c);d?this._rowCount=Math.max(1,Math.round(_/c)):this._columnCount=Math.max(1,Math.round(_/p))}-1==this._rowCount&&(this._rowCount=Math.max(1,Math.ceil(a/this._columnCount))),-1==this._columnCount&&(this._columnCount=Math.max(1,Math.ceil(a/this._rowCount))),this._requestedColumnCount>0&&this._requestedRowCount>0&&(this._orientation==t.TileOrientation.ROWS?this._rowCount=Math.max(1,Math.ceil(a/this._requestedColumnCount)):this._columnCount=Math.max(1,Math.ceil(a/this._requestedRowCount)))},n.prototype.updateMaxElementSize=function(){this.$target&&(this.$useVirtualLayout?(this.maxElementWidth=Math.max(this.maxElementWidth,this.$typicalWidth),this.maxElementHeight=Math.max(this.maxElementHeight,this.$typicalHeight),this.doUpdateMaxElementSize(this.startIndex,this.endIndex)):this.doUpdateMaxElementSize(0,this.$target.numElements-1))},n.prototype.doUpdateMaxElementSize=function(t,i){var n=this.maxElementWidth,r=this.maxElementHeight,o=egret.$TempRectangle,s=this.$target;if(-1!=t&&-1!=i)for(var a=t;i>=a;a++){var h=s.getVirtualElementAt(a);egret.is(h,e)&&h.$includeInLayout&&(h.getPreferredBounds(o),n=Math.max(n,o.width),r=Math.max(r,o.height))}this.maxElementWidth=n,this.maxElementHeight=r},n.prototype.clearVirtualLayoutCache=function(){i.prototype.clearVirtualLayoutCache.call(this),this.maxElementWidth=0,this.maxElementHeight=0},n.prototype.scrollPositionChanged=function(){if(this.$useVirtualLayout){var t=this.getIndexInView();t&&(this.indexInViewCalculated=!0,this.$target.invalidateDisplayList())}},n.prototype.getIndexInView=function(){if(!this.$target||0==this.$target.numElements)return this.startIndex=this.endIndex=-1,!1;var e=this.$target,i=e.numElements;if(!this.$useVirtualLayout)return this.startIndex=0,this.endIndex=i-1,!1;var n=e.$UIComponent;if(0==n[10]||0==n[11])return this.startIndex=this.endIndex=-1,!1;var r=this.startIndex,o=this.endIndex,s=this._paddingLeft,a=this._paddingTop,h=isNaN(this._horizontalGap)?0:this._horizontalGap,l=isNaN(this._verticalGap)?0:this._verticalGap;if(this._orientation==t.TileOrientation.COLUMNS){var u=this._columnWidth+h;if(0>=u)return this.startIndex=0,this.endIndex=i-1,!1;var p=e.scrollH,c=p+n[10],d=Math.floor((p-s)/u);0>d&&(d=0);var f=Math.ceil((c-s)/u);0>f&&(f=0),this.startIndex=Math.min(i-1,Math.max(0,d*this._rowCount)),this.endIndex=Math.min(i-1,Math.max(0,f*this._rowCount-1))}else{var y=this._rowHeight+l;if(0>=y)return this.startIndex=0,this.endIndex=i-1,!1;var v=e.scrollV,g=v+n[11],m=Math.floor((v-a)/y);0>m&&(m=0);var $=Math.ceil((g-a)/y);0>$&&($=0),this.startIndex=Math.min(i-1,Math.max(0,m*this._columnCount)),this.endIndex=Math.min(i-1,Math.max(0,$*this._columnCount-1))}return this.startIndex!=r||this.endIndex!=o},n.prototype.updateDisplayList=function(n,r){if(i.prototype.updateDisplayList.call(this,n,r),this.$target){var o=this.$target,s=this._paddingLeft,a=this._paddingRight,h=this._paddingTop,l=this._paddingBottom;if(this.indexInViewCalculated)this.indexInViewCalculated=!1;else{if(this.calculateRowAndColumn(n,r),0==this._rowCount||0==this._columnCount)return void o.setContentSize(s+a,h+l);this.adjustForJustify(n,r),this.getIndexInView()}if(this.$useVirtualLayout&&(this.calculateRowAndColumn(n,r),this.adjustForJustify(n,r)),-1==this.startIndex||-1==this.endIndex)return void o.setContentSize(0,0);var u=this.endIndex;o.setVirtualElementIndicesInView(this.startIndex,u);for(var p,c,d,f,y,v=this._orientation==t.TileOrientation.COLUMNS,g=this.startIndex,m=isNaN(this._horizontalGap)?0:this._horizontalGap,$=isNaN(this._verticalGap)?0:this._verticalGap,E=this._rowCount,C=this._columnCount,_=this._columnWidth,S=this._rowHeight,P=this.startIndex;u>=P;P++)p=this.$useVirtualLayout?this.target.getVirtualElementAt(P):this.target.getElementAt(P),egret.is(p,e)&&p.$includeInLayout&&(v?(f=Math.ceil((g+1)/E)-1,y=Math.ceil((g+1)%E)-1,-1==y&&(y=E-1)):(f=Math.ceil((g+1)%C)-1,-1==f&&(f=C-1),y=Math.ceil((g+1)/C)-1),c=f*(_+m)+s,d=y*(S+$)+h,this.sizeAndPositionElement(p,c,d,_,S),g++);
var T=s+a,x=h+l,b=(_+m)*C-m,I=(S+$)*E-$;o.setContentSize(b+T,I+x)}},n.prototype.sizeAndPositionElement=function(e,i,n,r,o){var s=0/0,a=0/0,h=e.$UIComponent;this._horizontalAlign==t.JustifyAlign.JUSTIFY?s=r:isNaN(h[6])||(s=r*h[6]*.01),this._verticalAlign==t.JustifyAlign.JUSTIFY?a=o:isNaN(h[7])||(a=o*h[7]*.01),e.setLayoutBoundsSize(Math.round(s),Math.round(a));var l=i,u=egret.$TempRectangle;switch(e.getLayoutBounds(u),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:l+=r-u.width;break;case egret.HorizontalAlign.CENTER:l=i+(r-u.width)/2}var p=n;switch(this._verticalAlign){case egret.VerticalAlign.BOTTOM:p+=o-u.height;break;case egret.VerticalAlign.MIDDLE:p+=(o-u.height)/2}e.setLayoutBoundsPosition(Math.round(l),Math.round(p))},n.prototype.adjustForJustify=function(e,i){var n=this._paddingLeft,r=this._paddingRight,o=this._paddingTop,s=this._paddingBottom,a=Math.max(0,e-n-r),h=Math.max(0,i-o-s);isNaN(this.explicitVerticalGap)||(this._verticalGap=this.explicitVerticalGap),isNaN(this.explicitHorizontalGap)||(this._horizontalGap=this.explicitHorizontalGap),this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap,this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var l,u=h-this._rowHeight*this._rowCount,p=a-this._columnWidth*this._columnCount;u>0&&(this._rowAlign==t.RowAlign.JUSTIFY_USING_GAP?(l=Math.max(1,this._rowCount-1),this._verticalGap=u/l):this._rowAlign==t.RowAlign.JUSTIFY_USING_HEIGHT&&this._rowCount>0&&(this._rowHeight+=(u-(this._rowCount-1)*this._verticalGap)/this._rowCount)),p>0&&(this._columnAlign==t.ColumnAlign.JUSTIFY_USING_GAP?(l=Math.max(1,this._columnCount-1),this._horizontalGap=p/l):this._columnAlign==t.ColumnAlign.JUSTIFY_USING_WIDTH&&this._columnCount>0&&(this._columnWidth+=(p-(this._columnCount-1)*this._horizontalGap)/this._columnCount))},n}(t.LayoutBase);t.TileLayout=i,__reflect(i.prototype,"eui.TileLayout")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}return t}();e.ROWS="rows",e.COLUMNS="columns",t.TileOrientation=e,__reflect(e.prototype,"eui.TileOrientation")}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){return i.apply(this,arguments)||this}return __extends(n,i),n.prototype.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,r=0,o=0,s=egret.$TempRectangle,a=0;i>a;a++){var h=t.getElementAt(a);egret.is(h,e)&&h.$includeInLayout?(h.getPreferredBounds(s),o+=s.height,r=Math.max(r,s.width)):n--}o+=(n-1)*this.$gap;var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+l,o+u)},n.prototype.measureVirtual=function(){for(var t=this.$target,i=this.$typicalHeight,n=this.getElementTotalSize(),r=Math.max(this.maxElementSize,this.$typicalWidth),o=egret.$TempRectangle,s=this.endIndex,a=this.elementSizeTable,h=this.startIndex;s>h;h++){var l=t.getElementAt(h);egret.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(o),n+=o.height,n-=isNaN(a[h])?i:a[h],r=Math.max(r,o.width))}var u=this.$paddingLeft+this.$paddingRight,p=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(r+u,n+p)},n.prototype.updateDisplayListReal=function(i,n){var r=this.$target,o=this.$paddingLeft,s=this.$paddingRight,a=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=Math.max(0,i-o-s),p=Math.max(0,n-a-h),c=this.$verticalAlign==t.JustifyAlign.JUSTIFY,d=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;d||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?f=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(f=1));var y,v,g,m=r.numElements,$=m,E=o,C=a,_=0,S=0,P=[],T=p,x=this.maxElementSize,b=egret.$TempRectangle;for(y=0;m>y;y++){var I=r.getElementAt(y);if(egret.is(I,e)&&I.$includeInLayout)if(I.getPreferredBounds(b),x=Math.max(x,b.width),c)_+=b.height;else{var L=I.$UIComponent;isNaN(L[7])?T-=b.height:(S+=L[7],g=new t.sys.ChildInfo,g.layoutElement=I,g.percent=L[7],g.min=L[14],g.max=L[15],P.push(g))}else $--}T-=l*($-1),T=T>0?T:0;var N,O=p-_-l*($-1),A=$,M={};if(c){if(0>O){for(N=T/$,y=0;m>y;y++)v=r.getElementAt(y),egret.is(v,e)&&v.$includeInLayout&&(v.getPreferredBounds(b),b.height<=N&&(T-=b.height,A--));T=T>0?T:0}}else if(S>0){this.flexChildrenProportionally(p,T,S,P);var B=0,D=P.length;for(y=0;D>y;y++){g=P[y];var R=Math.round(g.size+B);B+=g.size-R,M[g.layoutElement.$hashCode]=R,T-=R}T=T>0?T:0}this.$verticalAlign==egret.VerticalAlign.MIDDLE?C=a+.5*T:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(C=a+T);var w=o,V=a,z=0,H=0,U=Math.ceil(u);this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(U=Math.ceil(Math.max(u,x)));var k,F,G=0;for(y=0;m>y;y++){var j=0;if(v=r.getElementAt(y),egret.is(v,e)&&v.$includeInLayout){if(v.getPreferredBounds(b),k=0/0,c?(F=0/0,O>0?F=T*b.height/_:0>O&&b.height>N&&(F=T/A),isNaN(F)||(k=Math.round(F+G),G+=F-k)):k=M[v.$hashCode],d)E=o,v.setLayoutBoundsSize(U,k),v.getLayoutBounds(b);else{var X=0/0,L=v.$UIComponent;if(!isNaN(L[6])){var W=Math.min(100,L[6]);X=Math.round(u*W*.01)}v.setLayoutBoundsSize(X,k),v.getLayoutBounds(b),j=(u-b.width)*f,j=j>0?j:0,E=o+j}v.setLayoutBoundsPosition(Math.round(E),Math.round(C)),z=Math.ceil(b.width),H=Math.ceil(b.height),w=Math.max(w,E+z),V=Math.max(V,C+H),C+=H+l}}this.maxElementSize=x,r.setContentSize(w+s,V+h)},n.prototype.updateDisplayListVirtual=function(i,n){var r=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,s=this.$paddingBottom,a=this.$paddingLeft,h=this.$paddingRight,l=this.$gap,u=r.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=this.getStartPosition(u)-l+s,void r.setContentSize(r.contentWidth,o);var p=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,p);var c=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,d=this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,f=0;c||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?f=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(f=1));var y,v=egret.$TempRectangle,g=Math.max(0,i-a-h),m=Math.ceil(g),$=this.$typicalHeight,E=this.$typicalWidth,C=this.maxElementSize,_=Math.max(E,this.maxElementSize);if(d){for(var S=this.startIndex;p>=S;S++)y=r.getVirtualElementAt(S),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(v),C=Math.max(C,v.width));m=Math.ceil(Math.max(g,C))}for(var P,T=0,x=0,b=0,I=!1,L=this.elementSizeTable,N=this.startIndex;p>=N;N++){var O=0;y=r.getVirtualElementAt(N),egret.is(y,e)&&y.$includeInLayout&&(y.getPreferredBounds(v),d||(C=Math.max(C,v.width)),c?(T=a,y.setLayoutBoundsSize(m,0/0),y.getLayoutBounds(v)):(y.getLayoutBounds(v),O=(g-v.width)*f,O=O>0?O:0,T=a+O),b=Math.max(b,v.width),I||(P=isNaN(L[N])?$:L[N],P!=v.height&&(I=!0)),L[N]=v.height,x=this.getStartPosition(N),y.setLayoutBoundsPosition(Math.round(T),Math.round(x)))}b+=a+h,o=this.getStartPosition(u)-l+s,this.maxElementSize=C,r.setContentSize(b,o),(I||_<this.maxElementSize)&&r.invalidateSize()},n.prototype.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.y}for(var i=this.$typicalHeight,n=this.$paddingTop,r=this.$gap,o=this.elementSizeTable,s=0;t>s;s++){var a=o[s];isNaN(a)&&(a=i),n+=a+r}return n},n.prototype.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalHeight),e}return this.$target?this.$target.getElementAt(t).height:0},n.prototype.getElementTotalSize=function(){for(var t=this.$typicalHeight,e=this.$gap,i=0,n=this.$target.numElements,r=this.elementSizeTable,o=0;n>o;o++){var s=r[o];isNaN(s)&&(s=t),i+=s+e}return i-=e},n.prototype.elementAdded=function(t){this.$useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalHeight))},n.prototype.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(0==e[10]||0==e[11])return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingBottom,r=t.scrollV;if(r>n-this.$paddingBottom)return this.startIndex=-1,this.endIndex=-1,!1;var o=t.scrollV+e[11];if(o<this.$paddingTop)return this.startIndex=-1,this.endIndex=-1,!1;var s=this.startIndex,a=this.endIndex;return this.startIndex=this.findIndexAt(r,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(o,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),s!=this.startIndex||a!=this.endIndex},n}(t.LinearLayoutBase);t.VerticalLayout=i,__reflect(i.prototype,"eui.VerticalLayout")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,r=this.$viewport;if(n&&r){var o=egret.$TempRectangle;n.getPreferredBounds(o);var s=o.width,a=o.y,h=r.scrollH,l=r.contentWidth,u=r.width;if(0>=h){var p=s*(1- -h/(.5*u));p=Math.max(5,Math.round(p)),n.setLayoutBoundsSize(p,0/0),n.setLayoutBoundsPosition(0,a)}else if(h>=l-u){var p=s*(1-(h-l+u)/(.5*u));p=Math.max(5,Math.round(p)),n.setLayoutBoundsSize(p,0/0),n.setLayoutBoundsPosition(e-p,a)}else{var c=(e-s)*h/(l-u);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(c,a)}}},e.prototype.onPropertyChanged=function(t){switch(t.property){case"scrollH":case"contentWidth":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.HScrollBar=e,__reflect(e.prototype,"eui.HScrollBar")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],r=this.getThumbRange();return i[2]+(0!=r?t/r*n:0)},e.prototype.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.width;return this.thumb.getLayoutBounds(t),e-t.width},e.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?(this.pendingValue-t[2])/i*e:0,r=this.track.localToGlobal(n,0,egret.$TempPoint),o=r.x,s=r.y,a=this.thumb.$parent.globalToLocal(o,s,egret.$TempPoint).x,h=egret.$TempRectangle;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(Math.round(a),h.y),this.trackHighlight&&this.trackHighlight.$parent){var l=this.trackHighlight.$parent.globalToLocal(o,s,egret.$TempPoint).x-n;this.trackHighlight.x=Math.round(l),this.trackHighlight.width=Math.round(n)}}},e}(t.SliderBase);t.HSlider=e,__reflect(e.prototype,"eui.HSlider")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(t,e,i,n){this.target=t,this.propertyName=e,this.position=i,this.relativeTo=n}return t.prototype.apply=function(t,e){var i,n=t[this.relativeTo],r=t[this.target],o=this.propertyName?t[this.propertyName]:e;if(r&&o){switch(this.position){case 0:i=0;break;case 1:i=-1;break;case 2:i=o.getChildIndex(n);break;case 3:i=o.getChildIndex(n)+1}-1==i&&(i=o.numChildren),egret.is(o,"eui.Component")&&o.$Component[8].$elementsContent.push(r),o.addChildAt(r,i)}},t.prototype.remove=function(t,e){var i=this.propertyName?t[this.propertyName]:e,n=t[this.target];if(n&&i&&(n.$parent===i&&i.removeChild(n),egret.is(i,"eui.Component"))){var r=i.$Component[8].$elementsContent,o=r.indexOf(n);o>-1&&r.splice(o,1)}},t}();t.AddItems=e,__reflect(e.prototype,"eui.AddItems",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e=function(){function t(t,e,i){this.target=t,this.name=e,this.value=i}return t.prototype.apply=function(t,e){var i=this.target?t[this.target]:t;i&&(this.oldValue=i[this.name],this.setPropertyValue(i,this.name,this.value,this.oldValue))},t.prototype.remove=function(t,e){var i=this.target?t[this.target]:t;i&&(this.setPropertyValue(i,this.name,this.oldValue,this.oldValue),this.oldValue=null)},t.prototype.setPropertyValue=function(t,e,i,n){void 0===i||null===i?t[e]=i:"number"==typeof n?t[e]=+i:"boolean"==typeof n?t[e]=this.toBoolean(i):t[e]=i},t.prototype.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},t}();t.SetProperty=e,__reflect(e.prototype,"eui.SetProperty",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e=function(){function e(t,e,i,n,r){this.host=t,this.templates=e,this.chainIndex=i,this.target=n,this.prop=r}return e.prototype.apply=function(e,i){if(this.target){var n=this.target[this.prop];this.oldValue&&this.setPropertyValue(this.target,this.prop,this.oldValue,this.oldValue),n&&(this.oldValue=n),t.Binding.$bindProperties(this.host,this.templates.concat(),this.chainIndex.concat(),this.target,this.prop)}},e.prototype.remove=function(t,e){if(this.target){var i=this.oldValue;this.target[this.prop]&&(this.oldValue=this.target[this.prop]),i&&this.setPropertyValue(this.target,this.prop,i,i)}},e.prototype.setPropertyValue=function(t,e,i,n){void 0===i||null===i?t[e]=i:"number"==typeof n?t[e]=+i:"boolean"==typeof n?t[e]=this.toBoolean(i):t[e]=i},e.prototype.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},e}();t.SetStateProperty=e,__reflect(e.prototype,"eui.SetStateProperty",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t,e,i,n,o,s,a,h,l,u){var p;if(!isNaN(i)&&isNaN(n)){if(p=r(t,e,i,s,i,h,i,u))return p}else if(isNaN(i)&&!isNaN(n)&&(p=r(t,e,o,n,a,n,l,n)))return p;return p=r(t,e,o,s,a,h,l,u)}function i(t,e,i,r,o,s,a,h,l,u){var p;if(!isNaN(i)&&isNaN(r)){if(p=n(t,e,i,s,i,h,i,u))return p}else if(isNaN(i)&&!isNaN(r)&&(p=n(t,e,o,r,a,r,l,r)))return p;return p=n(t,e,o,s,a,h,l,u)}function n(t,e,i,n,r,s,h,l){var u=e.b,p=e.d;if(u>-1e-9&&1e-9>u&&(u=0),p>-1e-9&&1e-9>p&&(p=0),0==u&&0==p)return null;if(0==u&&0==p)return null;if(0==u)return egret.Point.create(i,t/Math.abs(p));if(0==p)return egret.Point.create(t/Math.abs(u),n);var c,d,f,y=u*p>=0?p:-p;if(0!=y&&i>0){var v=1/y;i=Math.max(r,Math.min(h,i)),d=i,f=(t-u*d)*v,f>=s&&l>=f&&u*d+y*f>=0&&(c=egret.Point.create(d,f)),f=(-t-u*d)*v,f>=s&&l>=f&&0>u*d+y*f&&(!c||a(c.x,c.y,e).width>a(d,f,e).width)&&(egret.Point.release(c),c=egret.Point.create(d,f))}if(0!=u&&n>0){var g=1/u;n=Math.max(s,Math.min(l,n)),f=n,d=(t-y*f)*g,d>=r&&h>=d&&u*d+y*f>=0&&(!c||a(c.x,c.y,e).width>a(d,f,e).width)&&(c=egret.Point.create(d,f)),d=(-t-y*f)*g,d>=r&&h>=d&&0>u*d+y*f&&(!c||a(c.x,c.y,e).width>a(d,f,e).width)&&(egret.Point.release(c),c=egret.Point.create(d,f))}if(c)return c;var m=e.a,$=e.c,E=m*$>=0?$:-$;return o(u,y,t,r,s,h,l,m,E)}function r(t,e,i,n,r,s,h,l){var u=e.a,p=e.c;if(u>-1e-9&&1e-9>u&&(u=0),p>-1e-9&&1e-9>p&&(p=0),0==u&&0==p)return null;if(0==u)return egret.Point.create(i,t/Math.abs(p));if(0==p)return egret.Point.create(t/Math.abs(u),n);var c,d,f,y=u*p>=0?p:-p;if(0!=y&&i>0){var v=1/y;i=Math.max(r,Math.min(h,i)),d=i,f=(t-u*d)*v,f>=s&&l>=f&&u*d+y*f>=0&&(c=egret.Point.create(d,f)),f=(-t-u*d)*v,f>=s&&l>=f&&0>u*d+y*f&&(!c||a(c.x,c.y,e).height>a(d,f,e).height)&&(egret.Point.release(c),c=egret.Point.create(d,f))}if(0!=u&&n>0){var g=1/u;n=Math.max(s,Math.min(l,n)),f=n,d=(t-y*f)*g,d>=r&&h>=d&&u*d+y*f>=0&&(!c||a(c.x,c.y,e).height>a(d,f,e).height)&&(egret.Point.release(c),c=egret.Point.create(d,f)),d=(-t-y*f)*g,d>=r&&h>=d&&0>u*d+y*f&&(!c||a(c.x,c.y,e).height>a(d,f,e).height)&&(egret.Point.release(c),c=egret.Point.create(d,f))}if(c)return c;var m=e.b,$=e.d,E=m*$>=0?$:-$;return o(u,y,t,r,s,h,l,m,E)}function o(t,e,i,n,r,o,s,a,h){if(0==t||0==e)return null;var l,u,p=(i-n*t)/e,c=(i-o*t)/e,d=Math.max(r,Math.min(p,c)),f=Math.min(s,Math.max(p,c)),y=a*e-t*h;return f>=d?(u=Math.abs(y)<1e-9?i/(t+e):a*i/y,u=Math.max(d,Math.min(u,f)),l=(i-e*u)/t,egret.Point.create(l,u)):(p=-(n*t+i)/e,c=-(o*t+i)/e,d=Math.max(r,Math.min(p,c)),f=Math.min(s,Math.max(p,c)),f>=d?(u=Math.abs(y)<1e-9?-i/(t+e):-a*i/y,u=Math.max(d,Math.min(u,f)),l=(-i-e*u)/t,egret.Point.create(l,u)):null)}function s(t,e,i,n,r,s,a){var l=i.a,u=i.b,p=i.c,c=i.d;if(l>-1e-9&&1e-9>l&&(l=0),u>-1e-9&&1e-9>u&&(u=0),p>-1e-9&&1e-9>p&&(p=0),c>-1e-9&&1e-9>c&&(c=0),0==u&&0==p)return 0==l||0==c?null:egret.Point.create(t/Math.abs(l),e/Math.abs(c));if(0==l&&0==c)return 0==u||0==p?null:egret.Point.create(e/Math.abs(u),t/Math.abs(p));var d=l*p>=0?p:-p,f=u*c>=0?c:-c,y=l*f-u*d;if(Math.abs(y)<1e-9)return 0==d||0==l||l==-d?null:Math.abs(l*e-u*t)>1e-9?null:o(l,d,t,n,n,s,a,u,f);var v=1/y;t*=v,e*=v;var g;return g=h(l,d,u,f,t,e),g&&n<=g.x&&g.x<=s&&r<=g.y&&g.y<=a&&l*g.x+d*g.x>=0&&u*g.x+f*g.y>=0?g:(g=h(l,d,u,f,t,-e),g&&n<=g.x&&g.x<=s&&r<=g.y&&g.y<=a&&l*g.x+d*g.x>=0&&u*g.x+f*g.y<0?g:(g=h(l,d,u,f,-t,e),g&&n<=g.x&&g.x<=s&&r<=g.y&&g.y<=a&&l*g.x+d*g.x<0&&u*g.x+f*g.y>=0?g:(g=h(l,d,u,f,-t,-e),g&&n<=g.x&&g.x<=s&&r<=g.y&&g.y<=a&&l*g.x+d*g.x<0&&u*g.x+f*g.y<0?g:(egret.Point.release(g),null))))}function a(t,e,i){var n=egret.$TempRectangle.setTo(0,0,t,e);return i.$transformBounds(n),n}function h(t,e,i,n,r,o){return egret.Point.create(n*r-e*o,t*o-i*r)}var l=.1,u=.1,p=function(){function t(){}return t.fitBounds=function(t,n,r,o,h,p,c,d,f,y,v){if(isNaN(t)&&isNaN(n))return egret.Point.create(p,c);var g,m=u>d?0:d-u,$=u>f?0:f-u,E=y+u,C=v+u;if(isNaN(t)||isNaN(n))return isNaN(t)?i(n,r,o,h,p,c,m,$,E,C):e(t,r,o,h,p,c,m,$,E,C);if(g=s(t,n,r,m,$,E,C),!g){var _=void 0;if(_=e(t,r,o,h,p,c,m,$,E,C)){var S=a(_.x,_.y,r).height;S-l>n&&(egret.Point.release(_),_=null)}var P=void 0;if(P=i(n,r,o,h,p,c,m,$,E,C)){var T=a(P.x,P.y,r).width;T-l>t&&(egret.Point.release(P),P=null)}g=_&&P?_.x*_.y>P.x*P.y?_:P:_?_:P,egret.Point.release(_),egret.Point.release(P)}return g},t}();t.MatrixUtil=p,__reflect(p.prototype,"eui.sys.MatrixUtil")}(e=t.sys||(t.sys={}))}(eui||(eui={}));/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/libs/modules/eui/eui.min.js*/var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},RES;!function(e){var t=function(t){function r(){var r=t.call(this)||this;return r.resourceConfig=null,r.resourceConfig=e.configInstance,r}return __extends(r,t),r.prototype.addSubkey=function(e,t){this.resourceConfig.addSubkey(e,t)},r.prototype.loadFile=function(e,t,r){},r.prototype.getRes=function(e){},r.prototype.destroyRes=function(e){return!1},r.getStringPrefix=function(e){if(!e)return"";var t=e.indexOf(".");return-1!=t?e.substring(0,t):""},r.getStringTail=function(e){if(!e)return"";var t=e.indexOf(".");return-1!=t?e.substring(t+1):""},r}(egret.HashObject);e.AnalyzerBase=t,__reflect(t.prototype,"RES.AnalyzerBase")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.fileDic={},e.resItemDic=[],e._dataFormat=egret.HttpResponseType.ARRAY_BUFFER,e.recycler=[],e}return __extends(r,t),r.prototype.loadFile=function(t,r,i){if(this.fileDic[t.name])return void r.call(i,t);var n=this.getRequest();this.resItemDic[n.hashCode]={item:t,func:r,thisObject:i},n.open(e.$getVirtualUrl(t.url)),n.send()},r.prototype.getRequest=function(){var e=this.recycler.pop();return e||(e=new egret.HttpRequest,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e.responseType=this._dataFormat,e},r.prototype.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;i.loaded=e.type==egret.Event.COMPLETE,i.loaded&&this.analyzeData(i,t.response),this.recycler.push(t),n.call(r.thisObject,i)},r.prototype.analyzeData=function(e,t){var r=e.name;this.fileDic[r]||""!=t&&!t||(this.fileDic[r]=t)},r.prototype.getRes=function(e){return this.fileDic[e]},r.prototype.hasRes=function(e){var t=this.getRes(e);return null!=t},r.prototype.destroyRes=function(e){return this.fileDic[e]?(this.onResourceDestroy(this.fileDic[e]),delete this.fileDic[e],!0):!1},r.prototype.onResourceDestroy=function(e){},r}(e.AnalyzerBase);e.BinAnalyzer=t,__reflect(t.prototype,"RES.BinAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(){function e(e,t,r){this.groupName="",this.data=null,this._loaded=!1,this.name=e,this.url=t,this.type=r}return Object.defineProperty(e.prototype,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(e){this.data&&(this.data.loaded=e),this._loaded=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},e}();t.TYPE_XML="xml",t.TYPE_IMAGE="image",t.TYPE_BIN="bin",t.TYPE_TEXT="text",t.TYPE_JSON="json",t.TYPE_SHEET="sheet",t.TYPE_FONT="font",t.TYPE_SOUND="sound",e.ResourceItem=t,__reflect(t.prototype,"RES.ResourceItem")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.sheetMap={},e.textureMap={},e.recyclerIamge=[],e._dataFormat=egret.HttpResponseType.TEXT,e}return __extends(r,t),r.prototype.getRes=function(t){var r=this.fileDic[t];if(r||(r=this.textureMap[t]),!r){var i=e.AnalyzerBase.getStringPrefix(t);if(r=this.fileDic[i]){var n=e.AnalyzerBase.getStringTail(t);r=r.getTexture(n)}}return r},r.prototype.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;if(i.loaded=e.type==egret.Event.COMPLETE,i.loaded)if(t instanceof egret.HttpRequest){i.loaded=!1;var o=this.analyzeConfig(i,t.response);if(o)return this.loadImage(o,r),void this.recycler.push(t)}else{var s=new egret.Texture;s._setBitmapData(t.data),this.analyzeBitmap(i,s)}t instanceof egret.HttpRequest?this.recycler.push(t):this.recyclerIamge.push(t),n.call(r.thisObject,i)},r.prototype.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var o=t;r=JSON.parse(o)}catch(s){egret.$warn(1017,e.url,t)}return r&&(this.sheetMap[i]=r,n=this.getRelativePath(e.url,r.file)),n},r.prototype.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=e.data&&e.data.subkeys?"":r,o=this.parseSpriteSheet(t,i,n);this.fileDic[r]=o}},r.prototype.getRelativePath=function(e,t){e=e.split("\\").join("/");var r=e.match(/#.*|\?.*/),i="";r&&(i=r[0]);var n=e.lastIndexOf("/");return e=-1!=n?e.substring(0,n+1)+t:t,e+i},r.prototype.parseSpriteSheet=function(e,t,r){var i=t.frames;if(!i)return null;var n=new egret.SpriteSheet(e),o=this.textureMap;for(var s in i){var a=i[s],u=n.createTexture(s,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH);if(a.scale9grid){var c=a.scale9grid,l=c.split(",");u.scale9Grid=new egret.Rectangle(parseInt(l[0]),parseInt(l[1]),parseInt(l[2]),parseInt(l[3]))}null==o[s]&&(o[s]=u,r&&this.addSubkey(s,r))}return n},r.prototype.destroyRes=function(e){var t=this.fileDic[e];if(t){delete this.fileDic[e];var r=void 0;for(var i in t._textureMap)null==r&&(r=t._textureMap[i],this.onResourceDestroy(r),r=null),delete this.textureMap[i];return t.dispose&&t.dispose(),!0}return!1},r.prototype.loadImage=function(t,r){var i=this.getImageLoader();this.resItemDic[i.hashCode]=r,i.load(e.$getVirtualUrl(t))},r.prototype.getImageLoader=function(){var e=this.recyclerIamge.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r.prototype.onResourceDestroy=function(e){e&&e.dispose()},r}(e.BinAnalyzer);e.SheetAnalyzer=t,__reflect(t.prototype,"RES.SheetAnalyzer")}(RES||(RES={}));var RES;!function(e){}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.fileDic={},e.resItemDic=[],e.recycler=[],e}return __extends(r,t),r.prototype.loadFile=function(t,r,i){if(this.fileDic[t.name])return void r.call(i,t);var n=this.getLoader();this.resItemDic[n.$hashCode]={item:t,func:r,thisObject:i},n.load(e.$getVirtualUrl(t.url))},r.prototype.getLoader=function(){var e=this.recycler.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r.prototype.onLoadFinish=function(e){var t=e.$target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.$hashCode];var i=r.item,n=r.func;if(i.loaded=e.$type==egret.Event.COMPLETE,i.loaded){var o=new egret.Texture;o._setBitmapData(t.data),this.analyzeData(i,o)}this.recycler.push(t),n.call(r.thisObject,i)},r.prototype.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){this.fileDic[r]=t;var i=e.data;if(i&&i.scale9grid){var n=i.scale9grid,o=n.split(",");t.scale9Grid=new egret.Rectangle(parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3]))}}},r.prototype.getRes=function(e){return this.fileDic[e]},r.prototype.hasRes=function(e){var t=this.getRes(e);return null!=t},r.prototype.destroyRes=function(e){return this.fileDic[e]?(this.onResourceDestroy(this.fileDic[e]),delete this.fileDic[e],!0):!1},r.prototype.onResourceDestroy=function(e){e.dispose()},r}(e.AnalyzerBase);e.ImageAnalyzer=t,__reflect(t.prototype,"RES.ImageAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(t,e),t}(e.BinAnalyzer);e.TextAnalyzer=t,__reflect(t.prototype,"RES.TextAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(t,e),t.prototype.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t)try{var i=t;this.fileDic[r]=JSON.parse(i)}catch(n){egret.$warn(1017,e.url,t)}},t}(e.BinAnalyzer);e.JsonAnalyzer=t,__reflect(t.prototype,"RES.JsonAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.thread=2,e.loadingCount=0,e.callBack=null,e.resInstance=null,e.groupTotalDic={},e.numLoadedDic={},e.itemListDic={},e.groupErrorDic={},e.retryTimesDic={},e.maxRetryTimes=3,e.failedList=new Array,e.priorityQueue={},e.lazyLoadList=new Array,e.analyzerDic={},e.queueIndex=0,e}return __extends(r,t),r.prototype.isGroupInLoading=function(e){return void 0!==this.itemListDic[e]},r.prototype.loadGroup=function(t,r,i){if(void 0===i&&(i=0),!this.itemListDic[r]&&r){if(!t||0==t.length){egret.$warn(3201,r);var n=new e.ResourceEvent(e.ResourceEvent.GROUP_LOAD_ERROR);return n.groupName=r,void this.dispatchEvent(n)}this.priorityQueue[i]?this.priorityQueue[i].push(r):this.priorityQueue[i]=[r],this.itemListDic[r]=t;for(var o=t.length,s=0;o>s;s++){var a=t[s];a.groupName=r}this.groupTotalDic[r]=t.length,this.numLoadedDic[r]=0,this.next()}},r.prototype.loadItem=function(e){this.lazyLoadList.push(e),e.groupName="",this.next()},r.prototype.next=function(){for(;this.loadingCount<this.thread;){var e=this.getOneResourceItem();if(!e)break;if(this.loadingCount++,e.loaded)this.onItemComplete(e);else{var t=this.resInstance.$getAnalyzerByType(e.type);t.loadFile(e,this.onItemComplete,this)}}},r.prototype.getOneResourceItem=function(){if(this.failedList.length>0)return this.failedList.shift();var e=Number.NEGATIVE_INFINITY;for(var t in this.priorityQueue)e=Math.max(e,t);var r=this.priorityQueue[e];if(!r||0==r.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();for(var i,n=r.length,o=0;n>o&&(this.queueIndex>=n&&(this.queueIndex=0),i=this.itemListDic[r[this.queueIndex]],!(i.length>0));o++)this.queueIndex++;return 0==i.length?null:i.shift()},r.prototype.onItemComplete=function(t){this.loadingCount--;var r=t.groupName;if(!t.loaded){var i=this.retryTimesDic[t.name]||1;if(!(i>this.maxRetryTimes))return this.retryTimesDic[t.name]=i+1,this.failedList.push(t),void this.next();delete this.retryTimesDic[t.name],e.ResourceEvent.dispatchResourceEvent(this.resInstance,e.ResourceEvent.ITEM_LOAD_ERROR,r,t)}if(r){this.numLoadedDic[r]++;var n=this.numLoadedDic[r],o=this.groupTotalDic[r];if(t.loaded||(this.groupErrorDic[r]=!0),e.ResourceEvent.dispatchResourceEvent(this.resInstance,e.ResourceEvent.GROUP_PROGRESS,r,t,n,o),n==o){var s=this.groupErrorDic[r];this.removeGroupName(r),delete this.groupTotalDic[r],delete this.numLoadedDic[r],delete this.itemListDic[r],delete this.groupErrorDic[r],s?e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_LOAD_ERROR,r):e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_COMPLETE,r)}}else this.callBack.call(this.resInstance,t);this.next()},r.prototype.removeGroupName=function(e){for(var t in this.priorityQueue){for(var r=this.priorityQueue[t],i=0,n=!1,o=r.length,s=0;o>s;s++){var a=r[s];if(a==e){r.splice(i,1),n=!0;break}i++}if(n){0==r.length&&delete this.priorityQueue[t];break}}},r}(egret.EventDispatcher);e.ResourceLoader=t,__reflect(t.prototype,"RES.ResourceLoader")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var o=t;r=JSON.parse(o)}catch(s){}return r?n=this.getRelativePath(e.url,r.file):(r=t,n=this.getTexturePath(e.url,r)),this.sheetMap[i]=r,n},t.prototype.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=new egret.BitmapFont(t,i);this.fileDic[r]=n}},t.prototype.getTexturePath=function(e,t){var r="",i=t.split("\n"),n=i[2],o=n.indexOf('file="');return-1!=o&&(n=n.substring(o+6),o=n.indexOf('"'),r=n.substring(0,o)),e=e.split("\\").join("/"),o=e.lastIndexOf("/"),e=-1!=o?e.substring(0,o+1)+r:r},t.prototype.onResourceDestroy=function(e){e&&e.dispose()},t}(e.SheetAnalyzer);e.FontAnalyzer=t,__reflect(t.prototype,"RES.FontAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(){function t(){this.keyMap={},this.groupDic={},e.configInstance=this}return t.prototype.getGroupByName=function(e){var t=new Array;if(!this.groupDic[e])return t;for(var r=this.groupDic[e],i=r.length,n=0;i>n;n++){var o=r[n];t.push(this.parseResourceItem(o))}return t},t.prototype.getRawGroupByName=function(e){return this.groupDic[e]?this.groupDic[e]:[]},t.prototype.createGroup=function(e,t,r){if(void 0===r&&(r=!1),!r&&this.groupDic[e]||!t||0==t.length)return!1;for(var i=this.groupDic,n=[],o=t.length,s=0;o>s;s++){var a=t[s],u=i[a];if(u)for(var c=u.length,l=0;c>l;l++){var p=u[l];-1==n.indexOf(p)&&n.push(p)}else{var p=this.keyMap[a];p?-1==n.indexOf(p)&&n.push(p):egret.$warn(3200,a)}}return 0==n.length?!1:(this.groupDic[e]=n,!0)},t.prototype.parseConfig=function(e,t){if(e){var r=e.resources;if(r)for(var i=r.length,n=0;i>n;n++){var o=r[n],s=o.url;s&&-1==s.indexOf("://")&&(o.url=t+s),this.addItemToKeyMap(o)}var a=e.groups;if(a)for(var u=a.length,n=0;u>n;n++){for(var c=a[n],l=[],p=c.keys.split(","),h=p.length,f=0;h>f;f++){var d=p[f].trim(),o=this.keyMap[d];o&&-1==l.indexOf(o)&&l.push(o)}this.groupDic[c.name]=l}}},t.prototype.addSubkey=function(e,t){var r=this.keyMap[t];r&&!this.keyMap[e]&&(this.keyMap[e]=r)},t.prototype.addItemToKeyMap=function(e){if(this.keyMap[e.name]||(this.keyMap[e.name]=e),e.hasOwnProperty("subkeys")){var t=e.subkeys.split(",");e.subkeys=t;for(var r=t.length,i=0;r>i;i++){var n=t[i];null==this.keyMap[n]&&(this.keyMap[n]=e)}}},t.prototype.getName=function(e){var t=this.keyMap[e];return t?t.name:""},t.prototype.getType=function(e){var t=this.keyMap[e];return t?t.type:""},t.prototype.getRawResourceItem=function(e){return this.keyMap[e]},t.prototype.getResourceItem=function(e){var t=this.keyMap[e];return t?this.parseResourceItem(t):null},t.prototype.parseResourceItem=function(t){var r=new e.ResourceItem(t.name,t.url,t.type);return r.data=t,r},t}();e.ResourceConfig=t,__reflect(t.prototype,"RES.ResourceConfig")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(t,e),t.prototype.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t)try{var i=t,n=egret.XML.parse(i);this.fileDic[r]=n}catch(o){}},t}(e.BinAnalyzer);e.XMLAnalyzer=t,__reflect(t.prototype,"RES.XMLAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(t,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1);var n=e.call(this,t,r,i)||this;return n.itemsLoaded=0,n.itemsTotal=0,n.groupName="",n.resItem=null,n}return __extends(t,e),t.dispatchResourceEvent=function(e,r,i,n,o,s){void 0===i&&(i=""),void 0===n&&(n=null),void 0===o&&(o=0),void 0===s&&(s=0);var a=egret.Event.create(t,r);a.groupName=i,a.resItem=n,a.itemsLoaded=o,a.itemsTotal=s;var u=e.dispatchEvent(a);return egret.Event.release(a),u},t}(egret.Event);t.ITEM_LOAD_ERROR="itemLoadError",t.CONFIG_COMPLETE="configComplete",t.CONFIG_LOAD_ERROR="configLoadError",t.GROUP_PROGRESS="groupProgress",t.GROUP_COMPLETE="groupComplete",t.GROUP_LOAD_ERROR="groupLoadError",e.ResourceEvent=t,__reflect(t.prototype,"RES.ResourceEvent")}(RES||(RES={}));var RES;!function(e){var t;!function(t){var r=function(e){function t(){var t=e.call(this)||this;return t._versionInfo={},t}return __extends(t,e),t.prototype.fetchVersion=function(e){e.onSuccess(null)},t.prototype.getChangeList=function(){return[]},t.prototype.getVirtualUrl=function(e){return e},t}(egret.EventDispatcher);t.Html5VersionController=r,__reflect(r.prototype,"RES.web.Html5VersionController",["RES.VersionController","RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(e.VersionController=r)}(t=e.web||(e.web={}))}(RES||(RES={}));var RES;!function(e){var t;!function(t){var r=function(){function e(){this._versionInfo={},this._versionPath="",this._localFileArr=[]}return e.prototype.fetchVersion=function(e){var t=this;if(t._versionPath="all.manifest",t._versionInfo=t.getLocalData(t._versionPath),null==t._versionInfo)return void egret.callLater(function(){e.onFail(1,null)},t);var r=0,i=function(i){if(i)for(var n=0;n<i.length;n++)i[n]&&""!=i[n]&&t._localFileArr.push("resource/"+i[n]);r++,2==r&&e.onSuccess(null)};t.getList(i,"assets","resource"),t.getList(i,"update","resource")},e.prototype.getList=function(e,t,r){void 0===r&&(r="");var i=egret.PromiseObject.create();i.onSuccessFunc=function(t){e(t)},i.onErrorFunc=function(){console.error("list files error")},"assets"==t?egret_native.Game.listResource(r,i):egret_native.Game.listUpdate(r,i)},e.prototype.getChangeList=function(){var e=[],t=this._localFileArr;for(var r in this._versionInfo)t.indexOf(this.getVirtualUrl(r))<0&&e.push({url:this.getVirtualUrl(r),size:this._versionInfo[r].s});return e},e.prototype.getVirtualUrl=function(e){return this._versionInfo&&this._versionInfo[e]?"resource/"+this._versionInfo[e].v.substring(0,2)+"/"+this._versionInfo[e].v+"_"+this._versionInfo[e].s+"."+e.substring(e.lastIndexOf(".")+1):e},e.prototype.getLocalData=function(e){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var t=egret_native.readUpdateFileSync(e);if(null!=t)return JSON.parse(t);if(t=egret_native.readResourceFileSync(e),null!=t)return JSON.parse(t)}return null},e}();t.NativeVersionController=r,__reflect(r.prototype,"RES.native.NativeVersionController",["RES.VersionController","RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE&&(e.VersionController=r)}(t=e["native"]||(e["native"]={}))}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.soundDic={},e.resItemDic=[],e}return __extends(r,t),r.prototype.loadFile=function(t,r,i){if(this.soundDic[t.name])return void r.call(i,t);var n=new egret.Sound;n.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),this.resItemDic[n.$hashCode]={item:t,func:r,thisObject:i},n.load(e.$getVirtualUrl(t.url)),t.data&&(n.type=t.data.soundType)},r.prototype.onLoadFinish=function(e){var t=e.$target;t.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.$hashCode];var i=r.item,n=r.func;i.loaded=e.$type==egret.Event.COMPLETE,i.loaded&&this.analyzeData(i,t),n.call(r.thisObject,i)},r.prototype.analyzeData=function(e,t){var r=e.name;!this.soundDic[r]&&t&&(this.soundDic[r]=t)},r.prototype.getRes=function(e){return this.soundDic[e]},r.prototype.hasRes=function(e){return!!this.getRes(e)},r.prototype.destroyRes=function(e){return this.soundDic[e]?(delete this.soundDic[e],!0):!1},r}(e.AnalyzerBase);e.SoundAnalyzer=t,__reflect(t.prototype,"RES.SoundAnalyzer")}(RES||(RES={}));var RES;!function(e){function t(e,t){I.registerAnalyzer(e,t)}function r(e){return I.$getAnalyzerByType(e)}function i(e){I.$registerVersionController(e)}function n(){return I.vcs}function o(e,t,r){void 0===t&&(t=""),void 0===r&&(r="json"),I.loadConfig(e,t,r)}function s(e,t){void 0===t&&(t=0),I.loadGroup(e,t)}function a(e){return I.isGroupLoaded(e)}function u(e){return I.getGroupByName(e)}function c(e,t,r){return void 0===r&&(r=!1),I.createGroup(e,t,r)}function l(e){return I.hasRes(e)}function p(e,t){void 0===t&&(t=""),I.parseConfig(e,t)}function h(e){return I.getRes(e)}function f(e,t,r){I.getResAsync(e,t,r)}function d(e,t,r,i){void 0===i&&(i=""),I.getResByUrl(e,t,r,i)}function y(e,t){return I.destroyRes(e,t)}function g(e){I.setMaxLoadingThread(e)}function v(e){I.setMaxRetryTimes(e)}function R(e,t,r,i,n){void 0===i&&(i=!1),void 0===n&&(n=0),I.addEventListener(e,t,r,i,n)}function E(e,t,r,i){void 0===i&&(i=!1),I.removeEventListener(e,t,r,i)}function m(e){return I.vcs?I.vcs.getVirtualUrl(e):e}e.registerAnalyzer=t,e.getAnalyzer=r,e.registerVersionController=i,e.getVersionController=n,e.loadConfig=o,e.loadGroup=s,e.isGroupLoaded=a,e.getGroupByName=u,e.createGroup=c,e.hasRes=l,e.parseConfig=p,e.getRes=h,e.getResAsync=f,e.getResByUrl=d,e.destroyRes=y,e.setMaxLoadingThread=g,e.setMaxRetryTimes=v,e.addEventListener=R,e.removeEventListener=E,e.$getVirtualUrl=m;var _=function(t){function r(){var e=t.call(this)||this;return e.analyzerDic={},e.analyzerClassMap={},e.configItemList=[],e.callLaterFlag=!1,e.configComplete=!1,e.loadedGroups=[],e.groupNameList=[],e.asyncDic={},e._loadedUrlTypes={},e.init(),e}return __extends(r,t),r.prototype.$getAnalyzerByType=function(e){var t=this.analyzerDic[e];if(!t){var r=this.analyzerClassMap[e];if(!r)return null;t=this.analyzerDic[e]=new r}return t},r.prototype.registerAnalyzer=function(e,t){this.analyzerClassMap[e]=t},r.prototype.$registerVersionController=function(e){this.vcs=e},r.prototype.init=function(){this.vcs=new e.VersionController;var t=this.analyzerClassMap;t[e.ResourceItem.TYPE_BIN]=e.BinAnalyzer,t[e.ResourceItem.TYPE_IMAGE]=e.ImageAnalyzer,t[e.ResourceItem.TYPE_TEXT]=e.TextAnalyzer,t[e.ResourceItem.TYPE_JSON]=e.JsonAnalyzer,t[e.ResourceItem.TYPE_SHEET]=e.SheetAnalyzer,t[e.ResourceItem.TYPE_FONT]=e.FontAnalyzer,t[e.ResourceItem.TYPE_SOUND]=e.SoundAnalyzer,t[e.ResourceItem.TYPE_XML]=e.XMLAnalyzer,this.resConfig=new e.ResourceConfig,this.resLoader=new e.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,this.resLoader.resInstance=this,this.resLoader.addEventListener(e.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this),this.resLoader.addEventListener(e.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)},r.prototype.loadConfig=function(e,t,r){void 0===r&&(r="json");var i={url:e,resourceRoot:t,type:r};this.configItemList.push(i),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},r.prototype.startLoadConfig=function(){var t=this;this.callLaterFlag=!1;var i=this.configItemList;this.configItemList=[],this.loadingConfigList=i;for(var n=i.length,o=[],s=0;n>s;s++){var a=i[s],u=new e.ResourceItem(a.url,a.url,a.type);o.push(u)}var c={onSuccess:function(e){t.resLoader.loadGroup(o,r.GROUP_CONFIG,Number.MAX_VALUE)},onFail:function(r,i){e.ResourceEvent.dispatchResourceEvent(t,e.ResourceEvent.CONFIG_LOAD_ERROR)}};this.vcs?this.vcs.fetchVersion(c):this.resLoader.loadGroup(o,r.GROUP_CONFIG,Number.MAX_VALUE)},r.prototype.isGroupLoaded=function(e){return-1!=this.loadedGroups.indexOf(e)},r.prototype.getGroupByName=function(e){return this.resConfig.getGroupByName(e)},r.prototype.loadGroup=function(t,r){if(void 0===r&&(r=0),-1!=this.loadedGroups.indexOf(t))return void e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_COMPLETE,t);if(!this.resLoader.isGroupInLoading(t))if(this.configComplete){var i=this.resConfig.getGroupByName(t);this.resLoader.loadGroup(i,t,r)}else this.groupNameList.push({name:t,priority:r})},r.prototype.createGroup=function(e,t,r){if(void 0===r&&(r=!1),r){var i=this.loadedGroups.indexOf(e);-1!=i&&this.loadedGroups.splice(i,1)}return this.resConfig.createGroup(e,t,r)},r.prototype.onGroupComp=function(t){if(t.groupName==r.GROUP_CONFIG){for(var i=this.loadingConfigList.length,n=0;i>n;n++){var o=this.loadingConfigList[n],s=this.$getAnalyzerByType(o.type),a=s.getRes(o.url);s.destroyRes(o.url),this.resConfig.parseConfig(a,o.resourceRoot)}this.configComplete=!0,this.loadingConfigList=null,e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.CONFIG_COMPLETE),this.loadDelayGroups()}else this.loadedGroups.push(t.groupName),this.dispatchEvent(t)},r.prototype.loadDelayGroups=function(){var e=this.groupNameList;this.groupNameList=[];for(var t=e.length,r=0;t>r;r++){var i=e[r];this.loadGroup(i.name,i.priority)}},r.prototype.onGroupError=function(t){t.groupName==r.GROUP_CONFIG?(this.loadingConfigList=null,e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(t)},r.prototype.hasRes=function(t){var r=this.resConfig.getType(t);if(""==r){var i=e.AnalyzerBase.getStringTail(t);if(r=this.resConfig.getType(i),""==r)return!1}return!0},r.prototype.parseConfig=function(e,t){this.resConfig.parseConfig(e,t),this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())},r.prototype.getRes=function(t){var r=this.resConfig.getType(t);if(""==r){var i=e.AnalyzerBase.getStringPrefix(t);if(r=this.resConfig.getType(i),""==r)return null}var n=this.$getAnalyzerByType(r);return n.getRes(t)},r.prototype.getResAsync=function(t,r,i){var n=this.resConfig.getType(t),o=this.resConfig.getName(t);if(""==n&&(o=e.AnalyzerBase.getStringPrefix(t),n=this.resConfig.getType(o),""==n))return void egret.$callAsync(r,i);var s=this.$getAnalyzerByType(n),a=s.getRes(t);if(a)return void egret.$callAsync(r,i,a,t);var u={key:t,compFunc:r,thisObject:i};if(this.asyncDic[o])this.asyncDic[o].push(u);else{this.asyncDic[o]=[u];var c=this.resConfig.getResourceItem(o);this.resLoader.loadItem(c)}},r.prototype.getResByUrl=function(t,r,i,n){if(void 0===n&&(n=""),!t)return void egret.$callAsync(r,i);n||(n=this.getTypeByUrl(t)),null!=this._loadedUrlTypes[t]&&this._loadedUrlTypes[t]!=n&&egret.$warn(3202),this._loadedUrlTypes[t]=n;var o=this.$getAnalyzerByType(n),s=t,a=o.getRes(s);if(a)return void egret.$callAsync(r,i,a,t);var u={key:s,compFunc:r,thisObject:i};if(this.asyncDic[s])this.asyncDic[s].push(u);else{this.asyncDic[s]=[u];var c=new e.ResourceItem(s,t,n);this.resLoader.loadItem(c)}},r.prototype.getTypeByUrl=function(t){var r=t.substr(t.lastIndexOf(".")+1);r&&(r=r.toLowerCase());var i;switch(r){case e.ResourceItem.TYPE_XML:case e.ResourceItem.TYPE_JSON:case e.ResourceItem.TYPE_SHEET:i=r;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":i=e.ResourceItem.TYPE_IMAGE;break;case"fnt":i=e.ResourceItem.TYPE_FONT;break;case"txt":i=e.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":i=e.ResourceItem.TYPE_SOUND;break;default:i=e.ResourceItem.TYPE_BIN}return i},r.prototype.onResourceItemComp=function(e){var t=this.asyncDic[e.name];delete this.asyncDic[e.name];for(var r=this.$getAnalyzerByType(e.type),i=t.length,n=0;i>n;n++){var o=t[n],s=r.getRes(o.key);o.compFunc.call(o.thisObject,s,o.key)}},r.prototype.destroyRes=function(e,t){void 0===t&&(t=!0);var r=this.resConfig.getRawGroupByName(e);if(r&&r.length>0){var i=this.loadedGroups.indexOf(e);-1!=i&&this.loadedGroups.splice(i,1);for(var n=r.length,o=0;n>o;o++){var s=r[o];if(!t&&this.isResInLoadedGroup(s.name));else{s.loaded=!1;var a=this.$getAnalyzerByType(s.type);a.destroyRes(s.name),this.removeLoadedGroupsByItemName(s.name)}}return!0}var u=this.resConfig.getType(e);if(""==u){if(u=this._loadedUrlTypes[e],null==u||""==u)return!1;delete this._loadedUrlTypes[e];var c=this.$getAnalyzerByType(u);return c.destroyRes(e),!0}var s=this.resConfig.getRawResourceItem(e);s.loaded=!1;var a=this.$getAnalyzerByType(u),l=a.destroyRes(e);return this.removeLoadedGroupsByItemName(s.name),l},r.prototype.removeLoadedGroupsByItemName=function(e){for(var t=this.loadedGroups,r=t.length,i=0;r>i;i++)for(var n=this.resConfig.getRawGroupByName(t[i]),o=n.length,s=0;o>s;s++){var a=n[s];if(a.name==e){t.splice(i,1),i--,r=t.length;break}}},r.prototype.isResInLoadedGroup=function(e){for(var t=this.loadedGroups,r=t.length,i=0;r>i;i++)for(var n=this.resConfig.getRawGroupByName(t[i]),o=n.length,s=0;o>s;s++){var a=n[s];if(a.name==e)return!0}return!1},r.prototype.setMaxLoadingThread=function(e){1>e&&(e=1),this.resLoader.thread=e},r.prototype.setMaxRetryTimes=function(e){e=Math.max(e,0),this.resLoader.maxRetryTimes=e},r}(egret.EventDispatcher);_.GROUP_CONFIG="RES__CONFIG",__reflect(_.prototype,"Resource");var I=new _}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.sheetMap={},e.recyclerIamge=[],e._dataFormat=egret.HttpResponseType.TEXT,e}return __extends(r,t),r.prototype.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;if(i.loaded=e.type==egret.Event.COMPLETE,i.loaded)if(t instanceof egret.HttpRequest){i.loaded=!1;var o=this.analyzeConfig(i,t.response);if(o)return this.loadImage(o,r),void this.recycler.push(t)}else this.analyzeBitmap(i,t.data);t instanceof egret.HttpRequest?this.recycler.push(t):this.recyclerIamge.push(t),n.call(r.thisObject,i)},r.prototype.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var o=t;r=JSON.parse(o)}catch(s){egret.$warn(1017,e.url,t)}if(r)if(this.sheetMap[i]=r,r.file)n=this.getRelativePath(e.url,r.file);else{var a=e.url.split("?"),u=a[0].split("/");u[u.length-1]=u[u.length-1].split(".")[0]+".png",n="";for(var c=0;c<u.length;c++)n+=u[c]+(c<u.length-1?"/":"");2==a.length&&(n+=a[2])}return n},r.prototype.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=e.data&&e.data.subkeys?"":r,o=this.parseAnimation(t,i,n);this.fileDic[r]=o}},r.prototype.getRelativePath=function(e,t){e=e.split("\\").join("/");var r=e.lastIndexOf("/");return e=-1!=r?e.substring(0,r+1)+t:t},r.prototype.parseAnimation=function(e,t,r){for(var i,n=Object.keys(t.mc),o=t.mc[n[0]].frames,s=o.length,a=[],u=0;s>u;u++){i=t.res[o[u].res];var c=new egret.Texture;c._bitmapData=e,c.$initData(i.x,i.y,i.w,i.h,o[u].x,o[u].y,o[u].sourceW,o[u].sourceH,e.width,e.height)}return a},r.prototype.destroyRes=function(e){var t=this.fileDic[e];return t?(delete this.fileDic[e],!0):!1},r.prototype.loadImage=function(t,r){var i=this.getImageLoader();this.resItemDic[i.hashCode]=r,i.load(e.$getVirtualUrl(t))},r.prototype.getImageLoader=function(){var e=this.recyclerIamge.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r}(e.BinAnalyzer);e.AnimationAnalyzer=t,__reflect(t.prototype,"RES.AnimationAnalyzer")}(RES||(RES={}));var egret;!function(e){e.$locale_strings=e.$locale_strings||{},e.$locale_strings.en_US=e.$locale_strings.en_US||{};var t=e.$locale_strings.en_US;t[3200]="RES.createGroup() passed in non-existed key value in configuration: {0}",t[3201]='RES loaded non-existed or empty resource group:"{0}"',t[3202]="Do not use the different types of ways to load the same material!",t[3203]="Can't find the analyzer of the specified file type:{0}。 Please register the specified analyzer in the initialization of the project first,then start the resource loading process。"}(egret||(egret={}));var egret;!function(e){e.$locale_strings=e.$locale_strings||{},e.$locale_strings.zh_CN=e.$locale_strings.zh_CN||{};var t=e.$locale_strings.zh_CN;t[3200]="RES.createGroup()传入了配置中不存在的键值: {0}",t[3201]='RES加载了不存在或空的资源组:"{0}"',t[3202]="请不要使用不同的类型方式来加载同一个素材！",t[3203]="找不到指定文件类型的解析器:{0}。 请先在项目初始化里注册指定文件类型的解析器，再启动资源加载。"}(egret||(egret={}));/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/libs/modules/res/res.min.js*/var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},egret;!function(t){var e=function(){function t(){}return t}();e.BINARY="binary",e.TEXT="text",e.VARIABLES="variables",e.TEXTURE="texture",e.SOUND="sound",t.URLLoaderDataFormat=e,__reflect(e.prototype,"egret.URLLoaderDataFormat")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,r,i){var o=t.call(this)||this;return o._name=e,o._frame=0|r,i&&(o._end=0|i),o}return __extends(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._name,this._frame,this._end)},e}(t.EventDispatcher);t.FrameLabel=e,__reflect(e.prototype,"egret.FrameLabel")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){var t=e.call(this)||this;return t.$mcData=null,t.numFrames=1,t.frames=[],t.labels=null,t.events=[],t.frameRate=0,t.textureData=null,t.spriteSheet=null,t}return __extends(r,e),r.prototype.$init=function(t,e,r){this.textureData=e,this.spriteSheet=r,this.setMCData(t)},r.prototype.getKeyFrameData=function(t){var e=this.frames[t-1];return e.frame&&(e=this.frames[e.frame-1]),e},r.prototype.getTextureByFrame=function(t){var e=this.getKeyFrameData(t);if(e.res){var r=this.getTextureByResName(e.res);return r}return null},r.prototype.$getOffsetByFrame=function(t,e){var r=this.getKeyFrameData(t);r.res&&e.setTo(0|r.x,0|r.y)},r.prototype.getTextureByResName=function(t){if(null==this.spriteSheet)return null;var e=this.spriteSheet.getTexture(t);if(!e){var r=this.textureData[t];e=this.spriteSheet.createTexture(t,r.x,r.y,r.w,r.h)}return e},r.prototype.$isDataValid=function(){return this.frames.length>0},r.prototype.$isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},r.prototype.$fillMCData=function(t){this.frameRate=t.frameRate||24,this.fillFramesData(t.frames),this.fillFrameLabelsData(t.labels),this.fillFrameEventsData(t.events)},r.prototype.fillFramesData=function(t){for(var e,r=this.frames,i=t?t.length:0,o=0;i>o;o++){var n=t[o];if(r.push(n),n.duration){var s=parseInt(n.duration);if(s>1){e=r.length;for(var a=1;s>a;a++)r.push({frame:e})}}}this.numFrames=r.length},r.prototype.fillFrameLabelsData=function(e){if(e){var r=e.length;if(r>0){this.labels=[];for(var i=0;r>i;i++){var o=e[i];this.labels.push(new t.FrameLabel(o.name,o.frame,o.end))}}}},r.prototype.fillFrameEventsData=function(t){if(t){var e=t.length;if(e>0){this.events=[];for(var r=0;e>r;r++){var i=t[r];this.events[i.frame]=i.name}}}},Object.defineProperty(r.prototype,"mcData",{get:function(){return this.$mcData},set:function(t){this.setMCData(t)},enumerable:!0,configurable:!0}),r.prototype.setMCData=function(t){this.$mcData!=t&&(this.$mcData=t,t&&this.$fillMCData(t))},r}(t.HashObject);t.MovieClipData=e,__reflect(e.prototype,"egret.MovieClipData")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(t,r){var i=e.call(this)||this;return i.enableCache=!0,i.$mcDataCache={},i.$mcDataSet=t,i.setTexture(r),i}return __extends(r,e),r.prototype.clearCache=function(){this.$mcDataCache={}},r.prototype.generateMovieClipData=function(e){if(void 0===e&&(e=""),""==e&&this.$mcDataSet)for(e in this.$mcDataSet.mc)break;if(""==e)return null;var r=this.findFromCache(e,this.$mcDataCache);return r||(r=new t.MovieClipData,this.fillData(e,r,this.$mcDataCache)),r},r.prototype.findFromCache=function(t,e){return this.enableCache&&e[t]?e[t]:null},r.prototype.fillData=function(t,e,r){if(this.$mcDataSet){var i=this.$mcDataSet.mc[t];i&&(e.$init(i,this.$mcDataSet.res,this.$spriteSheet),this.enableCache&&(r[t]=e))}},Object.defineProperty(r.prototype,"mcDataSet",{get:function(){return this.$mcDataSet},set:function(t){this.$mcDataSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"texture",{set:function(t){this.setTexture(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spriteSheet",{get:function(){return this.$spriteSheet},enumerable:!0,configurable:!0}),r.prototype.setTexture=function(e){this.$spriteSheet=e?new t.SpriteSheet(e):null},r}(t.EventDispatcher);t.MovieClipDataFactory=e,__reflect(e.prototype,"egret.MovieClipDataFactory")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(t,r,i,o){void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null);var n=e.call(this,t,r,i)||this;return n.frameLabel=null,n.frameLabel=o,n}return __extends(r,e),r.dispatchMovieClipEvent=function(e,i,o){void 0===o&&(o=null);var n=t.Event.create(r,i);n.frameLabel=o;var s=e.dispatchEvent(n);return t.Event.release(n),s},r}(t.Event);e.FRAME_LABEL="frame_label",t.MovieClipEvent=e,__reflect(e.prototype,"egret.MovieClipEvent")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e}();e.quintOut=e.getPowOut(5),e.quartOut=e.getPowOut(4),t.ScrollEase=e,__reflect(e.prototype,"egret.ScrollEase");var r=function(e){function r(t,r,i){var o=e.call(this)||this;return o._target=null,o._useTicks=!1,o.ignoreGlobalPause=!1,o.loop=!1,o.pluginData=null,o._steps=null,o._actions=null,o.paused=!1,o.duration=0,o._prevPos=-1,o.position=null,o._prevPosition=0,o._stepPosition=0,o.passive=!1,o.initialize(t,r,i),o}return __extends(r,e),r.get=function(t,e,i,o){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!1),o&&r.removeTweens(t),new r(t,e,i)},r.removeTweens=function(t){if(t.tween_count){for(var e=r._tweens,i=e.length-1;i>=0;i--)e[i]._target==t&&(e[i].paused=!0,e.splice(i,1));t.tween_count=0}},r.tick=function(t,e){void 0===e&&(e=!1);var i=t-r._lastTime;r._lastTime=t;for(var o=r._tweens.concat(),n=o.length-1;n>=0;n--){var s=o[n];e&&!s.ignoreGlobalPause||s.paused||s.tick(s._useTicks?1:i)}return!1},r._register=function(e,i){var o=e._target,n=r._tweens;if(i)o&&(o.tween_count=o.tween_count>0?o.tween_count+1:1),n.push(e),r._inited||(r._lastTime=t.getTimer(),t.sys.$ticker.$startTick(r.tick,null),r._inited=!0);else{o&&o.tween_count--;for(var s=n.length;s--;)if(n[s]==e)return void n.splice(s,1)}},r.prototype.initialize=function(t,e,i){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&r.removeTweens(t)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:r._register(this,!0),e&&null!=e.position&&this.setPosition(e.position)},r.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var r=t,i=!1;if(r>=this.duration&&(this.loop?r%=this.duration:(r=this.duration,i=!0)),r==this._prevPos)return i;var o=this._prevPos;if(this.position=this._prevPos=r,this._prevPosition=t,this._target)if(i)this._updateTargetProps(null,1);else if(this._steps.length>0){var n=void 0,s=this._steps.length;for(n=0;s>n&&!(this._steps[n].t>r);n++);var a=this._steps[n-1];this._updateTargetProps(a,(this._stepPosition=r-a.t)/a.d)}return i&&this.setPaused(!0),0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(r,r):1==e&&o>r?(o!=this.duration&&this._runActions(o,this.duration),this._runActions(0,r,!0)):this._runActions(o,r)),this.dispatchEventWith("change"),i},r.prototype._runActions=function(t,e,r){void 0===r&&(r=!1);var i=t,o=e,n=-1,s=this._actions.length,a=1;for(t>e&&(i=e,o=t,n=s,s=a=-1);(n+=a)!=s;){var l=this._actions[n],h=l.t;(h==o||h>i&&o>h||r&&h==t)&&l.f.apply(l.o,l.p)}},r.prototype._updateTargetProps=function(t,e){var i,o,n,s,a,l;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),i=t.p0,o=t.p1}else this.passive=!1,i=o=this._curQueueProps;for(var h in this._initQueueProps){null==(s=i[h])&&(i[h]=s=this._initQueueProps[h]),null==(a=o[h])&&(o[h]=a=s),n=s==a||0==e||1==e||"number"!=typeof s?1==e?a:s:s+(a-s)*e;var c=!1;if(l=r._plugins[h])for(var u=0,p=l.length;p>u;u++){var _=l[u].tween(this,h,n,i,o,e,!!t&&i==o,!t);_==r.IGNORE?c=!0:n=_}c||(this._target[h]=n)}},r.prototype.setPaused=function(t){return this.paused=t,r._register(this,!t),this},r.prototype._cloneProps=function(t){var e={};for(var r in t)e[r]=t[r];return e},r.prototype._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},r.prototype._appendQueueProps=function(t){var e,i,o,n,s;for(var a in t)if(void 0===this._initQueueProps[a]){if(i=this._target[a],e=r._plugins[a])for(o=0,n=e.length;n>o;o++)i=e[o].init(this,a,i);this._initQueueProps[a]=this._curQueueProps[a]=void 0===i?null:i}else i=this._curQueueProps[a];for(var a in t){if(i=this._curQueueProps[a],e=r._plugins[a])for(s=s||{},o=0,n=e.length;n>o;o++)e[o].step&&e[o].step(this,a,i,t[a],s);this._curQueueProps[a]=t[a]}return s&&this._appendQueueProps(s),this._curQueueProps},r.prototype._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},r.prototype.to=function(t,e,r){return void 0===r&&(r=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:r,p1:this._cloneProps(this._appendQueueProps(t))})},r.prototype.call=function(t,e,r){return void 0===e&&(e=void 0),void 0===r&&(r=void 0),this._addAction({f:t,p:r?r:[],o:e?e:this._target})},r.prototype.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},r}(t.EventDispatcher);r._tweens=[],r.IGNORE={},r._plugins={},r._inited=!1,r._lastTime=0,t.ScrollTween=r,__reflect(r.prototype,"egret.ScrollTween")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){void 0===r&&(r=null);var i=e.call(this)||this;return i.scrollBeginThreshold=10,i.scrollSpeed=1,i._content=null,i.delayTouchBeginEvent=null,i.touchBeginTimer=null,i.touchEnabled=!0,i._ScrV_Props_=new t.ScrollViewProperties,r&&i.setContent(r),i}return __extends(r,e),Object.defineProperty(r.prototype,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(t){this._ScrV_Props_._bounces=!!t},enumerable:!0,configurable:!0}),r.prototype.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},r.prototype.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},Object.defineProperty(r.prototype,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0}),r.prototype.setScrollPosition=function(t,e,r){if(void 0===r&&(r=!1),(!r||0!=t||0!=e)&&(r||this._ScrV_Props_._scrollTop!=t||this._ScrV_Props_._scrollLeft!=e)){var i=this._ScrV_Props_._scrollTop,o=this._ScrV_Props_._scrollLeft;if(r){var n=this.getMaxScrollLeft(),s=this.getMaxScrollTop();(0>=i||i>=s)&&(t/=2),(0>=o||o>=n)&&(e/=2);var a=i+t,l=o+e,h=this._ScrV_Props_._bounces;h||((0>=a||a>=s)&&(a=Math.max(0,Math.min(a,s))),(0>=l||l>=n)&&(l=Math.max(0,Math.min(l,n)))),this._ScrV_Props_._scrollTop=a,this._ScrV_Props_._scrollLeft=l}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},r.prototype._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var r=this.height,i=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-r)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,i>r?i-r/2:r/2)}if(e){var o=this.width,n=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-o)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,n>o?n-o/2:o/2)}},r.prototype.$setWidth=function(t){if(this.$getExplicitWidth()==t)return!1;var r=e.prototype.$setWidth.call(this,t);return this._updateContentPosition(),r},r.prototype.$setHeight=function(t){if(this.$getExplicitHeight()==t)return!1;e.prototype.$setHeight.call(this,t);return this._updateContentPosition(),!0},r.prototype._updateContentPosition=function(){var e=this.height,r=this.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),r,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},r.prototype._checkScrollPolicy=function(){var t=this._ScrV_Props_._horizontalScrollPolicy,e=this.__checkScrollPolicy(t,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=e;var r=this._ScrV_Props_._verticalScrollPolicy,i=this.__checkScrollPolicy(r,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=i,e||i},r.prototype.__checkScrollPolicy=function(t,e,r){return"on"==t?!0:"off"==t?!1:e>r},r.prototype._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},r.prototype._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},r.prototype._onTouchBegin=function(e){if(!e.$isDefaultPrevented){var r=this._checkScrollPolicy();r&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this._tempStage=this.stage,this._tempStage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())}},r.prototype._onTouchBeginCapture=function(e){var r=this._checkScrollPolicy();if(r){for(var i=e.target;i!=this;){if("_checkScrollPolicy"in i&&(r=i._checkScrollPolicy()))return;i=i.parent}e.stopPropagation();var o=this.cloneTouchEvent(e);this.delayTouchBeginEvent=o,this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},r.prototype._onTouchEndCapture=function(e){var r=this;if(this.delayTouchBeginEvent){this._onTouchBeginTimer(),e.stopPropagation();var i=this.cloneTouchEvent(e);t.callLater(function(){r.stage&&r.dispatchPropagationEvent(i)},this)}},r.prototype._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},r.prototype.dispatchPropagationEvent=function(e){for(var r=e.$target,i=this.$getPropagationList(r),o=i.length,n=.5*i.length,s=-1,a=0;o>a;a++)if(i[a]===this._content){s=a;break}i.splice(0,s+1),n-=s+1,this.$dispatchPropagationEvent(e,i,n),t.Event.release(e)},r.prototype._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,r=t.stageY-this._ScrV_Props_._touchStartPosition.y,i=Math.sqrt(e*e+r*r);if(i<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var o=this._getPointChange(t);this.setScrollPosition(o.y,o.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},r.prototype._onTouchEnd=function(e){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,this._tempStage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},r.prototype._onEnterFrame=function(e){var r=t.getTimer();r-this._ScrV_Props_._lastTouchTime>100&&r-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},r.prototype._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},r.prototype._getPointChange=function(t){return{x:this._ScrV_Props_._hCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:this._ScrV_Props_._vCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},r.prototype._calcVelocitys=function(e){var r=t.getTimer();if(0==this._ScrV_Props_._lastTouchTime)return void(this._ScrV_Props_._lastTouchTime=r);var i=this._getPointChange(e),o=r-this._ScrV_Props_._lastTouchTime;i.x/=o,i.y/=o,this._ScrV_Props_._velocitys.push(i),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY},r.prototype._getContentWidth=function(){return this._content.$getExplicitWidth()||this._content.width},r.prototype._getContentHeight=function(){return this._content.$getExplicitHeight()||this._content.height},r.prototype.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},r.prototype.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},r.prototype._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t={x:0,y:0},e=0,i=0;i<this._ScrV_Props_._velocitys.length;i++){var o=this._ScrV_Props_._velocitys[i],n=r.weight[i];t.x+=o.x*n,t.y+=o.y*n,e+=n}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var s=t.x/e*this.scrollSpeed,a=t.y/e*this.scrollSpeed,l=Math.abs(s),h=Math.abs(a),c=this.getMaxScrollLeft(),u=this.getMaxScrollTop(),p=l>.02?this.getAnimationDatas(s,this._ScrV_Props_._scrollLeft,c):{position:this._ScrV_Props_._scrollLeft,duration:1},_=h>.02?this.getAnimationDatas(a,this._ScrV_Props_._scrollTop,u):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(p.position,p.duration),this.setScrollTop(_.position,_.duration)}},r.prototype.onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},r.prototype._onScrollStarted=function(){},r.prototype._onScrollFinished=function(){t.ScrollTween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},r.prototype.setScrollTop=function(e,r){void 0===r&&(r=0);var i=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==r)return void(this.scrollTop=i);0==this._ScrV_Props_._bounces&&(e=i);var o=t.ScrollTween.get(this).to({scrollTop:e},r,t.ScrollEase.quartOut);i!=e&&o.to({scrollTop:i},300,t.ScrollEase.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=o,o.call(this.onTweenFinished,this,[o]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted()},r.prototype.setScrollLeft=function(e,r){void 0===r&&(r=0);var i=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==r)return void(this.scrollLeft=i);0==this._ScrV_Props_._bounces&&(e=i);var o=t.ScrollTween.get(this).to({scrollLeft:e},r,t.ScrollEase.quartOut);i!=e&&o.to({scrollLeft:i},300,t.ScrollEase.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=o,o.call(this.onTweenFinished,this,[o]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted()},r.prototype.getAnimationDatas=function(t,e,r){var i=Math.abs(t),o=.95,n=0,s=.998,a=.02,l=e+500*t;if(0>l||l>r)for(l=e;Math.abs(t)!=1/0&&Math.abs(t)>a;)l+=t,t*=0>l||l>r?s*o:s,n++;else n=500*-Math.log(a/i);var h={position:Math.min(r+50,Math.max(l,-50)),duration:n};return h},r.prototype.cloneTouchEvent=function(e){var r=new t.TouchEvent(e.type,e.bubbles,e.cancelable);return r.touchPointID=e.touchPointID,r.$stageX=e.stageX,r.$stageY=e.stageY,r.touchDown=e.touchDown,r.$isDefaultPrevented=!1,r.$target=e.target,r},r.prototype.throwNotSupportedError=function(){t.$error(1023)},r.prototype.addChild=function(t){return this.throwNotSupportedError(),null},r.prototype.addChildAt=function(t,e){return this.throwNotSupportedError(),null},r.prototype.removeChild=function(t){return this.throwNotSupportedError(),null},r.prototype.removeChildAt=function(t){return this.throwNotSupportedError(),null},r.prototype.setChildIndex=function(t,e){this.throwNotSupportedError()},r.prototype.swapChildren=function(t,e){this.throwNotSupportedError()},r.prototype.swapChildrenAt=function(t,e){this.throwNotSupportedError()},r}(t.DisplayObjectContainer);e.weight=[1,1.33,1.66,2,2.33],t.ScrollView=e,__reflect(e.prototype,"egret.ScrollView")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this._verticalScrollPolicy="auto",this._horizontalScrollPolicy="auto",this._scrollLeft=0,this._scrollTop=0,this._hCanScroll=!1,this._vCanScroll=!1,this._lastTouchPosition=new t.Point(0,0),this._touchStartPosition=new t.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isHTweenPlaying=!1,this._isVTweenPlaying=!1,this._hScrollTween=null,this._vScrollTween=null,this._bounces=!0}return e}();t.ScrollViewProperties=e,__reflect(e.prototype,"egret.ScrollViewProperties")}(egret||(egret={}));var egret;!function(t){function e(e){var r=e.url;return-1==r.indexOf("?")&&e.method==t.URLRequestMethod.GET&&e.data&&e.data instanceof t.URLVariables&&(r=r+"?"+e.data.toString()),r}t.$getUrl=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){void 0===r&&(r=null);var i=e.call(this)||this;return i.dataFormat=t.URLLoaderDataFormat.TEXT,i.data=null,i._request=null,i._status=-1,r&&i.load(r),i}return __extends(r,e),r.prototype.load=function(e){this._request=e,this.data=null,t.NetContext.getNetContext().proceed(this)},r.prototype.__recycle=function(){this._request=null,this.data=null},r}(t.EventDispatcher);t.URLLoader=e,__reflect(e.prototype,"egret.URLLoader")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){var i=e.call(this)||this;return i.$bitmapData=null,i.offsetPoint=t.Point.create(0,0),i.$movieClipData=null,i.frames=null,i.$totalFrames=0,i.frameLabels=null,i.$frameLabelStart=0,i.$frameLabelEnd=0,i.frameEvents=null,i.frameIntervalTime=0,i.$eventPool=null,i.$isPlaying=!1,i.isStopped=!0,i.playTimes=0,i.$currentFrameNum=0,i.$nextFrameNum=1,i.displayedKeyFrameNum=0,i.passedTime=0,i.$frameRate=0/0,i.lastTime=0,i.$smoothing=t.Bitmap.defaultSmoothing,i.$renderNode=new t.sys.BitmapNode,i.setMovieClipData(r),i}return __extends(r,e),Object.defineProperty(r.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){t=!!t,t!=this.$smoothing&&(this.$smoothing=t,this.$invalidate())},enumerable:!0,configurable:!0}),r.prototype.$init=function(){this.$reset();var t=this.$movieClipData;t&&t.$isDataValid()&&(this.frames=t.frames,this.$totalFrames=t.numFrames,this.frameLabels=t.labels,this.frameEvents=t.events,this.$frameRate=t.frameRate,this.frameIntervalTime=1e3/this.$frameRate,this._initFrame())},r.prototype.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},r.prototype._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},r.prototype.$render=function(){var e=this.$bitmapData;if(e){var r=Math.round(this.offsetPoint.x),i=Math.round(this.offsetPoint.y),o=e._bitmapWidth,n=e._bitmapHeight,s=e.$getTextureWidth(),a=e.$getTextureHeight(),l=Math.round(e.$getScaleBitmapWidth()),h=Math.round(e.$getScaleBitmapHeight()),c=e._sourceWidth,u=e._sourceHeight;t.sys.BitmapNode.$updateTextureData(this.$renderNode,e._bitmapData,e._bitmapX,e._bitmapY,o,n,r,i,s,a,l,h,c,u,null,t.BitmapFillMode.SCALE,this.$smoothing)}},r.prototype.$measureContentBounds=function(t){var e=this.$bitmapData;if(e){var r=this.offsetPoint.x,i=this.offsetPoint.y,o=e.$getTextureWidth(),n=e.$getTextureHeight();t.setTo(r,i,o,n)}else t.setEmpty()},r.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},r.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},r.prototype.getFrameLabelByName=function(t,e){void 0===e&&(e=!1),e&&(t=t.toLowerCase());var r=this.frameLabels;if(r)for(var i=null,o=0;o<r.length;o++)if(i=r[o],e?i.name.toLowerCase()==t:i.name==t)return i;return null},r.prototype.getFrameStartEnd=function(t){var e=this.frameLabels;if(e)for(var r=null,i=0;i<e.length;i++)if(r=e[i],t==r.name){this.$frameLabelStart=r.frame,this.$frameLabelEnd=r.end;break}},r.prototype.getFrameLabelByFrame=function(t){var e=this.frameLabels;if(e)for(var r=null,i=0;i<e.length;i++)if(r=e[i],r.frame==t)return r;return null},r.prototype.getFrameLabelForFrame=function(t){var e=null,r=null,i=this.frameLabels;if(i)for(var o=0;o<i.length;o++){if(r=i[o],r.frame>t)return e;e=r}return e},r.prototype.play=function(t){void 0===t&&(t=0),this.$isPlaying=!0,this.setPlayTimes(t),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},r.prototype.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},r.prototype.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},r.prototype.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},r.prototype.gotoAndPlay=function(e,r){void 0===r&&(r=0),(0==arguments.length||arguments.length>2)&&t.$error(1022,"MovieClip.gotoAndPlay()"),"string"==typeof e?this.getFrameStartEnd(e):(this.$frameLabelStart=0,this.$frameLabelEnd=0),this.play(r),this.gotoFrame(e)},r.prototype.gotoAndStop=function(e){1!=arguments.length&&t.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},r.prototype.gotoFrame=function(e){var r;"string"==typeof e?r=this.getFrameLabelByName(e).frame:(r=parseInt(e+"",10),r!=e&&t.$error(1022,"Frame Label Not Found")),1>r?r=1:r>this.$totalFrames&&(r=this.$totalFrames),r!=this.$nextFrameNum&&(this.$nextFrameNum=r,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},r.prototype.advanceTime=function(e){var r=this,i=e-r.lastTime;r.lastTime=e;var o=r.frameIntervalTime,n=r.passedTime+i;r.passedTime=n%o;var s=n/o;if(1>s)return!1;for(;s>=1;){if(s--,r.$nextFrameNum++,r.$nextFrameNum>r.$totalFrames||r.$frameLabelStart>0&&r.$nextFrameNum>r.$frameLabelEnd)if(-1==r.playTimes)r.$eventPool.push(t.Event.LOOP_COMPLETE),r.$nextFrameNum=1;else{if(r.playTimes--,!(r.playTimes>0)){r.$nextFrameNum=r.$totalFrames,r.$eventPool.push(t.Event.COMPLETE),r.stop();break}r.$eventPool.push(t.Event.LOOP_COMPLETE),r.$nextFrameNum=1}r.$currentFrameNum==r.$frameLabelEnd&&(r.$nextFrameNum=r.$frameLabelStart),r.advanceFrame()}return r.constructFrame(),r.handlePendingEvent(),!1},r.prototype.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum;var e=this.frameEvents[this.$nextFrameNum];e&&""!=e&&t.MovieClipEvent.dispatchMovieClipEvent(this,t.MovieClipEvent.FRAME_LABEL,e)},r.prototype.constructFrame=function(){var t=this.$currentFrameNum;this.displayedKeyFrameNum!=t&&(this.$bitmapData=this.$movieClipData.getTextureByFrame(t),this.$movieClipData.$getOffsetByFrame(t,this.offsetPoint),this.$invalidateContentBounds(),this.displayedKeyFrameNum=t)},r.prototype.$renderFrame=function(){this.$bitmapData=this.$movieClipData.getTextureByFrame(this.$currentFrameNum),this.$invalidateContentBounds()},r.prototype.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,r=e.length,i=!1,o=!1,n=0;r>n;n++){var s=e.pop();s==t.Event.LOOP_COMPLETE?o=!0:s==t.Event.COMPLETE?i=!0:this.dispatchEventWith(s)}o&&this.dispatchEventWith(t.Event.LOOP_COMPLETE),i&&this.dispatchEventWith(t.Event.COMPLETE)}},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this.$totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){return this.$currentFrameNum},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentFrameLabel",{get:function(){var t=this.getFrameLabelByFrame(this.$currentFrameNum);return t&&t.name},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentLabel",{get:function(){var t=this.getFrameLabelForFrame(this.$currentFrameNum);return t?t.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(t){t!=this.$frameRate&&(this.$frameRate=t,this.frameIntervalTime=1e3/this.$frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isPlaying",{get:function(){return this.$isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"movieClipData",{get:function(){return this.$movieClipData},set:function(t){this.setMovieClipData(t)},enumerable:!0,configurable:!0}),r.prototype.setMovieClipData=function(t){this.$movieClipData!=t&&(this.$movieClipData=t,this.$init())},r.prototype.setPlayTimes=function(t){(0>t||t>=1)&&(this.playTimes=0>t?-1:Math.floor(t))},r.prototype.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?t.sys.$ticker.$stopTick(this.advanceTime,this):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=t.getTimer(),t.sys.$ticker.$startTick(this.advanceTime,this)))},r}(t.DisplayObject);t.MovieClip=e,__reflect(e.prototype,"egret.MovieClip")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){void 0===r&&(r=null);var i=e.call(this)||this;return i.data=null,i.method=t.URLRequestMethod.GET,i.url="",i.requestHeaders=[],i.url=r,i}return __extends(r,e),r}(t.HashObject);t.URLRequest=e,__reflect(e.prototype,"egret.URLRequest")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(t,e){this.name="",this.value="",this.name=t,this.value=e}return t}();t.URLRequestHeader=e,__reflect(e.prototype,"egret.URLRequestHeader")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t}();e.GET="get",e.POST="post",t.URLRequestMethod=e,__reflect(e.prototype,"egret.URLRequestMethod")
}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this)||this;return r.variables=null,null!==e&&r.decode(e),r}return __extends(e,t),e.prototype.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,r=/[?&]?([^=]+)=([^&]*)/g;e=r.exec(t);){var i=decodeURIComponent(e[1]),o=decodeURIComponent(e[2]);if(i in this.variables!=0){var n=this.variables[i];n instanceof Array?n.push(o):this.variables[i]=[n,o]}else this.variables[i]=o}},e.prototype.toString=function(){if(!this.variables)return"";var t=this.variables,e=[];for(var r in t)e.push(this.encodeValue(r,t[r]));return e.join("&")},e.prototype.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},e.prototype.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""},e}(t.HashObject);t.URLVariables=e,__reflect(e.prototype,"egret.URLVariables")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){var i=e.call(this)||this;return i._timeScale=1,i._paused=!1,i._callIndex=-1,i._lastTime=0,i.callBackList=[],null!=r.instance,t.sys.$ticker.$startTick(i.update,i),i._lastTime=t.getTimer(),i}return __extends(r,e),r.prototype.update=function(t){var e=t-this._lastTime;if(this._lastTime=t,this._paused)return!1;var r=e*this._timeScale;for(this._callList=this.callBackList.concat(),this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var i=this._callList[this._callIndex];i.listener.call(i.thisObject,r)}return this._callIndex=-1,this._callList=null,!1},r.prototype.register=function(t,e,r){void 0===r&&(r=0),this.$insertEventBin(this.callBackList,"",t,e,!1,r,!1)},r.prototype.unregister=function(t,e){this.$removeEventBin(this.callBackList,t,e)},r.prototype.setTimeScale=function(t){this._timeScale=t},r.prototype.getTimeScale=function(){return this._timeScale},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r}(t.EventDispatcher);t.Ticker=e,__reflect(e.prototype,"egret.Ticker")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){return e.call(this)||this}return __extends(r,e),Object.defineProperty(r.prototype,"stage",{get:function(){return t.sys.$TempStage},enumerable:!0,configurable:!0}),Object.defineProperty(r,"runtimeType",{get:function(){return t.$warn(1041,"egret.MainContext.runtimeType","egret.Capabilities.runtimeType"),r._runtimeType},enumerable:!0,configurable:!0}),r.prototype.run=function(){},Object.defineProperty(r,"instance",{get:function(){return null==r._instance&&(r._instance=new r),r._instance},enumerable:!0,configurable:!0}),r}(t.EventDispatcher);e.deviceType=null,e.DEVICE_PC="web",e.DEVICE_MOBILE="native",e.RUNTIME_HTML5="runtimeHtml5",e.RUNTIME_NATIVE="runtimeNative",t.MainContext=e,__reflect(e.prototype,"egret.MainContext")}(egret||(egret={}));var testDeviceType1=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType1=function(){return this.navigator?!0:!1};egret.MainContext.deviceType=testDeviceType1()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,egret.MainContext._runtimeType=testRuntimeType1()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE,delete testDeviceType1,delete testRuntimeType1;var egret;!function(t){var e=function(e){function r(t){void 0===t&&(t=300);var r=e.call(this)||this;return r.objectPool=[],r._length=0,1>t&&(t=1),r.autoDisposeTime=t,r.frameCount=0,r}return __extends(r,e),r.$init=function(){t.sys.$ticker.$startTick(r.onUpdate,r)},r.onUpdate=function(t){for(var e=r._callBackList,i=e.length-1;i>=0;i--)e[i].$checkFrame();return!1},r.prototype.$checkFrame=function(){this.frameCount--,this.frameCount<=0&&this.dispose()},Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.push=function(t){var e=this.objectPool;-1==e.indexOf(t)&&(e.push(t),t.__recycle&&t.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,r._callBackList.push(this)))},r.prototype.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},r.prototype.dispose=function(){this._length>0&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=r._callBackList,e=t.indexOf(this);-1!=e&&t.splice(e,1)},r}(t.HashObject);e._callBackList=[],t.Recycler=e,__reflect(e.prototype,"egret.Recycler"),e.$init()}(egret||(egret={}));var egret;!function(t){function e(e,r,l){for(var h=[],c=3;c<arguments.length;c++)h[c-3]=arguments[c];var u={listener:e,thisObject:r,delay:l,originDelay:l,params:h};return s++,1==s&&(a=t.getTimer(),t.sys.$ticker.$startTick(i,null)),n++,o[n]=u,n}function r(e){o[e]&&(s--,delete o[e],0==s&&t.sys.$ticker.$stopTick(i,null))}function i(t){var e=t-a;a=t;for(var r in o){var i=o[r];i.delay-=e,i.delay<=0&&(i.delay=i.originDelay,i.listener.apply(i.thisObject,i.params))}return!1}var o={},n=0,s=0,a=0;t.setInterval=e,t.clearInterval=r}(egret||(egret={}));var egret;!function(t){function e(e,r,l){for(var h=[],c=3;c<arguments.length;c++)h[c-3]=arguments[c];var u={listener:e,thisObject:r,delay:l,params:h};return s++,1==s&&t.sys.$ticker&&(a=t.getTimer(),t.sys.$ticker.$startTick(i,null)),n++,o[n]=u,n}function r(e){o[e]&&(s--,delete o[e],0==s&&t.sys.$ticker&&t.sys.$ticker.$stopTick(i,null))}function i(t){var e=t-a;a=t;for(var i in o){var n=i,s=o[n];s.delay-=e,s.delay<=0&&(s.listener.apply(s.thisObject,s.params),r(n))}return!1}var o={},n=0,s=0,a=0;t.setTimeout=e,t.clearTimeout=r}(egret||(egret={}));/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/libs/modules/game/game.min.js*/var __reflect=this&&this.__reflect||function(t,e,o){t.__class__=e,o?o.push(e):o=[e],t.__types__=t.__types__?o.concat(t.__types__):o},__extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(e){function o(n,i){void 0===n&&(n=""),void 0===i&&(i=0);var s=e.call(this)||this;return s._writeMessage="",s._readMessage="",s._connected=!1,s._connecting=!1,s._isReadySend=!1,s._bytesWrite=!1,s._type=o.TYPE_STRING,s._connected=!1,s._writeMessage="",s._readMessage="",s.socket=new t.ISocket,s.socket.addCallBacks(s.onConnect,s.onClose,s.onSocketData,s.onError,s),s}return __extends(o,e),o.prototype.connect=function(t,e){this._connecting||this._connected||(this._connecting=!0,this.socket.connect(t,e))},o.prototype.connectByUrl=function(t){this._connecting||this._connected||(this._connecting=!0,this.socket.connectByUrl(t))},o.prototype.close=function(){this._connected&&this.socket.close()},o.prototype.onConnect=function(){this._connected=!0,this._connecting=!1,this.dispatchEventWith(t.Event.CONNECT)},o.prototype.onClose=function(){this._connected=!1,this.dispatchEventWith(t.Event.CLOSE)},o.prototype.onError=function(){this._connecting&&(this._connecting=!1),this.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},o.prototype.onSocketData=function(e){"string"==typeof e?this._readMessage+=e:this._readByte._writeUint8Array(new Uint8Array(e)),t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.SOCKET_DATA)},o.prototype.flush=function(){return this._connected?(this._writeMessage&&(this.socket.send(this._writeMessage),this._writeMessage=""),this._bytesWrite&&(this.socket.send(this._writeByte.buffer),this._bytesWrite=!1,this._writeByte.clear()),void(this._isReadySend=!1)):void t.$warn(3101)},o.prototype.writeUTF=function(e){return this._connected?(this._type==o.TYPE_BINARY?(this._bytesWrite=!0,this._writeByte.writeUTF(e)):this._writeMessage+=e,void this.flush()):void t.$warn(3101)},o.prototype.readUTF=function(){var t;return this._type==o.TYPE_BINARY?(this._readByte.position=0,t=this._readByte.readUTF(),this._readByte.clear()):(t=this._readMessage,this._readMessage=""),t},o.prototype.writeBytes=function(e,o,n){return void 0===o&&(o=0),void 0===n&&(n=0),this._connected?this._writeByte?(this._bytesWrite=!0,this._writeByte.writeBytes(e,o,n),void this.flush()):void t.$warn(3102):void t.$warn(3101)},o.prototype.readBytes=function(e,o,n){return void 0===o&&(o=0),void 0===n&&(n=0),this._readByte?(this._readByte.position=0,this._readByte.readBytes(e,o,n),void this._readByte.clear()):void t.$warn(3102)},Object.defineProperty(o.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,e!=o.TYPE_BINARY||this._writeByte||(this._readByte=new t.ByteArray,this._writeByte=new t.ByteArray)},enumerable:!0,configurable:!0}),o}(t.EventDispatcher);e.TYPE_STRING="webSocketTypeString",e.TYPE_BINARY="webSocketTypeBinary",t.WebSocket=e,__reflect(e.prototype,"egret.WebSocket")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var o=function(){function t(){this.host="",this.port=0}return t.prototype.addCallBacks=function(t,e,o,n,i){this.onConnect=t,this.onClose=e,this.onSocketData=o,this.onError=n,this.thisObject=i},t.prototype.connect=function(t,e){this.host=t,this.port=e;var o="ws://"+this.host+":"+this.port;this.socket=new __global.egret_native.WebSocket(o),this._bindEvent()},t.prototype.connectByUrl=function(t){this.socket=new __global.egret_native.WebSocket(t),this._bindEvent()},t.prototype._bindEvent=function(){var t=this,e=this.socket;e.onOpen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onClose=function(){t.onClose&&t.onClose.call(t.thisObject)},e.onError=function(e){t.onError&&t.onError.call(t.thisObject)},e.onMessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e)}},t.prototype.send=function(t){this.socket.send(t)},t.prototype.close=function(){this.socket.close()},t}();e.NativeSocket=o,__reflect(o.prototype,"egret.native.NativeSocket",["egret.ISocket"]),t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&(t.ISocket=o)}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var o=function(){function e(){this.host="",this.port=0,window.WebSocket||t.$error(3100)}return e.prototype.addCallBacks=function(t,e,o,n,i){this.onConnect=t,this.onClose=e,this.onSocketData=o,this.onError=n,this.thisObject=i},e.prototype.connect=function(t,e){this.host=t,this.port=e;var o="ws://"+this.host+":"+this.port;this.socket=new window.WebSocket(o),this.socket.binaryType="arraybuffer",this._bindEvent()},e.prototype.connectByUrl=function(t){this.socket=new window.WebSocket(t),this.socket.binaryType="arraybuffer",this._bindEvent()},e.prototype._bindEvent=function(){var t=this,e=this.socket;e.onopen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onclose=function(e){t.onClose&&t.onClose.call(t.thisObject)},e.onerror=function(e){t.onError&&t.onError.call(t.thisObject)},e.onmessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e.data)}},e.prototype.send=function(t){this.socket.send(t)},e.prototype.close=function(){this.socket.close()},e}();e.HTML5WebSocket=o,__reflect(o.prototype,"egret.web.HTML5WebSocket",["egret.ISocket"]),t.Capabilities.runtimeType==t.RuntimeType.WEB&&(t.ISocket=o)}(e=t.web||(t.web={}))}(egret||(egret={}));/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/libs/modules/socket/socket.min.js*/var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},egret;!function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var n=2*Math.PI;return function(i){if(0==i||1==i)return i;var r=e/n*Math.asin(1/t);return-(t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*n/e))}},e.getElasticOut=function(t,e){var n=2*Math.PI;return function(i){if(0==i||1==i)return i;var r=e/n*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-r)*n/e)+1}},e.getElasticInOut=function(t,e){var n=2*Math.PI;return function(i){var r=e/n*Math.asin(1/t);return(i*=2)<1?-.5*(t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*n/e)):t*Math.pow(2,-10*(i-=1))*Math.sin((i-r)*n/e)*.5+1}},e}();e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),t.Ease=e,__reflect(e.prototype,"egret.Ease")}(egret||(egret={}));var egret;!function(t){var e=function(e){function n(t,n,i){var r=e.call(this)||this;return r._target=null,r._useTicks=!1,r.ignoreGlobalPause=!1,r.loop=!1,r.pluginData=null,r._steps=null,r.paused=!1,r.duration=0,r._prevPos=-1,r.position=null,r._prevPosition=0,r._stepPosition=0,r.passive=!1,r.initialize(t,n,i),r}return __extends(n,e),n.get=function(t,e,i,r){return void 0===i&&(i=null),void 0===r&&(r=!1),r&&n.removeTweens(t),new n(t,e,i)},n.removeTweens=function(t){if(t.tween_count){for(var e=n._tweens,i=e.length-1;i>=0;i--)e[i]._target==t&&(e[i].paused=!0,e.splice(i,1));t.tween_count=0}},n.pauseTweens=function(e){if(e.tween_count)for(var n=t.Tween._tweens,i=n.length-1;i>=0;i--)n[i]._target==e&&(n[i].paused=!0)},n.resumeTweens=function(e){if(e.tween_count)for(var n=t.Tween._tweens,i=n.length-1;i>=0;i--)n[i]._target==e&&(n[i].paused=!1)},n.tick=function(t,e){void 0===e&&(e=!1);var i=t-n._lastTime;n._lastTime=t;for(var r=n._tweens.concat(),s=r.length-1;s>=0;s--){var o=r[s];e&&!o.ignoreGlobalPause||o.paused||o.$tick(o._useTicks?1:i)}return!1},n._register=function(e,i){var r=e._target,s=n._tweens;if(i)r&&(r.tween_count=r.tween_count>0?r.tween_count+1:1),s.push(e),n._inited||(n._lastTime=t.getTimer(),t.sys.$ticker.$startTick(n.tick,null),n._inited=!0);else{r&&r.tween_count--;for(var o=s.length;o--;)if(s[o]==e)return void s.splice(o,1)}},n.removeAllTweens=function(){for(var t=n._tweens,e=0,i=t.length;i>e;e++){var r=t[e];r.paused=!0,r._target.tweenjs_count=0}t.length=0},n.prototype.initialize=function(t,e,i){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&n.removeTweens(t)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],e&&e.paused?this.paused=!0:n._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,n.NONE)},n.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var n=t,i=!1;if(n>=this.duration&&(this.loop?n%=this.duration:(n=this.duration,i=!0)),n==this._prevPos)return i;i&&this.setPaused(!0);var r=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=t,this._target&&this._steps.length>0){for(var s=this._steps.length,o=-1,u=0;s>u&&!("step"==this._steps[u].type&&(o=u,this._steps[u].t<=n&&this._steps[u].t+this._steps[u].d>=n));u++);for(var u=0;s>u;u++)if("action"==this._steps[u].type)0!=e&&(this._useTicks?this._runAction(this._steps[u],n,n):1==e&&r>n?(r!=this.duration&&this._runAction(this._steps[u],r,this.duration),this._runAction(this._steps[u],0,n,!0)):this._runAction(this._steps[u],r,n));else if("step"==this._steps[u].type&&o==u){var a=this._steps[o];this._updateTargetProps(a,Math.min((this._stepPosition=n-a.t)/a.d,1))}}return this.dispatchEventWith("change"),i},n.prototype._runAction=function(t,e,n,i){void 0===i&&(i=!1);var r=e,s=n;e>n&&(r=n,s=e);var o=t.t;(o==s||o>r&&s>o||i&&o==e)&&t.f.apply(t.o,t.p)},n.prototype._updateTargetProps=function(t,e){var i,r,s,o,u,a;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),i=t.p0,r=t.p1}else this.passive=!1,i=r=this._curQueueProps;for(var p in this._initQueueProps){null==(o=i[p])&&(i[p]=o=this._initQueueProps[p]),null==(u=r[p])&&(r[p]=u=o),s=o==u||0==e||1==e||"number"!=typeof o?1==e?u:o:o+(u-o)*e;var h=!1;if(a=n._plugins[p])for(var c=0,_=a.length;_>c;c++){var f=a[c].tween(this,p,s,i,r,e,!!t&&i==r,!t);f==n.IGNORE?h=!0:s=f}h||(this._target[p]=s)}},n.prototype.setPaused=function(t){return this.paused=t,n._register(this,!t),this},n.prototype._cloneProps=function(t){var e={};for(var n in t)e[n]=t[n];return e},n.prototype._addStep=function(t){return t.d>0&&(t.type="step",this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},n.prototype._appendQueueProps=function(t){var e,i,r,s,o;for(var u in t)if(void 0===this._initQueueProps[u]){if(i=this._target[u],e=n._plugins[u])for(r=0,s=e.length;s>r;r++)i=e[r].init(this,u,i);this._initQueueProps[u]=this._curQueueProps[u]=void 0===i?null:i}else i=this._curQueueProps[u];for(var u in t){if(i=this._curQueueProps[u],e=n._plugins[u])for(o=o||{},r=0,s=e.length;s>r;r++)e[r].step&&e[r].step(this,u,i,t[u],o);this._curQueueProps[u]=t[u]}return o&&this._appendQueueProps(o),this._curQueueProps},n.prototype._addAction=function(t){return t.t=this.duration,t.type="action",this._steps.push(t),this},n.prototype._set=function(t,e){for(var n in t)e[n]=t[n]},n.prototype.wait=function(t,e){if(null==t||0>=t)return this;var n=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:n,p1:n,v:e})},n.prototype.to=function(t,e,n){return void 0===n&&(n=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(t))}),this.set(t)},n.prototype.call=function(t,e,n){return void 0===e&&(e=void 0),void 0===n&&(n=void 0),this._addAction({f:t,p:n?n:[],o:e?e:this._target})},n.prototype.set=function(t,e){return void 0===e&&(e=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},n.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},n.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},n.prototype.$tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},n}(t.EventDispatcher);e.NONE=0,e.LOOP=1,e.REVERSE=2,e._tweens=[],e.IGNORE={},e._plugins={},e._inited=!1,e._lastTime=0,t.Tween=e,__reflect(e.prototype,"egret.Tween")}(egret||(egret={}));var egret;!function(t){var e;!function(e){function n(e){if("function"==typeof e)return e;var n=t.Ease[e];return"function"==typeof n?n:null}function i(t,e,n,i){var r=t.prototype;r.__meta__=r.__meta__||{},r.__meta__[e]=n,i&&(r.__defaultProperty__=e)}var r=function(t){function e(){var e=t.apply(this,arguments)||this;return e.name="",e}return __extends(e,t),e}(t.EventDispatcher);e.BasePath=r,__reflect(r.prototype,"egret.tween.BasePath");var s=function(t){function e(){var e=t.apply(this,arguments)||this;return e.props=void 0,e.duration=500,e.ease=void 0,e}return __extends(e,t),e}(r);e.To=s,__reflect(s.prototype,"egret.tween.To");var o=function(t){function e(){var e=t.apply(this,arguments)||this;return e.duration=500,e.passive=void 0,e}return __extends(e,t),e}(r);e.Wait=o,__reflect(o.prototype,"egret.tween.Wait");var u=function(t){function e(){var e=t.apply(this,arguments)||this;return e.props=void 0,e}return __extends(e,t),e}(r);e.Set=u,__reflect(u.prototype,"egret.tween.Set");var a=function(t){function e(){var e=t.apply(this,arguments)||this;return e.delta=0,e}return __extends(e,t),e}(r);e.Tick=a,__reflect(a.prototype,"egret.tween.Tick");var p=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"props",{get:function(){return this._props},set:function(t){this._props=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paths",{get:function(){return this._paths},set:function(t){this._paths=t||[]},enumerable:!0,configurable:!0}),i.prototype.play=function(t){this.tween?(this.tween.setPaused(!1),void 0!==t&&null!==t&&this.tween.setPosition(t)):this.createTween()},i.prototype.pause=function(){this.tween&&this.tween.setPaused(!0)},i.prototype.stop=function(){this.pause(),this.tween=null},i.prototype.createTween=function(){this.tween=t.Tween.get(this._target,this._props),this._paths&&this.applyPaths()},i.prototype.applyPaths=function(){for(var t=0;t<this._paths.length;t++){var e=this._paths[t];this.applyPath(e)}},i.prototype.applyPath=function(t){var e=this;t instanceof s?this.tween.to(t.props,t.duration,n(t.ease)):t instanceof o?this.tween.wait(t.duration,t.passive):t instanceof u?this.tween.set(t.props):t instanceof a&&this.tween.$tick(t.delta),this.tween.call(function(){return e.pathComplete(t)})},i.prototype.pathComplete=function(t){t.dispatchEventWith("complete"),this.dispatchEventWith("pathComplete",!1,t);var e=this._paths.indexOf(t);e>=0&&e===this._paths.length-1&&this.dispatchEventWith("complete")},i}(t.EventDispatcher);e.TweenItem=p,__reflect(p.prototype,"egret.tween.TweenItem"),i(p,"paths","Array",!0);var h=function(t){function e(){var e=t.call(this)||this;return e.completeCount=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this.completeCount=0,this.registerEvent(!1),this._items=t,this.registerEvent(!0)},enumerable:!0,configurable:!0}),e.prototype.registerEvent=function(t){var e=this;this._items&&this._items.forEach(function(n){t?n.addEventListener("complete",e.itemComplete,e):n.removeEventListener("complete",e.itemComplete,e)})},e.prototype.play=function(t){if(this._items)for(var e=0;e<this._items.length;e++){var n=this._items[e];n.play(t)}},e.prototype.pause=function(){if(this._items)for(var t=0;t<this._items.length;t++){var e=this._items[t];e.pause()}},e.prototype.stop=function(){if(this._items)for(var t=0;t<this._items.length;t++){var e=this._items[t];e.stop()}},e.prototype.itemComplete=function(t){var e=t.currentTarget;this.completeCount++,this.dispatchEventWith("itemComplete",!1,e),this.completeCount===this.items.length&&(this.dispatchEventWith("complete"),this.completeCount=0)},e}(t.EventDispatcher);e.TweenGroup=h,__reflect(h.prototype,"egret.tween.TweenGroup"),i(h,"items","Array",!0)}(e=t.tween||(t.tween={}))}(egret||(egret={}));/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/libs/modules/tween/tween.min.js*//**
 * Pomelo Browser Connector based on WebSocket
 */
(function (root, ByteArray) {

  /***** Emitter *****/


  /**
   * Initialize a new `Emitter`.
   *
   * @api public
   */

  function Emitter(obj) {
    if (obj) return mixin(obj);
  }

  /**
   * Mixin the emitter properties.
   *
   * @param {Object} obj
   * @return {Object}
   * @api private
   */

  function mixin(obj) {
    for (var key in Emitter.prototype) {
      obj[key] = Emitter.prototype[key];
    }
    return obj;
  }

  /**
   * Listen on the given `event` with `fn`.
   *
   * @param {String} event
   * @param {Function} fn
   * @return {Emitter}
   * @api public
   */

  Emitter.prototype.on = function (event, fn) {
    this._callbacks = this._callbacks || {};
    (this._callbacks[event] = this._callbacks[event] || [])
      .push(fn);
    return this;
  };

  /**
   * Adds an `event` listener that will be invoked a single
   * time then automatically removed.
   *
   * @param {String} event
   * @param {Function} fn
   * @return {Emitter}
   * @api public
   */

  Emitter.prototype.once = function (event, fn) {
    var self = this;
    this._callbacks = this._callbacks || {};

    function on() {
      self.off(event, on);
      fn.apply(this, arguments);
    }

    fn._off = on;
    this.on(event, on);
    return this;
  };

  /**
   * Remove the given callback for `event` or all
   * registered callbacks.
   *
   * @param {String} event
   * @param {Function} fn
   * @return {Emitter}
   * @api public
   */

  Emitter.prototype.off =
    Emitter.prototype.removeListener =
    Emitter.prototype.removeAllListeners = function (event, fn) {
      this._callbacks = this._callbacks || {};

      // all
      if (0 == arguments.length) {
        this._callbacks = {};
        return this;
      }

      // specific event
      var callbacks = this._callbacks[event];
      if (!callbacks) return this;

      // remove all handlers
      if (1 == arguments.length) {
        delete this._callbacks[event];
        return this;
      }

      // remove specific handler
      var i = callbacks.indexOf(fn._off || fn);
      if (~i) callbacks.splice(i, 1);
      return this;
    };

  /**
   * Emit `event` with the given args.
   *
   * @param {String} event
   * @param {Mixed} ...
   * @return {Emitter}
   */

  Emitter.prototype.emit = function (event) {
    this._callbacks = this._callbacks || {};
    var args = [].slice.call(arguments, 1)
      , callbacks = this._callbacks[event];

    if (callbacks) {
      callbacks = callbacks.slice(0);
      for (var i = 0, len = callbacks.length; i < len; ++i) {
        callbacks[i].apply(this, args);
      }
    }

    return this;
  };

  /**
   * Return array of callbacks for `event`.
   *
   * @param {String} event
   * @return {Array}
   * @api public
   */

  Emitter.prototype.listeners = function (event) {
    this._callbacks = this._callbacks || {};
    return this._callbacks[event] || [];
  };

  /**
   * Check if this emitter has `event` handlers.
   *
   * @param {String} event
   * @return {Boolean}
   * @api public
   */

  Emitter.prototype.hasListeners = function (event) {
    return !!this.listeners(event).length;
  };

  /***** end fo Emitter *****/

  /***** Protocol *****/

  var PKG_HEAD_BYTES = 4;
  var MSG_FLAG_BYTES = 1;
  var MSG_ROUTE_CODE_BYTES = 2;

  var MSG_ID_MAX_BYTES = 5;
  var MSG_ROUTE_LEN_BYTES = 1;

  var MSG_ROUTE_CODE_MAX = 0xffff;

  var MSG_COMPRESS_ROUTE_MASK = 0x1;
  var MSG_TYPE_MASK = 0x7;

  var Protocol = {
    Package: {
      TYPE_HANDSHAKE: 1,
      TYPE_HANDSHAKE_ACK: 2,
      TYPE_HEARTBEAT: 3,
      TYPE_DATA: 4,
      TYPE_KICK: 5
    },
    Message: {
      TYPE_REQUEST: 0,
      TYPE_NOTIFY: 1,
      TYPE_RESPONSE: 2,
      TYPE_PUSH: 3
    }
  };

  var Package = Protocol.Package;
  var Message = Protocol.Message;

  /**
   * pomele client encode
   * id message id;
   * route message route
   * msg message body
   * socketio current support string
   */
  Protocol.strencode = function (str) {
    var byteArray = new ByteArray(str.length * 3);
    var offset = 0;
    for (var i = 0; i < str.length; i++) {
      var charCode = str.charCodeAt(i);
      var codes = null;
      if (charCode <= 0x7f) {
        codes = [charCode];
      } else if (charCode <= 0x7ff) {
        codes = [0xc0 | (charCode >> 6), 0x80 | (charCode & 0x3f)];
      } else {
        codes = [0xe0 | (charCode >> 12), 0x80 | ((charCode & 0xfc0) >> 6), 0x80 | (charCode & 0x3f)];
      }
      for (var j = 0; j < codes.length; j++) {
        byteArray[offset] = codes[j];
        ++offset;
      }
    }
    var _buffer = new ByteArray(offset);
    copyArray(_buffer, 0, byteArray, 0, offset);
    return _buffer;
  };

  /**
   * client decode
   * msg String data
   * return Message Object
   */
  Protocol.strdecode = function (buffer) {
    var bytes = new ByteArray(buffer);
    var array = [];
    var offset = 0;
    var charCode = 0;
    var end = bytes.length;
    while (offset < end) {
      if (bytes[offset] < 128) {
        charCode = bytes[offset];
        offset += 1;
      } else if (bytes[offset] < 224) {
        charCode = ((bytes[offset] & 0x3f) << 6) + (bytes[offset + 1] & 0x3f);
        offset += 2;
      } else {
        charCode = ((bytes[offset] & 0x0f) << 12) + ((bytes[offset + 1] & 0x3f) << 6) + (bytes[offset + 2] & 0x3f);
        offset += 3;
      }
      array.push(charCode);
    }
    return String.fromCharCode.apply(null, array);
  };

  /**
   * Package protocol encode.
   *
   * Pomelo package format:
   * +------+-------------+------------------+
   * | type | body length |       body       |
   * +------+-------------+------------------+
   *
   * Head: 4bytes
   *   0: package type,
   *      1 - handshake,
   *      2 - handshake ack,
   *      3 - heartbeat,
   *      4 - data
   *      5 - kick
   *   1 - 3: big-endian body length
   * Body: body length bytes
   *
   * @param  {Number}    type   package type
   * @param  {ByteArray} body   body content in bytes
   * @return {ByteArray}        new byte array that contains encode result
   */
  Package.encode = function (type, body) {
    var length = body ? body.length : 0;
    var buffer = new ByteArray(PKG_HEAD_BYTES + length);
    var index = 0;
    buffer[index++] = type & 0xff;
    buffer[index++] = (length >> 16) & 0xff;
    buffer[index++] = (length >> 8) & 0xff;
    buffer[index++] = length & 0xff;
    if (body) {
      copyArray(buffer, index, body, 0, length);
    }
    return buffer;
  };

  /**
   * Package protocol decode.
   * See encode for package format.
   *
   * @param  {ByteArray} buffer byte array containing package content
   * @return {Object}           {type: package type, buffer: body byte array}
   */
  Package.decode = function (buffer) {
    var bytes = new ByteArray(buffer);
    var type = bytes[0];
    var index = 1;
    var length = ((bytes[index++]) << 16 | (bytes[index++]) << 8 | bytes[index++]) >>> 0;
    var body = length ? new ByteArray(length) : null;
    copyArray(body, 0, bytes, PKG_HEAD_BYTES, length);
    return { 'type': type, 'body': body };
  };

  /**
   * Message protocol encode.
   *
   * @param  {Number} id            message id
   * @param  {Number} type          message type
   * @param  {Number} compressRoute whether compress route
   * @param  {Number|String} route  route code or route string
   * @param  {Buffer} msg           message body bytes
   * @return {Buffer}               encode result
   */
  Message.encode = function (id, type, compressRoute, route, msg) {
    // caculate message max length
    var idBytes = msgHasId(type) ? caculateMsgIdBytes(id) : 0;
    var msgLen = MSG_FLAG_BYTES + idBytes;

    if (msgHasRoute(type)) {
      if (compressRoute) {
        if (typeof route !== 'number') {
          throw new Error('error flag for number route!');
        }
        msgLen += MSG_ROUTE_CODE_BYTES;
      } else {
        msgLen += MSG_ROUTE_LEN_BYTES;
        if (route) {
          route = Protocol.strencode(route);
          if (route.length > 255) {
            throw new Error('route maxlength is overflow');
          }
          msgLen += route.length;
        }
      }
    }

    if (msg) {
      msgLen += msg.length;
    }

    var buffer = new ByteArray(msgLen);
    var offset = 0;

    // add flag
    offset = encodeMsgFlag(type, compressRoute, buffer, offset);

    // add message id
    if (msgHasId(type)) {
      offset = encodeMsgId(id, idBytes, buffer, offset);
    }

    // add route
    if (msgHasRoute(type)) {
      offset = encodeMsgRoute(compressRoute, route, buffer, offset);
    }

    // add body
    if (msg) {
      offset = encodeMsgBody(msg, buffer, offset);
    }

    return buffer;
  };

  /**
   * Message protocol decode.
   *
   * @param  {Buffer|Uint8Array} buffer message bytes
   * @return {Object}            message object
   */
  Message.decode = function (buffer) {
    var bytes = new ByteArray(buffer);
    var bytesLen = bytes.length || bytes.byteLength;
    var offset = 0;
    var id = 0;
    var route = null;

    // parse flag
    var flag = bytes[offset++];
    var compressRoute = flag & MSG_COMPRESS_ROUTE_MASK;
    var type = (flag >> 1) & MSG_TYPE_MASK;

    // parse id
    if (msgHasId(type)) {
      var byte = bytes[offset++];
      id = byte & 0x7f;
      while (byte & 0x80) {
        id <<= 7;
        byte = bytes[offset++];
        id |= byte & 0x7f;
      }
    }

    // parse route
    if (msgHasRoute(type)) {
      if (compressRoute) {
        route = (bytes[offset++]) << 8 | bytes[offset++];
      } else {
        var routeLen = bytes[offset++];
        if (routeLen) {
          route = new ByteArray(routeLen);
          copyArray(route, 0, bytes, offset, routeLen);
          route = Protocol.strdecode(route);
        } else {
          route = '';
        }
        offset += routeLen;
      }
    }

    // parse body
    var bodyLen = bytesLen - offset;
    var body = new ByteArray(bodyLen);

    copyArray(body, 0, bytes, offset, bodyLen);

    return {
      'id': id, 'type': type, 'compressRoute': compressRoute,
      'route': route, 'body': body
    };
  };

  var copyArray = function (dest, doffset, src, soffset, length) {
    if ('function' === typeof src.copy) {
      // Buffer
      src.copy(dest, doffset, soffset, soffset + length);
    } else {
      // Uint8Array
      for (var index = 0; index < length; index++) {
        dest[doffset++] = src[soffset++];
      }
    }
  };

  var msgHasId = function (type) {
    return type === Message.TYPE_REQUEST || type === Message.TYPE_RESPONSE;
  };

  var msgHasRoute = function (type) {
    return type === Message.TYPE_REQUEST || type === Message.TYPE_NOTIFY ||
      type === Message.TYPE_PUSH;
  };

  var caculateMsgIdBytes = function (id) {
    var len = 0;
    do {
      len += 1;
      id >>= 7;
    } while (id > 0);
    return len;
  };

  var encodeMsgFlag = function (type, compressRoute, buffer, offset) {
    if (type !== Message.TYPE_REQUEST && type !== Message.TYPE_NOTIFY &&
      type !== Message.TYPE_RESPONSE && type !== Message.TYPE_PUSH) {
      throw new Error('unkonw message type: ' + type);
    }

    buffer[offset] = (type << 1) | (compressRoute ? 1 : 0);

    return offset + MSG_FLAG_BYTES;
  };

  var encodeMsgId = function (id, idBytes, buffer, offset) {
    var index = offset + idBytes - 1;
    buffer[index--] = id & 0x7f;
    while (index >= offset) {
      id >>= 7;
      buffer[index--] = id & 0x7f | 0x80;
    }
    return offset + idBytes;
  };

  var encodeMsgRoute = function (compressRoute, route, buffer, offset) {
    if (compressRoute) {
      if (route > MSG_ROUTE_CODE_MAX) {
        throw new Error('route number is overflow');
      }

      buffer[offset++] = (route >> 8) & 0xff;
      buffer[offset++] = route & 0xff;
    } else {
      if (route) {
        buffer[offset++] = route.length & 0xff;
        copyArray(buffer, offset, route, 0, route.length);
        offset += route.length;
      } else {
        buffer[offset++] = 0;
      }
    }

    return offset;
  };

  var encodeMsgBody = function (msg, buffer, offset) {
    copyArray(buffer, offset, msg, 0, msg.length);
    return offset + msg.length;
  };

  /***** end of Protocol *****/

  /***** Protobuf *****/
  var Protobuf = {};

  Protobuf.init = function (opts) {
    //On the serverside, use serverProtos to encode messages send to client
    Protobuf.encoder.init(opts.encoderProtos);

    //On the serverside, user clientProtos to decode messages receive from clients
    Protobuf.decoder.init(opts.decoderProtos);
  };

  Protobuf.encode = function (key, msg) {
    return Protobuf.encoder.encode(key, msg);
  };

  Protobuf.decode = function (key, msg) {
    return Protobuf.decoder.decode(key, msg);
  };

  /**** end of Protobuf *****/

  /***** constants *****/

  var constants = {};

  constants.TYPES = {
    uInt32: 0,
    sInt32: 0,
    int32: 0,
    double: 1,
    string: 2,
    message: 2,
    float: 5
  };

  /***** end of constans *****/

  /***** util *****/

  var Util = {};

  Util.isSimpleType = function (type) {
    return (type === 'uInt32' ||
      type === 'sInt32' ||
      type === 'int32' ||
      type === 'uInt64' ||
      type === 'sInt64' ||
      type === 'float' ||
      type === 'double');
  };

  /***** end of util *****/

  /***** Codec *****/

  var Codec = {};

  var buffer = new ArrayBuffer(8);
  var float32Array = new Float32Array(buffer);
  var float64Array = new Float64Array(buffer);
  var uInt8Array = new Uint8Array(buffer);

  Codec.encodeUInt32 = function (n) {
    var n = parseInt(n);
    if (isNaN(n) || n < 0) {
      return null;
    }

    var result = [];
    do {
      var tmp = n % 128;
      var next = Math.floor(n / 128);

      if (next !== 0) {
        tmp = tmp + 128;
      }
      result.push(tmp);
      n = next;
    } while (n !== 0);

    return result;
  };

  Codec.encodeSInt32 = function (n) {
    var n = parseInt(n);
    if (isNaN(n)) {
      return null;
    }
    n = n < 0 ? (Math.abs(n) * 2 - 1) : n * 2;

    return Codec.encodeUInt32(n);
  };

  Codec.decodeUInt32 = function (bytes) {
    var n = 0;

    for (var i = 0; i < bytes.length; i++) {
      var m = parseInt(bytes[i]);
      n = n + ((m & 0x7f) * Math.pow(2, (7 * i)));
      if (m < 128) {
        return n;
      }
    }

    return n;
  };


  Codec.decodeSInt32 = function (bytes) {
    var n = this.decodeUInt32(bytes);
    var flag = ((n % 2) === 1) ? -1 : 1;

    n = ((n % 2 + n) / 2) * flag;

    return n;
  };

  Codec.encodeFloat = function (float) {
    float32Array[0] = float;
    return uInt8Array;
  };

  Codec.decodeFloat = function (bytes, offset) {
    if (!bytes || bytes.length < (offset + 4)) {
      return null;
    }

    for (var i = 0; i < 4; i++) {
      uInt8Array[i] = bytes[offset + i];
    }

    return float32Array[0];
  };

  Codec.encodeDouble = function (double) {
    float64Array[0] = double;
    return uInt8Array.subarray(0, 8);
  };

  Codec.decodeDouble = function (bytes, offset) {
    if (!bytes || bytes.length < (8 + offset)) {
      return null;
    }

    for (var i = 0; i < 8; i++) {
      uInt8Array[i] = bytes[offset + i];
    }

    return float64Array[0];
  };

  Codec.encodeStr = function (bytes, offset, str) {
    for (var i = 0; i < str.length; i++) {
      var code = str.charCodeAt(i);
      var codes = encode2UTF8(code);

      for (var j = 0; j < codes.length; j++) {
        bytes[offset] = codes[j];
        offset++;
      }
    }

    return offset;
  };

  /**
   * Decode string from utf8 bytes
   */
  Codec.decodeStr = function (bytes, offset, length) {
    var array = [];
    var end = offset + length;

    while (offset < end) {
      var code = 0;

      if (bytes[offset] < 128) {
        code = bytes[offset];

        offset += 1;
      } else if (bytes[offset] < 224) {
        code = ((bytes[offset] & 0x3f) << 6) + (bytes[offset + 1] & 0x3f);
        offset += 2;
      } else {
        code = ((bytes[offset] & 0x0f) << 12) + ((bytes[offset + 1] & 0x3f) << 6) + (bytes[offset + 2] & 0x3f);
        offset += 3;
      }

      array.push(code);

    }

    var str = '';
    for (var i = 0; i < array.length;) {
      str += String.fromCharCode.apply(null, array.slice(i, i + 10000));
      i += 10000;
    }

    return str;
  };

  /**
   * Return the byte length of the str use utf8
   */
  Codec.byteLength = function (str) {
    if (typeof (str) !== 'string') {
      return -1;
    }

    var length = 0;

    for (var i = 0; i < str.length; i++) {
      var code = str.charCodeAt(i);
      length += codeLength(code);
    }

    return length;
  };

  /**
   * Encode a unicode16 char code to utf8 bytes
   */
  function encode2UTF8(charCode) {
    if (charCode <= 0x7f) {
      return [charCode];
    } else if (charCode <= 0x7ff) {
      return [0xc0 | (charCode >> 6), 0x80 | (charCode & 0x3f)];
    } else {
      return [0xe0 | (charCode >> 12), 0x80 | ((charCode & 0xfc0) >> 6), 0x80 | (charCode & 0x3f)];
    }
  }

  function codeLength(code) {
    if (code <= 0x7f) {
      return 1;
    } else if (code <= 0x7ff) {
      return 2;
    } else {
      return 3;
    }
  }

  /***** end of Codec *****/

  /***** MsgEncoder *****/

  var MsgEncoder = Protobuf.encoder = {};

  MsgEncoder.init = function (protos) {
    this.protos = protos || {};
  };

  MsgEncoder.encode = function (route, msg) {
    //Get protos from protos map use the route as key
    var protos = this.protos[route];

    //Check msg
    if (!checkMsg(msg, protos)) {
      return null;
    }

    //Set the length of the buffer 2 times bigger to prevent overflow
    var length = Protobuf.codec.byteLength(JSON.stringify(msg));

    //Init buffer and offset
    var buffer = new ArrayBuffer(length);
    var uInt8Array = new Uint8Array(buffer);
    var offset = 0;

    if (!!protos) {
      offset = encodeMsg(uInt8Array, offset, protos, msg);
      if (offset > 0) {
        return uInt8Array.subarray(0, offset);
      }
    }

    return null;
  };

  /**
   * Check if the msg follow the defination in the protos
   */
  function checkMsg(msg, protos) {
    if (!protos) {
      return false;
    }

    for (var name in protos) {
      var proto = protos[name];

      //All required element must exist
      switch (proto.option) {
        case 'required':
          if (typeof (msg[name]) === 'undefined') {
            return false;
          }
          break;
        case 'optional':
          if (typeof (msg[name]) !== 'undefined') {
            if (!!protos.__messages[proto.type]) {
              checkMsg(msg[name], protos.__messages[proto.type]);
            }
          }
          break;
        case 'repeated':
          //Check nest message in repeated elements
          if (!!msg[name] && !!protos.__messages[proto.type]) {
            for (var i = 0; i < msg[name].length; i++) {
              if (!checkMsg(msg[name][i], protos.__messages[proto.type])) {
                return false;
              }
            }
          }
          break;
      }
    }

    return true;
  }

  function encodeMsg(buffer, offset, protos, msg) {
    for (var name in msg) {
      if (!!protos[name]) {
        var proto = protos[name];

        switch (proto.option) {
          case 'required':
          case 'optional':
            offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));
            offset = encodeProp(msg[name], proto.type, offset, buffer, protos);
            break;
          case 'repeated':
            if (msg[name].length > 0) {
              offset = encodeArray(msg[name], proto, offset, buffer, protos);
            }
            break;
        }
      }
    }

    return offset;
  }

  function encodeProp(value, type, offset, buffer, protos) {
    var codec = Protobuf.codec;

    switch (type) {
      case 'uInt32':
        offset = writeBytes(buffer, offset, codec.encodeUInt32(value));
        break;
      case 'int32':
      case 'sInt32':
        offset = writeBytes(buffer, offset, codec.encodeSInt32(value));
        break;
      case 'float':
        writeBytes(buffer, offset, codec.encodeFloat(value));
        offset += 4;
        break;
      case 'double':
        writeBytes(buffer, offset, codec.encodeDouble(value));
        offset += 8;
        break;
      case 'string':
        var length = codec.byteLength(value);

        //Encode length
        offset = writeBytes(buffer, offset, codec.encodeUInt32(length));
        //write string
        codec.encodeStr(buffer, offset, value);
        offset += length;
        break;
      default:
        if (!!protos.__messages[type]) {
          //Use a tmp buffer to build an internal msg
          var tmpBuffer = new ArrayBuffer(codec.byteLength(JSON.stringify(value)));
          var length = 0;

          length = encodeMsg(tmpBuffer, length, protos.__messages[type], value);
          //Encode length
          offset = writeBytes(buffer, offset, codec.encodeUInt32(length));
          //contact the object
          for (var i = 0; i < length; i++) {
            buffer[offset] = tmpBuffer[i];
            offset++;
          }
        }
        break;
    }

    return offset;
  }

  /**
   * Encode reapeated properties, simple msg and object are decode differented
   */
  function encodeArray(array, proto, offset, buffer, protos) {
    var i = 0;

    if (util.isSimpleType(proto.type)) {
      offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));
      offset = writeBytes(buffer, offset, Protobuf.codec.encodeUInt32(array.length));
      for (i = 0; i < array.length; i++) {
        offset = encodeProp(array[i], proto.type, offset, buffer);
      }
    } else {
      for (i = 0; i < array.length; i++) {
        offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));
        offset = encodeProp(array[i], proto.type, offset, buffer, protos);
      }
    }

    return offset;
  }

  function writeBytes(buffer, offset, bytes) {
    for (var i = 0; i < bytes.length; i++ , offset++) {
      buffer[offset] = bytes[i];
    }

    return offset;
  }

  function encodeTag(type, tag) {
    var value = Protobuf.constants.TYPES[type] || 2;
    return Protobuf.codec.encodeUInt32((tag << 3) | value);
  }

  /***** end of MsgEncoder *****/

  /***** MsgDecoder *****/

  var MsgDecoder = Protobuf.decoder = {};

  MsgDecoder.buffer = 0;    // 变量占位
  MsgDecoder.offset = 0;

  MsgDecoder.init = function (protos) {
    this.protos = protos || {};
  };

  MsgDecoder.setProtos = function (protos) {
    if (!!protos) {
      this.protos = protos;
    }
  };

  MsgDecoder.decode = function (route, buf) {
    var protos = this.protos[route];

    MsgDecoder.buffer = buf;
    MsgDecoder.offset = 0;

    if (!!protos) {
      return decodeMsg({}, protos, buffer.length);
    }

    return null;
  };

  function decodeMsg(msg, protos, length) {
    while (MsgDecoder.offset < length) {
      var head = getHead();
      var type = head.type;
      var tag = head.tag;
      var name = protos.__tags[tag];

      switch (protos[name].option) {
        case 'optional':
        case 'required':
          msg[name] = decodeProp(protos[name].type, protos);
          break;
        case 'repeated':
          if (!msg[name]) {
            msg[name] = [];
          }
          decodeArray(msg[name], protos[name].type, protos);
          break;
      }
    }

    return msg;
  }

  /**
   * Test if the given msg is finished
   */
  function isFinish(msg, protos) {
    return (!protos.__tags[peekHead().tag]);
  }
  /**
   * Get property head from protobuf
   */
  function getHead() {
    var tag = Protobuf.codec.decodeUInt32(getBytes());

    return {
      type: tag & 0x7,
      tag: tag >> 3
    };
  }

  /**
   * Get tag head without move the offset
   */
  function peekHead() {
    var tag = Protobuf.codec.decodeUInt32(peekBytes());

    return {
      type: tag & 0x7,
      tag: tag >> 3
    };
  }

  function decodeProp(type, protos) {
    var codec = Protobuf.codec;

    switch (type) {
      case 'uInt32':
        return codec.decodeUInt32(getBytes());
      case 'int32':
      case 'sInt32':
        return codec.decodeSInt32(getBytes());
      case 'float':
        var float = codec.decodeFloat(MsgDecoder.buffer, MsgDecoder.offset);
        MsgDecoder.offset += 4;
        return float;
      case 'double':
        var double = codec.decodeDouble(MsgDecoder.buffer, MsgDecoder.offset);
        MsgDecoder.offset += 8;
        return double;
      case 'string':
        var length = codec.decodeUInt32(getBytes());

        var str = codec.decodeStr(MsgDecoder.buffer, MsgDecoder.offset, length);
        MsgDecoder.offset += length;

        return str;
      default:
        if (!!protos && !!protos.__messages[type]) {
          var length = codec.decodeUInt32(getBytes());
          var msg = {};
          decodeMsg(msg, protos.__messages[type], MsgDecoder.offset + length);
          return msg;
        }
        break;
    }
  }

  function decodeArray(array, type, protos) {
    if (Util.isSimpleType(type)) {
      var length = Protobuf.codec.decodeUInt32(getBytes());

      for (var i = 0; i < length; i++) {
        array.push(decodeProp(type));
      }
    } else {
      array.push(decodeProp(type, protos));
    }
  }

  function getBytes(flag) {
    var bytes = [];
    var pos = MsgDecoder.offset;
    flag = flag || false;

    var b;

    do {
      b = buffer[pos];
      bytes.push(b);
      pos++;
    } while (b >= 128);

    if (!flag) {
      MsgDecoder.offset = pos;
    }
    return bytes;
  }

  function peekBytes() {
    return getBytes(true);
  }

  /***** end of MsgDecoder *****/

  /***** Pomelo *****/

  var JS_WS_CLIENT_TYPE = 'js-websocket';
  var JS_WS_CLIENT_VERSION = '0.0.5';

  var RES_OK = 200;
  var RES_FAIL = 500;
  var RES_OLD_CLIENT = 501;

  var Pomelo = function () {
    this.socket = null;
    this.callbacks = {};
    this.handlers = {};
    // Map from request id to route
    this.routeMap = {};

    this.heartbeatInterval = 0;
    this.heartbeatTimeout = 0;
    this.nextHeartbeatTimeout = 0;
    this.gapThreshold = 100;
    this.heartbeatId = null;
    this.heartbeatTimeoutId = null;

    this.handshakeCallback = null;

    this.handshakeBuffer = {
      'sys': {
        type: JS_WS_CLIENT_TYPE,
        version: JS_WS_CLIENT_VERSION
      },
      'user': {
      }
    };

    this.initCallback = null;


    this.handlers[Package.TYPE_HANDSHAKE] = this.handshake;
    this.handlers[Package.TYPE_HEARTBEAT] = this.heartbeat;
    this.handlers[Package.TYPE_DATA] = this.onData;
    this.handlers[Package.TYPE_KICK] = this.onKick;
  };

  root.Pomelo = Pomelo;

  Pomelo.reqId = 0;

  var pomelo = Pomelo.prototype;

  // extend the prototype methods from Emitter
  mixin(pomelo);

  pomelo.init = function (params, cb) {
    this.initCallback = cb;
    var host = params.host;
    var port = params.port;

    var url = 'ws://' + host;
    if (port) {
      url += ':' + port;
    }

    this.handshakeBuffer.user = params.user;
    this.handshakeCallback = params.handshakeCallback;
    this.initWebSocket(url, cb);
  };

  pomelo.initWebSocket = function (url, cb) {
    //console.log('connect to ' + url);

    var self = this;
    var onopen = function (event) {
      var obj = Package.encode(Package.TYPE_HANDSHAKE, Protocol.strencode(JSON.stringify(self.handshakeBuffer)));
      self.send(obj);
    };
    var onmessage = function (event) {
      self.processPackage(Package.decode(event.data), cb);
      // new package arrived, update the heartbeat timeout
      if (self.heartbeatTimeout) {
        self.nextHeartbeatTimeout = Date.now() + self.heartbeatTimeout;
      }
    };
    var onerror = function (event) {
      self.emit('io-error', event);
      console.error('socket error: ', event);
    };
    var onclose = function (event) {
      self.emit('close', event);
      //console.error('socket close: ', event);
    };

    this.socket = new WebSocket(url);
    this.socket.binaryType = 'arraybuffer';
    this.socket.onopen = onopen;
    this.socket.onmessage = onmessage;
    this.socket.onerror = onerror;
    this.socket.onclose = onclose;
  };

  pomelo.disconnect = function () {
    var socket = this.socket;
    if (socket) {
      if (socket.disconnect) socket.disconnect();
      if (socket.close) socket.close();
      console.log('disconnect');
      this.socket = null;
    }

    if (this.heartbeatId) {
      clearTimeout(this.heartbeatId);
      this.heartbeatId = null;
    }
    if (this.heartbeatTimeoutId) {
      clearTimeout(this.heartbeatTimeoutId);
      this.heartbeatTimeoutId = null;
    }
  };

  pomelo.request = function (route, msg, cb) {
    if (arguments.length === 2 && typeof msg === 'function') {
      cb = msg;
      msg = {};
    } else {
      msg = msg || {};
    }
    route = route || msg.route;
    if (!route) {
      return;
    }

    Pomelo.reqId++;   // TODO: 是否需要回环？
    this.sendMessage(Pomelo.reqId, route, msg);

    this.callbacks[Pomelo.reqId] = cb;
    this.routeMap[Pomelo.reqId] = route;
  };

  pomelo.notify = function (route, msg) {
    msg = msg || {};
    this.sendMessage(0, route, msg);
  };

  pomelo.sendMessage = function (reqId, route, msg) {
    var type = reqId ? Message.TYPE_REQUEST : Message.TYPE_NOTIFY;

    //compress message by protobuf
    var protos = !!this.data.protos ? this.data.protos.client : {};
    if (!!protos[route]) {
      msg = Protobuf.encode(route, msg);
    } else {
      msg = Protocol.strencode(JSON.stringify(msg));
    }


    var compressRoute = 0;
    if (this.dict && this.dict[route]) {
      route = this.dict[route];
      compressRoute = 1;
    }

    msg = Message.encode(reqId, type, compressRoute, route, msg);
    var packet = Package.encode(Package.TYPE_DATA, msg);
    this.send(packet);
  };

  pomelo.send = function (packet) {
    this.socket.send(packet.buffer);
  };


  // var handler = {};

  pomelo.heartbeat = function (data) {
    if (!this.heartbeatInterval) {
      // no heartbeat
      return;
    }

    var obj = Package.encode(Package.TYPE_HEARTBEAT);
    if (this.heartbeatTimeoutId) {
      clearTimeout(this.heartbeatTimeoutId);
      this.heartbeatTimeoutId = null;
    }

    if (this.heartbeatId) {
      // already in a heartbeat interval
      return;
    }

    var self = this;
    this.heartbeatId = setTimeout(function () {
      self.heartbeatId = null;
      self.send(obj);

      self.nextHeartbeatTimeout = Date.now() + self.heartbeatTimeout;
      self.heartbeatTimeoutId = setTimeout(self.heartbeatTimeoutCb.bind(self), self.heartbeatTimeout);
    }, this.heartbeatInterval);
  };

  pomelo.heartbeatTimeoutCb = function () {
    var gap = this.nextHeartbeatTimeout - Date.now();
    if (gap > this.gapThreshold) {
      this.heartbeatTimeoutId = setTimeout(this.heartbeatTimeoutCb.bind(this), gap);
    } else {
      console.error('server heartbeat timeout');
      this.emit('heartbeat timeout');
      this.disconnect();
    }
  };

  pomelo.handshake = function (data) {
    data = JSON.parse(Protocol.strdecode(data));
    if (data.code === RES_OLD_CLIENT) {
      this.emit('error', 'client version not fullfill');
      return;
    }

    if (data.code !== RES_OK) {
      this.emit('error', 'handshake fail');
      return;
    }

    this.handshakeInit(data);

    var obj = Package.encode(Package.TYPE_HANDSHAKE_ACK);
    this.send(obj);
    if (this.initCallback) {
      this.initCallback(data);
      this.initCallback = null;
    }
  };

  pomelo.onData = function (data) {
    //probuff decode
    var msg = Message.decode(data);

    if (msg.id > 0) {
      msg.route = this.routeMap[msg.id];
      delete this.routeMap[msg.id];
      if (!msg.route) {
        return;
      }
    }

    msg.body = this.deCompose(msg);

    this.processMessage(pomelo, msg);
  };

  pomelo.onKick = function (data) {
    this.emit('onKick');
  };

  pomelo.processPackage = function (msg) {
    this.handlers[msg.type].apply(this, [msg.body]);
  };

  pomelo.processMessage = function (pomelo, msg) {
    if (!msg.id) {
      // server push message
      this.emit(msg.route, msg.body);
      return;
    }

    //if have a id then find the callback function with the request
    var cb = this.callbacks[msg.id];

    delete this.callbacks[msg.id];
    if (typeof cb !== 'function') {
      return;
    }

    cb(msg.body);
    return;
  };

  var processMessageBatch = function (pomelo, msgs) {
    for (var i = 0, l = msgs.length; i < l; i++) {
      processMessage(pomelo, msgs[i]);
    }
  };

  pomelo.deCompose = function (msg) {
    var protos = !!this.data.protos ? this.data.protos.server : {};
    var abbrs = this.data.abbrs;
    var route = msg.route;

    //Decompose route from dict
    if (msg.compressRoute) {
      if (!abbrs[route]) {
        return {};
      }

      route = msg.route = abbrs[route];
    }
    if (!!protos[route]) {
      return Protobuf.decode(route, msg.body);
    } else {
      return JSON.parse(Protocol.strdecode(msg.body));
    }

    return msg;
  };

  pomelo.handshakeInit = function (data) {
    if (data.sys && data.sys.heartbeat) {
      this.heartbeatInterval = data.sys.heartbeat * 1000;   // heartbeat interval
      this.heartbeatTimeout = this.heartbeatInterval * 2;        // max heartbeat timeout
    } else {
      this.heartbeatInterval = 0;
      this.heartbeatTimeout = 0;
    }

    this.initData(data);

    if (typeof this.handshakeCallback === 'function') {
      this.handshakeCallback(data.user);
    }
  };

  //Initilize data used in pomelo client
  pomelo.initData = function (data) {
    if (!data || !data.sys) {
      return;
    }
    this.data = data || {};
    var dict = data.sys.dict;
    var protos = data.sys.protos;

    //Init compress dict
    if (dict) {
      data.dict = dict;
      data.abbrs = {};

      for (var route in dict) {
        data.abbrs[dict[route]] = route;
      }
    }

    //Init protobuf protos
    if (protos) {
      data.protos = {
        server: protos.server || {},
        client: protos.client || {}
      };
      if (!!this.protobuf) {
        this.protobuf.init({ encoderProtos: protos.client, decoderProtos: protos.server });
      }
    }
  };

  /***** end of Pomelo *****/

})(window, Uint8Array);
/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/libs/pomelo/PomeloClient.js*/var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},Dictionary=function(){function t(){this._count=0,this._maps={},this._objKeys=[],this._objDatum=[]}return t.prototype.add=function(t,e){if("string"==typeof t||"number"==typeof t)this._maps[t]||this._count++,this._maps[t]=e;else{var i=this._objKeys.lastIndexOf(t);-1==i?(this._objKeys.push(t),this._objDatum.push(e),this._count++):this._objDatum[i]=e}},t.prototype.del=function(t){var e;"string"==typeof t||"number"==typeof t?this._maps[t]&&(delete this._maps[t],this._count--):(e=this._objKeys.lastIndexOf(t),-1!=e&&(this._objKeys.splice(e,1),this._objDatum.splice(e,1),this._count--))},t.prototype.get=function(t){if("string"==typeof t||"number"==typeof t)return this._maps[t]?this._maps[t]:null;var e=this._objKeys.lastIndexOf(t);return-1!=e?this._objDatum[e]:null},t.prototype.has=function(t){if("string"==typeof t||"number"==typeof t)return this._maps[t]?!0:!1;var e=this._objKeys.lastIndexOf(t);return-1!=e?!0:null},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i in this._maps)t(i,this._maps[i]);for(var n=0;n<this._objKeys.length;n++){var a=this._objKeys[n];t(this._objKeys[n],this._objDatum[n]),a!=this._objKeys[n]&&n--}},Object.defineProperty(t.prototype,"elements",{get:function(){var t=[];for(var e in this._maps)t.push({key:e,data:this._maps[e]});for(var i=this._objKeys.length,n=0;i>n;n++)t.push({key:this._objKeys[n],data:this._objDatum[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){var t=[];for(var e in this._maps)t.push(e);for(var i=this._objKeys.length,n=0;i>n;n++)t.push(this._objKeys[n]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datum",{get:function(){var t=[];for(var e in this._maps)t.push(this._maps[e]);for(var i=this._objKeys.length,n=0;i>n;n++)t.push(this._objDatum[n]);return t},enumerable:!0,configurable:!0}),t.prototype.dump=function(){for(var t in this._maps)console.log("key:",t,"---> data:",this._maps[t]);for(var e=this._objKeys.length,i=0;e>i;i++)console.log("key:",typeof this._objKeys[i]," ---> data:",this._objDatum[i])},t}();__reflect(Dictionary.prototype,"Dictionary");var ActivityPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/activity/ActivitySkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),GlobalData.isHasShowActive=!0,EventManage.addButtonEvent(this,this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnTurn,egret.TouchEvent.TOUCH_TAP,this.onpenLottery.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),this.arr=[],this.data=[],this.createItems()},e.prototype.createItems=function(){for(var t=[{stt:"游戏更新公告",state:"",content:"gengxin"},{stt:"开服活动",state:"hd.hot",content:"kaifu"},{stt:"首充活动公告",state:"hd.hot",content:"shouchong"},{stt:"月卡终身卡",state:"hd.new",content:"yueka"},{stt:"免费金币活动",state:"",content:"free"},{stt:"法律声明",state:"",content:"shengming"}],e=t.length,i=0;e>i;i++){var n=ObjManage.getObj("ActivityItemPanel");n.x=0,n.y=56*i,this.itemGroup.addChild(n),n.setData(t[i]),EventManage.addButtonEvent(this,n,egret.TouchEvent.TOUCH_TAP,this.clickItem.bind(this,n,t[i].content)),this.data.push(n),this.arr.push(n)}this.clickItem(this.arr[0],"gengxin")},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("ActivityItemPanel",this.arr[e]));this.arr=[]},e.prototype.clickItem=function(t,e){this.txtScroller.viewport.validateNow(),egret.Tween.get(this.txtScroller.viewport).to({scrollV:0},200);for(var i=this.data.length,n=0;i>n;n++){var a=this.data[n];a.click(!1)}t.click(!0),this.txtContent.text=GlobalData.configData.huodong[""+e],"kaifu"==e?this.btnTurn.visible=!0:this.btnTurn.visible=!1},e.prototype.onpenLottery=function(){PanelManage.openLottery()},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ActivityPanel.prototype,"ActivityPanel",["fany.IDispose"]);var EventData;!function(t){t.HIDE_LOADING_TXT="HIDE_LOADING_TXT",t.LOGIN_REG_ROLE="LOGIN_REG_ROLE",t.CREATE_ROLE="CREATE_ROLE",t.UPDATE_MAIN="UPDATE_MAIN",t.UI_LOADING_COM="UI_LOADING_COM",t.UI_COM_OPEN="UI_COM_OPEN",t.TXT_SCROLL_COMPLETE="txtscrollcomplete",t.CREATE_SEX="CREATE_SEX",t.ADD_CHAT_PLAYER="ADD_CHAT_PLAYER",t.ADD_FRIEND_PLAYER="ADD_FRIEND_PLAYER",t.INTOBLACk_FRIEND_PLAYER="INTOBLACk_FRIEND_PLAYER",t.OUTBLACk_FRIEND_PLAYER="OUTBLACk_FRIEND_PLAYER",t.SHOW_BOTTOM="SHOW_BOTTOM",t.FIGHT_OVER="FIGHT_OVER",t.STORY_OVER="STORY_OVER",t.GET_CHAT_PLAYERINFO="GET_CHAT_PLAYERINFO",t.MAIL_UPDATA="MAIL_UPDATA",t.GO_ON="GO_ON",t.DASHANG_NOTICE_PUBLISH="DASHANG_NOTICE_PUBLISH",t.TASK_AFTER_COMPLETE="TASK_AFTER_COMPLETE",t.OPERTE_REDBOX_COMPLETE="OPERTE_REDBOX_COMPLETE",t.UPDATE_PAY="UPDATE_PAY",t.CHAT_GAME_RESULT="CHAT_GAME_RESULT",t.GIFT_ON_EXCHANGE="GIFT_ON_EXCHANGE",t.GET_FOLLOW_GOLD="GET_FOLLOW_GOLD",t.CLOWN_CHOOSE_CLOSE="CLOWN_CHOOSE_CLOSE"}(EventData||(EventData={}));var GlobalData;!function(t){t.openid="",t.isJoin="",t.otheruserid="",t.otheridd="",t.token="",t.tableState="0",t.isSign=!1,t.platform="my2016",t.userfrom="",t.version="",t.account="",t.huancun=null,t.connectIP="211.149.207.220",t.connectPort=7010,t.cdnResUrl="",t.curData=[],t.cacheChat={},t.configData={},t.resurl="",t.channelExt="",t.isFirstShowSign=!0,t.isHasShowActive=!1,t.isLodingComUI=!1,t.isLodingComJinSha=!1,t.isLodingComNiuNiu=!1,t.isLodingComJinHua=!1,t.isLodingComBlackJack=!1,t.isLodingComPK=!1,t.isLodingComDDZ=!1,t.isLodingComClown=!1,t.isLodingComFruit=!1,t.hallNotice=-1,t.isMusic=!0,t.isDebug=!1,t.isLogin=!1,t.isComplete=!1,t.isLoadingMcCom=!1,t.isLoadingThemCom=!1,t.isLoadingResCom=!1}(GlobalData||(GlobalData={}));var MessageData;!function(t){t.IO_ERROR="io-error",t.CLOSE="close",t.DWC_MONEY="dwc_money",t.GOLDEN_EVENT="golden_event",t.NIUNIU_EVENT="niuniu_event",t.NOTICE_MESSAGE="notice_message",t.PK_EVENT="pk_event",t.RESULT_JINSHA="result",t.START_BET="startBet",t.STOP_BET="stopBet",t.UP_BANKER="upBanker",t.DOWN_BANKER="downBanker",t.CHANGE_BANKER="changeBanker",t.COLLECT="collect",t.GLOBALCHAT="globalChat",t.REDPACK="redpack",t.DWC_PAY="dwc_pay",t.GAME_CHAT="gameChat",t.JOIN="join",t.LEAVE="leave",t.READY="ready",t.CALLDIZHU="calldizhu",t.JIAOFEN="jiaofen",t.MAKEDIZHU="makedizhu",t.START="start",t.SENDCARD="sendCard",t.OPENCARD="openCard",t.CONCLUDE="complete",t.CHANGEOWNER="changeOwner",t.CURBET="curbet",t.CHUPAI="chupai",t.CHANGECHUPAI="changechupai",t.PARAERR="paraerr",t.PAY="pay",t.CLOWN_EVENT="clown_event",t.FRUIT_RESULT="fruit_result",t.FRUIT_START_BET="fruit_startBet",t.FRUIT_STOP_BET="fruit_stopBet",t.FRUIT_COLLECT="fruit_collect"}(MessageData||(MessageData={}));var PlatformData;!function(t){t.USER_FROM_PLATFORM="platform",t.USER_FROM_SELF="self",t.USER_FROM_WEIXIN="weixin",t.PLATFORM_QUNHEI="qunhei",t.PLATFORM_JIUYAOWAN="jiuyaowan",t.PLATFORM_BAIDU="baidu",t.PLATFORM_YOUXIDOU="youxidou"}(PlatformData||(PlatformData={}));var RES;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._dataFormat=egret.URLLoaderDataFormat.TEXT,t}return __extends(i,e),i.prototype.getRes=function(e){var i=t.AnalyzerBase.getStringTail(e);return this.fileDic[i]},i.prototype.analyzeData=function(t,e){if(e)for(var i=e,n=i.split(new RegExp("\r\n","gi")),a=n.length,s=0;a>s;s++){var o=n[s].indexOf("=");o>1&&(this.fileDic[n[s].substring(0,o)]=n[s].substring(o+1))}},i}(t.BinAnalyzer);e.TYPE="prop",t.PropertiesAnalyzer=e,__reflect(e.prototype,"RES.PropertiesAnalyzer")}(RES||(RES={}));var Protocol;!function(t){t.GAME_GOLD_REDBOX="golden.goldenHandler.redPack",t.GAME_NIUNIU_REDBOX="niuniu.niuniuHandler.redPack",t.GAME_CLOWN_REDBOX="clown.clownHandler.redPack",t.GET_SHOP_LIST="hall.hallHandler.getShopList",t.GET_RANK_LIST="hall.hallHandler.getRankList",t.GET_BANK="hall.hallHandler.getBank",t.INTO_BANK="hall.hallHandler.intoBank",t.OUT_BANK="hall.hallHandler.outBank",t.GAME_GET_REDBOX="hall.hallHandler.grabRedPack",t.HALL_GET_GOLD="hall.hallHandler.getGold",t.JOIN_GOLDEN_GAME="golden.goldenHandler.joinGame",t.GOLDEN_GET_BETS="golden.goldenHandler.getBets",t.GOLDEN_BET_GOLD="golden.goldenHandler.betGold",t.GOLDEN_UP_BANKER="golden.goldenHandler.upToBanker",t.GOLDEN_DOWN_BANKER="golden.goldenHandler.downBanker",t.GOLDEN_BANKER_LIST="golden.goldenHandler.listBanker",t.GOLDEN_LEAVE_GAME="golden.goldenHandler.leaveGame",t.GOLDEN_SEAT_DOWN="golden.goldenHandler.downSeat",t.GOLDEN_GAME_RECORD="golden.goldenHandler.getGameRecord",t.JINHUA_GET_GOLD="golden.goldenHandler.getGold",t.JOIN_NIUNIU_GAME="niuniu.niuniuHandler.joinGame",t.NIUNIU_GET_BETS="niuniu.niuniuHandler.getBets",t.NIUNIU_BET_GOLD="niuniu.niuniuHandler.betGold",t.NIUNIU_UP_BANKER="niuniu.niuniuHandler.upToBanker",t.NIUNIU_DOWN_BANKER="niuniu.niuniuHandler.downBanker",t.NIUNIU_BANKER_LIST="niuniu.niuniuHandler.listBanker",t.NIUNIU_LEAVE_GAME="niuniu.niuniuHandler.leaveGame",t.NIUNIU_SEAT_DOWN="niuniu.niuniuHandler.downSeat",t.NIUNIU_GAME_RECORD="niuniu.niuniuHandler.getGameRecord",t.NIUNIU_GET_GOLD="niuniu.niuniuHandler.getGold",t.GAME_ANIMAL_REDBOX="animal.animalHandler.redPack",t.JOIN_JINSHA_GAME="animal.animalHandler.joinGame",t.XIA_ZHU_JINSHA="animal.animalHandler.betGold",t.JIN_SHA_LEAVE="animal.animalHandler.leaveGame",t.JIN_SHA_TONGBU="animal.animalHandler.getBets",t.JIN_SHA_SHANGZHUANG="animal.animalHandler.upToBanker",t.JIN_SHA_XIAZHUANG="animal.animalHandler.downBanker",t.JIN_SHA_ZHUANGLIST="animal.animalHandler.listBanker",t.JINSHA_GET_GOLD="animal.animalHandler.getGold",t.BLACK_JACK_JOIN="to.toHandler.joinGame",t.BLACK_JACK_START="to.toHandler.startGame",t.BLACK_JACK_SETCARD="to.toHandler.setCard",t.BLACK_JACK_LEAVE="to.toHandler.leaveGame",t.BLACK_JACK_RANK="to.toHandler.getToList",t.BLACK_JACK_CHOOSE="to.toHandler.changeDiFen",t.BLACK_JACK_REWARD="to.toHandler.getWin",t.HALL_TASK_LIST="hall.hallHandler.getTaskList",t.HALL_TASK_GET="hall.hallHandler.getTaskGift",t.HALL_REWARD_LIST="hall.hallHandler.getRewardList",t.HALL_RELEASE_REWARD="hall.hallHandler.releaseReward",t.HALL_GIVE_REWARD="hall.hallHandler.giveReward",t.HALL_MONEYTREE_LIST="hall.hallHandler.getMoneyTree",t.HALL_MONEYTREE_GET="hall.hallHandler.getMoneyFromTree",t.HALL_SET_PROPOSAL="hall.hallHandler.setProposal",t.GET_MAIL_LIST="hall.hallHandler.getMails",t.HALL_GIFT_LOTTERY_INFO="hall.hallHandler.getLotteryInfo",t.HALL_GIFT_GET_LOTTERY="hall.hallHandler.getLottery",t.HALL_GIFT_LIST="hall.hallHandler.getGiftList",t.HALL_GIFT_EXCHANGE="hall.hallHandler.exchangeGift",t.HALL_GIFT_SELF_RECORD="hall.hallHandler.getSelfExchangeRecord",t.HALL_GIFT_ALL_RECORD="hall.hallHandler.getExchangeRecord",t.HALL_SIGN_GET="hall.hallHandler.getSignCount",t.HALL_SIGN_SIGN="hall.hallHandler.sign",t.GAME_GONGGAO="hall.hallHandler.broadcast",t.YAO_QING="hall.hallHandler.spreadInfo",t.YUE_KA="hall.hallHandler.getMonthCard",t.GET_YUE="hall.hallHandler.getCardEveryDay",t.GET_ALMS="hall.hallHandler.getAlms",t.JINSHA_SEND_CHAT="animal.animalHandler.broadcast",t.NIUNIU_SEND_CHAT="niuniu.niuniuHandler.broadcast",t.JINHUA_SEND_CHAT="golden.goldenHandler.broadcast",t.FRUIT_SEND_CHAT="fruit.fruitHandler.broadcast",t.GET_VIPS="hall.hallHandler.getVips",t.PK_CREATE="pk.pkHandler.createGame",t.PK_JOIN="pk.pkHandler.joinGame",t.PK_SETHAND="pk.pkHandler.setHand",t.PK_LEAVE="pk.pkHandler.leaveGame",t.JOIN_DDZ_GAME="hall.hallHandler.queryDDZTable",t.DDZ_CREATE_TABLE="ddz.ddzHandler.createTable",t.DDZ_JIAO_FEN="ddz.ddzHandler.jiaofen",t.DDZ_CHU_PAI="ddz.ddzHandler.chupai",t.DDZ_JOIN_TABLE="ddz.ddzHandler.joinTable",t.DDZ_READY_GAME="ddz.ddzHandler.gameReady",t.DDZ_START_GAME="ddz.ddzHandler.startGame",t.DDZ_COMMIT_CARD="ddz.ddzHandler.commitCard",t.DDZ_QUIT_GAME="ddz.ddzHandler.leaveTable",t.DDZ_AGAIN_GAME="ddz.ddzHandler.againGame",t.DIAL_GET_INFO="hall.hallHandler.getDialInfo",t.DIAL_GET_AWARD="hall.hallHandler.getDialAward",t.HALL_GET_FOLLOW_GOLD="hall.hallHandler.getFollowGold",t.GET_JINGCAI_HISTORY_LIST="hall.hallHandler.getCompetitionRecordList",t.GET_JINGCAI_LIST="hall.hallHandler.getCompetitionList",t.SEND_JINGCAI="hall.hallHandler.competition",t.GAME_USER_LOGIN="connector.entryHandler.usernamelogin",t.GAME_REG="connector.entryHandler.reg",t.UPDATE_NAME="hall.hallHandler.updateName",t.UPDATE_ADDRESS="hall.hallHandler.updateAddress",t.GET_ADDRESS="hall.hallHandler.getAddress",t.GET_RANK_LIST2="hall.hallHandler.getWinRank",t.CLOWN_CLOWNHANDLER_JOINGAME="clown.clownHandler.joinGame",t.CLOWN_CLOWNHANDLER_LEAVEGAME="clown.clownHandler.leaveGame",t.CLOWN_CLOWNHANDLER_RANDRESULT="clown.clownHandler.randResult",t.CLOWN_CLOWNHANDLER_CHOOSECLOWN="clown.clownHandler.chooseClown",t.CLOWN_CLOWNHANDLER_ENDCHOOSE="clown.clownHandler.endChoose",t.CLOWN_GET_GIFT="clown.clownHandler.getGift",t.CLOWN_QUIT="clown.clownHandler.endChoose",t.CLOWN_RANK_DAY="clown.clownHandler.getDayRank",t.CLOWN_RANK_WEEK="clown.clownHandler.getWeekRank",t.CLOWN_GET_MESSAGES="clown.clownHandler.getMessages",t.FRUIT_XIA_ZHU="fruit.fruitHandler.betGold",t.FRUIT_LEAVE="fruit.fruitHandler.leaveGame",t.FRUIT_TONGBU="fruit.fruitHandler.getBets",t.FRUIT_GET_GOLD="fruit.fruitHandler.getGold",t.FRUIT_JOIN_GAME="fruit.fruitHandler.joinGame",t.FRUIT_GAME_REDBOX="fruit.fruitHandler.redPack",t.FRUIT_GET_MAX="fruit.fruitHandler.getMaxWinner"}(Protocol||(Protocol={}));var NumEffect=function(){function t(t,e,i){this.txt=null,this.result=0,this.txt=t,this.result=e,this.cb=i,this.tweenNum()}return Object.defineProperty(t.prototype,"num",{get:function(){var t="";return this.txt&&(t=this.txt.text),QuickManage.moneyStr2number(t)},set:function(t){this.txt&&(this.txt.text=QuickManage.moneyStr(Math.ceil(t))),t==this.result&&(this.cb&&this.cb(),this.dispose())},enumerable:!0,configurable:!0}),t.prototype.tweenNum=function(){egret.Tween.get(this).to({num:this.result},1e3)},t.prototype.dispose=function(){egret.Tween.removeTweens(this),this.txt=null,this.result=0,this.cb=null},t}();__reflect(NumEffect.prototype,"NumEffect");var MarketingType;!function(t){t[t.REWARD=0]="REWARD",t[t.QUAN=1]="QUAN",t[t.FROM=2]="FROM",t[t.SHARE=3]="SHARE"}(MarketingType||(MarketingType={}));var OnNotice;!function(t){t[t.REWARD=0]="REWARD",t[t.QUAN=1]="QUAN",t[t.FROM=2]="FROM",t[t.SHARE=3]="SHARE"}(OnNotice||(OnNotice={}));var TemplateType;!function(t){t[t.PPT=1]="PPT",t[t.GAME=0]="GAME",t[t.HELP=2]="HELP"}(TemplateType||(TemplateType={}));var fany;!function(t){var e=function(){function t(){}return t.prototype.init=function(){this.setShare(),this.start()},t.prototype.setShare=function(){if("weixin"==GlobalData.userfrom){var t=new JSSDK;t.init(),GlobalData.jssdk=t}},t.prototype.start=function(){GlobalData.otheridd=QuickManage.$GET("fid"),PanelManage.openHall(),ResManage.init("ui",!0,this.uiloadingcallback.bind(this))},t.prototype.uiloadingcallback=function(){GlobalData.isLodingComUI=!0,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UI_LOADING_COM)),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UI_COM_OPEN,{num:0,from:2}))},t}();t.GameData=e,__reflect(e.prototype,"fany.GameData")}(fany||(fany={}));var GameListen=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setOn=function(){fany.SocketManage.pomelo.on(MessageData.RESULT_JINSHA,this.manageOn.bind(this,2)),fany.SocketManage.pomelo.on(MessageData.START_BET,this.manageOn.bind(this,3)),fany.SocketManage.pomelo.on(MessageData.STOP_BET,this.manageOn.bind(this,4)),fany.SocketManage.pomelo.on(MessageData.UP_BANKER,this.manageOn.bind(this,5)),fany.SocketManage.pomelo.on(MessageData.DOWN_BANKER,this.manageOn.bind(this,6)),fany.SocketManage.pomelo.on(MessageData.CHANGE_BANKER,this.manageOn.bind(this,7)),fany.SocketManage.pomelo.on(MessageData.COLLECT,this.manageOn.bind(this,8)),this.setDdz(),this.setPk(),this.setNiuniu(),this.setZjh(),this.setClown(),this.setFruit()},t.prototype.setFruit=function(){fany.SocketManage.pomelo.on(MessageData.FRUIT_RESULT,this.manageOnFruit.bind(this,2)),fany.SocketManage.pomelo.on(MessageData.FRUIT_START_BET,this.manageOnFruit.bind(this,3)),fany.SocketManage.pomelo.on(MessageData.FRUIT_STOP_BET,this.manageOnFruit.bind(this,4)),fany.SocketManage.pomelo.on(MessageData.FRUIT_COLLECT,this.manageOnFruit.bind(this,8))},t.prototype.setClown=function(){fany.SocketManage.pomelo.on(MessageData.CLOWN_EVENT,this.manageOnClown.bind(this,1))},t.prototype.setDdz=function(){fany.SocketManage.pomelo.on(MessageData.JOIN,this.manageOnDdz.bind(this,1)),fany.SocketManage.pomelo.on(MessageData.READY,this.manageOnDdz.bind(this,2)),fany.SocketManage.pomelo.on(MessageData.LEAVE,this.manageOnDdz.bind(this,3)),fany.SocketManage.pomelo.on(MessageData.SENDCARD,this.manageOnDdz.bind(this,5)),fany.SocketManage.pomelo.on(MessageData.OPENCARD,this.manageOnDdz.bind(this,6)),fany.SocketManage.pomelo.on(MessageData.CONCLUDE,this.manageOnDdz.bind(this,7)),fany.SocketManage.pomelo.on(MessageData.CHANGEOWNER,this.manageOnDdz.bind(this,8)),fany.SocketManage.pomelo.on(MessageData.CALLDIZHU,this.manageOnDdz.bind(this,9)),fany.SocketManage.pomelo.on(MessageData.MAKEDIZHU,this.manageOnDdz.bind(this,10)),fany.SocketManage.pomelo.on(MessageData.CURBET,this.manageOnDdz.bind(this,11)),fany.SocketManage.pomelo.on(MessageData.CHUPAI,this.manageOnDdz.bind(this,12)),fany.SocketManage.pomelo.on(MessageData.CHANGECHUPAI,this.manageOnDdz.bind(this,13)),fany.SocketManage.pomelo.on(MessageData.PARAERR,this.manageOnDdz.bind(this,14)),fany.SocketManage.pomelo.on(MessageData.PAY,this.manageOnDdz.bind(this,15))},t.prototype.setNiuniu=function(){fany.SocketManage.pomelo.on(MessageData.NIUNIU_EVENT,function(t){PanelManage.niuniu&&PanelManage.niuniu.onMsgListen(t)})},t.prototype.setZjh=function(){fany.SocketManage.pomelo.on(MessageData.GOLDEN_EVENT,function(t){PanelManage.zhajinhua&&PanelManage.zhajinhua.onMsgListen(t)})},t.prototype.setPk=function(){fany.SocketManage.pomelo.on(MessageData.PK_EVENT,function(t){PanelManage.pk&&PanelManage.pk.messageOn(t)})},t.prototype.manageOn=function(t,e){switch(t){case 2:PanelManage.jinsha&&PanelManage.jinsha.resultcome(e);break;case 3:PanelManage.jinsha&&PanelManage.jinsha.betcome(e);break;case 4:PanelManage.jinsha&&PanelManage.jinsha.betstop(e);break;case 5:PanelManage.jinsha&&PanelManage.jinsha.someonupzhuang(e);break;case 6:PanelManage.jinsha&&PanelManage.jinsha.someondownzhuang(e);break;case 7:PanelManage.jinsha&&PanelManage.jinsha.someonshangzhuang(e);break;case 8:PanelManage.jinsha&&PanelManage.jinsha.collect(e)}},t.prototype.manageOnFruit=function(t,e){switch(t){case 2:PanelManage.fruit&&PanelManage.fruit.resultcome(e);break;case 3:PanelManage.fruit&&PanelManage.fruit.betcome(e);break;case 4:PanelManage.fruit&&PanelManage.fruit.betstop(e);break;case 8:PanelManage.fruit&&PanelManage.fruit.collect(e)}},t.prototype.manageOnClown=function(t,e){switch(t){case 1:PanelManage.clown&&PanelManage.clown.changeClownKing(e);break;case 2:}},t.prototype.manageOnDdz=function(t,e){switch(t){case 1:PanelManage.ddz&&PanelManage.ddz.someonejoin(e);break;case 2:PanelManage.ddz&&PanelManage.ddz.someoneready(e);break;case 3:PanelManage.ddz&&PanelManage.ddz.someoneleave(e);break;case 5:PanelManage.ddz&&PanelManage.ddz.someonesendcard(e);break;case 6:PanelManage.ddz&&PanelManage.ddz.someoneopencard(e);break;case 7:PanelManage.ddz&&PanelManage.ddz.someoneconclude(e);break;case 8:PanelManage.ddz&&PanelManage.ddz.someonechangeowner(e);break;case 9:PanelManage.ddz?PanelManage.ddz.someonecalldizhu(e):GlobalData.huancun=e;break;case 10:PanelManage.ddz&&PanelManage.ddz.someonemakedizhu(e);break;case 11:PanelManage.ddz&&PanelManage.ddz.someonecurbet(e);break;case 12:PanelManage.ddz&&PanelManage.ddz.someonechupai(e);break;case 13:PanelManage.ddz&&PanelManage.ddz.someonechangechupai(e);break;case 14:PanelManage.ddz&&PanelManage.ddz.someonequit(e);break;case 15:}},t}();GameListen.instance=null,__reflect(GameListen.prototype,"GameListen");var UserInfo=function(){function t(){this._sex="1",this._seat="-1"}return Object.defineProperty(t.prototype,"rate",{get:function(){return this._rate},set:function(t){this._rate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"difen",{get:function(){return this._difen},set:function(t){this._difen=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"idd",{get:function(){return this._idd},set:function(t){this._idd=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasRecharge",{get:function(){return this._hasRecharge},set:function(t){this._hasRecharge=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOneLogin",{get:function(){return this._isOneLogin},set:function(t){this._isOneLogin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"taskstate",{get:function(){return this._taskstate},set:function(t){this._taskstate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"emailstate",{get:function(){return this._vip},set:function(t){this._emailstate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vip",{get:function(){return this._vip},set:function(t){this._vip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gold",{get:function(){return this._gold},set:function(t){this._gold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quan",{get:function(){return this._quan},set:function(t){this._quan=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seat",{get:function(){return this._seat},set:function(t){this._seat=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headurl",{get:function(){return this._headurl},set:function(t){this._headurl=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nickname",{get:function(){return this._nickname},set:function(t){this._nickname=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sex",{get:function(){return this._sex},set:function(t){this._sex=t},enumerable:!0,configurable:!0}),t}();__reflect(UserInfo.prototype,"UserInfo");var Net;!function(t){function e(){fany.SocketManage.connectServer()}function i(){fany.SocketManage.login()}function n(){fany.SocketManage.pomelo.on(MessageData.GLOBALCHAT,t.manageOn.bind(this,9)),fany.SocketManage.pomelo.on(MessageData.NOTICE_MESSAGE,t.manageOn.bind(this,10)),fany.SocketManage.pomelo.on(MessageData.REDPACK,t.manageOn.bind(this,11)),fany.SocketManage.pomelo.on(MessageData.DWC_PAY,t.manageOn.bind(this,12)),fany.SocketManage.pomelo.on(MessageData.GAME_CHAT,t.manageOn.bind(this,14)),fany.SocketManage.pomelo.on(MessageData.DWC_MONEY,t.manageOn.bind(this,15)),GameListen.getInstance().setOn()}function a(e,i,n,a){if(void 0===a&&(a=!0),fany.SocketManage.isConnect){if(a&&t.oldpro==e){var s=egret.getTimer();if(s-t.oldtime<200)return TipsManage.showTips("您的操作太频繁！"),void(t.oldtime=s);t.oldtime=s}fany.SocketManage.pomelo.request(e,i,function(t){n(t)}),t.oldpro=e}else TipsManage.showTips("服务器未连接！")}function s(t,e,i,n){if(fany.SocketManage.isConnect){var a=DataManage.getPool(n);a?i(a):fany.SocketManage.pomelo.request(t,e,function(t){DataManage.addPool(n,t),i(t)})}else TipsManage.showTips("服务端已经关闭！")}function o(t,e){fany.SocketManage.isConnect?fany.SocketManage.pomelo.notify(t,e):TipsManage.showTips("服务端已经关闭！")}function r(t,e){switch(t){case 9:PanelManage.hall&&PanelManage.notice.gonggao(e);break;case 10:PanelManage.hall?PanelManage.hall.redNotice(e.msg,!0):GlobalData.hallNotice=e.msg;break;case 11:if(e.msg.name==GlobalData.user.nickname)return;PanelManage.openRedBox(-1,0,e.msg);break;case 12:lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_PAY,e));break;case 14:PanelManage.chat&&PanelManage.chat.setChat(e);break;case 15:PanelManage.yao&&PanelManage.yao.updateData(e)}}t.oldtime=0,t.oldpro="",t.connectServer=e,t.login=i,t.setOn=n,t.send=a,t.sendNeedSave=s,t.sendVoid=o,t.manageOn=r}(Net||(Net={}));var BasePanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(BasePanel.prototype,"BasePanel",["fany.IDispose"]);var ButtonMusic=function(t){function e(e){void 0===e&&(e="btnMusic_png");var i=t.call(this)||this;return i.createMusic(e),i}return __extends(e,t),e.prototype.createMusic=function(t){this.btnMusic=new egret.Bitmap,this.btnMusic.texture=RES.getRes(t),PanelManage.tipsLayer.addChild(this.btnMusic),EnterFrameManage.add(this.gogo.bind(this),"ButtonMusic.gogo"),EventManage.addEvent(this,this.btnMusic,egret.TouchEvent.TOUCH_TAP,this.click),MusicManage.playBgMuisc(1),this.btnMusic.anchorOffsetX=this.btnMusic.width/2,this.btnMusic.anchorOffsetY=this.btnMusic.height/2,this.btnMusic.y+=this.btnMusic.width/2,this.btnMusic.x=this.btnMusic.height/2},e.prototype.click=function(){EnterFrameManage.checkExist("ButtonMusic.gogo")?(EnterFrameManage.remove("ButtonMusic.gogo"),MusicManage.closeBgMuisc()):(EnterFrameManage.add(this.gogo.bind(this),"ButtonMusic.gogo"),MusicManage.playBgMuisc(1))},e.prototype.gogo=function(){this.btnMusic.rotation+=2},e}(egret.Sprite);__reflect(ButtonMusic.prototype,"ButtonMusic");var ScrollPanel=function(t){function e(e,i){var n=t.call(this)||this;return n.ww=0,n.hh=0,n.xx=0,n.yy=0,n.time=0,n.ww=e,n.hh=i,n}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.bgGroup=new eui.Group,this.bgGroup.width=this.ww,this.bgGroup.height=this.hh,this.addChild(this.bgGroup),EventManage.addEvent(this,this.bgGroup,egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin.bind(this)),EventManage.addEvent(this,this.bgGroup,egret.TouchEvent.TOUCH_END,this.onTouchEend.bind(this)),EventManage.addEvent(this,this.bgGroup,egret.TouchEvent.TOUCH_MOVE,this.onTouchMove.bind(this));var t=new eui.Label("ssssssssssssssssss");this.bgGroup.addChild(t),this.view=new YuePanel,this.view.touchEnabled=!1,this.view.touchChildren=!1,this.bgGroup.addChild(this.view);var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawRect(0,0,this.ww,this.hh),e.graphics.endFill(),this.addChild(e),this.mask=e},e.prototype.onTouchEend=function(t){var e=(egret.getTimer()-this.time,this.hh-this.view.height);this.bgGroup.y>0&&(this.bgGroup.y=0),this.bgGroup.y<e&&(this.bgGroup.y=e)},e.prototype.onTouchBegin=function(t){this.yy=t.stageY+this.bgGroup.y,this.time=egret.getTimer()},e.prototype.onTouchMove=function(t){var e=this.hh-this.view.height;this.bgGroup.y<=0&&this.bgGroup.y>=e&&(this.bgGroup.y=-(t.stageY-this.yy))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ScrollPanel.prototype,"ScrollPanel",["fany.IDispose"]);var ChatManage=function(){function t(){if(this.state="0",t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.send=function(t,e){switch(this.state){case"10001":Net.send(Protocol.JINSHA_SEND_CHAT,t,e);break;case"10002":Net.send(Protocol.JINHUA_SEND_CHAT,t,e);break;case"10003":Net.send(Protocol.NIUNIU_SEND_CHAT,t,e);break;case"10004":break;case"10006":Net.send(Protocol.FRUIT_SEND_CHAT,t,e)}},t.prototype.setState=function(t){this.state=t},t.prototype.transition=function(t,e){void 0===e&&(e=!0);var i=t.split(":"),n='<font color="#ffd375">V'+i[1]+"</font>",a='<font color="#ffffff">'+i[4]+"</font>",s='<font color="#e938f2">'+this.getGameName(i[2])+"</font>",o="";switch(i[0]){case"1":o=""+n+a+"在"+s+"中赢得了"+QuickManage.moneyStr(parseInt(i[3]+""));break;case"2":o=i[1];break;case"3":o=n+a+"闪亮登场!";break;case"5":o=e?"土豪玩家"+a+"刚刚发放<font color=#f11300>"+QuickManage.moneyStr(parseInt(i[3]+""))+"</font>红包,赶快去抢吧！":"恭喜玩家"+a+"刚刚抢到了最大的红包<font color=#f11300>"+QuickManage.moneyStr(parseInt(i[3]+""))+"</font>,运气爆表！";break;case"6":o=i[1];break;case"7":o="恭喜玩家"+i[1]+"升级到<font color=#f11300>VIP"+i[2]+"!</font>"}return o=o.replace(/[\n]/gi,""),o=o.replace(/[\r]/gi,"")},t.prototype.getGameName=function(t){var e="";switch(t){case"10001":e="金鲨银鲨";break;case"10002":e="百人金花";break;case"10003":e="百人牛牛";break;case"10004":e="决战21点";break;case"10006":e="经典水果机"}return e},t}();ChatManage.instance=null,__reflect(ChatManage.prototype,"ChatManage");var DataManage;!function(t){function e(t,e){var i={num:0,key:t,value:e};null==this.data&&(this.data=[]),this.data[t]=i}function i(t){return null==this.data?(this.data=[],null):null==this.data[t]?null:this.getValue(t)}function n(t){var e=this.data[t];return e.num>10?null:(this.data[t].num+=1,e.value)}function a(t){this.data[t]=null}function s(t){t.msg.friend&&"1"==t.msg.friend,t.msg.bag&&"1"==t.msg.bag&&(this.data.bag=null)}t.addPool=e,t.getPool=i,t.getValue=n,t.updateByKey=a,t.update=s}(DataManage||(DataManage={}));var EnterFrameManage;!function(t){function e(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];null==this.sp&&(this.sp=new egret.Sprite,this.eventArr=[]),null==this.checkExist(e)&&(this.eventArr.push({key:e,fun:t,para:i}),this.sp.hasEventListener(egret.Event.ENTER_FRAME)||this.sp.addEventListener(egret.Event.ENTER_FRAME,this.gogo))}function i(t){for(var e=this.eventArr.length,i=0;e>i;i++)if(this.eventArr[i].key==t)return this.eventArr[i];return null}function n(t){var e=this.checkExist(t);if(null!=e){var i=this.eventArr.indexOf(e);i>-1&&(this.eventArr.splice(i,1),0==this.eventArr.length&&this.sp.removeEventListener(egret.Event.ENTER_FRAME,this.gogo))}}function a(e){for(var i=t.eventArr.length,n=0;i>n;n++){var a=t.eventArr[n];if(null!=a&&null!=a.fun)a.fun.apply(null,a.para);else if(t.eventArr.splice(n,1),n--,i--,0==i)return void t.sp.removeEventListener(egret.Event.ENTER_FRAME,t.gogo,this)}}t.add=e,t.checkExist=i,t.remove=n,t.gogo=a}(EnterFrameManage||(EnterFrameManage={}));var EventManage=function(){function t(){}return t.addEvent=function(e,i,n,a,s,o,r){void 0===s&&(s=!1),void 0===o&&(o=0),void 0===r&&(r=!1),"touchEnabled"in i&&(i.touchEnabled=!0),i.addEventListener(n,a,e,s,o,r),t.instances.push([e,i,n,a,s,o,r])},t.addOnceEvent=function(e,i,n,a,s,o,r){void 0===s&&(s=!1),void 0===o&&(o=0),void 0===r&&(r=!1),t.addEvent(e,i,n,a,s,o,r);var h=function(o){t.removeEvent(e,i,n,h,s),t.removeEvent(e,i,n,a,s)};t.addEvent(e,i,n,h,s,o,r)},t.addButtonEvent=function(e,i,n,a,s,o,r,h){void 0===s&&(s="button_click_sound"),void 0===o&&(o=!1),void 0===r&&(r=0),void 0===h&&(h=!1);var l=function(r){t.removeEvent(e,i,n,l,o),EffectUtils.playButtonEffect(i,c.bind(e,r,a)),GlobalData.isMusic&&""!=s&&MusicManage.playMuisc(s)},c=function(a,s){t.addEvent(e,i,n,l,o,r,h),s(a)};t.addEvent(e,i,n,l,o,r,h)},t.removeEvent=function(e,i,n,a,s){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=!1),!e)return void console.log("监听者参数不能为空！");var o,r,h,l,c=t.instanceslib,u=0,d=!0;i?u|=4:0,n?u|=2:0,a?u|=1:0;var p,g,f=function(){switch(d=!0,u){case 0:o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]);break;case 1:o[t.FUNCTION]==a?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;
break;case 2:o[t.EVENT]==n?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 3:o[t.EVENT]==n&&o[t.FUNCTION]==a?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 4:o[t.DISPATHCH]==i?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 5:o[t.DISPATHCH]==i&&o[t.FUNCTION]==a?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 6:o[t.DISPATHCH]==i&&o[t.EVENT]==n?o[t.DISPATHCH].removeEventListener(o[t.EVENT],o[t.FUNCTION],e,o[t.USECAPTURE]):d=!1;break;case 7:o[t.DISPATHCH]==i&&o[t.EVENT]==n&&o[t.FUNCTION]==a?o[t.DISPATHCH].removeEventListener(n,a,e,s):d=!1}};if(r=c.get(e)){for(p=r.length,g=p-1;g>=0;g--)o=r[g],f(),d&&r.splice(g,1);r.length||c.del(e)}for(r=t.instances,p=r.length,r=r.reverse(),g=p-1;g>=0;g--)o=r[g],o[t.KEY]==e?f():d=!1,d?r.pop():h==o[t.KEY]?l.push(r.pop()):(h=r[r.length-1][t.KEY],l=c.get(h),l?l.push(r.pop()):(l=[r.pop()],c.add(o[t.KEY],l)))},t}();EventManage.instanceslib=new Dictionary,EventManage.instances=[],EventManage.KEY=0,EventManage.DISPATHCH=1,EventManage.EVENT=2,EventManage.FUNCTION=3,EventManage.USECAPTURE=4,EventManage.PRIORITY=5,EventManage.USEWEAKREFERENCE=6,EventManage.isclick=!1,__reflect(EventManage.prototype,"EventManage");var GameManage;!function(t){function e(){t.game=new fany.GameData,t.game.init()}function i(){}t.init=e,t.shareSucc=i}(GameManage||(GameManage={}));var MusicManage;!function(t){function e(){var t=GlobalData.configData;this.bg=document.createElement("audio"),this.bg.src=t.data.musicurl,document.body.appendChild(this.bg)}function i(e){void 0===e&&(e=1),GlobalData.isMusic&&(t.bg.loop=!0,t.bg.volume=.4,this.bg.play(-1))}function n(){t.bg.pause()}function a(e,i,n){if(void 0===i&&(i=1),void 0===n&&(n=1),GlobalData.isMusic){if(this.sound=RES.getRes(e+"_mp3"),null==this.sound)return;this.closeClickMuisc(),this.channel=t.sound.play(0,n),this.channel.volume=i}}function s(){this.channel&&(this.channel.stop(),this.channel=null)}function o(){this.closeClickMuisc(),this.closeGameBgMuisc()}function r(e,i,n){if(void 0===i&&(i=1),void 0===n&&(n=1),GlobalData.isMusic){if(this.sound1=RES.getRes(e+"_mp3"),null==this.sound1)return;this.closeBgMuisc(),this.closeGameBgMuisc(),this.channel1=t.sound1.play(0,n),this.channel1.volume=i}}function h(){this.channel1&&(this.channel1.stop(),this.channel1=null)}t.initMusic=e,t.playBgMuisc=i,t.closeBgMuisc=n,t.playMuisc=a,t.closeClickMuisc=s,t.closeMuisc=o,t.playGameBgMuisc=r,t.closeGameBgMuisc=h}(MusicManage||(MusicManage={}));var NoticeManage=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.send=function(t,e,i){},t}();NoticeManage.instance=null,__reflect(NoticeManage.prototype,"NoticeManage");var ObjManage;!function(t){function e(t){void 0===t&&(t=10),this.pokers=this.pokers||[];var e;return e=this.pokers.length>0?this.pokers.shift():new PokerPanel,e.setHui(),EventManage.removeEvent(e),e.touchEnabled=!1,e.visible=!0,e.rotation=0,e}function i(t){t.x=0,t.y=0,t.anchorOffsetX=0,t.anchorOffsetX=0,t.rotation=0,this.pokers=this.pokers||[],EventManage.removeEvent(t),this.pokers.push(t)}function n(t){this.imgs=this.imgs||[];var e;return e=this.imgs.length>0?this.imgs.shift():new eui.Image,e.source=t,e.scaleX=1,e.scaleY=1,EventManage.removeEvent(e),e}function a(t){t.x=0,t.y=0,this.imgs=this.imgs||[],EventManage.removeEvent(t),this.imgs.push(t)}function s(t){this.objs=this.objs||[];var e=null;if(e=this.getObjByKey(t),!e){var i=egret.getDefinitionByName(t);e=new i}return e}function o(t){for(var e=null,i=this.objs.length,n=0;i>n;n++)if(this.objs[n].key==t){e=this.objs[n].value,this.objs.splice(n,1);break}return e}function r(t,e){this.objs=this.objs||[],this.objs.push({key:t,value:e})}t.getPoker=e,t.addPoker=i,t.getImage=n,t.addImage=a,t.getObj=s,t.getObjByKey=o,t.addObj=r}(ObjManage||(ObjManage={}));var PageManage;!function(t){function e(t){void 0===t&&(t=["ClassName1","ClassName2"]);for(var e=t.length,i=0;e>i;i++)this.data[t[i]]=null;this.dataRes=t}function i(t,e){void 0===e&&(e="up");var i=egret.getTimer(),n=i-this.oldtime;if(this.oldtime=i,!(600>n&&""!=this.oldpage)&&(this.oldpage=this.page,this.page=t,this.oldpage!=this.page)){this.data[t]&&(EventManage.removeEvent(this.data[t]),this.data[t].parent&&this.data[t].parent.removeChild(this.data[t]),this.data[t].dispose(),this.data[t]=null);var a=egret.getDefinitionByName(t);this.data[t]=new a,EventManage.addEvent(this,this.data[t],egret.TouchEvent.TOUCH_BEGIN,this.onTouchStart),EventManage.addEvent(this,this.data[t],egret.TouchEvent.TOUCH_MOVE,this.onTouchMove),EventManage.addEvent(this,this.data[t],egret.TouchEvent.TOUCH_END,this.onTouchEnd),PanelManage.euiLayer.addChild(this.data[t]),"up"==e?this.playUp(this.data[t]):"down"==e&&this.playDown(this.data[t])}}function n(t){t.visible=!0,t.y=1008,egret.Tween.get(t).to({y:0},400).call(this.disposePage.bind(this))}function a(t){t.visible=!0,t.y=-1008,egret.Tween.get(t).to({y:0},400).call(this.disposePage.bind(this))}function s(){""!=this.oldpage&&this.oldpage!=this.page&&this.data[this.oldpage]&&(this.data[this.oldpage].parent&&this.data[this.oldpage].parent.removeChild(this.data[this.oldpage]),this.data[this.oldpage].dispose(),this.data[this.oldpage]=null)}function o(t){var e=t.currentTarget;this.xx=t.stageX-e.x,this.yy=t.stageY-e.y}function r(t){var e=(t.currentTarget,t.stageY-this.yy);Math.abs(e)>10?this.isMove=!0:this.isMove=!1,0>=e&&Math.abs(e)<280,0>e?this.isUp=!1:this.isUp=!0}function h(e){e.currentTarget;this.isMove&&(this.isUp?t.openPage(this.getUp(this.page),"down"):t.openPage(this.getNext(this.page),"up"),this.isMove=!1)}function l(t){for(var e=this.dataRes.length,i=0;e>i;i++)if(this.dataRes[i]==t)return i==e-1?this.dataRes[i]:this.dataRes[i+1]}function c(t){for(var e=this.dataRes.length,i=0;e>i;i++)if(this.dataRes[i]==t)return 0>i-1?this.dataRes[i]:this.dataRes[i-1]}t.data=[],t.dataRes=[],t.page="",t.oldpage="",t.xx=0,t.yy=0,t.isUp=!1,t.isMove=!1,t.oldtime=0,t.initPage=e,t.openPage=i,t.playUp=n,t.playDown=a,t.disposePage=s,t.onTouchStart=o,t.onTouchMove=r,t.onTouchEnd=h,t.getNext=l,t.getUp=c}(PageManage||(PageManage={}));var PanelManage;!function(t){function e(){new ButtonMusic}function i(t){this.notice&&(this.notice.dispose(),this.notice=null),this.notice=new NoticePanel(t),this.tipsLayer.addChild(this.notice)}function n(t){void 0===t&&(t=!1),this.login&&(this.login.dispose(),this.login=null),this.login=new LoginPanel(t),PopUpManager.addPopUp(this.login,1)}function a(){this.clownrank&&(this.clownrank.dispose(),this.clownrank=null),this.clownrank=new ClownRankPanel,PopUpManager.addPopUp(this.clownrank,2)}function s(){this.kefu&&(this.kefu.dispose(),this.kefu=null),this.kefu=new KeFuPanel,PopUpManager.addPopUp(this.kefu,1)}function o(){this.user&&(this.user.dispose(),this.user=null),this.user=new UserPanel,PopUpManager.addPopUp(this.user,1)}function r(){this.jingcai&&(this.jingcai.dispose(),this.jingcai=null),this.jingcai=new JingCaiPanel,PopUpManager.addPopUp(this.jingcai,1)}function h(t){this.ddz&&(this.ddz.dispose(),this.ddz=null),this.ddz=new DdzPanel(t),PopUpManager.addPopUp(this.ddz,1)}function l(t,e,i,n){this.chat?this.chat.parent&&this.chat.parent.removeChild(this.chat):this.chat=new ChatPanel,this.chat.clearItems(),ChatManage.getInstance().setState(n),this.chat.x=e,this.chat.y=i,t.addChildAt(this.chat,2)}function c(){this.email&&(this.email.dispose(),this.email=null),this.email=new EmailPanel,PopUpManager.addPopUp(this.email,1)}function u(){this.tehui&&(this.tehui.dispose(),this.tehui=null),this.tehui=new TeHuiPanel,PopUpManager.addPopUp(this.tehui,1)}function d(){this.yue&&(this.yue.dispose(),this.yue=null),this.yue=new YuePanel,PopUpManager.addPopUp(this.yue,1)}function p(t){this.resloading&&(this.resloading.dispose(),this.resloading=null),this.resloading=new ResLoading,PopUpManager.addPopUp(this.resloading,1),this.resloading.init(t)}function g(t){this.resloading2?this.resloading2.visible=!0:(this.resloading2=new ResLoading2(t),PopUpManager.addPopUp(this.resloading2,1))}function f(){this.bank&&(this.bank.dispose(),this.bank=null),PopUpManager.removePopUp(GameConfig.curPanel,1,!1)}function b(e,i){void 0===i&&(i=null),this.gameresult&&(this.gameresult.dispose(),this.gameresult=null),this.gameresult=new GameResultPanel(e,i),PopUpManager.addPopUp(this.gameresult,3,1,t.tipsLayer)}function v(){this.rank&&(this.rank.dispose(),this.rank=null),this.rank=new RankPanel,PopUpManager.addPopUp(this.rank,1)}function m(t){void 0===t&&(t=1),this.shop&&(this.shop.dispose(),this.shop=null),this.shop=new ShopPanel,PopUpManager.addPopUp(this.shop,t)}function y(){this.yao&&(this.yao.dispose(),this.yao=null),this.yao=new YaoQingPanel,PopUpManager.addPopUp(this.yao,1)}function T(t){this.jinsha&&(this.jinsha.dispose(),this.jinsha=null),this.jinsha=new JinShaPanel(t),PopUpManager.addPopUp(this.jinsha,1)}function E(t){this.fruit&&(this.fruit.dispose(),this.fruit=null),this.fruit=new FruitPanel(t),PopUpManager.addPopUp(this.fruit,1)}function _(){this.money&&(this.money.dispose(),this.money=null),this.money=new MoneyTreePanel,PopUpManager.addPopUp(this.money,1)}function M(){this.da&&(this.da.dispose(),this.da=null),this.da=new DaShangPanel,PopUpManager.addPopUp(this.da,1)}function C(e){this.daTips&&(this.daTips.dispose(),this.daTips=null),this.daTips=new DaShangTips(e),PopUpManager.addPopUp(this.daTips,2,0,t.tipsLayer)}function k(){this.task&&(this.task.dispose(),this.task=null),this.task=new TaskPanel,PopUpManager.addPopUp(this.task,1)}function x(){this.sign&&(this.sign.dispose(),this.sign=null),this.sign=new SignPanel,PopUpManager.addPopUp(this.sign,1)}function P(){this.active&&(this.active.dispose(),this.active=null),this.active=new ActivityPanel,PopUpManager.addPopUp(this.active,1)}function I(){this.set&&(this.set.dispose(),this.set=null),this.set=new SetPanel,PopUpManager.addPopUp(this.set,1)}function A(){this.lottery&&(this.lottery.dispose(),this.lottery=null),this.lottery=new LotteryPanel,PopUpManager.addPopUp(this.lottery,1)}function w(){this.award&&(this.award.dispose(),this.award=null),this.award=new AwardPanel,PopUpManager.addPopUp(this.award,1)}function G(t){}function D(){this.hall&&(this.hall.dispose(),this.hall=null),this.hall=new HallPanel,PopUpManager.addPopUp(this.hall,0),GlobalData.isSign?t.openActive():t.openSign()}function S(t){this.zhajinhua&&(this.zhajinhua.dispose(),this.zhajinhua=null),this.zhajinhua=new ZhaJinHuaPanel(t),PopUpManager.addPopUp(this.zhajinhua,1)}function O(t){this.niuniu&&(this.niuniu.dispose(),this.niuniu=null),this.niuniu=new NiuNiuPanel(t),PopUpManager.addPopUp(this.niuniu,1)}function N(t){this.blackJack&&(this.blackJack.dispose(),this.blackJack=null),this.blackJack=new BlackJackPanel(t),PopUpManager.addPopUp(this.blackJack,1)}function L(t){this.pk&&(this.pk.dispose(),this.pk=null),this.pk=new PkPanel(t),PopUpManager.addPopUp(this.pk,1)}function R(e){this.serverError&&(this.serverError.dispose(),this.serverError=null),this.serverError=new ServerErrorPanel(e),PopUpManager.addPopUp(this.serverError,1,1,t.tipsLayer)}function B(e,i,n){void 0===n&&(n=null),this.redBox&&(this.redBox.dispose(),this.redBox=null),this.redBox=new RedBoxPanel(e,i,n),PopUpManager.addPopUp(this.redBox,2,0,t.tipsLayer)}function H(){this.freeCoin&&(this.freeCoin.dispose(),this.freeCoin=null),this.freeCoin=new FreeCoinPanel,PopUpManager.addPopUp(this.freeCoin,2,0)}function U(){this.vip&&(this.vip.dispose(),this.vip=null),this.vip=new VipPanel,PopUpManager.addPopUp(this.vip,2,0)}function j(t){this.clown&&(this.clown.dispose(),this.clown=null),this.clown=new ClownPanel(t),PopUpManager.addPopUp(this.clown,2,0)}t.createButtonMusic=e,t.openNotice=i,t.openLogin=n,t.openClownrank=a,t.openKefu=s,t.openUser=o,t.openJingCai=r,t.openDdz=h,t.openChat=l,t.openEmail=c,t.openTeHui=u,t.openYue=d,t.openResLoading=p,t.openResLoading2=g,t.openMainPage=f,t.openGameResult=b,t.openRank=v,t.openShop=m,t.openYaoQing=y,t.openJinSha=T,t.openFruit=E,t.openMoney=_,t.openDa=M,t.openDaTips=C,t.openTask=k,t.openSign=x,t.openActive=P,t.openSet=I,t.openLottery=A,t.openAward=w,t.openResult=G,t.openHall=D,t.openZhaJinHua=S,t.openNiuNiu=O,t.openBlackJack=N,t.openPk=L,t.openServerErrorPanel=R,t.openRedBox=B,t.openFreeCoin=H,t.openVip=U,t.openClown=j}(PanelManage||(PanelManage={}));var PayManage=function(){function t(){if(this.url="http://"+GlobalData.connectIP+":82/paytest.nd",t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.pay=function(t,e,i){void 0===e&&(e=""),void 0===i&&(i=""),window.pay(this.url,{userid:GlobalData.openid+"@"+GlobalData.platform,shopid:t,total_fee:i},this.payBack1.bind(this))},t.prototype.payBack1=function(t){},t.prototype.pay1=function(t,e,i){if(this.wupin={shopid:t,gname:e,price:i},GlobalData.userfrom==PlatformData.USER_FROM_WEIXIN){var n=GlobalData.configData.data.payurl+"?shopid="+t+"&goods="+e+"&userid="+(GlobalData.openid+"@"+GlobalData.platform)+"&price="+i+"&url="+encodeURIComponent(GlobalData.configData.data.link)+"&time="+(new Date).getTime();window.location.href=n}else if(GlobalData.userfrom==PlatformData.USER_FROM_SELF){var n=GlobalData.configData.data.regapi+"?service=user.existuser&token="+GlobalData.openid;window.regLogin(n,{},this.checkBind.bind(this))}else if(GlobalData.platform==PlatformData.PLATFORM_QUNHEI){var n="http://"+GlobalData.connectIP+":82/createQunheiData.nd?playerId="+(GlobalData.openid+"@"+GlobalData.platform)+"&shopId="+t+"&username="+GlobalData.openid;console.log(n),window.getPayInfo(n,{},this.qunheipayBack.bind(this))}else if(GlobalData.platform==PlatformData.PLATFORM_JIUYAOWAN){var n="http://"+GlobalData.connectIP+":82/nopCreateData.nd?playerId="+(GlobalData.openid+"@"+GlobalData.platform)+"&shopId="+t+"&user_id="+GlobalData.openid+"&channelExt="+GlobalData.channelExt;console.log(n),window.getPayInfo(n,{},this.jiuyaowanpayBack.bind(this))}else if(GlobalData.platform==PlatformData.PLATFORM_YOUXIDOU){var n="http://"+GlobalData.connectIP+":82/yxdCreatePay.nd?playerId="+(GlobalData.openid+"@"+GlobalData.platform)+"&shopId="+t;console.log(n),window.getPayInfo(n,{},this.youxidoupayBack.bind(this))}},t.prototype.youxidoupayBack=function(t){"fail"==t?TipsManage.showTips("参数错误!"):window.youxidoupay(JSON.parse(t))},t.prototype.jiuyaowanpayBack=function(t){"fail"==t?TipsManage.showTips("参数错误!"):(console.log(t),top.location.href=t)},t.prototype.qunheipayBack=function(t){"fail"==t?TipsManage.showTips("参数错误!"):window.qunheipay(JSON.parse(t))},t.prototype.checkBind=function(t){if(200==t.ret)if(200==t.data.code){if(GlobalData.platform==PlatformData.PLATFORM_BAIDU){var e="";e=egret.MainContext.deviceType==egret.MainContext.DEVICE_PC?"1":"2",window.getPayInfo("http://"+GlobalData.connectIP+":82/baiduCreateOrder.nd?playerId="+(GlobalData.openid+"@"+GlobalData.platform)+"&shopId="+this.wupin.shopid,{},this.payBack.bind(this))+"&paytype="+e}}else PanelManage.openLogin(!0);else TipsManage.showTips("请求异常,请稍后再试!")},t.prototype.payBack=function(t){"notreg"==t?PanelManage.openLogin(!0):"fail"==t?TipsManage.showTips("充值失败,请重新再试!"):window.location.href=t},t.prototype.getPayback=function(t){var e=JSON.parse(t);window.location.href=e.url},t}();PayManage.instance=null,__reflect(PayManage.prototype,"PayManage");var PokerManage;!function(t){function e(t,e){e=e||[];for(var i=t.length,n=0;i>n;n++){var a=null;if(t[n]+""=="15")a={k:0,v:16,y:t[n]};else if(t[n]+""=="16")a={k:0,v:17,y:t[n]};else if("0"==(t[n]+"").charAt(1)){var s=(t[n]+"").charAt(2)+"";"1"==s?s="14":"2"==s&&(s="15"),a={k:(t[n]+"").charAt(0)+"",v:s+"",y:t[n]+""}}else a={k:(t[n]+"").charAt(0)+"",v:(t[n]+"").charAt(1)+(t[n]+"").charAt(2)+"",y:t[n]+""};a.k+""=="1"?a.v=4*(parseInt(a.v)-1)+4:a.k+""=="2"?a.v=4*(parseInt(a.v)-1)+3:a.k+""=="3"?a.v=4*(parseInt(a.v)-1)+2:a.v=4*(parseInt(a.v)-1)+1,e.push(a)}return e.sort(QuickManage.sortMoreFun(["v"],[1])),e}function i(t,e){for(var i=t.length,n=e.length,a=0;i>a;a++)for(var s=0;n>s;s++)if(t[a]==e[s].y){e.splice(s,1);break}e.sort(QuickManage.sortMoreFun(["v"],[1]))}function n(t,e){for(var i=t.length,n=e.length,a=0;i>a;a++)for(var s=0;n>s;s++)if(t[a]==e[s].y){e.splice(s,1);break}e.sort(QuickManage.sortMoreFun(["v"],[1]))}function a(t,e){for(var i=t.length,n=e.length,a=0;i>a;a++)for(var s=0;n>s;s++)t[a]==e[s]&&e.splice(a,1);e.sort(QuickManage.sortMoreFun(["v"],[1]))}t.paixu=e,t.chupai=i,t.chupai2=n,t.jia3zhang=a}(PokerManage||(PokerManage={}));var PopUpManager;!function(t){function e(e){switch(t.data=t.data||[],e.isAlway){case 0:t.del();break;case 1:t.del();break;case 2:break;case 3:}t.isHave(e)||t.data.push(e),t.data.push(e)}function i(e){for(var i=t.data.length,n=0;i>n;n++){var a=null;t.data[n]&&t.data[n].panel==e.panel&&(a=t.data[n])}return a?!0:!1}function n(){for(var e=t.data.length,i=0;e>i;i++)t.data[i]&&(0!=t.data[i].isAlway?(t.removePopUp(t.data[i].panel,0,!1),t.data[i]=null,t.data.splice(i,1)):t.data[i].panel!=PanelManage.hall&&(t.data[i].panel.visible=!1));return!0}function a(e,i,n,a){if(void 0===n&&(n=1),void 0===a&&(a=PanelManage.euiLayer),GameConfig.curPanel!=e||!GameConfig.curPanel||!GameConfig.curPanel.visible){t.managePanel({panel:e,isAlway:i}),GameConfig.curPanelData={panel:e,isAlway:i},e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,a.contains(e)||a.addChild(e),e.visible=!0,GameConfig.curPanel=e;var s=0,o=0;0!=s?(e.x=GameConfig.curWidth()/2-s/2,e.y=GameConfig.curHeight()/2-o/2):(s=e.width,o=e.height);GameConfig.curWidth()/2-s/2,GameConfig.curHeight()/2-o/2;switch(n){case 0:break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+s/4,e.y=e.y+o/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-s/4,y:e.y-o/4},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+s/4,e.y=e.y+o/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-s/4,y:e.y-o/4},600,egret.Ease.elasticOut);break;case 3:e.x=-s,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut);break;case 4:e.x=s,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut);break;case 5:e.y=-o,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut);break;case 6:e.y=o,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut)}}}function s(e,i,n,a){void 0===i&&(i=0),void 0===n&&(n=!0),void 0===a&&(a=PanelManage.euiLayer);for(var s=t.data.length,o=0;s>o;o++){var r=t.data[o];r&&0!=o&&(r.visible=!1)}if(null!=e){switch(i){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var h=500;0==i?(h=0,n?(EventManage.removeEvent(e),e.parent&&(e.parent.removeChild(e),e.removeChildren()),e.removeChildren()):(e.alpha=1,e.scaleX=1,e.scaleY=1,e.visible=!1)):egret.setTimeout(function(){n?(EventManage.removeEvent(e),e.parent&&(e.parent.removeChild(e),e.removeChildren()),e.removeChildren()):(e.alpha=1,e.scaleX=1,e.scaleY=1,e.visible=!1)},this,h)}}t.managePanel=e,t.isHave=i,t.del=n,t.addPopUp=a,t.removePopUp=s}(PopUpManager||(PopUpManager={}));var QuickManage;!function(t){function e(t){var e=RES.getRes(t+"_json"),i=RES.getRes(t+"_png"),n=new egret.MovieClipDataFactory(e,i),a=new egret.MovieClip(n.generateMovieClipData(t));return a}function i(t){var e=document.getElementById("gameDiv");this.myImg=document.createElement("img"),this.myImg.src=t,this.myImg.style.width="100%",this.myImg.style.height="100%",this.myImg.style.position="absolute",e.appendChild(this.myImg),this.myImg.onclick=this.clickc.bind(this)}function n(){var t=document.getElementById("gameDiv");t.removeChild(this.myImg),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.GET_FOLLOW_GOLD))}function a(t,e){var i=new egret.ByteArray;return i.writeUTFBytes(t),i.length<e?t:(i.position=0,i.readUTFBytes(e)+"...")}function s(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)}function o(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=location.search.substr(1).match(e);return null!=i?decodeURI(decodeURIComponent(decodeURI(i[2]))):""}function r(e){return e>=1e4&&1e8>e?t.get2Num(e/1e4)+"万":e>=1e8?t.get2Num(e/1e8)+"亿":e+""}function h(t){var e=t.toFixed(3);e=e.substr(0,e.length-1);var i=e.split(".");return i[1]+""=="00"?i[0]+"":e+""}function l(t){var e=0;return e=-1!=t.indexOf("万")?1e4*parseInt(t.replace("万","")):-1!=t.indexOf("亿")?1e8*parseInt(t.replace("亿","")):parseInt(t)}function c(t,e,i){return t[e]=t.splice(i,1,t[e])[0],t}function u(t,e){if(egret.Capabilities.runtimeType==egret.MainContext.RUNTIME_NATIVE)return null;var i=e||location.href;if(-1!=i.indexOf("?")){var n="&"+i.split("?")[1],a=new RegExp("&"+t+"=.*?(?:&|$)"),s=a.exec(n);if(s){var o=s[0];return o.split("&")[1].split("=")[1]}}return null}function d(t,e,i){var n=i||location.href,a="&"+n.split("?")[1];if(-1==n.indexOf("?"))return n+="?"+t+"="+e;var a=n.split("?")[1];if(""==a)return n+=t+"="+e;var s=new RegExp("(?:^|&)"+t+"=.*?(?:&|$)"),o=s.exec(a);if(o&&""!=o[0]){var r=o[0],h=new RegExp("=.*$"),l=r.replace(h,"="+e);return n.replace(r,l)}return n+="&"+t+"="+e}function p(t,e){var i=e||location.href,n="&"+i.split("?")[1];return-1!=n.indexOf("&"+t+"=")}function g(t){for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n&&(n.touchEnabled=!1)}}function f(t){}function b(t,e){return void 0===e&&(e=null),function(i,n){var a=0;e&&(a=e.length);var s;for(var o in t){var r=parseInt(o);if(s=parseInt(i[t[r]])-parseInt(n[t[r]]),0!=s)return a>r&&0==e[r]?s:-s}return 0}}function v(t,e){if(void 0===e&&(e=0),/[^0-9\.]/.test(t))return"0";if(null==t||""==t)return"0";t=t.toString().replace(/^(\d*)$/,"$1."),t=(t+"00").replace(/(\d*\.\d\d)\d*/,"$1"),t=t.replace(".",",");for(var i=/(\d)(\d{3},)/;i.test(t);)t=t.replace(i,"$1,$2");if(t=t.replace(/,(\d\d)$/,".$1"),0==e){var n=t.split(".");"00"==n[1]&&(t=n[0])}return t}t.createMc=e,t.openEr=i,t.clickc=n,t.getChar=a,t.getRandomNum=s,t.$GET=o,t.moneyStr=r,t.get2Num=h,t.moneyStr2number=l,t.swapArr=c,t.getPara=u,t.setProperty=d,t.hasProperty=p,t.setTouchEnabled=g,t.tiaoshi=f,t.sortMoreFun=b,t.formatMoney=v}(QuickManage||(QuickManage={}));var ResManage;!function(t){function e(e,i,n){t.resName=e,t.isLoading=i,t.cb=n,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(GlobalData.cdnResUrl+"resource/"+e+".res.json?v="+GlobalData.version,GlobalData.cdnResUrl+"resource/")}function i(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(t.resName)}function n(e){e.groupName==this.resName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),t.cb())}function a(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)}function s(t){t.groupName==this.resName&&(PanelManage.resloading&&PanelManage.resloading.setProgress(t.itemsLoaded,t.itemsTotal),PanelManage.resloading2&&PanelManage.resloading2.setProgress(t.itemsLoaded,t.itemsTotal))}t.resName="",t.isLoading=!0,t.init=e,t.onConfigComplete=i,t.onResourceLoadComplete=n,t.onResourceLoadError=a,t.onResourceProgress=s}(ResManage||(ResManage={}));var ResourceManage;!function(t){function e(){this._configs=new Array,this._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)}function i(t,e){this._configs.push([t,e])}function n(t,e){this._onConfigComplete=t,this._onConfigCompleteTarget=e,this.loadNextConfig()}function a(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var t=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(t[0],t[1])}function s(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()}function o(t,e,i,n){this._groups[t]=[e,i,n],RES.loadGroup(t)}function r(t,e,i,n,a){RES.createGroup(t,e,!0),this.loadGroup(t,i,n,a)}function h(t,e){void 0===e&&(e=null);var i="pilferer_"+t;e||(e=[t]),RES.createGroup(i,e,!0),RES.loadGroup(i,-1)}function l(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][0],n=this._groups[e][2];null!=i&&i.call(n),this._groups[e]=null,delete this._groups[e]}}function c(t){var e=t.groupName;if(this._groups[e]){var i=this._groups[e][1],n=this._groups[e][2];null!=i&&i.call(n,t.itemsLoaded,t.itemsTotal)}}function u(t){this.onResourceLoadComplete(t)}function d(t,e,i,n,a){void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null);var s=t.concat(e),o="loadGroup"+this._groupIndex++;RES.createGroup(o,s,!0),this._groups[o]=[i,n,a],RES.loadGroup(o)}t._groupIndex=0,t.init=e,t.addConfig=i,t.loadConfig=n,t.loadNextConfig=a,t.onConfigCompleteHandle=s,t.loadGroup=o,t.loadGroups=r,t.pilfererLoadGroup=h,t.onResourceLoadComplete=l,t.onResourceLoadProgress=c,t.onResourceLoadError=u,t.loadResource=d}(ResourceManage||(ResourceManage={}));var SkillManage=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.playSkill=function(e,i,n,a){void 0===a&&(a=null),this.skills=this.skills||[];var s;s=this.skills[e]?this.skills[e]:QuickManage.createMc(e),s.x=i,s.y=n,s.gotoAndStop(1),s.play(1),PanelManage.tipsLayer.addChild(s),EventManage.addEvent(this,s,egret.Event.COMPLETE,function(){s.parent&&s.parent.removeChild(s),t.getInstance().skills[e]=s,a()})},t}();SkillManage.instance=null,__reflect(SkillManage.prototype,"SkillManage");var fany;!function(t){var e=function(){function e(){}return e.connectServer=function(){this.gateServer||(this.gateServer=new Pomelo),this.gateServer.init({host:GlobalData.connectIP,port:GlobalData.connectPort},t.SocketManage.onConnectServerListHandle)},e.onConnectServerListHandle=function(e){t.SocketManage.gateServer.request("gate.gateHandler.getConnector",{},function(e){200==e.code&&t.SocketManage.connectGameServer(e.data.host,e.data.port)})},e.connectGameServer=function(e,i){t.SocketManage.gateServer.disconnect(),t.SocketManage.gateServer=null,this.isConnect=!1,this.pomelo||(this.pomelo=new Pomelo),t.SocketManage.pomelo.init({host:e,port:i},t.SocketManage.onConnectHandle),t.SocketManage.setOn()},e.setOn=function(){t.SocketManage.pomelo.on(MessageData.CLOSE,t.SocketManage.onDisconnect.bind(this)),t.SocketManage.pomelo.on(MessageData.IO_ERROR,t.SocketManage.onDisconnect.bind(this)),Net.setOn()},e.onDisconnect=function(e){t.SocketManage.isConnect=!1,PanelManage.openServerErrorPanel("服务器连接异常,请刷新重试！"+JSON.stringify(e))},e.onConnectHandle=function(e){t.SocketManage.isConnect=!0,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.HIDE_LOADING_TXT))},e.login=function(){if(1==t.SocketManage.isConnect){var e=QuickManage.$GET("yid"),i=GlobalData.openid+"@"+GlobalData.platform;t.SocketManage.pomelo.request("connector.entryHandler.login",{_id:i,name:GlobalData.user.nickname,sex:GlobalData.user.sex,headurl:GlobalData.user.headurl,spread:e},function(t){200==t.code?lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CREATE_ROLE,t.data.player)):alert("错误的登录,请刷新页面!")})}else TipsManage.showTips("请等待服务器连接成功!")},e}();e.isConnect=!1,t.SocketManage=e,__reflect(e.prototype,"fany.SocketManage")}(fany||(fany={}));var TimerManage;!function(t){function e(){this.secondHash=[],this.notSecondHash=[],this.timerHash=[]}function i(t){for(var e in this.secondHash){var i=this.secondHash[e];0==i.isStop&&this.objTickHandle(i)}}function n(t){if(null!=t.onTimer){var e=t.onTimer;e()}if(t.repeatCount>=0&&t.repeatCount--,0==t.repeatCount){if(null!=t.onComplete){var i=t.onComplete;i()}this.secondHash[t.key]=null,delete this.secondHash[t.key]}}function a(e,n,a,s,o,r){if(void 0===s&&(s=null),void 0===o&&(o=0),void 0===r&&(r=""),0==o&&(o=-1),1e3==n){var h=egret.getQualifiedClassName(e),l=h+r,c={key:l,object:e,isStop:!1,onTimer:a,onComplete:s,repeatCount:o,flag:r};t.secondHash[l]=c,null==this._timer&&(this.secondHash=[],this.notSecondHash=[],this.timerHash=[],this._timer=new egret.Timer(1e3),this._timer.addEventListener(egret.TimerEvent.TIMER,i),this._timer.start())}else this.addDifferentTimer(e,n,a,s,o,r)}function s(e,i,n,a,s,o){void 0===a&&(a=null),void 0===s&&(s=-1),void 0===o&&(o="");var r=!1;for(var h in this.notSecondHash){var l=this.notSecondHash[h];if(l.delay==i){r=!0;break}}if(!r){var c=new egret.Timer(i);c.addEventListener(egret.TimerEvent.TIMER,this.notSecondTimer,this),c.start(),t.timerHash[i]=c}var u=egret.getQualifiedClassName(e),d=u+o,p={key:d,delay:i,isStop:!1,object:e,onTimer:n,onComplete:a,repeatCount:s,flag:o};this.notSecondHash[d]=p}function o(t){var e=t.currentTarget,i=e.delay;for(var n in this.notSecondHash){var a=this.notSecondHash[n];a.delay==i&&0==a.isStop&&this.notSecondTickHandle(a)}}function r(t){var e=t.onTimer;if(null!=e&&e(),t.repeatCount>=0&&t.repeatCount--,0==t.repeatCount){if(null!=t.onComplete){var i=t.onComplete;i()}this.notSecondTimerComplete(t)}}function h(e){if(null!=e){this.notSecondHash[e.key]=null,delete this.notSecondHash[e.key];for(var i in this.notSecondHash){var n=this.notSecondHash[i];if(n.delay==e.delay)return}var a=this.timerHash[e.delay];a&&(a.removeEventListener(egret.TimerEvent.TIMER,o,this),t.timerHash[e.delay],delete t.timerHash[e.delay])}}function l(t,e){void 0===e&&(e="");var i=egret.getQualifiedClassName(t),n=i+e;this.notSecondTimerComplete(this.notSecondHash[n]),this.secondHash[n]=null,this.notSecondHash[n]=null,delete this.secondHash[n],delete this.notSecondHash[n]}function c(t,e){void 0===e&&(e="");var i=egret.getQualifiedClassName(t),n=i+e,a=this.secondHash[n];null==a&&(a=this.notSecondHash[n]),a&&(a.isStop=!0)}function u(t,e){void 0===e&&(e="");var i=egret.getQualifiedClassName(t),n=i+e,a=this.secondHash[n];null==a&&(a=this.notSecondHash[n]),a&&(a.isStop=!1)}t.init=e,t.timerHandle=i,t.objTickHandle=n,t.addTimer=a,t.addDifferentTimer=s,t.notSecondTimer=o,t.notSecondTickHandle=r,t.notSecondTimerComplete=h,t.removeTimer=l,t.stopTimer=c,t.startTimer=u}(TimerManage||(TimerManage={}));var TipsManage;!function(t){function e(e,i,n){this.hurts=this.hurts||[];var a;this.hurts.length>0?a=this.hurts.shift():(a=new eui.BitmapLabel,a.font="attackFont_fnt"),a.x=i,a.y=n,a.text=e,PanelManage.tipsLayer.addChild(a),egret.Tween.get(a).to({y:n-50},200).call(function(){egret.Tween.get(a).to({alpha:0},1e3).call(function(){a.parent&&a.parent.removeChild(a),a.alpha=1,t.hurts.push(a)},this)},this)}function i(e,i,n){this.bloods=this.bloods||[];var a;this.bloods.length>0?a=this.bloods.shift():(a=new eui.BitmapLabel,a.font="recoverFont_fnt"),a.x=i,a.y=n,a.text=e,PanelManage.tipsLayer.addChild(a),egret.Tween.get(a).to({y:n-50},200).call(function(){egret.Tween.get(a).to({alpha:0},1e3).call(function(){a.parent&&a.parent.removeChild(a),a.alpha=1,t.bloods.push(a)},this)},this)}function n(e,i,n){this.imgs=this.imgs||[];var a;a=this.imgs.length>0?this.imgs.shift():new eui.Image,a.source=e,a.x=i,a.y=n,PanelManage.tipsLayer.addChild(a),egret.Tween.get(a).to({y:n-50},200).call(function(){egret.Tween.get(a).to({alpha:0},1e3).call(function(){a.parent&&a.parent.removeChild(a),a.alpha=1,t.imgs.push(a)
},this)},this)}function a(e){0==t.isJianTing&&(TimerManager.getInstance().setFrame("TipsManage.gogo",t.gogo.bind(this),this),t.isJianTing=!0),t.arr=t.arr||[];var i;i=t.arr.length>0?t.arr.shift():new TipsShowPanel,i.setStr(e),i.alpha=0,i.anchorOffsetX=320,i.anchorOffsetY=40,i.x=320,i.y=490,PanelManage.tipsLayer.addChild(i),EffectUtils.playEffect5(i,800),t.tipsDel=t.tipsDel||[],t.tipsDel.push({time:1,obj:i})}function s(){for(var e=t.tipsDel.length,i=0;e>i;i++){var n=t.tipsDel[i];n&&(n.time>40?(t.tipsDel.splice(i,1),t.showTipsCom(n.obj)):n.time+=1)}}function o(e){e.parent&&e.parent.removeChild(e),t.arr.length>5?(e.dispose(),e=null):t.arr.push(e)}function r(t){for(var e=0;e<t.length;e++){var i=new TipsShowPanel;i.setStr(t[e]),i.anchorOffsetX=320,i.anchorOffsetY=40,i.x=320,i.y=490+e*i.height,PanelManage.tipsLayer.addChild(i),EffectUtils.playEffect5(i,200+200*e,this.showTipsTween.bind(this,i))}}function h(t){egret.Tween.get(t).to({y:t.y-600},700).call(this.removeItem.bind(this,t))}function l(t){t.parent&&(t.parent.removeChild(t),t.dispose())}t.isJianTing=!1,t.showHurtNum=e,t.showAddBloodNum=i,t.showImg=n,t.showTips=a,t.gogo=s,t.showTipsCom=o,t.showEffect=r,t.showTipsTween=h,t.removeItem=l}(TipsManage||(TipsManage={}));var Network;!function(t){function e(t,e,i,n){void 0===t&&(t=""),void 0===e&&(e=""),void 0===i&&(i=function(){}),void 0===n&&(n=egret.URLRequestMethod.POST),this.netArr.push({key:t,fun:i});var a=new egret.URLLoader;a.dataFormat=egret.URLLoaderDataFormat.TEXT,a.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this);var s=new egret.URLRequest(t);s.method=n,s.data=new egret.URLVariables(e),a.load(s)}function i(t){var e=t.target;e.dataFormat=egret.URLLoaderDataFormat.TEXT;var i=e.data,n=e._request.url,a=e._request.method;a&&"post"!=a&&"get"!=a||(a="");for(var s=(this.netArr.length,0);s<this.netArr.length;s++)if(this.netArr[s].key==n+a){this.netArr[s].fun.apply(null,[i]),this.netArr.splice(s,1);break}}t.netArr=[],t.sendInfo=e,t.onGetComplete=i}(Network||(Network={}));var BaseSingle=function(){function t(){}return t.getInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;if(!i._instance){var n=t.length;0==n?i._instance=new i:1==n?i._instance=new i(t[0]):2==n?i._instance=new i(t[0],t[1]):3==n?i._instance=new i(t[0],t[1],t[2]):4==n?i._instance=new i(t[0],t[1],t[2],t[3]):5==n&&(i._instance=new i(t[0],t[1],t[2],t[3],t[4]))}return i._instance},t}();__reflect(BaseSingle.prototype,"BaseSingle");var ObjectPool=function(){function t(){this._objs=new Array}return t.prototype.push=function(t){this._objs.push(t)},t.prototype.pop=function(t){if(0==this._objs.length)return null;if(t)for(var e=this._objs.length-1,i=void 0;e>-1;e--)if(i=this._objs[e],i.extraKey==t)return this._objs.splice(e,1),i;return this._objs.pop()},t.prototype.execute=function(t){if(null!=t)for(var e=this._objs.length-1,i=void 0;e>-1;e--)i=this._objs[e],i[t]()},t.prototype.clear=function(t){for(var e=void 0;this._objs.length>0;)e=this._objs.pop(),t&&e[t]()},t.pop=function(e,i){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];var s=t._pools[e];null==s&&(s=new t,t._pools[e]=s);var o=s.pop(i);if(o)return o;if(i){var r=egret.getDefinitionByName(e);o=new r(i),o.extraKey=i,o.ObjectPoolKey=e}else{var r=egret.getDefinitionByName(e),h=n.length;0==h?o=new r:1==h?o=new r(n[0]):2==h?o=new r(n[0],n[1]):3==h?o=new r(n[0],n[1],n[2]):4==h?o=new r(n[0],n[1],n[2],n[3]):5==h&&(o=new r(n[0],n[1],n[2],n[3],n[4])),o.ObjectPoolKey=e}return o},t.push=function(e){if(null==e)return!1;var i=e.ObjectPoolKey;if(null==i)return!1;var n=t._pools[i];return null==n?!1:(n.push(e),!0)},t.clear=function(){var e;for(var i in t._pools)e=t._pools[i],e.clear();t._pools={}},t.erase=function(e,i){var n=t._pools[e];null==n&&n.clear(i),delete t._pools[e]},t.execute=function(e,i){var n=t._pools[e];null==n&&n.execute(i)},t}();ObjectPool._pools={},__reflect(ObjectPool.prototype,"ObjectPool");var TimerManager=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist");this._handlers={},this._currTime=egret.getTimer(),this._lastTime=this._currTime,this._totalTime=0,this._currFrame=0,this._timeScale=1,this._realRate=30,egret.MainContext.instance.stage.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setTimeScale=function(t){this._timeScale=t},t.prototype.setTimer=function(t,e,i,n,a,s,o){void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=null),void 0===o&&(o=null),this.create(t,!1,n,a,e,i,s,o)},t.prototype.setFrame=function(t,e,i,n,a,s,o){void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=null),void 0===o&&(o=null),this.create(t,!0,n,a,e,i,s,o)},t.prototype.remove=function(t){var e=this._handlers[t];null!=e&&(e.dispose(),ObjectPool.push(e),delete this._handlers[t])},Object.defineProperty(t.prototype,"realRate",{get:function(){return this._realRate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this._currFrame},enumerable:!0,configurable:!0}),t.prototype.create=function(t,e,i,n,a,s,o,r){if(!(0>i||0>n||null==a)){this.remove(t);var h=ObjectPool.pop("TimerHandler");h.userFrame=e,h.repeat=0==n,h.repeatCount=n,h.delay=i,h.method=a,h.methodObj=s,h.complateMethod=o,h.complateMethodObj=r,h.exeTime=i+(e?this._currFrame:this._currTime),h.dealTime=this._currTime,this._handlers[t]=h}},t.prototype.onEnterFrame=function(t){this._currFrame++,this._currTime=egret.getTimer(),this._totalTime+=this._currTime-this._lastTime,this._realRate=1e3*this._currFrame/this._totalTime,this._lastTime=this._currTime;var e,i;for(var n in this._handlers)e=this._handlers[n],i=e.userFrame?this._currFrame:this._currTime,i>=e.exeTime&&(e.method.call(e.methodObj,(this._currTime-e.dealTime)*this._timeScale),e.dealTime=this._currTime,e.exeTime+=e.delay,e.repeat||(e.repeatCount>1?e.repeatCount--:(e.complateMethod&&e.complateMethod.apply(e.complateMethodObj),this.remove(n))))},t}();TimerManager.instance=null,__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function t(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return t.prototype.dispose=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();__reflect(TimerHandler.prototype,"TimerHandler");var DateUtils;!function(t){function e(t,e){void 0===e&&(e=1);var i="";switch(e){case 1:i=this.getFormatBySecond1(t);break;case 2:i=this.getFormatBySecond2(t);break;case 3:i=this.getFormatBySecond3(t);break;case 4:i=this.getFormatBySecond4(t);break;case 5:i=this.getFormatBySecond5(t)}return i}function i(t){void 0===t&&(t=0);var e,i=Math.floor(t/3600);e=0==i?"00":10>i?"0"+i:""+i;var n,a,s=Math.floor((t-3600*i)/60),o=Math.floor((t-3600*i)%60);return n=0==s?"00":10>s?"0"+s:""+s,a=0==o?"00":10>o?"0"+o:""+o,e+":"+n+":"+a}function n(t){void 0===t&&(t=0);var e,i,n=Math.floor(t/3600),a=Math.floor((t-3600*n)/60),s=Math.floor((t-3600*n)%60);return e=0==a?"00":10>a?"0"+a:""+a,i=0==s?"00":10>s?"0"+s:""+s,e+":"+i}function a(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),s=e.getHours(),o=e.getMinutes(),r=e.getSeconds();return i+"-"+n+"-"+a+" "+s+":"+o+":"+r}function s(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"}function o(t){var e=86400,i=3600,n=60,a=Math.floor(t/e),s=Math.floor(t%e/i),o=Math.floor((t-s*i)/n),r=Math.floor((t-s*i)%n),h="",l="",c="",u="";return t>0?0==a?(h="",0==s?(l="",0==o?(c="",u=0==r?"":10>r?"0"+r+"秒":""+r+"秒"):(c=""+o+"分",u=0==r?"":10>r?"0"+r+"秒":""+r+"秒",c+u)):(l=s+"小时",0==o?(c="",u=0==r?"":10>r?"0"+r+"秒":""+r+"秒"):(c=10>o?"0"+o+"分":""+o+"分",l+c))):(h=a+"天",l=0==s?"":10>s?"0"+s+"小时":""+s+"小时",h+l):""}t.getFormatBySecond=e,t.getFormatBySecond1=i,t.getFormatBySecond3=n,t.getFormatBySecond2=a,t.getFormatBySecond4=s,t.getFormatBySecond5=o}(DateUtils||(DateUtils={}));var GameConfig;!function(t){function e(){var t=window.navigator.userAgent.toLowerCase(),e=""+t.match(/MicroMessenger/i);return"null"==e?!1:"micromessenger"==e?!0:void 0}function i(){return document.body.clientHeight/document.body.clientWidth>1.32}function n(){var t=window.navigator.userAgent.toLowerCase();""+t.match(/MicroMessenger/i);return""+t.match(/windows nt/i)=="windows nt"?"windows":""+t.match(/iphone/i)=="iphone"?"ios":""+t.match(/android/i)=="android"?"android":""+t.match(/ipad/i)=="ipad"?"ipad":""+t.match(/linux/i)=="linux"?"linux":""+t.match(/mac/i)=="mac"?"mac":""+t.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function a(){var t=window.navigator.userAgent.toLowerCase();return""+t.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+t.match(/qzone/i)=="qzone"?"qzone":""+t.match(/weibo/i)=="weibo"?"weibo":""+t.match(/qq/i)=="qq"?"qq":""+t.match(/renren/i)=="renren"?"renren":""+t.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+t.match(/douban/i)=="douban"?"douban":"other"}function s(){return egret.MainContext.instance.stage}function o(){return egret.MainContext.instance.stage.stageWidth}function r(){return egret.MainContext.instance.stage.stageHeight}function h(){var t=window.orientation;return 90==t?!1:!0}t.isDebug=!1,t.isOnLine=navigator.onLine,t.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},t.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},t.isWeiXin=e,t.isBigScreen=i,t.systemType=n,t.platformType=a,t.curStage=s,t.curWidth=o,t.curHeight=r,t.isVertical=h}(GameConfig||(GameConfig={}));var EffectUtils;!function(t){function e(t,e,i){void 0===i&&(i=null);var n="";t&&(n=t.text);var a=QuickManage.moneyStr2number(n);if(a!=e){new NumEffect(t,e,i)}}function i(t,e){if(void 0===e&&(e=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[t.hashCode]){null!=this.rotationArr[t.hashCode]&&this.rotationArr[t.hashCode]||(this.rotationArr[t.hashCode]=!0);var i=function(){this.rotationArr[t.hashCode]&&null!=t&&(t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this))};t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this)}}function n(t,e){void 0===e&&(e=1e3);var i=function(){egret.Tween.get(t).to({alpha:0},e).call(n)},n=function(){egret.Tween.get(t).to({alpha:1},e).call(i)};egret.Tween.get(t).to({alpha:0},e).call(n)}function a(t){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[t.hashCode]=!1}function s(t){var e=80,i=t.x;egret.Tween.get(t).to({x:t.x-10},e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,2*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},e)},this,3*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,4*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:i},e)},this,5*e)}function o(t){void 0===t&&(t=1);var e=GameConfig.curPanel,i=40,n=e.x,a=e.y;1==t?(egret.Tween.get(e).to({x:e.x-10},i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:n},i)},this,5*i)):(egret.Tween.get(e).to({x:e.x-10,y:e.y},i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20,y:e.y},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+15},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y-20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+10},i)},this,5*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:n,y:a},i)},this,6*i))}function r(t,e,i){switch(void 0===t&&(t=""),void 0===e&&(e=1),void 0===i&&(i=!1),e){case 1:TipsUtils.showTipsDownToUp(t,i);break;case 2:TipsUtils.showTipsLeftOrRight(t,i,!0);break;case 3:TipsUtils.showTipsLeftOrRight(t,i,!1);break;case 4:TipsUtils.showTipsFromCenter(t,i);break;case 5:TipsUtils.showTipsBigToSmall(t,i)}}function h(t,e){if(void 0===e&&(e=null),!this.isPlayEffectPlay){var i=t.anchorOffsetX,n=t.anchorOffsetY;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;var a=t.anchorOffsetX-i,s=t.anchorOffsetY-n;t.x+=a,t.y+=s;var o=function(){this.isPlayEffectPlay=!1,t.anchorOffsetX=i,t.anchorOffsetY=n,t.x-=a,t.y-=s,t.scaleX=1,t.scaleY=1,null!=e&&e()},r=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},100).call(o,this)};egret.Tween.get(t).to({scaleX:.8,scaleY:.8},100,egret.Ease.sineIn).call(r,this)}}function l(t,e,i){if(void 0===e&&(e=1),void 0===i&&(i=null),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var n=function(){this.isPlayEffectPlay=!1,i()},a=function(){1==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(n,this):2==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.backOut).call(n,this):3==e&&egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100).call(n,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(a,this)}}function c(t,e){void 0===e&&(e=function(){});var i=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(e,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(i,this)}function u(t,e,i){void 0===e&&(e=800),void 0===i&&(i=function(){}),t.alpha=0,t.scaleX=4,t.scaleY=4;var n=function(){i()};egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){n()},this,e)}function d(t,e){void 0===e&&(e=function(){}),t.scaleX=.1,t.scaleY=.1;var i=function(){e()};egret.Tween.get(t).to({scaleX:1,scaleY:1},800,egret.Ease.elasticOut).call(i,this)}function p(t,e,i,n,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=function(){}),void 0===a&&(a=200);var s=t.x,o=t.y;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY-10,t.parent&&t.parent.setChildIndex(t,t.parent.numChildren-1);var r=function(){egret.Tween.get(t).to({x:s,y:o},a),n()},h=function(){t.anchorOffsetX=0,t.anchorOffsetY=0,t.x-=t.width/2,t.y-=t.height/2-10,t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({x:e-10,y:i},a).call(r,this)};egret.Tween.get(t).to({scaleX:1.2,scaleY:1.2},a).call(h,this)}function g(t,e,i){void 0===e&&(e=function(){}),void 0===i&&(i=400);t.x,t.y;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY-10,t.parent&&t.parent.setChildIndex(t,t.parent.numChildren-1);var n=function(){t.anchorOffsetX=0,t.anchorOffsetY=0,t.x-=t.width/2,t.y-=t.height/2-10,t.scaleX=1,t.scaleY=1,e()};egret.Tween.get(t).to({scaleX:1.4,scaleY:1.4},i).call(n,this)}function f(t,e,i){void 0===e&&(e=800),void 0===i&&(i=function(){}),t.alpha=0,t.scaleX=4,t.scaleY=4;var n=function(){i()},a=function(){egret.Tween.get(t).to({alpha:0},800).call(n,this)};egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){a()},this,e)}function b(t){var e=function(){if(null!=t){var i=function(){t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({alpha:1},1e3).call(e,self)};t.alpha=1,egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(i,self)}};e()}function v(t,e,i){void 0===i&&(i=50);var n=function(){if(null!=t){var a=function(){egret.Tween.get(t).to({y:t.y-i},e).call(n,this)};egret.Tween.get(t).to({y:t.y+i},e).call(a,this)}};n()}function m(t,e,i){void 0===i&&(i=20);var n=function(){if(null!=t){var a=function(){egret.Tween.get(t).to({rotation:-i},e).call(n,this)};egret.Tween.get(t).to({rotation:i},e).call(a,this)}};n()}function y(t,e,i){void 0===e&&(e=""),void 0===i&&(i=200);for(var n=e.split(""),a=n.length,s=0;a>s;s++)egret.setTimeout(function(){t.appendText(n[Number(this)])},s,i*s)}function T(t,e){for(var i=[[20,300],[15,300],[10,300],[5,300]],n="egret.Tween.get("+t+")",a=0,s=i.length;s>a;a++)n+=".to({'y':"+e+"-"+i[a][0]+"}, "+i[a][1]+")",n+=".to({'y':"+e+"}, "+i[a][1]+")";return n+=";"}function E(t,e){t.alpha=1,egret.Tween.get(t).to({alpha:0},e).to({alpha:1},e).call(this.startFlicker,this,[t])}function _(t){egret.Tween.removeTweens(t)}function M(t,e,i,n,a){void 0===n&&(n=140),void 0===a&&(a=64);var s=0,o=0,r=function(){if(o>8)return clearInterval(s),void(o=0);o++;var r=new eui.Image("gold");r.x=e,r.y=i,r.scaleX=.6,r.scaleY=.6,t.addChild(r),egret.Tween.get(r).to({x:n,y:a,scaleX:1.1,scaleY:1.1},600).wait(100).call(function(){t.removeChild(r)},[t,r])};s=setInterval(r.bind(this),100)}t.numEffect=e,t.rotationEffect=i,t.blinkEffect=n,t.removeRotationEffect=a,t.shakeObj=s,t.shakeScreen=o,t.showTips=r,t.playButtonEffect=h;t.playEffect=l,t.playEffect2=c,t.playEffect3=u,t.playEffect4=d,t.playRoleActionEffect1=p,t.playRoleActionEffect2=g,t.playEffect5=f,t.playScaleEffect=b,t.flyObj=v,t.rockObj=m,t.typerEffect=y,t.macIconShake=T,t.startFlicker=E,t.stopFlicker=_,t.coinsFly=M}(EffectUtils||(EffectUtils={}));var Global;!function(t){function e(t,e,i,n){return void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1),new lcp.LEvent(t,e,i,n)}function i(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var a=new lcp.LEvent(t,e,i,n);lcp.LListener.getInstance().dispatchEvent(a)}function n(t,e,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=0),lcp.LListener.getInstance().addEventListener(t,e,i,n,a)}function a(t,e,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=0),lcp.LListener.getInstance().removeEventListener(t,e,i,n)}function s(t){}function o(t){void 0===t&&(t=!1),t?(window.rootContainer.rotation=90,window.rootContainer.x=egret.MainContext.instance.stage.stageWidth):(window.rootContainer.rotation=0,window.rootContainer.x=0)}function r(t,e,i,n){void 0===t&&(t=""),void 0===e&&(e=""),void 0===i&&(i=null),void 0===n&&(n=1),null==this._alert}function h(t,e,i,n,a){void 0===t&&(t=""),void 0===e&&(e=""),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=1),null==this._alert}function l(){null!=this._alert&&(this._alert=null)}function c(){}function u(){null!=this._share&&(this._share=null)}t.Event=e,t.dispatchEvent=i,t.addEventListener=n,t.removeEventListener=a,t.shareUtils=s,t.rotationResize=o,t.alert=r,t.confirm=h,t.closeAlertPanel=l,t.share=c,t.closeSharePanel=u}(Global||(Global={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var n=Array(16),a=Array(16),s=0;16>s;s++)n[s]=909522486^i[s],a[s]=1549556828^i[s];var o=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(a.concat(o),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",s=0;s<t.length;s++)i=t.charCodeAt(s),a+=n.charAt(i>>>4&15)+n.charAt(15&i);return a},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",a=t.length,s=0;a>s;s+=3)for(var o=t.charCodeAt(s)<<16|(a>s+1?t.charCodeAt(s+1)<<8:0)|(a>s+2?t.charCodeAt(s+2):0),r=0;4>r;r++)n+=8*s+6*r>8*t.length?this.b64pad:i.charAt(o>>>6*(3-r)&63);return n},t.prototype.rstr2any=function(t,e){var i,n,a,s,o,r=e.length,h=Array(Math.ceil(t.length/2));for(i=0;i<h.length;i++)h[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(l);for(n=0;l>n;n++){for(o=Array(),s=0,i=0;i<h.length;i++)s=(s<<16)+h[i],a=Math.floor(s/r),s-=a*r,(o.length>0||a>0)&&(o[o.length]=a);c[n]=s,h=o}var u="";for(i=c.length-1;i>=0;i--)u+=e.charAt(c[i]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",a=-1;++a<t.length;)e=t.charCodeAt(a),i=a+1<t.length?t.charCodeAt(a+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),a++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,a=-1732584194,s=271733878,o=0;o<t.length;o+=16){var r=i,h=n,l=a,c=s;i=this.md5_ff(i,n,a,s,t[o+0],7,-680876936),s=this.md5_ff(s,i,n,a,t[o+1],12,-389564586),a=this.md5_ff(a,s,i,n,t[o+2],17,606105819),n=this.md5_ff(n,a,s,i,t[o+3],22,-1044525330),i=this.md5_ff(i,n,a,s,t[o+4],7,-176418897),s=this.md5_ff(s,i,n,a,t[o+5],12,1200080426),a=this.md5_ff(a,s,i,n,t[o+6],17,-1473231341),n=this.md5_ff(n,a,s,i,t[o+7],22,-45705983),i=this.md5_ff(i,n,a,s,t[o+8],7,1770035416),s=this.md5_ff(s,i,n,a,t[o+9],12,-1958414417),a=this.md5_ff(a,s,i,n,t[o+10],17,-42063),n=this.md5_ff(n,a,s,i,t[o+11],22,-1990404162),i=this.md5_ff(i,n,a,s,t[o+12],7,1804603682),s=this.md5_ff(s,i,n,a,t[o+13],12,-40341101),a=this.md5_ff(a,s,i,n,t[o+14],17,-1502002290),n=this.md5_ff(n,a,s,i,t[o+15],22,1236535329),i=this.md5_gg(i,n,a,s,t[o+1],5,-165796510),s=this.md5_gg(s,i,n,a,t[o+6],9,-1069501632),a=this.md5_gg(a,s,i,n,t[o+11],14,643717713),n=this.md5_gg(n,a,s,i,t[o+0],20,-373897302),i=this.md5_gg(i,n,a,s,t[o+5],5,-701558691),s=this.md5_gg(s,i,n,a,t[o+10],9,38016083),a=this.md5_gg(a,s,i,n,t[o+15],14,-660478335),n=this.md5_gg(n,a,s,i,t[o+4],20,-405537848),i=this.md5_gg(i,n,a,s,t[o+9],5,568446438),s=this.md5_gg(s,i,n,a,t[o+14],9,-1019803690),a=this.md5_gg(a,s,i,n,t[o+3],14,-187363961),n=this.md5_gg(n,a,s,i,t[o+8],20,1163531501),i=this.md5_gg(i,n,a,s,t[o+13],5,-1444681467),s=this.md5_gg(s,i,n,a,t[o+2],9,-51403784),a=this.md5_gg(a,s,i,n,t[o+7],14,1735328473),n=this.md5_gg(n,a,s,i,t[o+12],20,-1926607734),i=this.md5_hh(i,n,a,s,t[o+5],4,-378558),s=this.md5_hh(s,i,n,a,t[o+8],11,-2022574463),a=this.md5_hh(a,s,i,n,t[o+11],16,1839030562),n=this.md5_hh(n,a,s,i,t[o+14],23,-35309556),i=this.md5_hh(i,n,a,s,t[o+1],4,-1530992060),s=this.md5_hh(s,i,n,a,t[o+4],11,1272893353),a=this.md5_hh(a,s,i,n,t[o+7],16,-155497632),n=this.md5_hh(n,a,s,i,t[o+10],23,-1094730640),i=this.md5_hh(i,n,a,s,t[o+13],4,681279174),s=this.md5_hh(s,i,n,a,t[o+0],11,-358537222),a=this.md5_hh(a,s,i,n,t[o+3],16,-722521979),n=this.md5_hh(n,a,s,i,t[o+6],23,76029189),i=this.md5_hh(i,n,a,s,t[o+9],4,-640364487),s=this.md5_hh(s,i,n,a,t[o+12],11,-421815835),a=this.md5_hh(a,s,i,n,t[o+15],16,530742520),n=this.md5_hh(n,a,s,i,t[o+2],23,-995338651),i=this.md5_ii(i,n,a,s,t[o+0],6,-198630844),s=this.md5_ii(s,i,n,a,t[o+7],10,1126891415),a=this.md5_ii(a,s,i,n,t[o+14],15,-1416354905),n=this.md5_ii(n,a,s,i,t[o+5],21,-57434055),i=this.md5_ii(i,n,a,s,t[o+12],6,1700485571),s=this.md5_ii(s,i,n,a,t[o+3],10,-1894986606),a=this.md5_ii(a,s,i,n,t[o+10],15,-1051523),n=this.md5_ii(n,a,s,i,t[o+1],21,-2054922799),i=this.md5_ii(i,n,a,s,t[o+8],6,1873313359),s=this.md5_ii(s,i,n,a,t[o+15],10,-30611744),a=this.md5_ii(a,s,i,n,t[o+6],15,-1560198380),n=this.md5_ii(n,a,s,i,t[o+13],21,1309151649),i=this.md5_ii(i,n,a,s,t[o+4],6,-145523070),s=this.md5_ii(s,i,n,a,t[o+11],10,-1120210379),a=this.md5_ii(a,s,i,n,t[o+2],15,718787259),n=this.md5_ii(n,a,s,i,t[o+9],21,-343485551),i=this.safe_add(i,r),n=this.safe_add(n,h),a=this.safe_add(a,l),s=this.safe_add(s,c)}return[i,n,a,s]},t.prototype.md5_cmn=function(t,e,i,n,a,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,s)),a),i)},t.prototype.md5_ff=function(t,e,i,n,a,s,o){return this.md5_cmn(e&i|~e&n,t,e,a,s,o)},t.prototype.md5_gg=function(t,e,i,n,a,s,o){return this.md5_cmn(e&n|i&~n,t,e,a,s,o)},t.prototype.md5_hh=function(t,e,i,n,a,s,o){return this.md5_cmn(e^i^n,t,e,a,s,o)},t.prototype.md5_ii=function(t,e,i,n,a,s,o){return this.md5_cmn(i^(e|~n),t,e,a,s,o)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var NativeApi;!function(t){function e(t,e){egret.localStorage.setItem(t,e)}function i(t){return egret.localStorage.getItem(t)}function n(t){egret.localStorage.removeItem(t)}function a(){egret.localStorage.clear()}function s(e){if("undefined"!=typeof FileReader&&/image/i.test(e.type)){var i=new FileReader;i.onload=function(){alert("数据读取完成");var e=document.getElementById("result");e.innerHTML='<img id="photoImg" src="'+this.result+'" alt="" />';var i=new egret.Texture;t.srcImg.texture=i},i.readAsDataURL(e)}}function o(t){"undefined"!=typeof t&&t.length>0?s(t[0]):alert("抱歉！当前系统不支持此功能！")}function r(t){}function h(){}function l(){}function c(t){window.open("tel:"+t,"_self")}function u(t){window.open("sms:"+t,"_self")}function d(){return window.location.href}function p(t){void 0===t&&(t=!1)}function g(){}t.setLocalData=e,t.getLocalData=i,t.deleteLocalData=n,t.clearLocalData=a,t.srcImg=new egret.Bitmap,t.uploadFile=s,t.traverseFiles=o,t.fileUpload=r,t.getMic=h,t.getScreen=l,t.callPhone=c,t.sendMessage=u,t.getCurUrl=d,t.showVerticalTips=p,t.removeVerticalTips=g}(NativeApi||(NativeApi={}));var RandomUtils=function(){function t(){}return t.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var i=e-t;return t+Math.random()*i},t.limitInteger=function(t,e){return Math.round(this.limit(t,e))},t.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t.randomArray2=function(t){var e=Math.floor(Math.random()*t.length),i=t[e];return t.splice(e,1),i},t}();__reflect(RandomUtils.prototype,"RandomUtils");var RegUtils;!function(t){function e(t){var e=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return e.test(t)?!0:(alert("您输入的Email地址格式不正确！"),!1)}function i(t){if(s(t))return!1;var e=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return e.test(t)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function n(t){var e="/^[1][3][0-9]{9}$/",i=new RegExp(e);return i.test(t)?!0:!1}function a(t){var e=/^[0][1-9]{2,3}-[0-9]{5,10}$/,i=/^[1-9]{1}[0-9]{5,8}$/,n="您输入的电话号码不正确!";return t.length>9?e.test(t)?!0:(alert(n),!1):i.test(t)?!0:(alert(n),!1)}function s(t){if(""==t)return!0;var e="^[ ]+$",i=new RegExp(e);return i.test(t)}function o(t){var e=/^[-]{0,1}[0-9]{1,}$/;return e.test(t)}function r(t){var e="^[0-9]+$",i=new RegExp(e);return-1!=t.search(i)?!0:!1}function h(t){var e="^[0-9]+[.][0-9]{0,3}$",i=new RegExp(e);return i.test(t)?!0:!1}function l(t,e){var i=" ",n=-1;if(0==e||1==e){for(;" "==i;)++n,i=t.substr(n,1);t=t.substring(n)}if(0==e||2==e){for(i=" ",n=t.length;" "==i;)--n,i=t.substr(n,1);t=t.substring(0,n+1)}return t}t.checkEmail=e,t.isIP=i,t.checkMobile=n,t.checkPhone=a,t.isNull=s,t.isInteger=o,t.isNumber=r,t.isMoney=h,t.cTrim=l}(RegUtils||(RegUtils={}));var BitmapBlink=function(t){function e(e,i,n){void 0===n&&(n=!0);var a=t.call(this)||this;return a._target=e,a._time=i,n&&a.start(),a}return __extends(e,t),e.prototype.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},e.prototype.runDown=function(t){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},e.prototype.runUp=function(t){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},e.prototype.checkOver=function(){var t=egret.getTimer();return t-this._currTime>=this._time?(this.destroy(),!0):!1},e.prototype.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},e}(egret.EventDispatcher);__reflect(BitmapBlink.prototype,"BitmapBlink");var lcp;!function(t){var e=function(t){function e(e,i,n,a){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===a&&(a=!1);var s=t.call(this,e,n,a)||this;return s.CLASS_NAME="LEvent",i&&(s._obj=i),s}return __extends(e,t),e.prototype.clone=function(t){return new e(this.type,t?t:this._obj,this.bubbles,this.cancelable)},e.prototype.toString=function(){console.log(this.CLASS_NAME,"type","bubbles","cancelable")},Object.defineProperty(e.prototype,"param",{get:function(){return this._obj},enumerable:!0,configurable:!0}),e}(egret.Event);t.LEvent=e,__reflect(e.prototype,"lcp.LEvent")}(lcp||(lcp={}));var lcp;!function(t){var e=function(){function t(){this.CLASS_NAME="LListener",this.isInit=!1,this.isInit,null==this._dispatcher&&(this._dispatcher=new egret.EventDispatcher,this.isInit=!0)}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.addEventListener=function(t,e,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=0),this._dispatcher.addEventListener(t,e,i,n,a)},t.prototype.removeEventListener=function(t,e,i,n){void 0===n&&(n=!1),this._dispatcher.removeEventListener(t,e,i,n)},t.prototype.hasEventListener=function(t){return this._dispatcher.hasEventListener(t)},t.prototype.willTrigger=function(t){return this._dispatcher.willTrigger(t)},t.prototype.dispatchEvent=function(t){return this._dispatcher.dispatchEvent(t)},t.prototype.toString=function(){return this._dispatcher.toString()},t}();t.LListener=e,__reflect(e.prototype,"lcp.LListener")}(lcp||(lcp={}));var TipsUtils;!function(t){function e(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,e?i.textColor=GameConfig.TextColors.green:i.textColor=GameConfig.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,PanelManage.tipsLayer.contains(i)||PanelManage.tipsLayer.addChild(i);var n=function(){PanelManage.tipsLayer.contains(i)&&(PanelManage.tipsLayer.removeChild(i),i=null)},a=function(){egret.Tween.get(i).to({alpha:0},1e3).call(n,this)};i.visible=!0,egret.Tween.get(i).to({y:i.y-120,alpha:1},800,egret.Ease.backOut).call(a,this)}function i(t,e,i){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===i&&(i=!0);var n=new egret.TextField;n.size=24,n.y=GameConfig.curHeight()/2,e?n.textColor=GameConfig.TextColors.red:n.textColor=GameConfig.TextColors.green,n.alpha=0,n.text=t,n.strokeColor=0,i?n.x=-n.width:n.x=GameConfig.curWidth(),n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER,PanelManage.tipsLayer.contains(n)||PanelManage.tipsLayer.addChild(n);
i?egret.Tween.get(n).to({x:GameConfig.curWidth()/2-n.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(n).to({x:GameConfig.curWidth()/2-n.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){i?egret.Tween.get(n).to({x:n.x+100},500):egret.Tween.get(n).to({x:n.x-100},500)},this,300),egret.setTimeout(function(){i?egret.Tween.get(n).to({x:GameConfig.curWidth()},300,egret.Ease.sineIn):egret.Tween.get(n).to({x:-n.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){},this,1100)}function n(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,e?i.textColor=GameConfig.TextColors.red:i.textColor=GameConfig.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,i.scaleX=0,i.scaleY=0,PanelManage.tipsLayer.contains(i)||PanelManage.tipsLayer.addChild(i);var n=function(){PanelManage.tipsLayer.contains(i)&&(PanelManage.tipsLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(n,this)},this,2e3)}function a(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=30,i.y=GameConfig.curHeight()/2,e?i.textColor=16756264:i.textColor=16756264,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,i.scaleX=4,i.scaleY=4,PanelManage.tipsLayer.contains(i)||PanelManage.tipsLayer.addChild(i);var n=function(){PanelManage.tipsLayer.contains(i)&&(PanelManage.tipsLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(n,this)},this,1e3)}t.showTipsDownToUp=e,t.showTipsLeftOrRight=i,t.showTipsFromCenter=n,t.showTipsBigToSmall=a}(TipsUtils||(TipsUtils={}));var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){egret.MainContext.deviceType==egret.MainContext.DEVICE_PC&&(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL),t.prototype.createChildren.call(this);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),GlobalData.isDebug?RES.loadConfig(GlobalData.cdnResUrl+"resource/default.res.json?v="+GlobalData.version,GlobalData.cdnResUrl+"resource/"):RES.loadConfig(GlobalData.cdnResUrl+"resource/release.res.json?v="+GlobalData.version,GlobalData.cdnResUrl+"resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme(GlobalData.cdnResUrl+"resource/default.thm.json?v="+GlobalData.version,this.stage);e.addEventListener(egret.Event.COMPLETE,this.themComplete.bind(this),this),this.createScene()},e.prototype.themComplete=function(){RES.loadGroup("loading"),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName?(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)):"loading"==t.groupName&&(this.loadingView=new LoadingUI,this.euiLayer.addChild(this.loadingView),RES.loadGroup("preload"))},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createScene=function(){this.gameLayer=new egret.DisplayObjectContainer,this.addChild(this.gameLayer),this.euiLayer=new eui.UILayer,this.addChild(this.euiLayer),this.tipsLayer=new egret.DisplayObjectContainer,this.addChild(this.tipsLayer),PanelManage.gameLayer=this.gameLayer,PanelManage.euiLayer=this.euiLayer,PanelManage.tipsLayer=this.tipsLayer,PanelManage.tipsLayer.touchEnabled=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playMusicOnce,this)},e.prototype.playMusicOnce=function(){MusicManage.initMusic(),GlobalData.isDebug||MusicManage.playBgMuisc(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playMusicOnce,this)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?n(a):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var JSSDK=function(){function t(){this.CLASS_NAME="JSSDK"}return t.prototype.init=function(){var t=GlobalData.configData,e=location.href.split("#")[0];this.title="皇家电玩城给你非凡享受",this.desc="皇家电玩城给你非凡享受",this.link=t.data.linkhall+"?yid="+GlobalData.account,this.imgUrl=t.data.imgurl,this.url=t.data.shareurl,window.getShareInfo(this.url+"?url="+encodeURIComponent(e),{},this.getSignPackage.bind(this))},t.prototype.setTitle=function(){var t=GlobalData.configData;this.title="皇家电玩城给你非凡享受",this.desc="皇家电玩城给你非凡享受",this.link=t.data.linkhall+"?yid="+GlobalData.account,this.imgUrl=t.data.imgurl;var e=location.href.split("#")[0];this.url=t.data.shareurl,window.getShareInfo(this.url+"?url="+encodeURIComponent(e),{},this.getSignPackage.bind(this))},t.prototype.getSignPackage=function(t){this.signPackage=JSON.parse(t),window.setWxConfig(this.signPackage),window.setShare(this.title,this.desc,this.imgUrl,this.link)},t}();__reflect(JSSDK.prototype,"JSSDK");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.tt=0,e.arr=["新玩法欢乐21点,每日送出上万点券","首冲豪送千万金币","每天在线1小时,能够抽奖","开服起，每分钟都会有几率发送系统红包,请注意抢红包哦","提游戏建议和BUG,采纳会发放50W金币哦","邀请好友送点券，送大礼"],e.skinName="resource/skins/other/LoadingPanelSkin.exml",e.set(),e}return __extends(e,t),e.prototype.set=function(){this.bg.source=GlobalData.cdnResUrl+"resource/assets/noload/loadingbg.jpg",this.t3.source=GlobalData.cdnResUrl+"resource/assets/noload/t3.png",this.loadingtip.source=GlobalData.cdnResUrl+"resource/assets/noload/loadingtip.png"},e.prototype.childrenCreated=function(){window.hideDiv(),this.setTouchEnabled(),this.init(),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.CREATE_ROLE,this.connectSucc.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.HIDE_LOADING_TXT,this.hideTxt.bind(this)),this.loadingtip.visible=!0,egret.Tween.get(this.t3).to({alpha:0,y:700},2e3).call(this.play1.bind(this)),this.txtTishi.text=RandomUtils.randomArray(this.arr)},e.prototype.hideTxt=function(){if(this.loadingtip.visible=!1,GlobalData.user=new UserInfo,GlobalData.userfrom==PlatformData.USER_FROM_WEIXIN)if(window.isWeiXin()){var t=JSON.parse(localStorage.getItem("wxopeniddata"));GlobalData.openid=t.openid,GlobalData.user.nickname=t.nickname,GlobalData.user.headurl=t.headimgurl,GlobalData.user.sex=t.sex+"",Net.login()}else this.autoLogin()},e.prototype.autoLogin=function(){GlobalData.openid=localStorage.getItem("uuid"),GlobalData.user.headurl="http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46",GlobalData.user.sex="0",Net.login()},e.prototype.play1=function(){this.tt=egret.setTimeout(this.play2.bind(this),this,1e3),this.txtTishi.text=RandomUtils.randomArray(this.arr)},e.prototype.play2=function(){egret.clearTimeout(this.tt),this.t3.y=720,egret.Tween.get(this.t3).to({alpha:1},300).call(this.play3.bind(this))},e.prototype.play3=function(){this.txtTishi.text=RandomUtils.randomArray(this.arr),egret.clearTimeout(this.tt),egret.Tween.get(this.t3).to({alpha:0,y:700},2e3).call(this.play1.bind(this))},e.prototype.connectSucc=function(t){console.log(JSON.stringify(t.param)),GlobalData.isSign=t.param.sign,GlobalData.user.nickname=t.param.name,GlobalData.user.gold=t.param.gold,GlobalData.account=t.param.account,GlobalData.user.headurl=t.param.headurl,GlobalData.user.quan=t.param.quan,GlobalData.user.vip=t.param.vip,GlobalData.user.taskstate=t.param.taskstate,GlobalData.user.emailstate=t.param.emailstate,GlobalData.user.isOneLogin=t.param.isOneLogin,GlobalData.user.hasRecharge=t.param.hasRecharge,GlobalData.user.sex=t.param.sex,GlobalData.isComplete=!0,this.loadingtip.visible=!1;var e=GlobalData.user.headurl.split("_")[0];("nan"==e||"nv"==e)&&(GlobalData.user.headurl=GlobalData.configData.data.headurl+GlobalData.user.headurl+".png"),GlobalData.isLoadingResCom&&(this.dispose(),GameManage.init())},e.prototype.setProgress=function(t,e){var i=t/e*100;this.txtTips.text=Math.floor(i)+"%",this.bar.width=441*t/e,this.bar.x=104,t==e&&(GlobalData.isLoadingResCom=!0,GlobalData.isComplete&&(this.dispose(),GameManage.init()))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.init=function(){0==GlobalData.isDebug&&(GlobalData.connectIP=GlobalData.configData.data.connectIP),Net.connectServer(),GlobalData.isLoadingResCom=!1},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI",["fany.IDispose"]);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function a(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ActivityItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/activity/ActivityItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.txtStr.text=t.stt,this.icon.source=t.state},e.prototype.click=function(t){t?"hd.selected"!=this.bg.source&&(this.bg.source="hd.selected"):"hd.noselect"!=this.bg.source&&(this.bg.source="hd.noselect")},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ActivityItemPanel.prototype,"ActivityItemPanel",["fany.IDispose"]);var ErrorMessage;!function(t){function e(t){switch(t){case"204":return"账号不存在";case"211":return"用户名已注册";case"212":return"密码错误";case"213":return"已修改过昵称";case"301":return"请求参数错误";case"302":return"已经在游戏中";case"303":return"不在游戏中";case"304":return"已超过最大下注金额！";case"305":return"下注金币为0 出错";case"306":return"下注编号错误";case"307":return"庄家不能下注";case"308":return"已经上庄过了";case"309":return"并未上庄过";case"310":return"封盘停止下注";case"311":return"下局将不是庄";case"312":return"座位上有人了";case"313":return"座位未找到";case"314":return"抱歉，下注后不能发红包";case"315":return"当前您是庄家不可以发红包";case"316":return"您的余额不足，请充值后再发红包";case"318":return"您已经有座位了";case"319":return"VIP等级不够";case"320":return"消息发送频繁";case"321":return"缺少比武卡,请在商城购买";case"322":return"游戏密码错误";case"323":return"已经出拳";case"324":return"游戏人数不足";case"325":return"您处于排庄列表，不可坐下";case"326":return"你下注的金额超过庄家接受的上限";case"327":return"操作太频繁！";case"328":return"游戏次数不足！";case"401":return"VIP等级不够";case"402":return"已经发布打赏";case"403":return"没有摇钱树";case"404":return"没有足够的金币";case"405":return"没有足够的点卷";case"406":return"未找到";case"407":return"未完成";case"408":return"已获取";case"409":return"请求参数错误";case"410":return"金币不足存入";case"411":return"银行不足取出";case"412":return"金币不足";case"413":return"打赏过期";case"414":return"游戏中不能存入";case"420":return"当前不可以领取救济金";case"422":return"未购买";case"423":return"已经领取过";case"424":return"已经过期";case"425":return"奖品不存在";case"426":return"不在抽奖时间内";case"427":return"金币不足";case"428":return"没有抽奖次数";case"429":return"当前库存无奖券";case"431":return"今天提交意见次数已满，感谢您明天再来提交意见！";case"433":return"充值后便可以参与大转盘抽奖了！";case"434":return"您的抽奖次数已经用完！";case"436":return"您已经领取了奖励！";case"501":return"没有此房间！";case"504":return"房间人数已满！";case"512":return"您的金币不能进入当前倍率的房间！";case"514":return"游戏中不能修改底分！";case"436":return"您已经领取了奖励！";case"601":return"竞猜未开始！";case"602":return"竞猜已结束！";case"603":return"竞猜已下注！";case"604":return"金币不足！";case"605":return"没有这个竞猜！";case"701":return"游戏已结束！";default:return"返回提示错误代码："+t}}t.errorMsg=e}(ErrorMessage||(ErrorMessage={}));var AwardItem=function(t){function e(){var e=t.call(this)||this;return e._id="",e.skinName="resource/skins/award/AwardItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnTouch,egret.TouchEvent.TOUCH_TAP,this.onTouchExchange.bind(this))},e.prototype.setData=function(t,e){1==e?this.setExchange(t):2==e?this.setSelfRecord(t):3==e&&this.setAllRecord(t)},e.prototype.setExchange=function(t){this.grpExchange.visible=!0,this.grpRecord.visible=!1,this.labTitle.text=t.name,this.labInfo.text=t.desc,this.labGold.text=QuickManage.moneyStr(t.need_count),this.imgGift.source=GlobalData.cdnResUrl+"resource/assets/noload/icon/"+t.icon+".png",this._id=t._id},e.prototype.setAllRecord=function(t){this.grpExchange.visible=!1,this.grpRecord.visible=!0,this.labRecordInfo.text="vip"+t.vip+"玩家"+t.name+"兑换了"+t.award,this.labRecordTime.text=new Date(t.time).toLocaleString()},e.prototype.setSelfRecord=function(t){this.grpExchange.visible=!1,this.grpRecord.visible=!0,this.labRecordInfo.text="兑换了"+t.award,this.labRecordTime.text=new Date(t.time).toLocaleString()},e.prototype.onTouchExchange=function(){Net.send(Protocol.HALL_GIFT_EXCHANGE,{giftId:this._id},this.exchangeCB.bind(this))},e.prototype.exchangeCB=function(t){200==t.code?(lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.GIFT_ON_EXCHANGE,t.data)),TipsManage.showTips("兑换奖品成功！")):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(AwardItem.prototype,"AwardItem",["fany.IDispose"]);var AwardPanel=function(t){function e(){var e=t.call(this)||this;return e.giftArr=[],e.awardArr=[],e.curSelectAward="",e.skinName="resource/skins/award/AwardPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){for(var t=0;6>t;t++)EventManage.addEvent(this,this["game"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchGame.bind(this,t));EventManage.addButtonEvent(this,this.btnExchange,egret.TouchEvent.TOUCH_TAP,this.onTouchExchange.bind(this)),EventManage.addButtonEvent(this,this.btnMyGift,egret.TouchEvent.TOUCH_TAP,this.onTouchMyGift.bind(this)),EventManage.addButtonEvent(this,this.btnRecord,egret.TouchEvent.TOUCH_TAP,this.onTouchRecord.bind(this)),EventManage.addButtonEvent(this,this.tipsBtnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchTipsclose.bind(this)),EventManage.addButtonEvent(this,this.subBtnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchSecondClose.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnSureBuy,egret.TouchEvent.TOUCH_TAP,this.onTouchSureBuy.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.GIFT_ON_EXCHANGE,this.updateDataTicket.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.updateDataGold.bind(this)),Net.send(Protocol.HALL_GIFT_LOTTERY_INFO,{},this.init.bind(this)),EventManage.addButtonEvent(this,this.btnAddress,egret.TouchEvent.TOUCH_TAP,this.btnAddressOpen.bind(this,!0)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.btnAddressOpen.bind(this,!1)),EventManage.addEvent(this,this.bggGrp,egret.TouchEvent.TOUCH_TAP,this.bggGrpHide.bind(this,!1)),EventManage.addEvent(this,this.bggGrp1,egret.TouchEvent.TOUCH_TAP,this.bggGrp1Hide.bind(this,!1))},e.prototype.bggGrpHide=function(){this.grpSecond.visible=!1},e.prototype.bggGrp1Hide=function(){this.grpTips.visible=!1},e.prototype.btnAddressOpen=function(t){this.addressGroup.visible=t,this.scroll.visible=!t,0==t?Net.send(Protocol.UPDATE_ADDRESS,{address:this.txtName.text+"&"+this.txtPhone.text+"&"+this.txtAddress.text},this.updateSucc.bind(this)):Net.send(Protocol.GET_ADDRESS,{},this.getAddressSucc.bind(this))},e.prototype.getAddressSucc=function(t){if(200==t.code){if(""!=t.address){var e=t.address.split("&");this.txtName.text=e[0],this.txtPhone.text=e[1],this.txtAddress.text=e[2]}}else TipsManage.showTips(JSON.stringify(t))},e.prototype.updateSucc=function(t){200==t.code?(TipsManage.showTips("修改成功！"),this.addressGroup.visible=!1,this.scroll.visible=!0):TipsManage.showTips(JSON.stringify(t))},e.prototype.initData=function(){this.giftArr=[{name:"喜从天降",gold:2e3},{name:"时来运转",gold:2e3},{name:"财运亨通",gold:2e3},{name:"鸿运当头",gold:5e3},{name:"好运连连",gold:5e3},{name:"天降财神",gold:8888}],this.grpSecond.visible=!1,this.grpTips.visible=!1,this.labGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold))},e.prototype.updateDataGold=function(){this.labGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold))},e.prototype.init=function(t){if(200==t.code){this.initData(),this.labShop.text="剩余库存:"+t.data.shopticket,this.labUser.text=t.data.userticket,this.awardArr=t.data.awardArr;for(var e=0;6>e;e++)this["labMoney"+e].text=QuickManage.moneyStr(this.awardArr[e].gold),this["game"+e].name=this.awardArr[e]._id}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.updateDataTicket=function(t){this.labUser.text=t.param.userticket},e.prototype.onTouchGame=function(t){this.grpTips.visible=!0,this.grpTipsInfo.text="花费"+QuickManage.moneyStr(this.awardArr[t].gold)+"金币购买?",this.grpTipsTitle.text=this.giftArr[t].name,this.curSelectAward=this["game"+t].name},e.prototype.onTouchSureBuy=function(){console.log("onTouchSure to buy!"),Net.send(Protocol.HALL_GIFT_GET_LOTTERY,{drawId:this.curSelectAward},this.onTouchBuyCB.bind(this))},e.prototype.onTouchBuyCB=function(t){200==t.code?(0==t.data.count?TipsManage.showTips("抱歉您没有抽中奖券！"):TipsManage.showTips("抽中"+QuickManage.moneyStr(t.data.count)+"张奖券"),this.labShop.text="剩余库存:"+t.data.shopticket,this.labUser.text=t.data.userticket,this.grpTips.visible=!1,GlobalData.user.gold=t.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchExchange=function(){this.addressGroup.visible=!1,this.scroll.visible=!0,this.grpSecond.visible=!0,this.subImgTitle.source="award.title0",Net.send(Protocol.HALL_GIFT_LIST,{},this.exchangeCB.bind(this))},e.prototype.exchangeCB=function(t){200==t.code?this.setItem(t.data,1):ErrorMessage.errorMsg(t.msg)},e.prototype.onTouchMyGift=function(){this.grpSecond.visible=!0,this.subImgTitle.source="award.title1",Net.send(Protocol.HALL_GIFT_SELF_RECORD,{},this.myGiftCB.bind(this))},e.prototype.myGiftCB=function(t){200==t.code?this.setItem(t.data,2):ErrorMessage.errorMsg(t.msg)},e.prototype.onTouchRecord=function(){this.addressGroup.visible=!1,this.scroll.visible=!0,this.grpSecond.visible=!0,this.subImgTitle.source="award.title2",Net.send(Protocol.HALL_GIFT_ALL_RECORD,{},this.recordCB.bind(this))},e.prototype.recordCB=function(t){200==t.code?this.setItem(t.data,3):ErrorMessage.errorMsg(t.msg)},e.prototype.onTouchTipsclose=function(){this.grpTips.visible=!1},e.prototype.onTouchSecondClose=function(){for(;this.subGrpContent.numChildren>0;){var t=this.subGrpContent.removeChildAt(0);t.dispose()}this.clearItems(),this.grpSecond.visible=!1},e.prototype.setItem=function(t,e){for(var i=0;i<t.length;i++){var n=ObjManage.getObj("AwardItem");n.y=i*n.height,this.subGrpContent.addChild(n),n.setData(t[i],e)}},e.prototype.clearItems=function(){for(;this.subGrpContent.numChildren>0;)ObjManage.addObj("AwardPanel",this.subGrpContent.removeChildAt(0));this.subGrpContent.scrollV=0},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(AwardPanel.prototype,"AwardPanel",["fany.IDispose"]);var BlackJackItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/blackjack/BlackJackItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.txtName.text=t.name,this.txtRank.text=t.rank,this.txtScore.text=t.toScore},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(BlackJackItemPanel.prototype,"BlackJackItemPanel",["fany.IDispose"]);var BlackJackPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.cardArr=[[],[],[],[]],i.cardXArr=[70,216,362,507],i.cardBaseY=600,i.cardIncrementalY=40,i.cardBackArr=[],i.cardBackNum=9,i.isCanTouchBox=!1,i.lastCardNumber=0,i.curSelectIndex=0,i.isGaming=!1,i.tt=0,i.current=0,i.ii=0,i.skinName="resource/skins/blackjack/BlackJackSkin.exml",i.r=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnStart,egret.TouchEvent.TOUCH_TAP,this.onTouchStart.bind(this)),EventManage.addButtonEvent(this,this.btnLing,egret.TouchEvent.TOUCH_TAP,this.btnLingHandle.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.exitGame.bind(this)),EventManage.addButtonEvent(this,this.btnStart1,egret.TouchEvent.TOUCH_TAP,this.startGame.bind(this,1e3)),EventManage.addButtonEvent(this,this.btnStart2,egret.TouchEvent.TOUCH_TAP,this.startGame.bind(this,1e4)),EventManage.addButtonEvent(this,this.btnStart3,egret.TouchEvent.TOUCH_TAP,this.startGame.bind(this,1e5)),EventManage.addEvent(this,this.selectBox0,egret.TouchEvent.TOUCH_TAP,this.onTouchSelectBox.bind(this,0)),EventManage.addEvent(this,this.selectBox1,egret.TouchEvent.TOUCH_TAP,this.onTouchSelectBox.bind(this,1)),EventManage.addEvent(this,this.selectBox2,egret.TouchEvent.TOUCH_TAP,this.onTouchSelectBox.bind(this,2)),EventManage.addEvent(this,this.selectBox3,egret.TouchEvent.TOUCH_TAP,this.onTouchSelectBox.bind(this,3)),EventManage.addEvent(this,this.mcGroup,egret.TouchEvent.TOUCH_TAP,this.closeMcGroup.bind(this,3)),this.initData(this.r),Net.send(Protocol.BLACK_JACK_RANK,{},this.rankCallback.bind(this)),this.mcGroup.visible=!1,TimerManager.getInstance().setFrame("GameMainPanel.noticeMoveHandler",this.gogo.bind(this),this,300),MusicManage.playGameBgMuisc("bj.bg",.5,-1)},e.prototype.gogo=function(){Net.send(Protocol.BLACK_JACK_RANK,{},this.rankCallback.bind(this))},e.prototype.closeMcGroup=function(){clearTimeout(this.tt),this.mcGroup.visible=!1},e.prototype.btnLingHandle=function(){Net.send(Protocol.BLACK_JACK_REWARD,{},this.lingCallback.bind(this))},e.prototype.lingCallback=function(t){200==t.code?-1==parseInt(""+t.win.gold)?TipsManage.showTips("今天已经领过!"):-2==parseInt(""+t.win.gold)?TipsManage.showTips("昨日未参与游戏!"):(this.mcGroup.visible=!0,EffectUtils.numEffect(this.txtJiangquan,parseInt(""+t.win.note)),EffectUtils.numEffect(this.txtJianggold,parseInt(""+t.win.gold)),this.tt=setTimeout(this.closeMcGroup.bind(this),5e3)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.rankCallback=function(t){if(200==t.code){this.clearItems();for(var e=t.data.players,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("BlackJackItemPanel");a.y=22*n,this.itemGroup.addChild(a),a.setData({name:e[n].name,toScore:e[n].score,rank:n+1}),this.arr.push(a)}}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("BlackJackItemPanel",this.arr[e]));this.arr=[]},e.prototype.startGame=function(t){this.current=t,this.chooseGroup.visible=!1,Net.send(Protocol.BLACK_JACK_CHOOSE,{gold:t},this.chooseCallback.bind(this))},e.prototype.chooseCallback=function(t){200==t.code?Net.send(Protocol.BLACK_JACK_START,{},this.startCallback.bind(this)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.initData=function(t){200==t.code&&(this.labScore.text=""+t.data.toScore,this.labGameNumer.text="剩余次数："+t.data.cur+"/"+t.data.max),this.titleHead.source=GlobalData.user.headurl;var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(66,45,40),e.graphics.endFill(),this.addChild(e),this.titleHead.mask=e,this.titleName.text=GlobalData.user.nickname,this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.onTouchStart=function(){this.isGaming||(this.chooseGroup.visible=!0)},e.prototype.startCallback=function(t){200==t.code?(this.isCanTouchBox=!0,this.lastCardNumber=t.data.count,this.createCard(t.data.poke),this.isGaming=!0,this.labGameNumer.text="剩余次数："+t.data.cur+"/"+t.data.max):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchRestart=function(){this.restart()},e.prototype.onTouchSelectBox=function(t){this.isCanTouchBox&&(this.isCanTouchBox=!1,Net.send(Protocol.BLACK_JACK_SETCARD,{channel:t},this.setCardCallback.bind(this)),this.curSelectIndex=t)},e.prototype.setCardCallback=function(t){if(200==t.code){var e=this.cardXArr[this.curSelectIndex],i=this.cardBaseY+this.cardArr[this.curSelectIndex].length*this.cardIncrementalY;this.cardArr[this.curSelectIndex].push(this.curCard),egret.Tween.get(this.curCard).to({x:e,y:i},200).wait(100).call(this.afterFlyCard.bind(this,t.data)),GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.current+"",this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),5==++this.ii&&(Net.send(Protocol.HALL_GET_GOLD,{},this.flyCoins.bind(this)),this.ii=0)}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.isCanTouchBox=!0},e.prototype.flyCoins=function(t){200==t.code?(GlobalData.user.gold=t.data.gold,this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.afterFlyCard=function(t){this.lastCardNumber=t.count;for(var e=0;4>e;e++)this["labChannel"+e].text=t.cScore[e];if(this.labScore.text=""+t.toScore,1==t.boom?(this.cleanBoxCard(this.curSelectIndex),console.log("BOOM !!!")):2==t.boom&&(this.cleanBoxCard(this.curSelectIndex),console.log("NO BOOM !!!")),"0"==t.poke)return void this.gameOver();if(this.lastCardNumber<10){if(this.cardBackNum<0)return;this.cardBackArr[this.cardBackNum].visible=!1,this.cardBackNum--}this.createCard(t.poke)},e.prototype.createCard=function(t){var e=new eui.Image("bj.card_"+t);e.x=89,e.y=409,e.touchEnabled=!1,this.addChild(e),this.curCard=e,this.curCard.alpha=0,egret.Tween.get(this.curCard).to({x:192,y:409,alpha:1},80).call(function(){this.isCanTouchBox=!0},this)},e.prototype.gameOver=function(){console.log("over"),this.labFinalScore.text=this.labScore.text},e.prototype.cleanBoxCard=function(t){for(var e=this.cardArr[t],i=0;i<e.length;i++)egret.Tween.get(e[i]).to({scaleX:1.2,scaleY:1.2,alpha:0},100).call(function(){this.parent.removeChild(this)},e[i]);this.cardArr[t]=[]},e.prototype.restart=function(){for(var t=0;t<this.cardArr.length;t++){for(var e=0;e<this.cardArr[t].length;e++){var i=this.cardArr[t];this.removeChild(i[e])}this.cardArr[t]=[]}for(var e=0;e<this.cardBackArr.length;e++)this.cardBackArr[e].visible=!0;for(var n=0;4>n;n++)this["labChannel"+n].text="0";this.cardBackNum=9,this.lastCardNumber=0,this.curSelectIndex=0,this.isCanTouchBox=!1,this.isGaming=!1},e.prototype.randomSort=function(t,e){return Math.random()-.5},e.prototype.exitGame=function(){Net.send(Protocol.BLACK_JACK_LEAVE,{},this.exitGameCB.bind(this))},e.prototype.exitGameCB=function(t){200==t.code?this.dispose():TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){MusicManage.closeGameBgMuisc(),TimerManager.getInstance().remove("GameMainPanel.noticeMoveHandler"),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(BlackJackPanel.prototype,"BlackJackPanel",["fany.IDispose"]);var ChatItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/chat/ChatItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled()},e.prototype.setData=function(t){""==t.msg.name?(this.chatGroup.visible=!1,this.txtSys.visible=!0,this.txtSys.textFlow=(new egret.HtmlTextParser).parser(ChatManage.getInstance().transition(t.msg.msg))):(this.chatGroup.visible=!0,this.txtSys.visible=!1,this.icon.source=t.msg.headurl,this.txtSay.textFlow=(new egret.HtmlTextParser).parser('<font color="#FFFF00" >V'+t.msg.vip+'</font><font color="#e938f2" >['+t.msg.name+']</font><font color="#e938f2" >:'+t.msg.msg+"</font>"))},e.prototype.btnSendHandle=function(){},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ChatItemPanel.prototype,"ChatItemPanel",["fany.IDispose"]);var ChatPanel=function(t){function e(){var e=t.call(this)||this;return e.yy=0,e.tt=0,e.skinName="resource/skins/chat/ChatPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.arr=[],this.chats=[],this.chats2=[],this.tt=0,EventManage.addButtonEvent(this,this.btnSend,egret.TouchEvent.TOUCH_TAP,this.btnSendHandle.bind(this)),this.txtSay.touchEnabled=!0,TimerManager.getInstance().setFrame("ChatPanel.gogo",this.gogo.bind(this),this,6),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.CHAT_GAME_RESULT,this.gameresult.bind(this))},e.prototype.gameresult=function(){for(var t=this.chats2.length,e=0;t>e;e++)this.setChatItem(this.chats2[e]);this.chats2=[]},e.prototype.gogo=function(){if(this.chats.length>0){var t=this.chats.shift();this.setChatItem(t)}},e.prototype.btnSendHandle=function(){return""==this.txtSay.text?void TipsManage.showTips("不能发送空消息!"):void(this.txtSay.text.length>0&&this.txtSay.text.length<20?ChatManage.getInstance().send(this.txtSay.text,this.sendChatBack.bind(this)):TipsManage.showTips("长度超出限制,最大20个字符!"))},e.prototype.sendChatBack=function(t){200!=t.code&&TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.txtSay.text=""},e.prototype.setChat=function(t){return""==t.msg.name&&"1"==t.msg.msg.split(":")[0]?void this.chats2.push(t):void this.chats.push(t)},e.prototype.callcb=function(t){clearTimeout(this.tt),this.setChatItem(t)},e.prototype.sendGameChat=function(t){this.setChatItem({msg:{msg:"2:"+t,name:""}})},e.prototype.setChatItem=function(t){if(this.arr.length>10){var e=this.arr.shift();e.parent&&(e.parent.removeChild(e),ObjManage.addObj("ChatItemPanel",e))}var i=ObjManage.getObj("ChatItemPanel");i.setData(t),i.y=2+40*this.yy,this.chatGroup.addChild(i),this.arr.push(i),this.yy>2&&(this.chatScroll.viewport.validateNow(),egret.Tween.get(this.chatScroll.viewport).to({scrollV:this.chatScroll.viewport.contentHeight-this.chatScroll.viewport.height},200)),++this.yy},e.prototype.clearItems=function(){this.arr=this.arr||[];for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("ChatItemPanel",this.arr[e]));this.arr=[]},e.prototype.dispose=function(){TimerManager.getInstance().remove("ChatPanel.gogo"),this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)
},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ChatPanel.prototype,"ChatPanel",["fany.IDispose"]);var ChooseClownPanel=function(t){function e(e){var i=t.call(this)||this;return i.res="",i.tt=0,i.tt3=0,i.isMove=!1,i.tt1=0,i.tt2=30,i.isDouble=0,i.skinName="resource/skins/clown/ChooseClownskin.exml",i.bet=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){for(var t=this,e=1;9>e;e++)this["clown_star"+e].visible=!1;this.imgWinLost.visible=!1,this.updataBet(this.bet),setTimeout(function(){t.grpGuess.visible=!1},2e3),this.addEventListene(),MusicManage.playMuisc("clown_roll_music"),this.rollMc=QuickManage.createMc("rollmc"),this.zhuanGroup.addChild(this.rollMc),this.rollMc.play(-1),TimerManager.getInstance().setFrame("ChooseClownPanel.gogo",this.gogo.bind(this),this,3)},e.prototype.gogo=function(){0==this.isMove&&(62==this.hong.x?this.hong.x=-79:this.hong.x=62),10==++this.tt1&&(this.tt1=0,this.tt2--,this.txtTime.text="("+this.tt2+")",0==this.tt2&&this.btnQuitHandle())},e.prototype.addEventListene=function(){EventManage.addButtonEvent(this,this.clown_icon8,egret.TouchEvent.TOUCH_TAP,this.onTouchClown.bind(this,0),""),EventManage.addButtonEvent(this,this.clown_icon9,egret.TouchEvent.TOUCH_TAP,this.onTouchClown.bind(this,1),""),EventManage.addButtonEvent(this,this.btnDouble,egret.TouchEvent.TOUCH_TAP,this.btnDoubleHandle.bind(this)),EventManage.addButtonEvent(this,this.btnQuit,egret.TouchEvent.TOUCH_TAP,this.btnQuitHandle.bind(this)),EventManage.addEvent(this,this.giftGroup,egret.TouchEvent.TOUCH_TAP,this.giftGroupHandle.bind(this))},e.prototype.giftGroupHandle=function(){this.giftGroup.visible=!1},e.prototype.giftGroupHandle1=function(){this.giftGroup.visible=!1,this.dispose()},e.prototype.btnQuitHandle=function(){Net.send(Protocol.CLOWN_QUIT,{},this.chooseendCallback.bind(this))},e.prototype.btnDoubleHandle=function(){1==this.isAuto.visible?(this.isAuto.visible=!1,this.isDouble=0,this.bet_num.text=""+this.bet):(this.isAuto.visible=!0,this.isDouble=1,this.bet_num.text=""+2*this.bet)},e.prototype.onTouchClown=function(t){MusicManage.playMuisc("clown_button_click"),this.clown_icon8.touchEnabled=!1,this.clown_icon9.touchEnabled=!1,this.isMove=!0,0==t?this.res="clown_girl":this.res="clown_boy",Net.send(Protocol.CLOWN_CLOWNHANDLER_CHOOSECLOWN,{plus:this.isDouble},this.chooseClownCallback.bind(this))},e.prototype.chooseendCallback=function(t){200==t.code?this.dispose():("701"==t.msg&&this.dispose(),TipsManage.showTips(ErrorMessage.errorMsg(t.msg)))},e.prototype.chooseClownCallback=function(t){if(MusicManage.closeClickMuisc(),200==t.code){this.chooseClownResult=t.data,this.imgClown.y=0,egret.Tween.get(this.imgClown).to({y:67},400,egret.Ease.backOut),this.rollMc.stop(),this.rollMc.visible=!1,this.imgWinLost.visible=!0,this.bet=parseInt(t.data.cell+""),this.bet_num.text=t.data.cell,this.isAuto.visible=!1,this.playGift(t.data.gift,t.data.star),"0"==t.data.res?(MusicManage.playMuisc("clown_bibei_fail0"),this.imgWinLost.source="clown_main_lost_btn","clown_girl"==this.res?this.imgClown.source="clown_boy":this.imgClown.source="clown_girl",1==this.isDouble&&(this.isAuto.visible=!0,this.bet_num.text=""+2*this.bet)):(this.playGold(),this.imgWinLost.source="clown_main_win_btn",this.imgClown.source=this.res,this.txtWin.text="+"+t.data.win);for(var e=1;9>e;e++)this["clown_star"+e].visible=!1;for(var e=1;e<=t.data.star;e++)this["clown_star"+e].visible=!0;GlobalData.user.gold=parseInt(GlobalData.user.gold)+t.data.win+"",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),1!=t.data.end&&(this.tt=setTimeout(this.start.bind(this),1e3))}else"701"==t.msg&&this.dispose(),TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.playGift=function(t,e){t>0&&(this.giftGroup.visible=!0,this.txtDadao.text="恭喜达到"+e+"星",this.txtGift.text=t+"",this.tt3=setTimeout(this.giftGroupHandle.bind(this),2e3)),8==e&&(this.giftGroup.visible=!0,this.txtDadao.text="恭喜达到"+e+"星",this.txtGift.text=t+"",this.tt3=setTimeout(this.giftGroupHandle1.bind(this),2e3))},e.prototype.playGold=function(){this.mcGroup.visible=!0,null==this.mc&&(this.mc=QuickManage.createMc("goldfly2"),this.mcGroup.addChild(this.mc)),this.mc.gotoAndPlay(0,1),EventManage.addEvent(this,this.mc,egret.Event.COMPLETE,this.mcComplete.bind(this)),MusicManage.playMuisc("gold_diaoluo")},e.prototype.mcComplete=function(){this.mc.gotoAndStop(0),this.mcGroup.visible=!1},e.prototype.start=function(){MusicManage.playMuisc("clown_roll_music"),this.clown_icon8.touchEnabled=!0,this.clown_icon9.touchEnabled=!0,this.isMove=!1,this.imgWinLost.visible=!1,this.rollMc.visible=!0,this.rollMc.play(-1),this.tt2=31},e.prototype.updataBet=function(t){this.bet_num.text=""+t},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e.prototype.dispose=function(){MusicManage.closeClickMuisc(),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CLOWN_CHOOSE_CLOSE)),TimerManager.getInstance().remove("ChooseClownPanel.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.dispose2=function(){MusicManage.closeClickMuisc(),TimerManager.getInstance().remove("ChooseClownPanel.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e}(eui.Component);__reflect(ChooseClownPanel.prototype,"ChooseClownPanel",["fany.IDispose"]);var ClownHelpPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/clown/ClownHelpSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e}(eui.Component);__reflect(ClownHelpPanel.prototype,"ClownHelpPanel");var ClownPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.jiantou=!1,i.isClickStart=!1,i.tt=0,i.randResult=null,i.isantoo=!1,i.bet=50,i.betArr=[50,100,1e3,5e3,1e4,1e5],i.num=0,i.touchAutoNum=0,i.skinName="resource/skins/clown/ClownPanelSkin.exml",i.r=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.netcallback(),this.isAuto.visible=!1,this.starMc=QuickManage.createMc("clowShan"),this.grpStar.addChild(this.starMc),this.starMc.x=10,this.starMc.y=200,this.grpStar.visible=!1;for(var t=1;4>t;t++)this["star"+t].visible=!1,this["star_g"+t].visible=!1;for(var e=0;3>e;e++)this["rollMc"+e]=QuickManage.createMc("rollmc"),this["rollMc"+e].visible=!1,this["rollItem"+e].addChild(this["rollMc"+e]),this["rollItem"+e].setChildIndex(this["resultItem"+e],2);this.addEventListene(),this.playAnimation(this.bgRoation,!0),this.updatePoolGold(this.gift),this.updataBet(this.bet),this.setSelfInfo(),MusicManage.playGameBgMuisc("clown_bg",1,-1)},e.prototype.setMaxuserInfo=function(){this.imgKingHead.source=this.max_user.headurl,this.labKingName.text=this.max_user.name},e.prototype.setSelfInfo=function(){this.labUserGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.labUserName.text=GlobalData.user.nickname,this.imgUserHead.source=GlobalData.user.headurl},e.prototype.netcallback=function(){var t=this.r;this.max_user=t.data.max_user,this.gift=t.data.gift,this.labKingName.text=this.max_user.name,this.imgKingHead.source=this.max_user.headurl,this.goldNum.text=this.gift+""},e.prototype.addEventListene=function(){EventManage.addButtonEvent(this,this.btnAuto,egret.TouchEvent.TOUCH_TAP,this.onTouchAuto.bind(this)),EventManage.addButtonEvent(this,this.btnStart,egret.TouchEvent.TOUCH_TAP,this.onTouchStart.bind(this)),EventManage.addButtonEvent(this,this.btnChat,egret.TouchEvent.TOUCH_TAP,this.onTouchChat.bind(this)),EventManage.addButtonEvent(this,this.btnRedpack,egret.TouchEvent.TOUCH_TAP,this.onTouchRedpack.bind(this)),EventManage.addButtonEvent(this,this.btnHelp,egret.TouchEvent.TOUCH_TAP,this.onTouchHelp.bind(this)),EventManage.addButtonEvent(this,this.btnPlusBet,egret.TouchEvent.TOUCH_TAP,this.onTouchPlusBet.bind(this)),EventManage.addButtonEvent(this,this.btnMinuBet,egret.TouchEvent.TOUCH_TAP,this.onTouchMinuBet.bind(this)),EventManage.addButtonEvent(this,this.btnReturn,egret.TouchEvent.TOUCH_TAP,this.btnReturnHandle.bind(this)),EventManage.addEvent(this,this.btnAddGold,egret.TouchEvent.TOUCH_TAP,this.btnAddGoldHandle.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.setSelfInfo.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.CLOWN_CHOOSE_CLOSE,this.closeChoosePanel.bind(this)),TimerManager.getInstance().setFrame("ClownPanel.gogo",this.gogo.bind(this),this,180),EventManage.addEvent(this,this.btnRank,egret.TouchEvent.TOUCH_TAP,this.btnRankHandle.bind(this))},e.prototype.btnRankHandle=function(){PanelManage.openClownrank()},e.prototype.closeChoosePanel=function(){MusicManage.playMuisc("clown_bg"),this.isClickStart=!1,this.jiantou=!1,this.btnStart.source="clown_startbutton",this.btnAuto.source="clown_autobutton",this.btnStart.touchEnabled=!0,this.btnAuto.touchEnabled=!0,this.rightArrow.source="clown_arrow_2",this.leftArrow.source="clown_arrow_2",this.isantoo=!1,this.btnAuto.visible=!0,this.isAuto.visible=!1,this.rightArrow.visible=!0,this.leftArrow.visible=!0;for(var t=0;3>t;t++)this["rollMc"+t].stop(),this["rollMc"+t].visible=!1,this["resultItem"+t].y=-120,this["resultItem"+t].source="clown_icon"+(t+1),this["resultItem"+t].visible=!0,this["rollItem"+t].visible=!0,egret.Tween.get(this["resultItem"+t]).to({y:70},400,egret.Ease.backOut)},e.prototype.gogo=function(){Net.send(Protocol.CLOWN_GET_GIFT,{},this.tongbugift.bind(this)),Net.send(Protocol.CLOWN_GET_MESSAGES,{},this.getMessages.bind(this))},e.prototype.getMessages=function(t){if(200==t.code){var e=t.list,i=e.length;i>4&&(i=4);for(var n=0;i>n;n++)this["txt"+n].text=""+e[n].name+"    "+QuickManage.moneyStr(parseInt(e[n].win+""))}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.btnAddGoldHandle=function(){PanelManage.openShop(2)},e.prototype.onTouchHelp=function(){this.clownhelpPanel&&this.clownhelpPanel.dispose(),this.clownhelpPanel=null,this.clownhelpPanel=new ClownHelpPanel,this.addChild(this.clownhelpPanel),this.clownhelpPanel.x=30,this.clownhelpPanel.y=100},e.prototype.onTouchChat=function(){this.chatpanel=new ChatPanel,this.addChild(this.chatpanel),this.chatpanel.touchEnabled=!0,this.chatpanel.x=150,this.chatpanel.y=730},e.prototype.onTouchRedpack=function(){PanelManage.openRedBox(3,1)},e.prototype.onTouchPlusBet=function(){this.isClickStart||(this.helptpis.visible=!1,this.num++,this.num>=this.betArr.length&&(this.num=3),this.betArr[this.num]>5e3&&parseInt(GlobalData.user.vip)<1&&(TipsManage.showTips("VIP等级不足!"),this.num=3),this.bet=this.betArr[this.num],this.updataBet(this.bet))},e.prototype.onTouchMinuBet=function(){this.isClickStart||(this.num--,this.num<=0&&(this.num=0),this.bet=this.betArr[this.num],this.updataBet(this.bet))},e.prototype.updataBet=function(t){this.betNum.text=""+t},e.prototype.onTouchDispos=function(){this.chatpanel&&(this.removeChild(this.chatpanel),this.chatpanel=null)},e.prototype.onTouchAuto=function(){this.helptpis.visible=!1,"clown_autobutton_gray"!=this.btnAuto.source&&0==this.isantoo&&(this.isantoo=!0,this.isAuto.visible=!0,this.onTouchStart())},e.prototype.onTouchStart=function(){clearTimeout(this.tt),this.helptpis.visible=!1,0==this.isClickStart?(this.randResult=null,this.btnStart.source="clown_stopbutton",this.btnAuto.source="clown_autobutton_gray",this.btnAuto.touchEnabled=!1,this.isClickStart=!0,this.rollEffect(),this.jiantou=!0,this.gundongjiantou(),this.tt=setTimeout(this.onTouchStop.bind(this),2e3)):"clown_stopbutton"==this.btnStart.source&&(this.isantoo=!1,this.isAuto.visible=!1,this.onTouchStop())},e.prototype.onTouchStop=function(){clearTimeout(this.tt),Net.send(Protocol.CLOWN_CLOWNHANDLER_RANDRESULT,{cell:this.bet},this.randCallback.bind(this))},e.prototype.gundongjiantou=function(){1==this.jiantou&&(this.leftArrow.source="clown_arrow_1",this.rightArrow.source="clown_arrow_1",egret.Tween.get(this.leftArrow).to({rotation:5},100),egret.Tween.get(this.rightArrow).to({rotation:5},100).call(this.gundongjiantou1.bind(this),this))},e.prototype.gundongjiantou1=function(){1==this.jiantou&&(egret.Tween.get(this.leftArrow).to({rotation:0},100),egret.Tween.get(this.rightArrow).to({rotation:0},100).call(this.gundongjiantou.bind(this),this))},e.prototype.showStar=function(){clearTimeout(this.tt),this.txtFen.text="+"+this.getBetNum(this.randResult.res)*this.bet,this.grpStar.visible=!0,this.starMc.play(-1);for(var t=1;4>t;t++)egret.Tween.get(this["star"+t]).wait(100*(t-1)).to({visible:!0},100),egret.Tween.get(this["star_g"+t]).wait(100*(t-1)).to({visible:!0},100)},e.prototype.closeStar=function(){this.starMc.stop(),this.grpStar.visible=!1;for(var t=1;4>t;t++)this["star"+t].visible=!1,this["star_g"+t].visible=!1},e.prototype.rollEffect=function(){MusicManage.playMuisc("clown_bibei_roll_sound");for(var t=0;3>t;t++)this["rollMc"+t].play(-1),this["rollMc"+t].visible=!0,this["resultItem"+t].visible=!1},e.prototype.randCallback=function(t){if(MusicManage.closeClickMuisc(),200==t.code)GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.bet+"",parseInt(GlobalData.user.gold)<0&&(GlobalData.user.gold="0"),this.labUserGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.randResult=t.data,this.btnStart.touchEnabled=!1,this.jiantou=!1,this.rightArrow.source="clown_arrow_2",this.leftArrow.source="clown_arrow_2",this.endRollEffect();else{TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.isClickStart=!1,this.jiantou=!1,this.btnStart.source="clown_startbutton",this.btnAuto.source="clown_autobutton",this.btnStart.touchEnabled=!0,this.btnAuto.touchEnabled=!0,this.rightArrow.source="clown_arrow_2",this.leftArrow.source="clown_arrow_2",this.isantoo=!1,this.isAuto.visible=!1;for(var e=0;3>e;e++)this["rollMc"+e].stop(),this["rollMc"+e].visible=!1,this["resultItem"+e].y=-120,this["resultItem"+e].source="clown_icon"+(e+1),this["resultItem"+e].visible=!0,egret.Tween.get(this["resultItem"+e]).to({y:70},400,egret.Ease.backOut)}},e.prototype.endRollEffect=function(){for(var t=this,e=0;3>e;e++)setTimeout(this.endRollEffectResult.bind(this,e),50*e);return null==this.randResult?(this.btnStart.source="clown_startbutton",this.btnAuto.source="clown_autobutton",this.btnAuto.touchEnabled=!0,this.btnStart.touchEnabled=!0,void(1==this.isantoo&&(this.tt=setTimeout(this.onTouchStart.bind(this),1e3)))):void(this.randResult.win>0?(MusicManage.playMuisc("clown_roll_winSound"),this.isantoo=!1,this.isAuto.visible=!1,this.showStar(),setTimeout(function(){t.closeStar(),t.showChooseClown()},3e3)):(MusicManage.playMuisc("clown_roll_failSound"),this.tt=setTimeout(this.panduanshuying.bind(this),1e3)))},e.prototype.panduanshuying=function(){clearTimeout(this.tt),this.randResult.win<1&&(this.isClickStart=!1,this.btnStart.source="clown_startbutton",this.btnAuto.source="clown_autobutton",this.btnStart.touchEnabled=!0,this.btnAuto.touchEnabled=!0,1==this.isantoo&&this.onTouchStart())},e.prototype.showChooseClown=function(){for(var t=0;3>t;t++)this["rollItem"+t].visible=!1;this.btnAuto.visible=!1,this.rightArrow.visible=!1,this.leftArrow.visible=!1;var e=this.getBetNum(this.randResult.res)*this.bet;this.chooseclownpanel&&this.chooseclownpanel.dispose2(),this.chooseclownpanel=new ChooseClownPanel(e),this.addChild(this.chooseclownpanel),this.chooseclownpanel.y=70},e.prototype.endRollEffectResult=function(t){this.randResult&&(this["rollMc"+t].stop(),this["rollMc"+t].visible=!1,this["resultItem"+t].y=-120,this["resultItem"+t].source="clown_icon"+this.randResult.res[t],this["resultItem"+t].visible=!0,egret.Tween.get(this["resultItem"+t]).to({y:70},400,egret.Ease.backOut))},e.prototype.updatePoolGold=function(t){this.goldNum.text=QuickManage.moneyStr(parseInt(""+t))},e.prototype.playAnimation=function(t,e){if(e)for(var i in t.items)t.items[i].props={loop:!0};t.play()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e.prototype.changeClownKing=function(t){this.labKingName.text=t.msg.data.name,this.imgKingHead.source=t.msg.data.headurl},e.prototype.tongbugift=function(t){200==t.code&&EffectUtils.numEffect(this.goldNum,parseInt(t.gift+""))},e.prototype.btnReturnHandle=function(){Net.send(Protocol.CLOWN_CLOWNHANDLER_LEAVEGAME,{},function(t){200==t.code?this.dispose():TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.dispose=function(){MusicManage.closeMuisc(),TimerManager.getInstance().remove("ClownPanel.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.getBetNum=function(t){var e=1;if(console.log(t[0]+"=="+t[1]+"=="+t[2]),t[0]==t[1]&&t[1]==t[2])switch(t[0]){case 1:e=1e3;break;case 2:e=500;break;case 3:e=50;break;case 4:e=20;break;case 5:e=10;break;case 6:e=4;break;case 7:e=3;break;case 8:e=2;break;case 9:e=1}return e},e}(eui.Component);__reflect(ClownPanel.prototype,"ClownPanel",["fany.IDispose"]);var ClownRankItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/clown/ClownRankItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.head.source=t.headurl,t.rank>3?(this.txtRank.visible=!0,this.txtRank.text=t.rank):(this.num.source="rank.num"+t.rank,this.num.visible=!0),this.txtGold.text=QuickManage.moneyStr(t.gold),this.txtName.text=t.name,this.txtVip.text="v"+t.vip},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ClownRankItemPanel.prototype,"ClownRankItemPanel",["fany.IDispose"]);var ClownRankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/clown/ClownRankSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.CLOWN_RANK_DAY,{},this.ranklistcallback.bind(this)),EventManage.addEvent(this,this.btnToday,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,1)),EventManage.addEvent(this,this.btnWeek,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,2))},e.prototype.clickBtn=function(t){if(!("clown_king_daily"==this.btnToday.source&&1==t||"clown_king_week"==this.btnWeek.source&&2==t))switch(t){case 1:this.btnToday.source="clown_king_daily",this.btnWeek.source="clown_king_week_s",Net.send(Protocol.CLOWN_RANK_DAY,{},this.ranklistcallback.bind(this));break;case 2:this.btnToday.source="clown_king_daily_s",this.btnWeek.source="clown_king_week",Net.send(Protocol.CLOWN_RANK_WEEK,{},this.ranklistcallback.bind(this))}},e.prototype.ranklistcallback=function(t){if(200==t.code){this.clearItems();for(var e=t.list,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("ClownRankItemPanel");a.y=100*n,this.itemGroup.addChild(a),a.setData({name:e[n].name,vip:e[n].vip,gold:e[n].win,rank:n+1,headurl:e[n].headurl}),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("ClownRankItemPanel",this.arr[e]));this.arr=[]},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ClownRankPanel.prototype,"ClownRankPanel",["fany.IDispose"]);var DaShangItem=function(t){function e(){var e=t.call(this)||this;return e.userId="",e.skinName="resource/skins/dashang/DashangItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnAction,egret.TouchEvent.TOUCH_TAP,this.onTouchAction.bind(this))},e.prototype.onTouchAction=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.DASHANG_NOTICE_PUBLISH,this.userId))},e.prototype.setInfo=function(t){this.labVip.text="V"+t.vip,this.labName.text=t.name,this.labInfo.text="求打赏。。。。";var e=new Date(t.time),i=e.getHours()+"",n=e.getMinutes()+"";parseInt(n)<10&&(n="0"+n),this.labTime.text=i+":"+n,this.userId=t.id},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DaShangItem.prototype,"DaShangItem",["fany.IDispose"]);var DaShangPanel=function(t){function e(){var e=t.call(this)||this;return e.moneyArr=[1e5,2e5,1e6,2e6,5e6,1e7],e.lastSelectMoney=-1,e.publishID="",e.skinName="resource/skins/dashang/DashangSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.grpSecond.visible=!1,this.grpPublish.visible=!1,EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnSend,egret.TouchEvent.TOUCH_TAP,this.onTouchSend.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.onTouchSure.bind(this)),EventManage.addButtonEvent(this,this.btnCloseSecond,egret.TouchEvent.TOUCH_TAP,this.onTouchSecondClose.bind(this)),EventManage.addButtonEvent(this,this.btnPublishSure,egret.TouchEvent.TOUCH_TAP,this.onTouchPublishSure.bind(this)),EventManage.addButtonEvent(this,this.btnClosePublish,egret.TouchEvent.TOUCH_TAP,this.onTouchPublishClose.bind(this));for(var t=0;6>t;t++)EventManage.addEvent(this,this["grpMoney"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchPublishNum.bind(this,t));EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.DASHANG_NOTICE_PUBLISH,this.showPublishPanel.bind(this)),Net.send(Protocol.HALL_REWARD_LIST,{},this.rewardListCallBack.bind(this))},e.prototype.onTouchClose=function(){this.dispose()},e.prototype.onTouchSend=function(){this.grpSecond.visible=!0},e.prototype.onTouchSure=function(){Net.send(Protocol.HALL_RELEASE_REWARD,{},this.touchSureCallback.bind(this)),this.grpSecond.visible=!1},e.prototype.touchSureCallback=function(t){200==t.code?Net.send(Protocol.HALL_REWARD_LIST,{},this.rewardListCallBack.bind(this)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.sendCallback=function(t){200==t.code&&(this.grpSecond.visible=!1)},e.prototype.onTouchSecondClose=function(){this.grpSecond.visible=!1},e.prototype.onTouchPublishClose=function(){this.grpPublish.visible=!1},e.prototype.showPublishPanel=function(t){return t.param==GlobalData.openid+"@"+GlobalData.platform?void TipsManage.showTips("不可以打赏自己！"):(this.publishID=t.param,this.lastSelectMoney=0,this["imgMoney"+this.lastSelectMoney].source="c.labbg1",this.grpPublish.visible=!0,this.grpPublishInput.visible=!1,void(this.grpPublishSelect.visible=!0))},e.prototype.showPublishInput=function(){this.grpPublishInput.visible=!0,this.grpPublishSelect.visible=!1},e.prototype.onTouchPublishNum=function(t){t!=this.lastSelectMoney&&(this["imgMoney"+this.lastSelectMoney].source="c.labbg0",this["imgMoney"+t].source="c.labbg1",this.lastSelectMoney=t)},e.prototype.onTouchPublishSure=function(){var t=0;t=this.moneyArr[this.lastSelectMoney],Net.send(Protocol.HALL_GIVE_REWARD,{dsId:this.publishID,gold:t},this.giveRewardCallback.bind(this))},e.prototype.giveRewardCallback=function(t){200==t.code?(this.grpPublish.visible=!1,Net.send(Protocol.HALL_REWARD_LIST,{},this.rewardListCallBack.bind(this)),GlobalData.user.gold=t.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.rewardListCallBack=function(t){this.clearItems();for(var e=0;e<t.data.length;e++){if(e>20)return;var i=ObjManage.getObj("DaShangItem");i.x=0,i.y=i.height*e,i.setInfo(t.data[e]),this.grpItem.addChild(i)}},e.prototype.clearItems=function(){for(;this.grpItem.numChildren>0;)ObjManage.addObj("DaShangPanel",this.grpItem.removeChildAt(0))},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DaShangPanel.prototype,"DaShangPanel",["fany.IDispose"]);var DaShangTips=function(t){function e(e){var i=t.call(this)||this;return i.skinName="resource/skins/dashang/DashangTipSkin.exml",i.data=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.labName.text=this.data.name,this.labMoney.text=QuickManage.moneyStr(parseInt(this.data.gold)),GlobalData.user.gold=parseInt(GlobalData.user.gold)+this.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.onTouchSure.bind(this)),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.onTouchSure.bind(this))},e.prototype.onTouchSure=function(){this.dispose()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DaShangTips.prototype,"DaShangTips",["fany.IDispose"]);var DdzHeadItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/ddz/DdzHeadItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled();var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(52,86,40),t.graphics.endFill(),this.addChild(t),this.head.mask=t},e.prototype.setData=function(t){this.txtName.text=t.name,this.txtGold.text=t.gold,this.head.source=t.head,this.txtPokerNum.text=t.pokernum},e.prototype.setPokerNum=function(t){this.txtPokerNum.text=t+""},e.prototype.setDizhu=function(t){void 0===t&&(t=!0),this.dizhu.visible=t},e.prototype.setGold=function(t){var e=QuickManage.moneyStr2number(this.txtGold.text)+t;this.txtGold.text=QuickManage.moneyStr(e)},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DdzHeadItemPanel.prototype,"DdzHeadItemPanel",["fany.IDispose"]);var DdzPanel=function(t){function e(e){var i=t.call(this)||this;return i.count=0,i.ii=0,i.count1=0,i.ii1=0,i.time=0,i.isMove=!1,i.len=0,i.tt=0,i.isMeChupai=!1,i.isFirst=!1,i.curObj=null,i.againBool=!1,i.jieBool=!1,i.cnn=0,i.tt2=0,i.tt3=0,i.rObj=null,i.num=0,i.skinName="resource/skins/ddz/DdzSkin.exml",GlobalData.user.seat="-1",i.rObj=e,i.setXY(),i}return __extends(e,t),e.prototype.setXY=function(){this.pokerPos=[320,800],this.buchuPos=[[286,333],[544,303],[30,303]],this.timerPos=[[267,371],[532,305],[8,305]]},e.prototype.setBuchuPos=function(t){this.imgBuchu.x=this.buchuPos[t][0],this.imgBuchu.y=this.buchuPos[t][1]},e.prototype.setTimerPos=function(t){this.grpTimer.x=this.timerPos[t][0],this.grpTimer.y=this.timerPos[t][1]},e.prototype.chairToView=function(t){var e=t-parseInt(GlobalData.user.seat);return e=(e+=3)%3},e.prototype.childrenCreated=function(){this.txtTips.touchEnabled=!1,this.txtName.text=GlobalData.user.nickname,this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.head.source=GlobalData.user.headurl,this.labRoomNum.text=GlobalData.user.idd,EventManage.addButtonEvent(this,this.btnReturn,egret.TouchEvent.TOUCH_TAP,this.btnReturnHandle.bind(this)),EventManage.addButtonEvent(this,this.btnBuJiao,egret.TouchEvent.TOUCH_TAP,this.clickDizhu.bind(this,0)),EventManage.addButtonEvent(this,this.btn1,egret.TouchEvent.TOUCH_TAP,this.clickDizhu.bind(this,1)),EventManage.addButtonEvent(this,this.btn2,egret.TouchEvent.TOUCH_TAP,this.clickDizhu.bind(this,2)),EventManage.addButtonEvent(this,this.btn3,egret.TouchEvent.TOUCH_TAP,this.clickDizhu.bind(this,3)),EventManage.addButtonEvent(this,this.item1,egret.TouchEvent.TOUCH_TAP,this.createTable.bind(this,100)),EventManage.addButtonEvent(this,this.item2,egret.TouchEvent.TOUCH_TAP,this.createTable.bind(this,5e4)),EventManage.addButtonEvent(this,this.item3,egret.TouchEvent.TOUCH_TAP,this.createTable.bind(this,1e6)),this.btnChu.name="btnChu",this.btnGuo.name="btnGuo",EventManage.addButtonEvent(this,this.btnPlayAgain,egret.TouchEvent.TOUCH_TAP,this.btnPlayAgainHandle.bind(this)),this.txtDifentxt.text="0",EventManage.addButtonEvent(this,this.btnMusic,egret.TouchEvent.TOUCH_TAP,this.btnMusicHandler.bind(this)),0==GlobalData.isMusic?this.btnMusic.source="btnMusicCloise":this.btnMusic.source="btnMusic",this.createGroup.visible=!0},e.prototype.netcallback=function(t){200==t.code?(this.txtTipsss.text="正在加入房间...","0"==t.tid?Net.send(Protocol.DDZ_CREATE_TABLE,{difen:this.num+""},this.createTableBack.bind(this)):Net.send(Protocol.DDZ_JOIN_TABLE,{tableId:t.tid},this.joinBack.bind(this))):(this.txtTipsss.text="请选择对应房间加入",this.createGroup.visible=!0,TipsManage.showTips(ErrorMessage.errorMsg(t.msg)))},e.prototype.joinBack=function(t){if(200==t.code){this.createGroup.visible=!1,GlobalData.user.idd=t.table.id,GlobalData.user.seat=t.chairId,GlobalData.isJoin="no",GlobalData.tableState=t.table.playing,GlobalData.user.difen=t.table.difen;for(var e=t.table.users.length,i=0;e>i;i++){var n=this.chairToView(t.table.users[i].chairId);0!=n&&(this["group"+n].visible=!0,this["group"+n].setData({pokernum:"X0",name:t.table.users[i].name,gold:QuickManage.moneyStr(parseInt(t.table.users[i].gold+"")),head:t.table.users[i].headurl}))}this.txtTips.visible=!0,2==e?this.txtTips.text="请等待剩余1名玩家加入...":1==e?this.txtTips.text="请等待剩余2名玩家加入...":this.txtTips.visible=!1,this.txtDifentxt.text=""+QuickManage.moneyStr(parseInt(GlobalData.user.difen)),this.initGame()}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.txtTipsss.text="请选择对应房间加入",this.createGroup.visible=!0},e.prototype.createTable=function(t){"请选择对应房间加入"==this.txtTipsss.text&&(this.num=t,this.txtTipsss.text="正在查找房间...",Net.send(Protocol.JOIN_DDZ_GAME,{difen:t},this.netcallback.bind(this)))},e.prototype.createTableBack=function(t){200==t.code?(this.createGroup.visible=!1,this.txtTips.visible=!0,GlobalData.user.idd=t.table.id,GlobalData.isJoin="yes",GlobalData.user.seat="0",GlobalData.user.difen=t.table.difen,this.txtDifentxt.text=""+QuickManage.moneyStr(parseInt(GlobalData.user.difen)),this.txtTips.text="请等待剩余2名玩家加入...",this.initGame()):(TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.txtTipsss.text="请选择对应房间加入",this.createGroup.visible=!0)},e.prototype.initGame=function(){this.chupaiGroup.touchChildren=!1,this.chupaiGroup.touchEnabled=!1,this.count=0,this.tt2=0,this.tt3=0,this.ii=0,this.count1=0,this.againBool=!1,this.jieBool=!1,this.ii1=0,this.tt=20,this.curData=[],t.prototype.childrenCreated.call(this),this.setTouchEnabled(),this.images=this.images||[],this.pokerData=[],EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin.bind(this)),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_END,this.onTouchEend.bind(this)),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_MOVE,this.onTouchMove.bind(this)),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.clickHandle.bind(this))},e.prototype.btnMusicHandler=function(){"btnMusic"==this.btnMusic.source?(this.btnMusic.source="btnMusicCloise",GlobalData.isMusic=!1,MusicManage.closeMuisc(),MusicManage.closeBgMuisc()):(this.btnMusic.source="btnMusic",GlobalData.isMusic=!0,MusicManage.playGameBgMuisc("hallBgm",.5,-1))},e.prototype.btnReturnHandle=function(){1==this.createGroup.visible?this.quit():Net.send(Protocol.DDZ_QUIT_GAME,{},this.quit.bind(this))},e.prototype.btnPlayAgainHandle=function(){++this.cnn,this.dizhuGroup.visible=!1,this.btnChu.visible=!1,this.btnGuo.visible=!1,this.grpEnd.visible=!1,this.dizhu.visible=!1,this.grpTimer.visible=!1,this.removeChupaiGroup(),this.count=0,this.ii=0,this.count1=0,this.ii1=0,this.tt=20,this.curData=[],this.pokerArr=[],this.curObj=null;
for(var t=this.pokerData.length,e=0;t>e;e++)this.pokerData[e]&&(this.pokerData[e].parent&&this.pokerData[e].parent.removeChild(this.pokerData[e]),ObjManage.addPoker(this.pokerData[e]));this.group1.setPokerNum("X0"),this.group2.setPokerNum("X0"),this.group1.setDizhu(!1),this.group2.setDizhu(!1),this.pokerData=[],this.txtBei.text="X0",this.card0.source="ddz_0",this.card1.source="ddz_0",this.card2.source="ddz_0",GlobalData.curData=[],this.enabled=!0,this.touchChildren=!0,this.touchEnabled=!0,TimerManager.getInstance().remove("GamePanel.gogo"),this.len=0,Net.send(Protocol.DDZ_AGAIN_GAME,{},this.againGame.bind(this))},e.prototype.againGame=function(t){console.log(JSON.stringify(t)),200==t.code&&(this.againBool=!0,this.jieBool&&(console.log("来源于againGame"+this.jieBool),this.play(),this.jieBool=!1))},e.prototype.clickHandle=function(t){var e=t.target.parent;return t.stageX>this.btnGuo.x&&t.stageX<this.btnGuo.x+this.btnGuo.width&&t.stageY>this.btnGuo.y&&t.stageY<this.btnGuo.y+this.btnGuo.height&&this.btnGuo.visible?(this.chupaiHandle(1),void EffectUtils.playButtonEffect(this.btnGuo)):t.stageX>this.btnChu.x&&t.stageX<this.btnChu.x+this.btnChu.width&&t.stageY>this.btnChu.y&&t.stageY<this.btnChu.y+this.btnChu.height&&this.btnChu.visible?(this.chupaiHandle(2),void EffectUtils.playButtonEffect(this.btnChu)):void(null!=e.name&&("poker"!=e.name.split("_")[0]?this.setfuwei():e.setSelect()))},e.prototype.setfuwei=function(){for(var t=this.pokerData.length,e=0;t>e;e++)this.pokerData[e]&&this.pokerData[e].setSelect3()},e.prototype.chupaiHandle=function(t){if(2==t)if(this.isMeChupai){if((null==this.curObj||"0"==this.curObj.isMe)&&GlobalData.curData.length<1)return void TipsManage.showTips("必须出至少1张牌!");this.btnChu.touchEnabled=!1,this.btnGuo.touchEnabled=!1,Net.send(Protocol.DDZ_CHU_PAI,{pokers:GlobalData.curData},this.chupaiBack.bind(this))}else TipsManage.showTips("还未轮到你出牌!");else{if(null==this.curObj||"0"==this.curObj.isMe)return void TipsManage.showTips("轮到你出牌了!");GlobalData.curData=[],this.btnChu.touchEnabled=!1,this.btnGuo.touchEnabled=!1,Net.send(Protocol.DDZ_CHU_PAI,{pokers:[]},this.chupaiBack.bind(this))}},e.prototype.clickDizhu=function(t){this.dizhuGroup.visible=!1,clearInterval(this.tt2),Net.send(Protocol.DDZ_JIAO_FEN,{score:t},this.jiaofenBack.bind(this))},e.prototype.jiaofenBack=function(t){},e.prototype.onTouchEend=function(t){this.isMove=!1},e.prototype.onTouchBegin=function(t){this.isMove=!0,this.time=egret.getTimer()},e.prototype.onTouchMove=function(t){var e=t.target.parent;this.isMove&&null!=e.name&&"poker"==e.name.split("_")[0]&&e.setSelect2()},e.prototype.quitBack=function(t){(t.code=200)&&(GlobalData.user.idd="",this.dispose())},e.prototype.init=function(){},e.prototype.goNext=function(){this.init()},e.prototype.play=function(){TimerManager.getInstance().remove("GamePanel.gogo"),TimerManager.getInstance().setFrame("GamePanel.gogo",this.gogo.bind(this),this)},e.prototype.someonecurbet=function(t){},e.prototype.someonechangechupai=function(t){},e.prototype.someonechupai=function(t){this.txtBei.text="X"+t.msg.bet;var e=this.chairToView(t.msg.chairId),i=t.msg.cards,n=this.chairToView(t.msg.next);if(0==i.length)this.imgBuchu.visible=!0,this.imgBuchu.alpha=1,egret.Tween.get(this.imgBuchu).to({alpha:0},1200);else{this.imgBuchu.visible=!1,this.curObj={isMe:e+""},this.createPoker(i);var a=new eui.HorizontalLayout;a.gap=-40,0==e?a.horizontalAlign=egret.HorizontalAlign.CENTER:1==e?a.horizontalAlign=egret.HorizontalAlign.RIGHT:2==e&&(a.horizontalAlign=egret.HorizontalAlign.LEFT),this.chupaiGroup.layout=a}this.setBuchuPos(e),0!=e&&this["group"+e].setPokerNum("X"+t.msg.count),this.isMeChupai=!1,this.setTimerPos(n),0==n&&(this.btnChu.touchEnabled=!0,this.btnGuo.touchEnabled=!0,this.btnChu.visible=!0,this.btnGuo.visible=!0,this.isMeChupai=!0),this.curObj.isMe==n+""&&this.removeChupaiGroup(),e+""==n+""&&this.removeChupaiGroup(),this.setChildIndex(this.grpTimer,this.numChildren-1),clearInterval(this.tt2),this.tt2=setInterval(this.updateTime.bind(this),1e3),this.tt=20,this.txtTime.text=this.tt--+""},e.prototype.createPoker=function(t){this.removeChupaiGroup(),this.images=[];for(var e=t.length,i=0;e>i;i++){var n=ObjManage.getImage(t[i]+"");this.chupaiGroup.addChild(n),n.scaleX=.5,n.scaleY=.5,this.images.push(n)}},e.prototype.removeChupaiGroup=function(){for(var t=this.images.length,e=0;t>e;e++)this.images[e]&&this.images[e].parent&&(this.images[e].parent.removeChild(this.images[e]),ObjManage.addImage(this.images[e]))},e.prototype.setDipaiFun=function(t){for(var e=t.length,i=0;e>i;i++)this["card"+i].source=t[i]+""},e.prototype.someonecalldizhu=function(t){this.r=t,this.group1.setPokerNum("X17"),this.group2.setPokerNum("X17"),this.pokerArr=PokerManage.paixu(t.msg.handCard,[]),this.len=this.pokerArr.length,this.dizhuGroup.visible=!0,this.jieBool=!0,0==this.cnn?(this.play(),this.jieBool=!1):this.againBool&&(console.log("来源于someonecalldizhu"),this.play(),this.jieBool=!1),this.tt3=0,clearInterval(this.tt2),this.tt2=setInterval(this.jiaodizhudaojishi.bind(this),1e3)},e.prototype.jiaodizhudaojishi=function(){5==++this.tt3&&(this.dizhuGroup.visible&&this.clickDizhu(0),clearInterval(this.tt2))},e.prototype.someonemakedizhu=function(t){console.log("有人当地主了"),this.txtBei.text="X"+t.msg.bet,this.setDipaiFun(t.msg.dipai),this.grpTimer.visible=!0,this.isMeChupai=!1,this.dizhu.visible=!1,this.group1.setDizhu(!1),this.group2.setDizhu(!1);var e=this.chairToView(t.msg.chairId);this.setTimerPos(e),0==e?(this.btnChu.visible=!0,this.btnGuo.visible=!0,this.isMeChupai=!0,this.dizhu.visible=!0,this.addPoker(t.msg.dipai)):(this["group"+e].setPokerNum("X20"),this["group"+e].setDizhu()),clearInterval(this.tt2),this.tt2=setInterval(this.updateTime.bind(this),1e3)},e.prototype.addPoker=function(t){for(var e=t.length,i=0;e>i;i++){var n=ObjManage.getPoker();n.setData({res:t[i]+""}),n.rotation=5+-(10*this.len)/2+10*this.ii,n.anchorOffsetX=66,n.anchorOffsetY=360,n.x=this.pokerPos[0],n.y=this.pokerPos[1],n.name="poker_"+this.ii,this.addChild(n),this.pokerData.push(n),++this.ii}PokerManage.paixu(t,this.pokerArr),this.updatePoker()},e.prototype.updateTime=function(){if(this.txtTime.text=this.tt--+"",this.tt<0)if(clearInterval(this.tt2),this.btnChu.visible=!1,this.btnGuo.visible=!1,null==this.curObj||"0"==this.curObj.isMe){if(this.isMeChupai){var t=this.pokerArr[this.pokerArr.length-1];t&&(GlobalData.curData=[],GlobalData.curData.push(t.y)),Net.send(Protocol.DDZ_CHU_PAI,{pokers:GlobalData.curData},this.chupaiBack.bind(this)),this.isMeChupai=!1}}else this.setfuwei(),GlobalData.curData=[],this.isMeChupai&&(Net.send(Protocol.DDZ_CHU_PAI,{pokers:[]},this.chupaiBack.bind(this)),this.isMeChupai=!1)},e.prototype.chupaiBack=function(t){if(this.btnChu.touchEnabled=!0,this.btnGuo.touchEnabled=!0,200==t.code)this.btnChu.visible=!1,this.btnGuo.visible=!1,this.pokerArr=[],this.pokerArr=PokerManage.paixu(t.handCard,[]),this.updatePoker(),GlobalData.curData=[],this.setfuwei();else{if("208"==t.msg||"508"==t.msg)return void TipsManage.showTips("等待结算中,不能出牌！");TipsManage.showTips("牌出错啦！"),this.isMeChupai=!0,this.btnChu.visible=!0,this.btnGuo.visible=!0}},e.prototype.updatePoker=function(){for(var t=this.pokerData.length,e=0;t>e;e++)this.pokerData[e]&&(this.pokerData[e].parent&&this.pokerData[e].parent.removeChild(this.pokerData[e]),ObjManage.addPoker(this.pokerData[e]));this.pokerData=[];var i=this.pokerArr.length;for(e=0;i>e;e++){var n=ObjManage.getPoker();n.rotation=5+-(10*i)/2+10*e,n.setData({res:this.pokerArr[e].y+""}),n.anchorOffsetX=55,n.anchorOffsetY=320,n.x=this.pokerPos[0],n.y=this.pokerPos[1],this.addChild(n),n.name="poker_"+e,this.pokerData.push(n)}},e.prototype.someonechangeowner=function(t){this.chairToView(t.msg.chairId)},e.prototype.someoneconclude=function(t){console.log("开始结算了"),clearInterval(this.tt2),this.setChildIndex(this.grpEnd,this.numChildren-1),this.grpEnd.visible=!0,this.setChildIndex(this.topGroup,this.numChildren-1);var e=t.msg;this.imgResult.source="",this.txtDi.text=e.bet.difen,this.txtBeishu.text=e.bet.bet,this.txtStt.text="炸弹"+e.bom+"个,春天"+e.chuntian+"个";for(var i=0;3>i;i++){var n=this.chairToView(i);if(0==n){var a=e.data[i];this.txtGoldFen.text=""+QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtFen.text=(a>0?"":"-")+QuickManage.moneyStr(Math.abs(a)),this.imgResult.source=a>0?"youwin":"youlose",this.txtResult.text=a>0?"赢得:":"输掉:"}else this["group"+n].setGold(e.data[i])}},e.prototype.setOver=function(t){PanelManage.openResult(t)},e.prototype.someoneopencard=function(t){this.chairToView(t.msg.chairId)},e.prototype.someonesendcard=function(t){},e.prototype.someonestart=function(t){},e.prototype.someonejoin=function(t){if("-1"!=GlobalData.user.seat){var e=this.chairToView(t.msg.chairId);0!=e&&(this["group"+e].visible=!0,this["group"+e].setData({head:t.msg.headurl,pokernum:"X0",name:t.msg.name,gold:QuickManage.moneyStr(parseInt(t.msg.gold+""))}),1==this.group1.visible&&1==this.group2.visible?this.txtTips.visible=!1:this.txtTips.text="请等待剩余1名玩家加入...")}},e.prototype.someoneready=function(t){this.chairToView(t.msg.chairId)},e.prototype.someoneleave=function(t){var e=this.chairToView(t.msg.chairId);this["group"+e].visible=!1},e.prototype.gogo=function(){if(2==++this.count){var t=ObjManage.getPoker();t.setData({res:this.pokerArr[this.ii].y+""}),t.rotation=5+-(10*this.len)/2+10*this.ii,t.anchorOffsetX=55,t.anchorOffsetY=320,t.x=this.pokerPos[0],t.y=this.pokerPos[1],t.name="poker_"+this.ii,this.addChild(t),this.pokerData.push(t),this.count=0,++this.ii,this.ii==this.len&&TimerManager.getInstance().remove("GamePanel.gogo")}},e.prototype.someonequit=function(t){"512"==t.msg&&TipsManage.showTips("金币不足,不能在此房间继续游戏."),Net.send(Protocol.DDZ_QUIT_GAME,{},this.quit.bind(this))},e.prototype.quit=function(t){void 0===t&&(t=null),this.dispose()},e.prototype.pokerClickHandle=function(t){t.setSelect()},e.prototype.dispose=function(){MusicManage.closeMuisc(),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(DdzPanel.prototype,"DdzPanel",["fany.IDispose"]);var PokerPanel=function(t){function e(){var e=t.call(this)||this;return e.flag=!1,e.skinName="resource/skins/ddz/PokerPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t){this.poker.source=t.res},e.prototype.getData=function(){return this.poker.source},e.prototype.setSelect=function(){MusicManage.playMuisc("s004"),this.hui.visible?(this.hui.visible=!1,this.y=800,this.removePoker()):(this.hui.visible=!0,this.y=780,GlobalData.curData.push(this.poker.source))},e.prototype.removePoker=function(){for(var t=GlobalData.curData.length,e=0;t>e;e++)GlobalData.curData[e]==this.poker.source&&GlobalData.curData.splice(e,1)},e.prototype.setSelect2=function(){this.hui.visible||(MusicManage.playMuisc("s004"),this.hui.visible=!0,this.y=780,GlobalData.curData.push(this.poker.source))},e.prototype.setSelect3=function(){this.hui.visible&&(MusicManage.playMuisc("s004"),this.hui.visible=!1,this.y=800,this.removePoker())},e.prototype.setHui=function(){this.hui.visible=!1},e}(eui.Component);__reflect(PokerPanel.prototype,"PokerPanel");var EmailItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/email/EmailItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.labName.text=t.sname,this.labDesc.text=t.title,this.labTime.text=new Date(t._id).toLocaleString()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(EmailItemPanel.prototype,"EmailItemPanel",["fany.IDispose"]);var EmailPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/email/EmailPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.GET_MAIL_LIST,{},this.maillistcallback.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.maillistcallback=function(t){if(200==t.code){this.clearItems();var e=t.mails,i=e.length;i>0?this.labTips.visible=!1:this.labTips.visible=!0;for(var n=0;i>n;n++){var a=ObjManage.getObj("EmailItemPanel");a.y=111*n,this.itemGroup.addChild(a),a.setData(e[n]),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("EmailItemPanel",this.arr[e]));this.arr=[]},e.prototype.onTouchVip=function(){PanelManage.openVip()},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(EmailPanel.prototype,"EmailPanel",["fany.IDispose"]);var FreeCoinItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/freeCoin/FreeCoinItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnGet,egret.TouchEvent.TOUCH_TAP,this.btnGetHandle.bind(this))},e.prototype.btnGetHandle=function(){this.func&&this.func()},e.prototype.setData=function(t){this.labTitle.text=t.title,this.labInfo.text=t.info,this.btnGet.source=t.res,this.func=t.func},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(FreeCoinItemPanel.prototype,"FreeCoinItemPanel",["fany.IDispose"]);var FreeCoinPanel=function(t){function e(){var e=t.call(this)||this;return e.tipsGoldData=null,e.skinName="resource/skins/freeCoin/FreeCoinSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.initData(),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.GET_FOLLOW_GOLD,this.getGoldTips.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.initData=function(){this.arr=[];var t={},e=[];"self"==GlobalData.userfrom?(t={title:"绑定账号领金币",info:"用账号登录可领取50万金币",res:"task.btnget",func:this.openQRcode.bind(this)},e.push(t)):""!=GlobalData.configData.data.gongzhonghaourl&&(t={title:"关注领金币",info:"关注公众号后可领取50万金币",res:"task.btnget",func:this.openQRcode.bind(this)},e.push(t));var i={title:"救济金",info:"少于金币10000即可领取",res:"task.btnget",func:this.getFreeCoins.bind(this)},n={title:"签到奖励",info:"每日登陆即可领取",res:"c.btnchakan",func:this.jumpSign.bind(this)},a={title:"任务领取",info:"完成登陆即可领取",res:"c.btnchakan",func:this.jumpTask.bind(this)},s={title:"提建议得金币",info:"提交建议或者BUG采纳就会有50万金币奖励",res:"c.btnchakan",func:this.jumpSet.bind(this)},o={title:"转盘大抽奖",info:"每日转盘大抽奖",res:"c.btnchakan",func:this.jumpJiang.bind(this)};e.push(i),e.push(n),e.push(a),e.push(s),e.push(o);for(var r=e.length,h=0;r>h;h++){var l=ObjManage.getObj("FreeCoinItemPanel");l.y=125*h,this.itemGroup.addChild(l),l.setData(e[h]),this.arr.push(l)}},e.prototype.getFreeCoins=function(){Net.send(Protocol.GET_ALMS,{},this.getFreeCallback.bind(this))},e.prototype.getFreeCallback=function(t){200==t.code?(GlobalData.user.gold=t.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),EffectUtils.coinsFly(this,416,340)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.jumpSet=function(){PanelManage.openSet()},e.prototype.jumpJiang=function(){PanelManage.openLottery()},e.prototype.jumpTask=function(){PanelManage.openTask()},e.prototype.jumpSign=function(){PanelManage.openSign()},e.prototype.openQRcode=function(){Net.send(Protocol.HALL_GET_FOLLOW_GOLD,{},this.getGoldCB.bind(this)),"weixin"==GlobalData.userfrom?QuickManage.openEr(GlobalData.configData.data.gongzhonghaourl):0==GlobalData.isLogin&&(window.location.href=GlobalData.configData.data.linkhall+"?fwid=fixed")},e.prototype.getGoldCB=function(t){this.tipsGoldData=t},e.prototype.getGoldTips=function(){this.tipsGoldData&&(200==this.tipsGoldData.code?(GlobalData.user.gold=this.tipsGoldData.gold,PanelManage.hall.updateData(),TipsManage.showTips("恭喜你领取了50万金币！")):TipsManage.showTips(ErrorMessage.errorMsg(this.tipsGoldData.msg)))},e.prototype.dispose=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("FreeCoinItemPanel",this.arr[e]));this.arr=[],this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(FreeCoinPanel.prototype,"FreeCoinPanel",["fany.IDispose"]);var FruitInfo=function(){function t(){this._count=0,this._count1=0,this._count2=0,this._count3=0,this._ii=0,this._ii1=0,this._ii2=0,this._ii3=0,this._jiange=0,this._isGo=!1,this._isGo1=!1,this._isGo2=!1,this._isGo3=!1,this._jiedian=0,this._endtime=0,this._r=null,this._danzhu="",this._timett=0,this._timett1=0,this._tt=0,this._tt1=0,this._tt2=0,this._result=null,this._resultc=!1,this._daojishicom=!1,this._end=0,this._endzhuanhuan=0,this._ctt=0,this._fltt=!1,this._zhuangnum=0,this._changebanker=null,this._isSys=!1,this._collectobj=null,this._zhuangGold=0,this._isChongfuXiazhu=!1,this._isYing=!1,this.isChongfuXiazhu=!1,this.ii=0,this.ii1=0,this.ii2=0,this.ii3=0,this.jiange=0,this.jiedian=0,this.isGo=!1,this.isGo1=!1,this.isGo2=!1,this.isGo3=!1,this.currentArr=[],this.endtime=0,this.r=null,this.danzhu="",this.timett=0,this.timett1=0,this.tt=0,this.tt1=0,this.tt2=0,this.result=null,this.resultc=!1,this.daojishicom=!1,this.end=0,this.endzhuanhuan=0,this.ctt=0,this.fltt=!1,this.xiazhuArr=[],this.xiazhuArr2=[],this.zhiqianArr=[],this.zhuArr=[],this.zhuangnum=0,this.zhuangGold=0,this.changebanker=null,this.isSys=!1,this.collectobj=null,this.posArr=[]}return t.prototype.init=function(){},Object.defineProperty(t.prototype,"posArr",{get:function(){return this._posArr},set:function(t){this._posArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isYing",{get:function(){return this._isYing},set:function(t){this._isYing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChongfuXiazhu",{get:function(){return this._isChongfuXiazhu},set:function(t){this._isChongfuXiazhu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangGold",{get:function(){return this._zhuangGold},set:function(t){this._zhuangGold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(t){this._count=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii1",{get:function(){return this._ii1},set:function(t){this._ii1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii2",{get:function(){return this._ii2},set:function(t){this._ii2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii3",{get:function(){return this._ii3},set:function(t){this._ii3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentArr",{get:function(){return this._currentArr},set:function(t){this._currentArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jiange",{get:function(){return this._jiange},set:function(t){this._jiange=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo",{get:function(){return this._isGo},set:function(t){this._isGo=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo1",{get:function(){return this._isGo1},set:function(t){this._isGo1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo2",{get:function(){return this._isGo2},set:function(t){this._isGo2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo3",{get:function(){return this._isGo3},set:function(t){this._isGo3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jiedian",{get:function(){return this._jiedian},set:function(t){this._jiedian=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endtime",{get:function(){return this._endtime},set:function(t){this._endtime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danzhu",{get:function(){return this._danzhu},set:function(t){this._danzhu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timett",{get:function(){return this._timett},set:function(t){this._timett=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timett1",{get:function(){return this._timett1},set:function(t){this._timett1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt",{get:function(){return this._tt},set:function(t){this._tt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt1",{get:function(){return this._tt1},set:function(t){this._tt1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt2",{get:function(){return this._tt2},set:function(t){this._tt2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return this._result},set:function(t){this._result=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resultc",{get:function(){return this._resultc},set:function(t){this._resultc=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"daojishicom",{get:function(){return this._daojishicom},set:function(t){this._daojishicom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(t){this._end=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endzhuanhuan",{get:function(){return this._endzhuanhuan},set:function(t){this._endzhuanhuan=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ctt",{get:function(){return this._ctt},set:function(t){this._ctt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fltt",{get:function(){return this._fltt},set:function(t){this._fltt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xiazhuArr2",{get:function(){return this._xiazhuArr2},set:function(t){this._xiazhuArr2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xiazhuArr",{get:function(){return this._xiazhuArr},set:function(t){this._xiazhuArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhiqianArr",{get:function(){return this._zhiqianArr},set:function(t){this._zhiqianArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuArr",{get:function(){return this._zhuArr},set:function(t){this._zhuArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangnum",{get:function(){return this._zhuangnum},set:function(t){this._zhuangnum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changebanker",{get:function(){return this._changebanker},set:function(t){this._changebanker=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSys",{get:function(){return this._isSys},set:function(t){this._isSys=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectobj",{get:function(){return this._collectobj},set:function(t){this._collectobj=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count1",{get:function(){return this._count1},set:function(t){this._count1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count2",{get:function(){return this._count2},set:function(t){this._count2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count3",{get:function(){return this._count3},set:function(t){this._count3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii",{get:function(){return this._ii},set:function(t){this._ii=t},enumerable:!0,configurable:!0}),t}();__reflect(FruitInfo.prototype,"FruitInfo");var FruitPanel=function(t){function e(e){var i=t.call(this)||this;return i.tt=0,i.isLeave=!1,i.skinName="resource/skins/fruit/FruitPanelSkin.exml",FruitUtils.getInstance().getFruit().r=e,GlobalData.user.rate=parseFloat(e.data.rate+""),console.log("rate=="+GlobalData.user.rate),i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),EventManage.addEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.leaveGame.bind(this)),EventManage.addEvent(this,this.btnQiehuan,egret.TouchEvent.TOUCH_TAP,this.qiehuanhandle.bind(this)),EventManage.addButtonEvent(this,this.imgfa,egret.TouchEvent.TOUCH_TAP,this.imgfaHandle.bind(this)),this.init(),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.OPERTE_REDBOX_COMPLETE,this.operateBoxComplete.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.operateBoxComplete.bind(this)),PanelManage.openChat(this,112,378,"10006"),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),EventManage.addButtonEvent(this,this.btnChong,egret.TouchEvent.TOUCH_TAP,this.btnChongHandle.bind(this)),MusicManage.playGameBgMuisc("fruit_bg",.5,-1),EventManage.addEvent(this,this.btnFeng,egret.TouchEvent.TOUCH_TAP,this.btnJiluHandle.bind(this)),EventManage.addEvent(this,this.btnJilu,egret.TouchEvent.TOUCH_TAP,this.btnJiluHandle.bind(this))},e.prototype.btnJiluHandle=function(){TipsManage.showTips("暂未开放!")},e.prototype.btnChongHandle=function(){PanelManage.openShop(3)},e.prototype.updatePayData=function(t){var e=t.param;GlobalData.user.gold=e.msg.gold+"",GlobalData.user.vip=e.msg.vip+"",EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold)),this.txtVip.text="VIP"+GlobalData.user.vip},e.prototype.operateBoxComplete=function(){EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.imgfaHandle=function(){PanelManage.openRedBox(0,1)},e.prototype.btnBaoHandle=function(){},e.prototype.btnChongfuHandle=function(){this.fruit.xiazhuArr2.length>0&&Net.send(Protocol.FRUIT_XIA_ZHU,{bets:this.fruit.xiazhuArr2},this.xiazhucallback1.bind(this))},e.prototype.xiazhucallback1=function(t){if(200==t.code){for(var e=this.fruit.xiazhuArr2.length,i=0;e>i;i++)this.fruit.zhuArr[parseInt(this.fruit.xiazhuArr2[i].betId+"")-1]=this.fruit.zhuArr[parseInt(this.fruit.xiazhuArr2[i].betId+"")-1]+parseInt(this.fruit.xiazhuArr2[i].gold+""),this["txtCurrent"+this.fruit.xiazhuArr2[i].betId].text=QuickManage.moneyStr(this.fruit.zhuArr[parseInt(this.fruit.xiazhuArr2[i].betId+"")-1]),this.fruit.xiazhuArr.push(this.fruit.xiazhuArr2[i]);this.updateGold()}else"319"==t.msg?TipsManage.showTips("非VIP玩家下注不能超过1万!"):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.qiehuanhandle=function(){this.fruit.danzhu=""+FruitUtils.getInstance().getDanZhu(this.fruit.danzhu),this.txtDanzhu.text="单注:"+QuickManage.moneyStr(parseInt(this.fruit.danzhu))},e.prototype.xiazhuHandle=function(t){if(this.helptips.visible=!1,this.setBtnXy(),"a"!=(this["zhu"+t].source+"").charAt(7)){var e=parseInt(GlobalData.user.gold)-parseInt(this.fruit.danzhu);return 0>e?void TipsManage.showTips("金币不足!"):void Net.send(Protocol.FRUIT_XIA_ZHU,{bets:[{betId:""+t,gold:this.fruit.danzhu}]},this.xiazhucallback.bind(this,t))}},e.prototype.xiazhucallback=function(t,e){if(200==e.code){this.fruit.xiazhuArr.push({gold:this.fruit.danzhu,betId:t}),this.fruit.zhuArr[t-1]=this.fruit.zhuArr[t-1]+parseInt(this.fruit.danzhu),this["txtCurrent"+t].text=QuickManage.moneyStr(this.fruit.zhuArr[t-1]);var i=parseInt(GlobalData.user.gold)-parseInt(this.fruit.danzhu);0>i&&(i=0),GlobalData.user.gold=i+"",this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold))}else"319"==e.msg?TipsManage.showTips("非VIP玩家下注不能超过1万!"):TipsManage.showTips(ErrorMessage.errorMsg(e.msg))},e.prototype.setBtnXy=function(){for(var t=this.fruit.posArr.length,e=1;t>e;e++){var i=this.fruit.posArr[e],n=i.view,a=i.acx,s=i.acy,o=i.xx,r=i.yy;n.acx=a,n.acy=s,n.x=o,n.y=r}},e.prototype.feiqi=function(t){},e.prototype.setMaxInfo=function(t){200==t.code&&(this.txtMaxName.text=t.data.name,this.txtMaxVip.text="VIP"+t.data.vip,this.maxhead.source=t.data.headurl)},e.prototype.init=function(){Net.send(Protocol.FRUIT_GET_MAX,{},this.setMaxInfo.bind(this)),this.fruit=FruitUtils.getInstance().getFruit();for(var t=0;22>t;t++)this.fruit.currentArr.push(this["z"+t]);this.fruit.zhuArr=[];for(var t=1;9>t;t++)this.fruit.zhuArr.push(0),this.fruit.posArr.push({view:this["zhu"+t],acx:this["zhu"+t].anchorOffsetX,acy:this["zhu"+t].anchorOffsetY,xx:this["zhu"+t].x,yy:this["zhu"+t].y}),EventManage.addButtonEvent(this,this["zhu"+t],egret.TouchEvent.TOUCH_TAP,this.xiazhuHandle.bind(this,t),"fruit_bet"+t);this.txtVip.text="VIP"+GlobalData.user.vip,this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtName.text=GlobalData.user.nickname,this.txtCaijin.text=this.fruit.r.data.caijin,this.head.source=GlobalData.user.headurl,console.log("服务端获取到的时间为:"+this.fruit.r.data.time),this.fruit.timett=Math.abs(parseInt(this.fruit.r.data.time))+3,(-1!=(this.fruit.timett+"").indexOf(".")||this.fruit.timett>20)&&Net.send(Protocol.HALL_SET_PROPOSAL,{proposal:"请截图给管理员fruit:"+this.fruit.r.data.state+":"+this.fruit.r.data.time},this.feiqi.bind(this)),this.fruit.timett<10?this.txtTime.text="0"+this.fruit.timett:this.txtTime.text=""+this.fruit.timett,this.fruit.timett>20&&(this.txtTime.text="20",this.fruit.timett=20),console.warn("当前游戏状态是==="+this.fruit.r.data.state),"3"==this.fruit.r.data.state?(this.setBtnTouched(),this.txtTime.text="00"):(clearInterval(this.fruit.tt),this.fruit.tt=setInterval(this.updateTime.bind(this),1e3)),this.fruit.danzhu=this.fruit.r.data.danzhu,this.txtDanzhu.text="单注:"+QuickManage.moneyStr(parseInt(this.fruit.danzhu)),this.fruit.zhiqianArr=this.fruit.r.data.recent,this.setZuiJin()},e.prototype.setZuiJin=function(){for(var t=this.fruit.zhiqianArr.length,e=0;t>e;e++)this["zhiqian"+e].source="fruit."+this.fruit.zhiqianArr[e]+"d"},e.prototype.updateTime=function(){--this.fruit.timett,this.fruit.timett>0?this.fruit.timett<10?this.txtTime.text="0"+this.fruit.timett:this.txtTime.text=""+this.fruit.timett:(clearInterval(this.fruit.tt),this.txtTime.text="00")},e.prototype.resultcome=function(t){clearInterval(this.fruit.tt),this.txtTime.text="00",this.fruit.result=t,this.fruit.resultc=!0,FruitUtils.getInstance().startEffect(),TimerManager.getInstance().setFrame("FruitPanel.gogo",this.gogo.bind(this),this)},e.prototype.collect=function(t){this.fruit.collectobj=t},e.prototype.betcome=function(t){return this.fruit.r&&"3"==this.fruit.r.data.state?(this.fruit.timett=Math.abs(parseInt(t.msg.time))+3,this.fruit.timett<10?this.txtTime.text="0"+this.fruit.timett:this.txtTime.text=""+this.fruit.timett,this.setBtnTouched(!0),clearInterval(this.fruit.tt),this.fruit.tt=setInterval(this.updateTime.bind(this),1e3),void(this.fruit.r=null)):(this.fruit.timett1=Math.abs(parseInt(t.msg.time))+3,clearInterval(this.fruit.tt1),void(this.fruit.tt1=setInterval(this.updateTime1.bind(this),1e3)))},e.prototype.betstop=function(t){console.warn("停止下注了"),this.setBtnTouched(),this.tt=0},e.prototype.updateTime1=function(){--this.fruit.timett1},e.prototype.setBtnTouched=function(t){void 0===t&&(t=!1);var e="fruit.a";t&&(e="fruit.l");for(var i=1;9>i;i++)this["zhu"+i].source=e+i,this["zhu"+i].touchEnabled=t;this.btnQiehuan.touchEnabled=t},e.prototype.gogo=function(){FruitUtils.getInstance().manageMc(this.jiesuan.bind(this),this.pushArr.bind(this))},e.prototype.jiesuan=function(){TimerManager.getInstance().remove("FruitPanel.gogo"),this.fruit.tt2=setTimeout(this.endmc.bind(this),1e3)
},e.prototype.updateGold=function(){Net.send(Protocol.FRUIT_GET_GOLD,{},this.updateGoldSucc.bind(this))},e.prototype.updateGoldSucc=function(t){GlobalData.user.gold=t.data.gold+"",console.log("同步金币返回"+GlobalData.user.gold),EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.endmc=function(){clearTimeout(this.fruit.tt2),this.isBaocaijin(),this.updateGold()},e.prototype.isBaocaijin=function(){var t=this.fruit.result.msg.result+"",e="fruit."+t+"a",i=""+FruitUtils.getInstance().jiesuan(this.fruit.xiazhuArr,parseInt(t)),n=""+QuickManage.moneyStr(parseInt(this.fruit.result.msg.gift)),a=this.fruit.collectobj.msg.max.name,s="",o=this.fruit.collectobj.msg.max.value;PanelManage.openGameResult({res:e,win:i,caijing:n,max:{name:a,vip:1,headurl:s,maxGold:o}}),this.next(),this.fruit.zhiqianArr.length>9&&this.fruit.zhiqianArr.shift(),this.fruit.zhiqianArr.push(t),this.setZuiJin()},e.prototype.next=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CHAT_GAME_RESULT)),this.initData(),clearInterval(this.fruit.tt),this.fruit.tt=setInterval(this.updateTime.bind(this),1e3)},e.prototype.initData=function(){Net.send(Protocol.FRUIT_GET_MAX,{},this.setMaxInfo.bind(this)),clearInterval(this.fruit.tt1),this.setBtnTouched(!0),this.fruit.timett=this.fruit.timett1,this.fruit.resultc=!1,this.fruit.xiazhuArr.length>0&&(this.fruit.xiazhuArr2=[],this.fruit.xiazhuArr2=this.fruit.xiazhuArr),this.fruit.xiazhuArr=[],this.fruit.zhuArr=[];for(var t=1;9>t;t++)this["txtCurrent"+t].text="0",this.fruit.zhuArr.push(0)},e.prototype.pushArr=function(t){var e=this["z"+t],i=e.source;e.source=i.replace("b","c")},e.prototype.leaveGame=function(){return FruitUtils.getInstance().isCanQuit()?void TipsManage.showTips("已经下注,不能离开!"):void(0==this.isLeave&&(Net.send(Protocol.FRUIT_LEAVE,{cell:this.fruit.danzhu},this.leavegamecallback.bind(this)),this.isLeave=!0))},e.prototype.leavegamecallback=function(t){200==t.code?(lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.dispose()):TipsManage.showTips(JSON.stringify(t))},e.prototype.dispose=function(){clearInterval(this.fruit.tt),clearInterval(this.fruit.tt1),MusicManage.closeMuisc(),TimerManager.getInstance().remove("FruitPanel.gogo"),FruitUtils.getInstance().clear(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(FruitPanel.prototype,"FruitPanel",["fany.IDispose"]);var FruitUtils=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist");this.fruit=new FruitInfo}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.clear=function(){this.fruit=null},t.prototype.startEffect=function(){var e=this.fruit.result.msg.result,i=this.fruit.end,n=t.getInstance().getTrueRes(e);n.stt;this.fruit.end=n.end,this.fruit.endzhuanhuan=110+this.fruit.end-i+1,this.fruit.endtime=0;var a=this.fruit.currentArr[i].source;this.fruit.currentArr[i].source=a.replace("b","c"),this.fruit.jiange=10,this.fruit.ii=i,this.fruit.jiedian=3,this.fruit.isGo=!0},t.prototype.getFruit=function(){return null==this.fruit&&(this.fruit=new FruitInfo),this.fruit},t.prototype.isCanQuit=function(){for(var t=this.fruit.zhuArr,e=t.length,i=!1,n=0;e>n;n++)if(t[n]>0){i=!0;break}return i},t.prototype.manageMc=function(t,e){this.fruit.isGo&&++this.fruit.count==this.fruit.jiange&&(this.fuyuan(),e(this.fruit.ii++),this.fruit.isGo1&&(e(this.fruit.ii1),e(this.fruit.ii2),e(this.fruit.ii3)),this.fruit.count=0,++this.fruit.endtime==this.fruit.endzhuanhuan-4&&(this.fruit.isGo1=!1,this.fruit.jiange=10,MusicManage.playMuisc("fruit_stop")),this.fruit.endtime==this.fruit.endzhuanhuan&&(this.fruit.isGo=!1,t()),this.fruit.jiedian>=0&&0==--this.fruit.jiedian&&(this.fruit.jiange=1,this.fruit.jiedian=-1,this.fruit.isGo1=!0,MusicManage.playMuisc("fruit_loop",1,-1)))},t.prototype.fuyuan=function(){this.fruit.ii>21&&(this.fruit.ii=0),0==this.fruit.ii?(this.fruit.ii1=21,this.fruit.ii2=20,this.fruit.ii3=19):1==this.fruit.ii?(this.fruit.ii1=0,this.fruit.ii2=21,this.fruit.ii3=20):2==this.fruit.ii?(this.fruit.ii1=1,this.fruit.ii2=0,this.fruit.ii3=21):(this.fruit.ii1=this.fruit.ii-1,this.fruit.ii2=this.fruit.ii-2,this.fruit.ii3=this.fruit.ii-3);for(var t=this.fruit.currentArr.length,e=0;t>e;e++){var i=this.fruit.currentArr[e].source;this.fruit.currentArr[e].source=i.replace("c","b")}},t.prototype.getDanZhu=function(t){var e=0;switch(t){case"1000":e=1e4;break;case"10000":e=1e5;break;case"100000":e=5e5;break;case"500000":e=1e6;break;case"1000000":e=5e6;break;case"5000000":e=1e7;break;case"10000000":e=5e7;break;case"50000000":e=1e3;break;default:e=1e4}return e},t.prototype.jiesuan=function(t,e){for(var i=t.length,n=0,a=0;i>a;a++){var s=this.getBet(t[a].betId);(e+""==t[a].betId+""||e+""=="9")&&(n+=s*t[a].gold)}return n*=1-GlobalData.user.rate},t.prototype.getBet=function(t){var e=1;switch(t){case 1:e=100;break;case 2:e=50;break;case 3:e=20;break;case 4:e=15;break;case 5:e=8;break;case 6:e=5;break;case 7:e=3;break;case 8:e=1}return e},t.prototype.getTrueRes=function(t){var e="",i=0;switch(t){case"1":i=3,e="77";break;case"2":i=14,e="西瓜";break;case"3":i=RandomUtils.randomArray([9,20]),e="樱桃";break;case"4":i=RandomUtils.randomArray([10,21]),e="葡萄";break;case"5":i=RandomUtils.randomArray([4,15]),e="草莓";break;case"6":i=RandomUtils.randomArray([0,5,11,16]),e="柚子";break;case"7":i=RandomUtils.randomArray([1,6,12,17]),e="橘子";break;case"8":i=RandomUtils.randomArray([2,7,13,18]),e="苹果";break;case"9":i=RandomUtils.randomArray([19,8]),e="loucky"}return{end:i,stt:e}},t}();FruitUtils.instance=null,__reflect(FruitUtils.prototype,"FruitUtils");var HallPanel=function(t){function e(){var e=t.call(this)||this;return e.time=0,e.xx=0,e.yy=0,e.currentIndex=0,e.moveNumber=0,e.isMove=!1,e.count=0,e.skinName="resource/skins/HallPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.notify_mail.visible=!1,this.notify_task.visible=!1,this.notify_tree.visible=!1,this.chats=[],this.currentIndex=0,this.moveNumber=0,this.createGameBtn(),EventManage.addButtonEvent(this,this.btnJiang,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,1)),EventManage.addButtonEvent(this,this.btnHuoDong,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,4)),EventManage.addButtonEvent(this,this.btnRank,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,3)),EventManage.addButtonEvent(this,this.btnShop,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,2)),EventManage.addButtonEvent(this,this.btnSet,egret.TouchEvent.TOUCH_TAP,this.onClick.bind(this,5)),this.setData(),EventManage.addButtonEvent(this,this.btnDa,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,1)),EventManage.addButtonEvent(this,this.btnEmail,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,2)),EventManage.addButtonEvent(this,this.btnTask,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,3)),EventManage.addButtonEvent(this,this.btnMoney,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,5)),EventManage.addButtonEvent(this,this.btnYao,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,7)),EventManage.addButtonEvent(this,this.btnChong,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,9)),EventManage.addButtonEvent(this,this.btnFreeGold,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,10)),EventManage.addEvent(this,this.btnTeHui,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,11)),EventManage.addButtonEvent(this,this.btnYue,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,12)),EventManage.addButtonEvent(this,this.btnVip,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,13)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.updateData.bind(this)),EventManage.addButtonEvent(this,this.btnKefu,egret.TouchEvent.TOUCH_TAP,this.onClick2.bind(this,16)),EventManage.addOnceEvent(this,lcp.LListener.getInstance(),EventData.UI_COM_OPEN,this.goonOpenUI.bind(this)),PanelManage.openNotice(this.gudingGroup),TimerManager.getInstance().setFrame("GameMainPanel.noticeMoveHandler",this.noticeMoveHandler.bind(this),this),-1!=GlobalData.hallNotice&&this.redNotice(GlobalData.hallNotice,!0),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),GlobalData.user.hasRecharge&&(this.btnTeHui.visible=!1,this.btnTeHui.touchEnabled=!1),this.createSnow(),this.setVersion()},e.prototype.noticeMoveHandler=function(){this.btnTeHui.visible&&45==++this.count&&(EffectUtils.playEffect2(this.btnTeHui,this.fuweiTeHui.bind(this)),this.count=0),this.snow1.y>1024&&(this.snow1.y=-500),this.snow2.y>1024&&(this.snow2.y=-500),this.snow1.y++,this.snow2.y++},e.prototype.createGameBtn=function(){for(var t=["btnJinSha","btnDdz","btnXiaoChou","btnJinHua","btnNiuNiu","blackjack","btnShuiGuo","pk"],e=0,i=0;i<t.length;i++){var n=new eui.Image(t[i]);this.itemGroup.addChild(n),i%2==0?(e=190*(i/2),n.x=0,n.y=e):(n.x=305,n.y=e),EventManage.addEvent(this,n,egret.TouchEvent.TOUCH_TAP,this.onTouchEend.bind(this,t[i]))}},e.prototype.createSnow=function(){this.snow1=new eui.Image(GlobalData.cdnResUrl+"resource/assets/noload/noload.snow.png"),this.snow1.touchEnabled=!1,PanelManage.tipsLayer.addChild(this.snow1),this.snow2=new eui.Image(GlobalData.cdnResUrl+"resource/assets/noload/noload.snow.png"),this.snow2.touchEnabled=!1,this.snow2.y=-800,PanelManage.tipsLayer.addChild(this.snow2)},e.prototype.updatePayData=function(t){var e=t.param;GlobalData.user.gold=e.msg.gold+"",GlobalData.user.vip=e.msg.vip+"",this.updateData(),this.btnTeHui.visible=!1,this.btnTeHui.touchEnabled=!1},e.prototype.goonOpenUI=function(t){var e=t.param;2==e.from?this.onClick2(e.num):this.onClick(e.num)},e.prototype.updateData=function(){EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold)),this.txtVip.text="VIP"+GlobalData.user.vip},e.prototype.onClick2=function(t){if(!GlobalData.isLodingComUI)return void PanelManage.openResLoading2({num:t,from:2});switch(t){case 1:PanelManage.openDa();break;case 2:this.notify_mail.visible=!1,PanelManage.openEmail();break;case 3:PanelManage.openTask();break;case 4:PanelManage.openAward();break;case 5:PanelManage.openMoney();break;case 6:break;case 7:PanelManage.openYaoQing();break;case 8:break;case 9:PanelManage.openShop();break;case 10:PanelManage.openFreeCoin();break;case 11:PanelManage.openTeHui();break;case 12:PanelManage.openYue();break;case 13:PanelManage.openVip();break;case 15:PanelManage.openUser();break;case 16:PanelManage.openKefu()}},e.prototype.setData=function(){var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(77,50,40),t.graphics.endFill(),this.addChild(t),this.head.mask=t,this.head.source=GlobalData.user.headurl,this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtName.text=GlobalData.user.nickname,this.txtVip.text="VIP"+GlobalData.user.vip},e.prototype.updateHeadurl=function(){var t=GlobalData.user.headurl.split("_")[0];"nan"==t||"nv"==t?this.head.source=GlobalData.configData.data.headurl+GlobalData.user.headurl+".png":this.head.source=GlobalData.user.headurl,this.txtName.text=GlobalData.user.nickname},e.prototype.onClick=function(t){if(this.btnJiang.source="btnJiang",this.btnShop.source="btnShop",this.btnHuoDong.source="btnHuoDong",this.btnSet.source="btnSet",!GlobalData.isLodingComUI)return void PanelManage.openResLoading2({num:t,from:1});switch(t){case 1:this.btnJiang.source="btnJiangLiang",PanelManage.openAward();break;case 2:this.btnShop.source="btnShopLiang",PanelManage.openShop();break;case 3:PanelManage.openRank();break;case 4:this.btnHuoDong.source="btnHuoDongLiang",PanelManage.openActive();break;case 5:this.btnSet.source="btnSetLiang",PanelManage.openSet()}},e.prototype.onTouchEend=function(t){switch(t){case"btnJinSha":PanelManage.openResLoading("jinsha");break;case"btnJinHua":PanelManage.openResLoading("jinhua");break;case"btnNiuNiu":PanelManage.openResLoading("niuniu");break;case"blackjack":PanelManage.openResLoading("blackjack");break;case"pk":PanelManage.openResLoading("pk");break;case"btnDdz":PanelManage.openResLoading("ddz");break;case"btnXiaoChou":PanelManage.openResLoading("clown");break;case"btnShuiGuo":PanelManage.openResLoading("fruit")}},e.prototype.fuweiItem=function(t,e){t.x=e},e.prototype.fuweiTeHui=function(){this.btnTeHui.x=531,this.btnTeHui.y=164},e.prototype.redNotice=function(t,e){switch(t.type){case 1:this.notify_task.visible=e;break;case 2:this.notify_mail.visible=e,this.updateGold();break;case 3:this.notify_tree.visible=e;break;case 4:PanelManage.openDaTips(t)}},e.prototype.updateGold=function(){Net.send(Protocol.HALL_GET_GOLD,{},this.updateGoldCB.bind(this))},e.prototype.updateGoldCB=function(t){GlobalData.user.gold=t.data.gold,EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e.prototype.setVersion=function(){"self"==GlobalData.userfrom||"platform"==GlobalData.userfrom},e}(eui.Component);__reflect(HallPanel.prototype,"HallPanel",["fany.IDispose"]);var JingCaiItemPanel=function(t){function e(){var e=t.call(this)||this;return e.answerNum="",e.skinName="resource/skins/jingcai/JingCaiItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.txtGold,egret.Event.CHANGE,this.txtGoldChange.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.btnSureHandle.bind(this)),EventManage.addEvent(this,this.itemA,egret.TouchEvent.TOUCH_TAP,this.itemClick.bind(this,1)),EventManage.addEvent(this,this.itemB,egret.TouchEvent.TOUCH_TAP,this.itemClick.bind(this,2)),this.txtGold.restrict="0-9"},e.prototype.itemClick=function(t){switch(t){case 1:this.itemA.scaleX=1.1,this.itemA.scaleY=1.1,this.itemB.scaleX=1,this.itemB.scaleY=1,this.answerNum=this.itemA.name;break;case 2:this.itemA.scaleX=1,this.itemA.scaleY=1,this.itemB.scaleX=1.1,this.itemB.scaleY=1.1,this.answerNum=this.itemB.name}},e.prototype.btnSureHandle=function(){if(""==this.answerNum)return void TipsManage.showTips("请选择一个答案!");if(""==this.txtGold.text)return void TipsManage.showTips("请输入下注金额!");var t=parseInt(this.txtGold.text);if(0==t)return void TipsManage.showTips("请输入下注金额!");var e={competitionId:this.idd,aorb:this.answerNum,gold:1e4*t};console.log(JSON.stringify(e)),Net.send(Protocol.SEND_JINGCAI,e,this.jingcaicallback.bind(this))},e.prototype.jingcaicallback=function(t){200==t.code?this.answerNum==this.itemA.name?this.txtA.text="已下注:"+t.data.max_bet:this.txtB.text="已下注:"+t.data.max_bet:(console.log(JSON.stringify(t)),TipsManage.showTips(ErrorMessage.errorMsg(t.msg)))},e.prototype.txtGoldChange=function(){var t=parseInt(this.txtGold.text);this.txtGold.text=t+"万"},e.prototype.setData=function(t){this.idd=t._id,this.img.source="http://c.hiphotos.baidu.com/zhidao/pic/item/c8177f3e6709c93d72318d2d993df8dcd000542c.jpg",this.txtA.text="已下注:"+t.answer[0].max_bet,this.txtB.text="已下注:"+t.answer[1].max_bet,this.answera.text="A:"+t.answer[0].title,this.answerb.text="B:"+t.answer[1].title,this.itemA.name=""+t.answer[0]._id,this.itemB.name=""+t.answer[1]._id,void 0!=t.result&&(1==t.result?console.log("win A"):console.log("win B"))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(JingCaiItemPanel.prototype,"JingCaiItemPanel",["fany.IDispose"]);var JingCaiPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/jingcai/JingCaiPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnJingcaitxt,egret.TouchEvent.TOUCH_TAP,this.btnJingcaiHandle.bind(this)),EventManage.addButtonEvent(this,this.btnWangqitxt,egret.TouchEvent.TOUCH_TAP,this.btnWangqiHandle.bind(this)),Net.send(Protocol.GET_JINGCAI_LIST,{},this.jingcailistcallback.bind(this))},e.prototype.btnJingcaiHandle=function(){this.btnJingcai.visible=!0,this.btnWangqi.visible=!1,Net.send(Protocol.GET_JINGCAI_LIST,{},this.jingcailistcallback.bind(this))},e.prototype.btnWangqiHandle=function(){this.btnJingcai.visible=!1,this.btnWangqi.visible=!0,Net.send(Protocol.GET_JINGCAI_HISTORY_LIST,{},this.historyCB.bind(this))},e.prototype.jingcailistcallback=function(t){if(200==t.code){this.clearItems();for(var e=t.data.competitionlist,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("JingCaiItemPanel");a.y=335*n,this.itemGroup.addChild(a),a.setData(e[n]),this.arr.push(a)}}},e.prototype.historyCB=function(t){if(console.log(JSON.stringify(t)),200==t.code){this.clearItems();for(var e=t.data,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("JingCaiItemPanel");a.y=335*n,this.itemGroup.addChild(a),a.setData(e[n]),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("JingCaiItemPanel",this.arr[e]));this.arr=[]},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(JingCaiPanel.prototype,"JingCaiPanel",["fany.IDispose"]);var JinHuaUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return 5*Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 1*Math.pow(10,8);case 5:return 5*Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="d2";break;case 3:e="d3";break;case 4:e="d4";break;case 5:e="d5"}return e},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"jh.jackpot";case 2:return"jh.start";case 3:return"jh.end";case 4:return"jh.ts";case 5:return"jh.tp";case 6:return"jh.dealCard";case 7:return"jh.openCard";case 8:return"jh.stake"}},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=190,e.y=510;break;case 2:e.x=370,e.y=510;break;case 3:e.x=190,e.y=650;break;case 4:e.x=370,e.y=650}return e},t.prototype.getCardType=function(t){switch(t){case 32:return"豹子";case 16:return"同花顺";case 8:return"金花";case 4:return"顺子";case 2:return"对子";case 1:return"单张"}},t.prototype.coinsType=function(t){var e=[],i=0,n="";t=Math.round(t/1e4),t>0&&10>t?(i=t,n="b1a"):t>9&&100>t?(i=t/10,n="b2a"):t>99&&1e3>t?(i=t/100,n="b3a"):t>999&&1e4>t?(i=t/1e3,n="b4a"):t>9999&&1e5>t?(i=t/1e4,n="b5a"):(i=t/5e4,n="b6a");for(var a=0;a<Math.round(i);a++){var s=new eui.Image(n),o=this.coinPos();s.x=o.x,s.y=o.y,e.push(s)}return e},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t}();JinHuaUtil.instance=null,__reflect(JinHuaUtil.prototype,"JinHuaUtil");var ZhaJinHuaPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.interval=-1,i.selfbetsNum={},i.betsPostion=-1,i.betsNum=0,i.cardResult=null,i.isChangeBanker=!1,i.changeBankerObj={},i.isCanBets=!0,i.poolBetArray={},i.limitGold=0,i.limitVip=0,i.curBankerRanking=-1,i.isApplyBanker=!1,i.lastGameBankerNum=0,i.isSysBanker=!1,i.orginBankerCardPos=[],i.orginPlayerCardPos=[],i.isBanker=!1,i.isBets=!1,i.maxUserData=null,i.banker_total_gold=0,i.isBoomBanker=!1,i.resultCaijin=0,i.totalCaijin=0,i.cdNum=10,i.coinsNumArr={},i.isCoinsReturn=!0,i.curRate=0,i.lastTouchBetTime=0,i.isCardEffectShow=!1,i.isFirstSetBanker=!0,i.flyIntval=0,i.flyIndex0=0,i.flyIndex1=0,i.flyBankerIndex=0,i.effectPlayerIndex=0,i.redPanel=null,i.skinName="resource/skins/ZhaJinHuaSkin.exml",i.r=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.getOrginCardPos(),this.addEvent(),this.initData(),this.setCountdown(),this.onTouchBet(0),this.setSelfInfo(),this.joinCallback(this.r),PanelManage.openChat(this,112,315,"10002")},e.prototype.initData=function(){this.labBankerRank.text="",this.labBankerLastNum.text="",this.labCardTypeBanker.text="",this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpBankerList.visible=!1,this.grpCoins.touchEnabled=!1,this.grpTips.touchEnabled=!1,this.grpTips.touchChildren=!1,this.grpSecondPanel.visible=!1,this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1,this.grpTips.visible=!1,this.grpResult.visible=!1,this.imgBaoZhuang.visible=!1,this.grpCardType.touchChildren=!1,this.grpCardType.touchEnabled=!1,this.grpCaijin.visible=!1,this.grpCard.visible=!0},e.prototype.getOrginCardPos=function(){for(var t=0;3>t;t++){var e=this["bankerCard_"+t];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginBankerCardPos[t]=i}for(var n=0;4>n;n++){this["labCardType"+n].text="";for(var a=[],s=0;3>s;s++){var e=this["grpCard"+n+"_"+s];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x+24,i.y=e.y,a[s]=i}this.orginPlayerCardPos[n]=a}},e.prototype.addEvent=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnCharge,egret.TouchEvent.TOUCH_TAP,this.onTouchCharge.bind(this)),EventManage.addButtonEvent(this,this.btnUpBanker,egret.TouchEvent.TOUCH_TAP,this.onTouchUpBank.bind(this)),EventManage.addButtonEvent(this,this.btnDownBanker,egret.TouchEvent.TOUCH_TAP,this.onTouchDownBank.bind(this)),EventManage.addButtonEvent(this,this.btnBankerDown,egret.TouchEvent.TOUCH_TAP,this.getBankerList.bind(this)),EventManage.addEvent(this,this.grpBankerList,egret.TouchEvent.TOUCH_TAP,this.onTouchCloseBankerList.bind(this)),EventManage.addButtonEvent(this,this.btnCardType,egret.TouchEvent.TOUCH_TAP,this.onTouchCardType.bind(this)),EventManage.addButtonEvent(this,this.btnCardHistroy,egret.TouchEvent.TOUCH_TAP,this.onTouchCardHistory.bind(this)),EventManage.addButtonEvent(this,this.secondClose,egret.TouchEvent.TOUCH_TAP,this.onTouchCloseSecondPanel.bind(this)),EventManage.addEvent(this,this.btnRedBox,egret.TouchEvent.TOUCH_TAP,this.onTouchRedBox.bind(this)),EventManage.addEvent(this,this.grpBanker,egret.TouchEvent.TOUCH_TAP,this.getBankerList.bind(this));for(var t=0;8>t;t++)6>t&&(EventManage.addButtonEvent(this,this["btnBet"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchBet.bind(this,t)),this["labBet"+t].touchEnabled=!1),4>t&&(EventManage.addEvent(this,this["effectTouch"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchSelectIndex.bind(this,t)),this["labBetsPool"+t].text="0",this["labBetsSelf"+t].text="0"),EventManage.addButtonEvent(this,this["grpHead"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchSeat.bind(this,t)),this["imghead"+t].source="",this["labelHead"+t].text="";EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.OPERTE_REDBOX_COMPLETE,this.operateBoxComplete.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.updateDataGold.bind(this))},e.prototype.setSelfInfo=function(){this.titleHead.source=GlobalData.user.headurl;var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(55,52,40),t.graphics.endFill(),this.addChild(t),this.titleHead.mask=t,this.titleName.text=GlobalData.user.nickname,this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.setHandsel=function(t){this.labHandsel.text=QuickManage.moneyStr(t)},e.prototype.setTips=function(){this.labTips.text=""},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum%7==0&&this.getBets(),this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0),this.cdNum<10?(this.labCountdown0.text="0",this.labCountdown1.text=this.cdNum+""):(this.labCountdown0.text=(this.cdNum+"").split("")[0],this.labCountdown1.text=(this.cdNum+"").split("")[1])},e.prototype.joinCallback=function(t){if(200==t.code){this.curRate=t.data.rate;for(var e=t.data,i=t.data.seats,n=0;n<i.length;n++)this["imghead"+i[n].seat].source=i[n].headurl,this["labelHead"+i[n].seat].text=i[n].name,this["imghead"+i[n].seat].height=this["imghead"+i[n].seat].width=86;this.limitGold=e.limitGold,this.limitVip=e.limitVip,this.setHandsel(e.caijin),this.setBankerInfo(e.zhuang),this.cdNum=e.time,this.cdTimer.start(),1==t.state?this.isCanBets=!1:2==t.state?this.isCanBets=!0:3==t.state&&(this.isCanBets=!1),console.log("join_game: "+e.state)}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onMsgListen=function(t){var e=t.msg;switch(console.log("onMsgListen: "+e.type,"__zjh"),e.type){case 0:this.cdNum=parseInt(e.time)+3,this.cdTimer.start();break;case 1:this.isCanBets=!1,this.showGameTips(3);break;case 2:this.setGameResult(e.data);break;case 3:this.changeBankerObj=e.zhuang,this.isChangeBanker=!0;break;case 4:this.updataSeat(1,e.data);break;case 5:this.updataSeat(2,e.seat);break;case 6:this.updateHandsel(e);break;case 7:this.updateBankerRank(e)}},e.prototype.setGameResult=function(t){this.grpCountdown.visible=!1,this.cardResult=t;t.pokes},e.prototype.updataSeat=function(t,e){1==t?(this["imghead"+e.seat].source=e.headurl,this["imghead"+e.seat].height=this["imghead"+e.seat].width=86,this["labelHead"+e.seat].text=e.nick):(this["imghead"+e].source="",this["labelHead"+e].text="")},e.prototype.updateHandsel=function(t){if(null!=this.cardResult){this.resultCaijin=parseInt(t.data.gift),this.totalCaijin=parseInt(t.data.caijin),this.banker_total_gold=t.data.bankerTotalGold,this.maxUserData=t.data.max;for(var e=0;4>e;e++)this["labTipsClick"+e].visible=!1;this.cardEffect()}},e.prototype.updateBankerRank=function(t){if(this.isApplyBanker){var e=GlobalData.openid+"@"+GlobalData.platform;t.id==e?this.curBankerRanking=t.pos:(t.pos<this.curBankerRanking||t.pos==this.curBankerRanking)&&this.curBankerRanking++,this.labBankerRank.text="排庄"+this.curBankerRanking}},e.prototype.getBankerList=function(t){(!t.target||"btnUpBanker"!=t.target.name&&"btnDownBanker"!=t.target.name)&&Net.send(Protocol.GOLDEN_BANKER_LIST,{},this.bankerListCallback.bind(this))},e.prototype.bankerListCallback=function(t){if(200==t.code){this.grpBankerList.visible=!0;for(var e=0;10>e;e++)e<t.list.length?(this["bankerListItem"+e].visible=!0,this["itemRank"+e].text=e+1+"",this["itemName"+e].text=t.list[e].name,this["itemMoney"+e].text=QuickManage.moneyStr(t.list[e].gold),this["itemVip"+e].text="v"+t.list[e].vip):3>e?(this["bankerListItem"+e].visible=!0,this["itemRank"+e].text=e+1+"",this["itemName"+e].text="",this["itemMoney"+e].text="",this["itemVip"+e].text=""):this["bankerListItem"+e].visible=!1}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchCloseBankerList=function(){this.grpBankerList.visible=!1},e.prototype.getBets=function(){Net.send(Protocol.GOLDEN_GET_BETS,{},this.getBetsCallback.bind(this))},e.prototype.getBetsCallback=function(t){if(200==t.code)for(var e=t.list,i=1;5>i;i++)if(0!=e[i].score){if(e[i].score==this.poolBetArray[i])continue;this.isCanBets&&this.showCoins(e[i].score-this.poolBetArray[i],i),parseInt(this["labBetsPool"+(i-1)].text)<e[i].score/1e4&&(this["labBetsPool"+(i-1)].text=QuickManage.moneyStr(e[i].score),this.poolBetArray[i]=e[i].score)}},e.prototype.onTouchClose=function(){return this.isBanker?void TipsManage.showTips("您是庄家，下庄后方可离开！"):this.isBets?void TipsManage.showTips("您已经下注，这局结束后方可离开！"):void Net.send(Protocol.GOLDEN_LEAVE_GAME,{},function(t){200==t.code?this.dispose():TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.onTouchCharge=function(){PanelManage.openShop(3)},e.prototype.updatePayData=function(t){GlobalData.user.gold=t.param.msg.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.onTouchUpBank=function(){return parseInt(GlobalData.user.vip)<this.limitVip?void TipsManage.showTips("您的VIP等级未满"+this.limitVip+"级,不能上庄！"):parseInt(GlobalData.user.gold)<this.limitGold?void TipsManage.showTips("您的金币未满"+QuickManage.moneyStr(this.limitGold)+",不能上庄！"):void Net.send(Protocol.GOLDEN_UP_BANKER,{},this.upBankerCallback.bind(this))},e.prototype.upBankerCallback=function(t){200==t.code&&(TipsManage.showTips("申请上庄成功！"),this.btnDownBanker.visible=!0,this.btnUpBanker.visible=!1,this.isApplyBanker=!0,this.curBankerRanking=t.pos,this.labBankerRank.text="排庄"+this.curBankerRanking)},e.prototype.onTouchDownBank=function(){Net.send(Protocol.GOLDEN_DOWN_BANKER,{},this.downBankerCallback.bind(this))},e.prototype.downBankerCallback=function(t){200==t.code&&(TipsManage.showTips("申请下庄成功！"),this.btnDownBanker.visible=!1,this.btnUpBanker.visible=!0,this.isApplyBanker=!1,this.curBankerRanking=-1,this.labBankerRank.text="")},e.prototype.onTouchSeat=function(t){return this.isBanker?void TipsManage.showTips("当前您是庄，不能坐下！"):void Net.send(Protocol.GOLDEN_SEAT_DOWN,{seat:t},function(t){200!=t.code&&TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.onTouchBet=function(t){return this.isBanker?void TipsManage.showTips("您是庄家，不能下注！"):this.isCoinsReturn?(this.grpSelectBet.x=-8+106*t,void(this.betsNum=JinHuaUtil.getInstance().getBetNumber(t))):(console.log("touche  Bet++++++++++++++"),void TipsManage.showTips("操作过于频繁，请稍等！"))},e.prototype.onTouchSelectIndex=function(t){if(!this.isCardEffectShow){var e=(new Date).getTime();if(!(e-this.lastTouchBetTime<400))return this.lastTouchBetTime=e,this.isBanker?void TipsManage.showTips("您是庄家，不能下注！"):this.isCoinsReturn?void(this.isCanBets&&(this.betsPostion=t+1,this.isCoinsReturn=!1,Net.send(Protocol.GOLDEN_BET_GOLD,{betId:this.betsPostion,gold:this.betsNum},this.betGlodCallback.bind(this),!1))):void TipsManage.showTips("操作过于频繁，请稍等！")}},e.prototype.betGlodCallback=function(t){if(this.isCoinsReturn=!0,200==t.code){this.isBets=!0,GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.betsNum+"",this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.selfbetsNum[this.betsPostion]=parseInt(this.selfbetsNum[this.betsPostion])+this.betsNum,this.poolBetArray[this.betsPostion]=parseInt(this.poolBetArray[this.betsPostion])+this.betsNum,this["labBetsPool"+(this.betsPostion-1)].text=QuickManage.moneyStr(this.poolBetArray[this.betsPostion]),this.showCoins(this.betsNum,this.betsPostion);for(var e=0;4>e;e++)this["labBetsSelf"+e].text=QuickManage.moneyStr(this.selfbetsNum[e+1])}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.setBankerInfo=function(t){1==t.sys?(this.bankerHead.source="head",this.bankerName.text="萌萌哒",this.labBankerMoney.text=QuickManage.moneyStr(8888888e4),this.isSysBanker=!0,this.labBankerLastNum.text="剩余10次",this.lastGameBankerNum=10,this.isBanker=!1,this.labBankerVip.text="v10",this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1):(t.id==GlobalData.openid+"@"+GlobalData.platform?(this.isBanker=!0,this.labBankerRank.text=""):(this.isApplyBanker?t.pos<this.curBankerRanking&&(this.curBankerRanking--,this.labBankerRank.text="排庄"+this.curBankerRanking):(this.labBankerRank.text="",this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1),this.isBanker=!1),"萌萌哒"!=this.bankerName.text&&(this.isFirstSetBanker||PanelManage.chat.sendGameChat(this.bankerName.text+"下庄了")),this.bankerHead.source=t.headurl,this.bankerHead.width=this.bankerHead.height=86,this.bankerName.text=t.nick,this.labBankerMoney.text=QuickManage.moneyStr(t.gold),this.labBankerLastNum.text="剩余10次",this.lastGameBankerNum=10,this.isSysBanker=!1,this.labBankerVip.text="v"+t.vip,this.isFirstSetBanker||PanelManage.chat.sendGameChat(this.bankerName.text+"上庄了")),this.isFirstSetBanker=!1
},e.prototype.setHistory=function(){for(var t=0;10>t;t++){this["grpHistory"+t].visible=!1;for(var e=0;4>e;e++)this["grpHistory"+e+"_"+t].source=""}},e.prototype.updateGold=function(){Net.send(Protocol.JINHUA_GET_GOLD,{},this.getGoldCallback.bind(this))},e.prototype.getGoldCallback=function(t){200==t.code&&(GlobalData.user.gold=t.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)))},e.prototype.showGameTips=function(t){this.grpTipsInfo.source=JinHuaUtil.getInstance().getMsgSource(t),this.grpTips.visible=!0,this.grpTipsbg.alpha=0,this.grpTipsInfo.x=640,MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(t)),egret.Tween.get(this.grpTipsbg).to({alpha:1},400).wait(400).call(function(){egret.Tween.get(this).to({alpha:0},400)},this.grpTipsbg),egret.Tween.get(this.grpTipsInfo).to({x:0},400).wait(400).call(function(){egret.Tween.get(this).to({x:-640},400)},this.grpTipsInfo)},e.prototype.showCoins=function(t,e){var i=!1;MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(8),.5);var n=JinHuaUtil.getInstance().getCoinsPos(e),a=JinHuaUtil.getInstance().coinsType(t);this.coinsNumArr[e]<50?(this.coinsNumArr[e]=parseInt(this.coinsNumArr[e])+a.length,i=!1):i=!0;for(var s=0;s<a.length;s++){var o=n.x+60*Math.random(),r=n.y+50*Math.random();this.grpCoins.addChild(a[s]),egret.Tween.get(a[s]).to({x:o,y:r},200).call(function(){this[0]&&this[1].parent.removeChild(this[1])},[i,a[s]])}},e.prototype.cardEffect=function(){this.isCardEffectShow=!0,this.flyIntval=setInterval(this.playCardFly.bind(this),200)},e.prototype.playCardFly=function(){var t=this["grpCard"+this.flyIndex0+"_"+this.flyIndex1];t.source="card_100",t.x=296,t.y=340,t.anchorOffsetX=t.width/2,t.x+=t.width/2;var e=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},300),2==this.flyIndex1?3==this.flyIndex0?(this.flyIndex0=0,this.flyIndex1=0,clearInterval(this.flyIntval),this.flyBankerIndex=0,this.flyIntval=setInterval(this.bankerCardFly.bind(this),200)):(this.flyIndex1=0,this.flyIndex0++):this.flyIndex1++},e.prototype.bankerCardFly=function(){if(3==this.flyBankerIndex)return this.flyBankerIndex=0,clearInterval(this.flyIntval),void(this.interval=setInterval(this.playerCardRotation.bind(this),800));var t=this["bankerCard_"+this.flyBankerIndex];t.x=296,t.y=340,t.source="card_100",t.anchorOffsetX=t.width/2,t.x+=t.width/2,this.orginBankerCardPos;var e=this.orginBankerCardPos[this.flyBankerIndex];MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},400),this.flyBankerIndex++},e.prototype.playerCardRotation=function(){if(4==this.effectPlayerIndex)return clearInterval(this.interval),this.effectPlayerIndex=0,void this.bankerCardRotation();MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes,e=this.effectPlayerIndex,i=0;3>i;i++){var n=this["grpCard"+e+"_"+i];n.source="card_100",egret.Tween.get(n).to({scaleX:0},300).call(function(){this[0].source="card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[n,t[e+1].value[i]])}this["labCardType"+e].text=JinHuaUtil.getInstance().getCardType(t[e+1].type),this.effectPlayerIndex++},e.prototype.bankerCardRotation=function(){MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes[0],e=0;3>e;e++){var i=this["bankerCard_"+e];i.source="card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]]),console.log("poke_banker: "+t.value[e])}this.labCardTypeBanker.text=JinHuaUtil.getInstance().getCardType(t.type),this.interval=setInterval(this.blinkEffect.bind(this),500)},e.prototype.blinkEffect=function(){clearInterval(this.interval);for(var t=this.cardResult.result,e=0;4>e;e++)1==t[e]&&(this["effectSelect"+e].visible=!0,EffectUtils.blinkEffect(this["effectSelect"+e],200));this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval);var t=this.cardResult,e=!1;1==t.result[0]&&1==t.result[1]&&1==t.result[2]&&1==t.result[3]&&(this.showGameTips(5),e=!0),0==t.result[0]&&0==t.result[1]&&0==t.result[2]&&0==t.result[3]&&(this.showGameTips(4),e=!0),e?this.interval=setInterval(this.showGameResult.bind(this),1e3):this.showGameResult()},e.prototype.showGameResult=function(){clearInterval(this.interval),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CHAT_GAME_RESULT));var t=this.cardResult;this.grpResult.visible=!0,null!=this.maxUserData?(this.grpMax.visible=!0,this.grpMaxHead.source=this.maxUserData.headurl,this.grpMaxHead.width=this.grpMaxHead.height=86,this.grpMaxGold.text="赢"+QuickManage.moneyStr(this.maxUserData.gold),this.grpMaxName.text=this.maxUserData.name,this.maxUserData.name==GlobalData.user.nickname&&MusicManage.playMuisc(JinHuaUtil.getInstance().getSoundEffect(1))):this.grpMax.visible=!1,this.grpBankerHead.source=this.bankerHead.source,this.grpBankerName.text=this.bankerName.text,this.grpBankerBeishu.text=t.pokes[0].num+"倍",this.labelBankerType.text=JinHuaUtil.getInstance().getCardType(t.pokes[0].type),parseInt(t.bankerWin)<0?(this.grpBankerGold.text="输 "+QuickManage.moneyStr(Math.abs(t.bankerWin)),PanelManage.chat.sendGameChat("庄家输了 "+QuickManage.moneyStr(Math.abs(t.bankerWin)))):(this.grpBankerGold.text="赢 "+QuickManage.moneyStr(t.bankerWin),0!=t.bankerWin&&PanelManage.chat.sendGameChat("庄家赢了 "+QuickManage.moneyStr(Math.abs(t.bankerWin))));for(var e=0,i=0;4>i;i++){this["resultType"+i].text=JinHuaUtil.getInstance().getCardType(t.pokes[i+1].type),this["labResult0_"+i].text=t.pokes[i+1].num+"倍",this["labResult1_"+i].text=QuickManage.moneyStr(this.selfbetsNum[i+1]);var n=this.selfbetsNum[i+1];if(0!=n)if(this["labResult2_"+i].text="",1==t.result[i]){var a=0;a=this.isBanker?parseInt(t.pokes[0].num):parseInt(t.pokes[i+1].num),e+=parseInt(n)*(a+1)}else{var s=0;s=this.isBanker?parseInt(t.pokes[i+1].num):parseInt(t.pokes[0].num),1==s||(e-=parseInt(n)*(s-1))}else this["labResult2_"+i].text=0}for(var o=0,i=1;5>i;i++)o+=this.selfbetsNum[i];(e>0||0==e)&&(e*=1-this.curRate),e-=o,e>0||0==e?this.labResultValue.text="结算："+QuickManage.moneyStr(e):this.labResultValue.text="结算：-"+QuickManage.moneyStr(Math.abs(e)),e>0&&EffectUtils.coinsFly(this,320,500),this.setHandsel(this.totalCaijin),this.updateGold(),this.isSysBanker||(this.labBankerMoney.text=QuickManage.moneyStr(this.banker_total_gold)),e>0&&this.resultCaijin>0?this.interval=setInterval(this.caijinShow.bind(this),3e3):0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3)},e.prototype.boomShow=function(){this.grpCaijin.visible=!1,this.imgBaoZhuang.visible=!0,clearInterval(this.interval),this.interval=setInterval(this.setStartBet.bind(this),4e3)},e.prototype.caijinShow=function(t){PanelManage.chat.sendGameChat("恭喜你获得彩金 "+this.resultCaijin),this.grpCaijinLabel.text="恭喜你获得"+this.resultCaijin+"彩金",this.grpCaijin.visible=!0,clearInterval(this.interval),0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3)},e.prototype.setStartBet=function(){this.resetGame(),this.grpResult.visible=!1,clearInterval(this.interval),this.showGameTips(2),this.grpCountdown.visible=!0,this.isSysBanker||this.isChangeBanker||(this.lastGameBankerNum--,this.labBankerLastNum.text="剩余"+this.lastGameBankerNum+"次"),this.isChangeBanker&&(this.isChangeBanker=!1,this.setBankerInfo(this.changeBankerObj),this.grpBankerList.visible=!1)},e.prototype.resetGame=function(){for(var t=0;4>t;t++)this["labBetsPool"+t].text="0",this["labBetsSelf"+t].text="0",egret.Tween.removeTweens(this["effectSelect"+t]);for(var t=0;3>t;t++){var e=this["bankerCard_"+t];e.source="",egret.Tween.removeTweens(e)}for(var i=0;4>i;i++){this["labCardType"+i].text="";for(var n=0;3>n;n++){var e=this["grpCard"+i+"_"+n];e.source="",egret.Tween.removeTweens(e)}}for(this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0};this.grpCoins.numChildren>0;)this.grpCoins.removeChildAt(0);for(var t=0;4>t;t++)this["effectSelect"+t].visible=!1;for(var a=0;4>a;a++)this["labTipsClick"+a].visible=!0;this.isCanBets=!0,this.isBets=!1,this.imgBaoZhuang.visible=!1,this.labCardTypeBanker.text="",this.resultCaijin=0,this.grpCaijin.visible=!1,this.isCoinsReturn=!0,this.isCardEffectShow=!1},e.prototype.onTouchCardType=function(){this.grpSecondPanel.visible=!0,this.grpCardType.visible=!0,this.grpHistory.visible=!1},e.prototype.onTouchCardHistory=function(){Net.send(Protocol.GOLDEN_GAME_RECORD,{},this.getHistoryCallback.bind(this))},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],a=0;4>a;a++)this["grpHistroy"+a+"_"+i].source=1==n[a]?"a8":"a7"}else this["grpHistroy"+i].visible=!1;this.grpSecondPanel.visible=!0,this.grpCardType.visible=!1,this.grpHistory.visible=!0},e.prototype.onTouchCloseSecondPanel=function(){this.grpSecondPanel.visible=!1},e.prototype.onTouchRedBox=function(){PanelManage.openRedBox(1,1)},e.prototype.operateBoxComplete=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))},e.prototype.updateDataGold=function(){EffectUtils.numEffect(this.titleLabMoney,parseInt(GlobalData.user.gold))},e.prototype.dispose=function(){MusicManage.closeMuisc(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ZhaJinHuaPanel.prototype,"ZhaJinHuaPanel",["fany.IDispose"]);var JinShaInfo=function(){function t(){this._count=0,this._count1=0,this._count2=0,this._count3=0,this._ii=0,this._ii1=0,this._ii2=0,this._ii3=0,this._jiange=0,this._isGo=!1,this._isGo1=!1,this._isGo2=!1,this._isGo3=!1,this._jiedian=0,this._endtime=0,this._r=null,this._danzhu="",this._timett=0,this._timett1=0,this._tt=0,this._tt1=0,this._tt2=0,this._result=null,this._resultc=!1,this._daojishicom=!1,this._end=0,this._endzhuanhuan=0,this._ctt=0,this._fltt=!1,this._zhuangnum=0,this._changebanker=null,this._isZhuang=!1,this._numShengyu=0,this._isSys=!1,this._collectobj=null,this._zhuangGold=0,this._isChongfuXiazhu=!1,this._isYing=!1,this.isChongfuXiazhu=!1,this.ii=0,this.ii1=0,this.ii2=0,this.ii3=0,this.jiange=0,this.jiedian=0,this.isGo=!1,this.isGo1=!1,this.isGo2=!1,this.isGo3=!1,this.currentArr=[],this.endtime=0,this.r=null,this.danzhu="",this.timett=0,this.timett1=0,this.tt=0,this.tt1=0,this.tt2=0,this.result=null,this.resultc=!1,this.daojishicom=!1,this.end=0,this.endzhuanhuan=0,this.ctt=0,this.fltt=!1,this.xiazhuArr=[],this.xiazhuArr2=[],this.zhiqianArr=[],this.zhuArr=[],this.zhuangnum=0,this.zhuangGold=0,this.changebanker=null,this.zhuangLists=[],this.isZhuang=!1,this.numShengyu=0,this.isSys=!1,this.collectobj=null,this.posArr=[]}return t.prototype.init=function(){},Object.defineProperty(t.prototype,"posArr",{get:function(){return this._posArr},set:function(t){this._posArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isYing",{get:function(){return this._isYing},set:function(t){this._isYing=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChongfuXiazhu",{get:function(){return this._isChongfuXiazhu},set:function(t){this._isChongfuXiazhu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangGold",{get:function(){return this._zhuangGold},set:function(t){this._zhuangGold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(t){this._count=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii1",{get:function(){return this._ii1},set:function(t){this._ii1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii2",{get:function(){return this._ii2},set:function(t){this._ii2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii3",{get:function(){return this._ii3},set:function(t){this._ii3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentArr",{get:function(){return this._currentArr},set:function(t){this._currentArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jiange",{get:function(){return this._jiange},set:function(t){this._jiange=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo",{get:function(){return this._isGo},set:function(t){this._isGo=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo1",{get:function(){return this._isGo1},set:function(t){this._isGo1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo2",{get:function(){return this._isGo2},set:function(t){this._isGo2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGo3",{get:function(){return this._isGo3},set:function(t){this._isGo3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jiedian",{get:function(){return this._jiedian},set:function(t){this._jiedian=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endtime",{get:function(){return this._endtime},set:function(t){this._endtime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"danzhu",{get:function(){return this._danzhu},set:function(t){this._danzhu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timett",{get:function(){return this._timett},set:function(t){this._timett=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timett1",{get:function(){return this._timett1},set:function(t){this._timett1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt",{get:function(){return this._tt},set:function(t){this._tt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt1",{get:function(){return this._tt1},set:function(t){this._tt1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tt2",{get:function(){return this._tt2},set:function(t){this._tt2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return this._result},set:function(t){this._result=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resultc",{get:function(){return this._resultc},set:function(t){this._resultc=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"daojishicom",{get:function(){return this._daojishicom},set:function(t){this._daojishicom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(t){this._end=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endzhuanhuan",{get:function(){return this._endzhuanhuan},set:function(t){this._endzhuanhuan=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ctt",{get:function(){return this._ctt},set:function(t){this._ctt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fltt",{get:function(){return this._fltt},set:function(t){this._fltt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xiazhuArr2",{get:function(){return this._xiazhuArr2},set:function(t){this._xiazhuArr2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xiazhuArr",{get:function(){return this._xiazhuArr},set:function(t){this._xiazhuArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhiqianArr",{get:function(){return this._zhiqianArr},set:function(t){this._zhiqianArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuArr",{get:function(){return this._zhuArr},set:function(t){this._zhuArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangnum",{get:function(){return this._zhuangnum},set:function(t){this._zhuangnum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changebanker",{get:function(){return this._changebanker},set:function(t){this._changebanker=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zhuangLists",{get:function(){return this._zhuangLists},set:function(t){this._zhuangLists=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isZhuang",{get:function(){return this._isZhuang},set:function(t){this._isZhuang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numShengyu",{get:function(){return this._numShengyu},set:function(t){this._numShengyu=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSys",{get:function(){return this._isSys},set:function(t){this._isSys=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectobj",{get:function(){return this._collectobj},set:function(t){this._collectobj=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count1",{get:function(){return this._count1},set:function(t){this._count1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count2",{get:function(){return this._count2},set:function(t){this._count2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count3",{get:function(){return this._count3},set:function(t){this._count3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ii",{get:function(){return this._ii},set:function(t){this._ii=t},enumerable:!0,configurable:!0}),t}();__reflect(JinShaInfo.prototype,"JinShaInfo");var JinShaPanel=function(t){function e(e){var i=t.call(this)||this;return i.tt=0,i.isLeave=!1,i.skinName="resource/skins/jinsha/JinShaPanelSkin.exml",JinShaUtils.getInstance().getJinSha().r=e,GlobalData.user.rate=parseFloat(e.data.rate+""),console.log("rate=="+GlobalData.user.rate),i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),EventManage.addEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.leaveGame.bind(this)),EventManage.addEvent(this,this.btnQiehuan,egret.TouchEvent.TOUCH_TAP,this.qiehuanhandle.bind(this)),EventManage.addButtonEvent(this,this.btnShang,egret.TouchEvent.TOUCH_TAP,this.btnShanghandle.bind(this)),EventManage.addEvent(this,this.zhuangbg,egret.TouchEvent.TOUCH_TAP,this.getZhuangListhandle.bind(this)),EventManage.addEvent(this,this.xiala,egret.TouchEvent.TOUCH_TAP,this.getZhuangListhandle.bind(this)),EventManage.addEvent(this,this.txtShengYuNum,egret.TouchEvent.TOUCH_TAP,this.getZhuangListhandle.bind(this)),EventManage.addButtonEvent(this,this.btnChongfu,egret.TouchEvent.TOUCH_TAP,this.btnChongfuHandle.bind(this)),EventManage.addButtonEvent(this,this.btnBao,egret.TouchEvent.TOUCH_TAP,this.btnBaoHandle.bind(this)),EventManage.addButtonEvent(this,this.imgfa,egret.TouchEvent.TOUCH_TAP,this.imgfaHandle.bind(this)),this.init(),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.OPERTE_REDBOX_COMPLETE,this.operateBoxComplete.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.operateBoxComplete.bind(this)),PanelManage.openChat(this,112,378,"10001"),this.setChildIndex(this.zhuangScroll,this.numChildren-1),this.setChildIndex(this.txtFenPanNum,this.numChildren-1),this.zhuangScroll.touchEnabled=!1,this.txtFenPanNum.touchEnabled=!1,EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),EventManage.addButtonEvent(this,this.btnChong,egret.TouchEvent.TOUCH_TAP,this.btnChongHandle.bind(this)),this.guang.anchorOffsetX=250,this.guang.anchorOffsetY=250,this.guang.x+=250,this.guang.y+=250},e.prototype.btnChongHandle=function(){PanelManage.openShop(3)},e.prototype.updatePayData=function(t){var e=t.param;GlobalData.user.gold=e.msg.gold+"",GlobalData.user.vip=e.msg.vip+"",this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold)),this.txtVip.text="VIP"+GlobalData.user.vip},e.prototype.operateBoxComplete=function(){this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.imgfaHandle=function(){PanelManage.openRedBox(0,1)},e.prototype.btnBaoHandle=function(){},e.prototype.btnChongfuHandle=function(){this.jinsha.xiazhuArr2.length>0&&(this.btnChongfu.touchEnabled=!1,Net.send(Protocol.XIA_ZHU_JINSHA,{bets:this.jinsha.xiazhuArr2},this.xiazhucallback1.bind(this)))},e.prototype.xiazhucallback1=function(t){if(200==t.code){for(var e=this.jinsha.xiazhuArr2.length,i=0;e>i;i++)this.jinsha.zhuArr[parseInt(this.jinsha.xiazhuArr2[i].betId+"")-1]=this.jinsha.zhuArr[parseInt(this.jinsha.xiazhuArr2[i].betId+"")-1]+parseInt(this.jinsha.xiazhuArr2[i].gold+""),this["txtCurrent"+this.jinsha.xiazhuArr2[i].betId].text=QuickManage.moneyStr(this.jinsha.zhuArr[parseInt(this.jinsha.xiazhuArr2[i].betId+"")-1]),this.jinsha.xiazhuArr.push(this.jinsha.xiazhuArr2[i]);this.updateGold()}else"319"==t.msg?TipsManage.showTips("非VIP玩家下注不能超过1万!"):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.getZhuangListhandle=function(){return 1==this.zhuangScroll.visible?void(this.zhuangScroll.visible=!1):void Net.send(Protocol.JIN_SHA_ZHUANGLIST,{},this.zhuanglistcallback.bind(this))},e.prototype.zhuanglistcallback=function(t){if(this.bgg.visible=!0,JinShaUtils.getInstance().initZhuangList(),200==t.code){var e=t.list,i=e.length;i>0&&(this.bgg.visible=!1),this.zhuangScroll.visible=!0;for(var n=0;i>n;n++){var a=(e[n],ObjManage.getObj("ZhuangListItemPanel"));a.setData({num:n+1,name:e[n].name,vip:e[n].vip,gold:e[n].gold}),a.x=5,a.y=42*n,this.zhuangGroup.addChild(a),JinShaUtils.getInstance().setZhuangItem(a)}}},e.prototype.btnShanghandle=function(){if("jinsha.btnShang"==this.btnShang.source){if(parseInt(GlobalData.user.gold)<2e8)return void TipsManage.showTips("金币不足2亿不能上庄！");if(parseInt(GlobalData.user.vip)<1)return void TipsManage.showTips("VIP等级大于1能上庄！");Net.send(Protocol.JIN_SHA_SHANGZHUANG,{},this.shangzhuangcallback.bind(this))}else Net.send(Protocol.JIN_SHA_XIAZHUANG,{},this.xiazhuangcallback.bind(this))},e.prototype.xiazhuangcallback=function(t){200==t.code&&(this.txtPaizhuang.visible=!1,this.txtPaizhuangNum.visible=!1,this.jinsha.zhuangnum=0,this.jinsha.isZhuang?(this.btnShang.source="jinsha.btnShang",TipsManage.showTips("下庄成功，等待本局结束！")):this.btnShang.source="jinsha.btnShang")},e.prototype.shangzhuangcallback=function(t){200==t.code?(this.txtPaizhuang.visible=!0,this.btnShang.source="jinsha.btnXia"):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.qiehuanhandle=function(){this.jinsha.danzhu=""+JinShaUtils.getInstance().getDanZhu(this.jinsha.danzhu),this.txtDanzhu.text="单注:"+QuickManage.moneyStr(parseInt(this.jinsha.danzhu))},e.prototype.xiazhuHandle=function(t){if(this.helptips.visible=!1,this.setBtnXy(),"a"!=(this["zhu"+t].source+"").charAt(7)){var e=parseInt(GlobalData.user.gold)-parseInt(this.jinsha.danzhu);return 0>e?void TipsManage.showTips("金币不足!"):this.jinsha.isZhuang?void TipsManage.showTips("庄不能下注!"):void Net.send(Protocol.XIA_ZHU_JINSHA,{bets:[{betId:""+t,gold:this.jinsha.danzhu}]},this.xiazhucallback.bind(this,t))}},e.prototype.xiazhucallback=function(t,e){if(200==e.code){this.jinsha.xiazhuArr.push({gold:this.jinsha.danzhu,betId:t}),this.jinsha.zhuArr[t-1]=this.jinsha.zhuArr[t-1]+parseInt(this.jinsha.danzhu),this["txtCurrent"+t].text=QuickManage.moneyStr(this.jinsha.zhuArr[t-1]);var i=parseInt(GlobalData.user.gold)-parseInt(this.jinsha.danzhu);0>i&&(i=0),GlobalData.user.gold=i+"",this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold))}else"319"==e.msg?TipsManage.showTips("非VIP玩家下注不能超过1万!"):TipsManage.showTips(ErrorMessage.errorMsg(e.msg))},e.prototype.setBtnXy=function(){for(var t=this.jinsha.posArr.length,e=1;t>e;e++){var i=this.jinsha.posArr[e],n=i.view,a=i.acx,s=i.acy,o=i.xx,r=i.yy;n.acx=a,n.acy=s,n.x=o,n.y=r}},e.prototype.feiqi=function(t){},e.prototype.init=function(){this.jinsha=JinShaUtils.getInstance().getJinSha();for(var t=0;28>t;t++)this.jinsha.currentArr.push(this["z"+t]);this.jinsha.zhuArr=[];for(var t=1;13>t;t++)this.jinsha.zhuArr.push(0),this.jinsha.posArr.push({view:this["zhu"+t],acx:this["zhu"+t].anchorOffsetX,acy:this["zhu"+t].anchorOffsetY,xx:this["zhu"+t].x,yy:this["zhu"+t].y}),EventManage.addButtonEvent(this,this["zhu"+t],egret.TouchEvent.TOUCH_TAP,this.xiazhuHandle.bind(this,t));this.txtVip.text="VIP"+GlobalData.user.vip,this.txtGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.txtName.text=GlobalData.user.nickname,this.txtCaijin.text=QuickManage.moneyStr(this.jinsha.r.data.caijin);var e=new egret.Shape;if(e.graphics.beginFill(16711680),e.graphics.drawCircle(60,50,40),e.graphics.endFill(),this.addChild(e),this.head.mask=e,this.head.source=GlobalData.user.headurl,console.log("服务端获取到的时间为:"+this.jinsha.r.data.time),this.jinsha.timett=Math.abs(parseInt(this.jinsha.r.data.time)),(-1!=(this.jinsha.timett+"").indexOf(".")||this.jinsha.timett>28)&&Net.send(Protocol.HALL_SET_PROPOSAL,{proposal:"请截图给管理员:"+this.jinsha.r.data.state+":"+this.jinsha.r.data.time},this.feiqi.bind(this)),this.jinsha.timett<10?this.txtTime.text="0"+this.jinsha.timett:this.txtTime.text=""+this.jinsha.timett,this.jinsha.timett>28&&(this.txtTime.text="28",this.jinsha.timett=28),"1"==this.jinsha.r.data.zhuang.sys){var i="http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46";this.setZhuangInfo({nick:"皇家特派员",gold:"88880000",headurl:i,num:9999,vip:15},!0)}else this.setZhuangInfo(this.jinsha.r.data.zhuang,!1);console.warn("当前游戏状态是==="+this.jinsha.r.data.state),"3"==this.jinsha.r.data.state?(this.setBtnTouched(),this.txtTime.text="00"):this.jinsha.tt=setInterval(this.updateTime.bind(this),1e3),this.jinsha.danzhu=this.jinsha.r.data.danzhu,this.txtDanzhu.text="单注:"+QuickManage.moneyStr(parseInt(this.jinsha.danzhu)),this.jinsha.zhiqianArr=this.jinsha.r.data.recent,this.setZuiJin()},e.prototype.setZhuangInfo=function(t,e){this.txtNameZhuang.text=t.nick,this.txtGoldZhuang.text=QuickManage.moneyStr(parseInt(t.gold+""));var i=new egret.Shape;i.graphics.beginFill(16711680),i.graphics.drawCircle(155,324,40),i.graphics.endFill(),this.addChild(i),this.headzhuang.mask=i,this.headzhuang.source=t.headurl,this.jinsha.numShengyu=t.num,this.txtZhuangVip.text="VIP"+t.vip,this.txtShengYuNum.text="剩余局数:"+this.jinsha.numShengyu,e||(this.jinsha.zhuangGold=parseInt(t.gold+"")),this.jinsha.isSys=e},e.prototype.setZuiJin=function(){for(var t=this.jinsha.zhiqianArr.length,e=0;t>e;e++)this["zhiqian"+e].source="jinsha."+this.jinsha.zhiqianArr[e]+"d"},e.prototype.tongbuxiazhucallback=function(t){for(var e=t.list,i=e.length,n=0;i>n;n++){var a=e[n];this["txtTotal"+a.id].text=QuickManage.moneyStr(a.bet)}},e.prototype.updateTime=function(){this.jinsha.timett%6==0&&Net.send(Protocol.JIN_SHA_TONGBU,{},this.tongbuxiazhucallback.bind(this)),--this.jinsha.timett,this.jinsha.timett>0?this.jinsha.timett<10?this.txtTime.text="0"+this.jinsha.timett:this.txtTime.text=""+this.jinsha.timett:this.txtTime.text="00"},e.prototype.resultcome=function(t){this.jinsha.result=t,this.jinsha.resultc=!0,this.jinsha.daojishicom&&(JinShaUtils.getInstance().startEffect(),TimerManager.getInstance().setFrame("JinShaPanel.gogo",this.gogo.bind(this),this))},e.prototype.collect=function(t){this.jinsha.collectobj=t},e.prototype.someonshangzhuang=function(t){this.jinsha.changebanker=t;var e=t.msg.pos||1;if(t){var i=t.msg.account;"0"==i?this.jinsha.zhuangnum=0:GlobalData.account!=i?this.jinsha.zhuangnum>e&&(this.jinsha.zhuangnum-=1):this.jinsha.zhuangnum=0}},e.prototype.someonupzhuang=function(t){console.warn("有人上庄了"+t.msg.account+"=="+t.msg.pos+"=="+this.jinsha.zhuangnum);var e=t.msg.account;GlobalData.account!=e?parseInt(t.msg.pos)<=this.jinsha.zhuangnum&&(this.jinsha.zhuangnum+=1):this.jinsha.zhuangnum=parseInt(t.msg.pos),this.txtPaizhuangNum.visible=!0,this.txtPaizhuangNum.text=this.jinsha.zhuangnum+""},e.prototype.someondownzhuang=function(t){var e=t.msg.account;GlobalData.account!=e?parseInt(t.msg.pos)<this.jinsha.zhuangnum&&(this.jinsha.zhuangnum-=1):this.jinsha.isZhuang=!1,this.txtPaizhuangNum.text=this.jinsha.zhuangnum+""},e.prototype.betcome=function(t){return this.jinsha.r&&"3"==this.jinsha.r.data.state?(this.jinsha.timett=Math.abs(parseInt(t.msg.time)),this.jinsha.timett<10?this.txtTime.text="0"+this.jinsha.timett:this.txtTime.text=""+this.jinsha.timett,this.setBtnTouched(!0),clearInterval(this.jinsha.tt),this.jinsha.tt=setInterval(this.updateTime.bind(this),1e3),void(this.jinsha.r=null)):(this.jinsha.timett1=Math.abs(parseInt(t.msg.time)),clearInterval(this.jinsha.tt1),void(this.jinsha.tt1=setInterval(this.updateTime1.bind(this),1e3)))},e.prototype.betstop=function(t){console.warn("停止下注了"),clearInterval(this.jinsha.tt),this.txtTime.text="00",this.setBtnTouched(),this.txtFenPanNum.source="jinsha.num3",this.txtFenPanNum.visible=!0,this.tt=setInterval(this.play321.bind(this),1e3),MusicManage.playMuisc("music.countdown")},e.prototype.play321=function(){"jinsha.num3"==this.txtFenPanNum.source?(this.txtFenPanNum.source="jinsha.num2",EffectUtils.playEffect3(this.txtFenPanNum,1e3),MusicManage.playMuisc("music.countdown")):"jinsha.num2"==this.txtFenPanNum.source?(this.txtFenPanNum.source="jinsha.num1",EffectUtils.playEffect3(this.txtFenPanNum,1e3),MusicManage.playMuisc("music.countdown")):(clearInterval(this.tt),this.txtFenPanNum.visible=!1,console.warn("开始动画"+this.jinsha.timett),this.startMC(),MusicManage.playMuisc("music.start"),this.tt=0)},e.prototype.updateTime1=function(){--this.jinsha.timett1},e.prototype.startMC=function(){this.jinsha.daojishicom=!0,this.jinsha.resultc&&(JinShaUtils.getInstance().startEffect(),TimerManager.getInstance().setFrame("JinShaPanel.gogo",this.gogo.bind(this),this))},e.prototype.setBtnTouched=function(t){void 0===t&&(t=!1);var e="jinsha.a";t&&(e="jinsha.l");for(var i=1;13>i;i++)this["zhu"+i].source=e+i,this["zhu"+i].touchEnabled=t;this.btnChongfu.touchEnabled=t},e.prototype.gogo=function(){JinShaUtils.getInstance().manageMc(this.jiesuan.bind(this),this.pushArr.bind(this))},e.prototype.jiesuan=function(){TimerManager.getInstance().remove("JinShaPanel.gogo"),this.imgend.visible=!0,this.imgend.x=279,this.imgend.y=453;var t=this.jinsha.result.msg.result;this.imgend.source="jinsha."+t+"a",MusicManage.playMuisc("music.result"+t),EffectUtils.playEffect4(this.imgend),this.jinsha.isZhuang?this.txtWinGold.text=this.jinsha.result.msg.bankWin+"":this.txtWinGold.text=""+JinShaUtils.getInstance().jiesuan(this.jinsha.xiazhuArr,parseInt(t)),this.jinsha.isSys||(this.jinsha.zhuangGold+=parseInt(this.jinsha.result.msg.bankWin),this.txtGoldZhuang.text=QuickManage.moneyStr(this.jinsha.zhuangGold)),this.jinsha.isSys||parseInt(this.jinsha.result.msg.bankWin+"")>0&&PanelManage.chat.sendGameChat("庄家"+this.txtNameZhuang.text+"赢得了"+QuickManage.moneyStr(parseInt(this.jinsha.result.msg.bankWin))),this.txtWinGold.visible=!1,this.guang.visible=!0,TimerManager.getInstance().setFrame("JinShaPanel.gogo1",this.gogo1.bind(this),this),this.jinsha.tt2=setTimeout(this.endmc.bind(this),5e3)},e.prototype.updateGold=function(){Net.send(Protocol.JINSHA_GET_GOLD,{},this.updateGoldSucc.bind(this))},e.prototype.updateGoldSucc=function(t){GlobalData.user.gold=t.data.gold+"",console.log("同步金币返回"+GlobalData.user.gold),this.txtTotalGold.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),EffectUtils.numEffect(this.txtGold,parseInt(GlobalData.user.gold))},e.prototype.endmc=function(){clearTimeout(this.jinsha.tt2),TimerManager.getInstance().remove("JinShaPanel.gogo1"),this.guang.visible=!1,egret.Tween.get(this.imgend).to({x:73,y:514},800).call(this.hideImgend.bind(this)),console.log("是否爆庄:"+this.jinsha.result.msg.bomb),"1"==this.jinsha.result.msg.bomb?(PanelManage.chat.sendGameChat(this.txtNameZhuang.text+"爆庄了"),this.baozhuang.visible=!0,MusicManage.playMuisc("music.bomb"),EffectUtils.playEffect3(this.baozhuang,1200,this.isBaocaijin.bind(this))):this.isBaocaijin(),this.updateGold()
},e.prototype.isBaocaijin=function(){console.log("彩金值:"+this.jinsha.result.msg.gift),this.baozhuang.visible=!1,parseInt(this.jinsha.result.msg.gift)>0?(MusicManage.playMuisc("music.jackpot"),this.baocaijin.visible=!0,parseInt(this.txtWinGold.text)>0?(this.txtCaiJin2.text="恭喜你获得彩金"+QuickManage.moneyStr(parseInt(this.jinsha.result.msg.gift)),PanelManage.chat.sendGameChat(this.txtCaiJin2.text)):this.txtCaiJin2.text="系统爆彩金啦，很遗憾你没有获得!",EffectUtils.playEffect3(this.baocaijin,6e3,this.next.bind(this))):this.next()},e.prototype.next=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CHAT_GAME_RESULT)),this.baocaijin.visible=!1,EffectUtils.numEffect(this.txtCaijin,parseInt(this.jinsha.collectobj.msg.caijin)),this.zhuangScroll.visible=!1;var t=this.jinsha.changebanker;if(t){var e=t.msg.account;if("0"==e){this.jinsha.isZhuang=!1,this.txtPaizhuang.visible=!1,this.txtPaizhuangNum.visible=!1,this.btnShang.source="jinsha.btnShang";var i="http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46";this.setZhuangInfo({nick:"皇家特派员",gold:"88880000",headurl:i,num:9999,vip:15},!0)}else GlobalData.account!=e?(this.jinsha.isZhuang&&(this.btnShang.source="jinsha.btnShang"),this.txtPaizhuangNum.text=this.jinsha.zhuangnum+"",this.jinsha.isZhuang=!1,"皇家特派员"!=this.txtNameZhuang.text&&PanelManage.chat.sendGameChat(this.txtNameZhuang.text+"下庄了"),this.setZhuangInfo({nick:t.msg.name,gold:t.msg.gold,headurl:t.msg.headurl,num:parseInt(t.msg.count),vip:t.msg.vip},!1),"皇家特派员"!=this.txtNameZhuang.text&&PanelManage.chat.sendGameChat("恭迎"+this.txtNameZhuang.text+"上庄了")):(this.jinsha.isZhuang=!0,this.txtPaizhuang.visible=!1,this.txtPaizhuangNum.visible=!1,this.btnShang.source="jinsha.btnXia","皇家特派员"!=this.txtNameZhuang.text&&PanelManage.chat.sendGameChat(this.txtNameZhuang.text+"下庄了"),this.setZhuangInfo({nick:t.msg.name,gold:t.msg.gold,headurl:t.msg.headurl,num:parseInt(t.msg.count),vip:t.msg.vip},!1),"皇家特派员"!=this.txtNameZhuang.text&&PanelManage.chat.sendGameChat("恭迎"+this.txtNameZhuang.text+"上庄了"))}else this.txtShengYuNum.text="剩余局数:"+--this.jinsha.numShengyu;this.initData(),this.jinsha.tt=setInterval(this.updateTime.bind(this),1e3)},e.prototype.initData=function(){clearInterval(this.jinsha.tt1),this.setBtnTouched(!0),this.txtWinGold.visible=!1,this.txtWinGold.text="0",this.jinsha.timett=this.jinsha.timett1,this.jinsha.changebanker=null,this.jinsha.ctt=0,this.txtWinGold.text="",this.jinsha.daojishicom=!1,this.jinsha.xiazhuArr.length>0&&(this.jinsha.xiazhuArr2=[],this.jinsha.xiazhuArr2=this.jinsha.xiazhuArr),this.jinsha.xiazhuArr=[],this.jinsha.zhuArr=[];for(var t=1;13>t;t++)this["txtCurrent"+t].text="0",this["txtTotal"+t].text="0",this.jinsha.zhuArr.push(0)},e.prototype.hideImgend=function(){this.imgend.visible=!1,this.guang.visible=!1;var t=this.jinsha.result.msg.result;this.jinsha.zhiqianArr.length>9&&this.jinsha.zhiqianArr.shift(),this.jinsha.zhiqianArr.push(t),this.setZuiJin()},e.prototype.gogo1=function(){if(this.guang.rotation+=5,15==++this.jinsha.ctt){var t=parseInt(this.jinsha.result.msg.result);t>4&&9>t&&("jinsha.l1"==this.zhu1.source?this.zhu1.source="jinsha.a1":this.zhu1.source="jinsha.l1"),t>8&&13>t&&("jinsha.l4"==this.zhu4.source?this.zhu4.source="jinsha.a4":this.zhu4.source="jinsha.l4"),this["zhu"+t].source=="jinsha.l"+t?this["zhu"+t].source="jinsha.a"+t:this["zhu"+t].source="jinsha.l"+t,this.txtWinGold.visible=!this.txtWinGold.visible,this.jinsha.ctt=0}},e.prototype.pushArr=function(t){var e=this["z"+t],i=e.source;e.source=i.replace("b","c")},e.prototype.leaveGame=function(){return JinShaUtils.getInstance().isCanQuit()?void TipsManage.showTips("已经下注,不能离开!"):this.jinsha.isZhuang?void TipsManage.showTips("你是庄家,不能离开!"):void(0==this.isLeave&&(Net.send(Protocol.JIN_SHA_LEAVE,{cell:this.jinsha.danzhu},this.leavegamecallback.bind(this)),this.isLeave=!0))},e.prototype.leavegamecallback=function(t){200==t.code?(lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.dispose()):TipsManage.showTips(JSON.stringify(t))},e.prototype.dispose=function(){clearInterval(this.jinsha.tt),clearInterval(this.jinsha.tt1),MusicManage.closeMuisc(),TimerManager.getInstance().remove("JinShaPanel.gogo"),TimerManager.getInstance().remove("JinShaPanel.gogo1"),JinShaUtils.getInstance().clear(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(JinShaPanel.prototype,"JinShaPanel",["fany.IDispose"]);var JinShaUtils=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist");this.jinsha=new JinShaInfo}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.clear=function(){this.jinsha=null},t.prototype.startEffect=function(){var e=this.jinsha.result.msg.result,i=this.jinsha.end,n=t.getInstance().getTrueRes(e);n.stt;this.jinsha.end=n.end;var a=140+this.jinsha.end-i+1;this.jinsha.endzhuanhuan=a,this.jinsha.endtime=0;var s=this.jinsha.currentArr[i].source;this.jinsha.currentArr[i].source=s.replace("b","c"),this.jinsha.jiange=10,this.jinsha.ii=i,24==i?(this.jinsha.ii1=26,this.jinsha.ii2=25,this.jinsha.ii3=24):25==i?(this.jinsha.ii1=27,this.jinsha.ii2=26,this.jinsha.ii3=25):26==i?(this.jinsha.ii1=0,this.jinsha.ii2=27,this.jinsha.ii3=26):27==i?(this.jinsha.ii1=2,this.jinsha.ii2=1,this.jinsha.ii3=0):(this.jinsha.ii1=this.jinsha.ii+2,this.jinsha.ii2=this.jinsha.ii+1,this.jinsha.ii3=this.jinsha.ii),this.jinsha.jiedian=3,this.jinsha.isGo=!0},t.prototype.initZhuangList=function(){this.jinsha.zhuangLists=this.jinsha.zhuangLists||[];for(var t=this.jinsha.zhuangLists.length,e=0;t>e;e++)this.jinsha.zhuangLists[e]&&(this.jinsha.zhuangLists[e].parent&&this.jinsha.zhuangLists[e].parent.removeChild(this.jinsha.zhuangLists[e]),ObjManage.addObj("ZhuangListItemPanel",this.jinsha.zhuangLists[e]));this.jinsha.zhuangLists=[]},t.prototype.getJinSha=function(){return null==this.jinsha&&(this.jinsha=new JinShaInfo),this.jinsha},t.prototype.setZhuangItem=function(t){this.jinsha.zhuangLists.push(t)},t.prototype.isCanQuit=function(){for(var t=this.jinsha.zhuArr,e=t.length,i=!1,n=0;e>n;n++)if(t[n]>0){i=!0;break}return i},t.prototype.manageMc=function(t,e){this.jinsha.isGo&&++this.jinsha.count==this.jinsha.jiange&&(this.jinsha.ii>27&&(this.jinsha.ii=0),this.fuyuan(),e(this.jinsha.ii),this.jinsha.count=0,++this.jinsha.endtime==this.jinsha.endzhuanhuan-3&&(this.jinsha.isGo1=!1,this.jinsha.isGo2=!1,this.jinsha.isGo3=!1,this.jinsha.jiange=10,MusicManage.playMuisc("music.stop")),this.jinsha.endtime==this.jinsha.endzhuanhuan&&(this.jinsha.isGo=!1,t()),this.jinsha.jiedian>=0&&0==--this.jinsha.jiedian&&(this.jinsha.jiange=1,this.jinsha.jiedian=-1,this.jinsha.isGo1=!0,this.jinsha.isGo2=!0,this.jinsha.isGo3=!0,MusicManage.playMuisc("music.loop",1,-1)),++this.jinsha.ii),this.jinsha.isGo1&&(this.jinsha.ii1>27&&(this.jinsha.ii1=0),e(this.jinsha.ii1),++this.jinsha.ii1),this.jinsha.isGo2&&(this.jinsha.ii2>27&&(this.jinsha.ii2=0),e(this.jinsha.ii2),++this.jinsha.ii2),this.jinsha.isGo3&&(this.jinsha.ii3>27&&(this.jinsha.ii3=0),e(this.jinsha.ii3),++this.jinsha.ii3)},t.prototype.fuyuan=function(){for(var t=this.jinsha.currentArr.length,e=0;t>e;e++){var i=this.jinsha.currentArr[e].source;this.jinsha.currentArr[e].source=i.replace("c","b")}},t.prototype.getDanZhu=function(t){var e=0;switch(t){case"1000":e=1e4;break;case"10000":e=1e5;break;case"100000":e=5e5;break;case"500000":e=1e6;break;case"1000000":e=5e6;break;case"5000000":e=1e7;break;case"10000000":e=5e7;break;case"50000000":e=1e3;break;default:e=1e4}return e},t.prototype.jiesuan=function(t,e){for(var i=t.length,n=0,a=0;i>a;a++){var s=this.getBet(t[a].betId);e+""==t[a].betId+""?n+=s*t[a].gold:e>4&&9>e?"1"==""+t[a].betId&&(n+=2*t[a].gold):e>8&&13>e&&"4"==""+t[a].betId&&(n+=2*t[a].gold)}return n*=1-GlobalData.user.rate},t.prototype.getBet=function(t){var e=1;switch(t){case 1:e=2;break;case 2:e=24;break;case 3:e=48;break;case 4:e=2;break;case 5:e=6;break;case 6:e=8;break;case 7:e=8;break;case 8:e=12;break;case 9:e=12;break;case 10:e=8;break;case 11:e=8;break;case 12:e=6}return e},t.prototype.getTrueRes=function(t){var e="",i=0;switch(t){case"2":i=RandomUtils.randomArray([0,8,14,22]),e="银鲨";break;case"3":i=RandomUtils.randomArray([4,11,18,25]),e="金鲨";break;case"5":i=RandomUtils.randomArray([21,20,19]),e="燕子";break;case"6":i=RandomUtils.randomArray([24,23]),e="鸽子";break;case"7":i=RandomUtils.randomArray([27,26]),e="孔雀";break;case"8":i=RandomUtils.randomArray([3,2,1]),e="老鹰";break;case"9":i=RandomUtils.randomArray([7,6,5]),e="狮子";break;case"10":i=RandomUtils.randomArray([10,9]),e="熊猫";break;case"11":i=RandomUtils.randomArray([13,12]),e="猴子";break;case"12":i=RandomUtils.randomArray([17,16,15]),e="兔子"}return{end:i,stt:e}},t}();JinShaUtils.instance=null,__reflect(JinShaUtils.prototype,"JinShaUtils");var ZhuangListItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/jinsha/ZhuangListItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.txtGold.text=QuickManage.moneyStr(parseInt(t.gold+"")),this.txtName.text=t.name,this.txtNum.text=t.num,this.txtVip.text="VIP"+t.vip},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ZhuangListItemPanel.prototype,"ZhuangListItemPanel",["fany.IDispose"]);var KeFuPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/kefu/KeFuSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(KeFuPanel.prototype,"KeFuPanel",["fany.IDispose"]);var LoginPanel=function(t){function e(e){var i=t.call(this)||this;return i.isClickQuick=!1,i.isClickLogin=!1,i.isClickReg=!1,i.flag=!1,i.skinName="resource/skins/login/LoginPanelSkin.exml",i.flag=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),EventManage.addButtonEvent(this,this.btnTongxingzheng,egret.TouchEvent.TOUCH_TAP,this.btnTongxingzhengHandle.bind(this)),EventManage.addButtonEvent(this,this.btnQuick,egret.TouchEvent.TOUCH_TAP,this.btnQuickHandle.bind(this)),EventManage.addButtonEvent(this,this.btnLoginTrue,egret.TouchEvent.TOUCH_TAP,this.btnLoginTrueHandle.bind(this)),EventManage.addButtonEvent(this,this.btnRegGroup,egret.TouchEvent.TOUCH_TAP,this.btnRegGroupHandle.bind(this)),EventManage.addButtonEvent(this,this.btnCloseLogin,egret.TouchEvent.TOUCH_TAP,this.btnCloseLoginHandle.bind(this)),EventManage.addButtonEvent(this,this.btnRegTrue,egret.TouchEvent.TOUCH_TAP,this.btnRegTrueHandle.bind(this)),EventManage.addButtonEvent(this,this.btnBack,egret.TouchEvent.TOUCH_TAP,this.btnTongxingzhengHandle.bind(this)),this.txtTips.visible=!1,1==this.flag&&(this.txtTips.visible=!0,this.btnBack.visible=!1,this.btnRegGroupHandle())},e.prototype.btnRegTrueHandle=function(){if(""==this.txtMima.text||this.txtMima.text.length>20||this.txtMima.text.length<2)return void TipsManage.showTips("请输入有效密码!");if(""==this.txtMima2.text||this.txtMima2.text.length>20||this.txtMima2.text.length<2)return void TipsManage.showTips("请输入有效密码!");if(this.txtMima2.text!=this.txtMima.text)return void TipsManage.showTips("两次密码不一致!");if(""==this.txtUser.text||this.txtUser.text.length>20||this.txtUser.text.length<2)TipsManage.showTips("请输入有效用户名!");else if(1==fany.SocketManage.isConnect)if(0==this.isClickReg){this.isClickReg=!0;var t=GlobalData.configData.data.regapi+"?service=user.register&username="+this.txtUser.text+"&pwd="+this.txtMima.text+"&from="+GlobalData.platform+"&token="+GlobalData.openid;window.regLogin(t,{},this.regback.bind(this))}else TipsManage.showTips("请勿频繁操作!");else TipsManage.showTips("请等待服务器连接。。。!")},e.prototype.btnLoginTrueHandle=function(){if(""==this.txtMimaLogin.text||this.txtMimaLogin.text.length>20||this.txtMimaLogin.text.length<2)return void TipsManage.showTips("请输入有效密码!");if(""==this.txtUserLogin.text||this.txtUserLogin.text.length>20||this.txtUserLogin.text.length<2)TipsManage.showTips("请输入有效用户名!");else if(1==fany.SocketManage.isConnect)if(0==this.isClickLogin){var t=GlobalData.configData.data.regapi+"?service=user.login&username="+this.txtUserLogin.text+"&pwd="+this.txtMimaLogin.text;window.regLogin(t,{},this.loginback.bind(this)),this.isClickLogin=!0}else TipsManage.showTips("请勿频繁操作!");else TipsManage.showTips("请等待服务器连接。。。!")},e.prototype.loginback=function(t){this.isClickLogin=!1,this.isClickReg=!1,200==t.ret?200==t.data.code?(TipsManage.showTips("登陆成功!"),GlobalData.openid=t.data.token,console.log("openid="+GlobalData.openid),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.LOGIN_REG_ROLE)),GlobalData.isLogin=!0,this.dispose()):203==t.data.code?TipsManage.showTips("用户名或密码错误!"):202==t.data.code?TipsManage.showTips("用户名不存在!"):TipsManage.showTips("系统错误!"):TipsManage.showTips("系统错误!")},e.prototype.regback=function(t){if(this.isClickLogin=!1,this.isClickReg=!1,200==t.ret)if(200==t.data.code){if(TipsManage.showTips("注册成功!"),GlobalData.openid=t.data.token,console.log("openid="+GlobalData.openid),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.LOGIN_REG_ROLE)),GlobalData.isLogin=!0,this.dispose(),1==this.flag)return void PanelManage.openShop()}else 201==t.data.code?TipsManage.showTips("用户名已存在!"):TipsManage.showTips("系统错误!");else TipsManage.showTips("系统错误!")},e.prototype.btnRegGroupHandle=function(){this.quickGroup.visible=!1,this.loginGroup.visible=!1,this.regGroup.visible=!0},e.prototype.btnTongxingzhengHandle=function(){this.quickGroup.visible=!1,this.loginGroup.visible=!0,this.regGroup.visible=!1},e.prototype.btnCloseLoginHandle=function(){this.quickGroup.visible=!0,this.loginGroup.visible=!1,this.regGroup.visible=!1},e.prototype.btnQuickHandle=function(){return 1==this.flag?void TipsManage.showTips("请点击通行证登陆!"):(GlobalData.openid=localStorage.getItem("uuid"),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.LOGIN_REG_ROLE)),void this.dispose())},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(LoginPanel.prototype,"LoginPanel",["fany.IDispose"]);var LotteryPanel=function(t){function e(){var e=t.call(this)||this;return e.isLottering=!1,e.rewardArr=[],e.curTimes=0,e.skinName="resource/skins/lottery/LotterySkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.deg=0,this.duration=0,EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.current,egret.TouchEvent.TOUCH_TAP,this.onTouchLottery.bind(this)),EventManage.addButtonEvent(this,this.btnCharge,egret.TouchEvent.TOUCH_TAP,this.onTouchCharge.bind(this)),Net.send(Protocol.DIAL_GET_INFO,{},this.getDialInfo.bind(this))},e.prototype.getDialInfo=function(t){if(200==t.code){this.curTimes=parseInt(t.times),this.labTipsNum.text="您当前剩余"+t.times+"次抽奖机会！",this.rewardArr=t.list;for(var e=0;e<this.rewardArr.length;e++)this["label"+e].text=this.rewardArr[e].name}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchCharge=function(){this.isLottering||PanelManage.openShop()},e.prototype.onTouchLottery=function(){this.isLottering||Net.send(Protocol.DIAL_GET_AWARD,{},this.onPostComplete.bind(this))},e.prototype.onPostComplete=function(t){var e=this;if(200==t.code){this.curTimes=this.curTimes-1,this.labTipsNum.text="您当前剩余"+this.curTimes+"次抽奖机会！",this.isLottering=!0;var i=t.binggo;return this.deg=360*Math.ceil(6*Math.random()+10)-30*(i-1),this.duration=this.calcDuration(this.deg),console.log("prize_id：",i,"转动角度：",this.deg,"转动时间：",this.duration),this.startTurn(function(){e.lotteryDone(e.rewardArr[i-1].name)})}TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.calcDuration=function(t){return 2*t},e.prototype.lotteryDone=function(t){egret.Tween.removeAllTweens(),this.isLottering=!1,TipsManage.showTips("恭喜您获得了 "+t),PanelManage.hall.updateGold()},e.prototype.startTurn=function(t){var e=this;this.lightAni(),this.current.touchEnabled=!1,egret.Tween.get(this.inCir).to({rotation:this.deg},this.duration,egret.Ease.cubicOut).call(function(){e.current.touchEnabled=!0,t()})},e.prototype.lightAni=function(){egret.Tween.get(this.warpCir,{loop:!0}).set({source:RES.getRes("lottery.wrapcircle_bg2")}).wait(300).set({source:RES.getRes("lottery.wrapcircle_bg")}).wait(300)},e.prototype.getGridID=function(t){for(var e=0,i=[],n=0;n<this.rewardArr.length;n++)this.rewardArr[n]==t&&i.push(n);return console.log("grid Arr : "+i),e=i[Math.floor(Math.random()*i.length)],console.log("grid id:  "+e),e},e.prototype.dispose=function(){this.isLottering||(this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this))},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(LotteryPanel.prototype,"LotteryPanel",["fany.IDispose"]);var MoneyTreePanel=function(t){function e(){var e=t.call(this)||this;return e.lMax=0,e.skinName="resource/skins/moneytree/MoneyTreeSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnCharge,egret.TouchEvent.TOUCH_TAP,this.onTouchCharge.bind(this)),EventManage.addButtonEvent(this,this.btnGetCoin,egret.TouchEvent.TOUCH_TAP,this.onTouchGetCoin.bind(this)),EventManage.addButtonEvent(this,this.btnUp,egret.TouchEvent.TOUCH_TAP,this.onTouchUp.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.HALL_MONEYTREE_LIST,{},this.treeList.bind(this))},e.prototype.treeList=function(t){200==t.code&&(0==t.data.level?this.initNo():this.initHave(t.data))},e.prototype.onTouchClose=function(){this.dispose()},e.prototype.onTouchCharge=function(){PanelManage.openShop()},e.prototype.onTouchGetCoin=function(){return 0==this.lMax?void TipsManage.showTips(ErrorMessage.errorMsg(404)):void Net.send(Protocol.HALL_MONEYTREE_GET,{},this.getCoinCallback.bind(this))},e.prototype.getCoinCallback=function(t){200==t.code?(GlobalData.user.gold=t.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),EffectUtils.coinsFly(this,116,557),this.updateLoding(0,this.lMax)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchUp=function(){PanelManage.openShop()},e.prototype.initHave=function(t){this.btnCharge.visible=!1,this.grpNoTips.visible=!1,this.labLevel.text=t.level+"级",this.btnGetCoin.visible=!0,this.grpLoding.visible=!0,this.btnUp.visible=!0,this.grpUpTip.visible=!0,this.updateLoding(t.gold,t.max)},e.prototype.initNo=function(){this.btnCharge.visible=!0,this.grpNoTips.visible=!0,this.labLevel.text="未获得",this.btnGetCoin.visible=!1,this.grpLoding.visible=!1,this.btnUp.visible=!1,this.grpUpTip.visible=!1},e.prototype.updateLoding=function(t,e){this.lMax=e,this.labload.text=t+"/"+e,this.imgload.width=400*(t/e)},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(MoneyTreePanel.prototype,"MoneyTreePanel",["fany.IDispose"]);var NiuNiuPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.interval=-1,i.selfbetsNum={},i.betsPostion=-1,i.betsNum=0,i.cardResult=null,i.isChangeBanker=!1,i.changeBankerObj={},i.isCanBets=!0,i.poolBetArray={},i.limitGold=0,i.limitVip=0,i.curBankerRanking=-1,i.isApplyBanker=!1,i.lastGameBankerNum=0,i.isSysBanker=!1,i.orginBankerCardPos=[],i.orginPlayerCardPos=[],i.isBanker=!1,i.isBets=!1,i.maxUserData=null,i.banker_total_gold=0,i.isBoomBanker=!1,i.resultCaijin=0,i.totalCaijin=0,i.cdNum=10,i.lastTouchBetIndex=-1,i.coinsNumArr={},i.isCoinsReturn=!0,i.curRate=0,i.lastTouchBetTime=0,i.isCardEffectShow=!1,i.isFirstSetBanker=!0,i.flyIntval=0,i.flyIndex0=0,i.flyIndex1=0,i.flyBankerIndex=0,i.effectPlayerIndex=0,i.redPanel=null,i.skinName="resource/skins/BaiRenNiuNiuSkin.exml",i.r=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.getOrginCardPos(),this.addEvent(),this.initData(),this.setCountdown(),this.onTouchBet(0),this.setSelfInfo(),PanelManage.openChat(this,112,300,"10003"),this.joinCallback(this.r)},e.prototype.initData=function(){this.labBankerRank.text="",this.labBankerLastNum.text="",this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpBankerList.visible=!1,this.grpCoins.touchEnabled=!1,this.grpTips.touchEnabled=!1,this.grpTips.touchChildren=!1,this.grpSecondPanel.visible=!1,this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1,this.grpTips.visible=!1,this.grpResult.visible=!1,this.imgBaoZhuang.visible=!1,this.grpCardType.touchChildren=!1,this.grpCardType.touchEnabled=!1,this.grpCaijin.visible=!1,this.grpCard.visible=!0},e.prototype.getOrginCardPos=function(){for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginBankerCardPos[t]=i}this.labCardTypeBanker.visible=!1;for(var n=0;4>n;n++){this["labCardResult"+n].text="",this["labCardType"+n].visible=!1;for(var a=[],s=0;5>s;s++){var e=this["grpCard_"+n+"_"+s];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,a[s]=i}this.orginPlayerCardPos[n]=a}},e.prototype.addEvent=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnCharge,egret.TouchEvent.TOUCH_TAP,this.onTouchCharge.bind(this)),EventManage.addButtonEvent(this,this.btnUpBanker,egret.TouchEvent.TOUCH_TAP,this.onTouchUpBank.bind(this)),EventManage.addButtonEvent(this,this.btnDownBanker,egret.TouchEvent.TOUCH_TAP,this.onTouchDownBank.bind(this)),EventManage.addEvent(this,this.grpBankerInfo,egret.TouchEvent.TOUCH_TAP,this.getBankerList.bind(this)),EventManage.addEvent(this,this.grpBankerList,egret.TouchEvent.TOUCH_TAP,this.onTouchCloseBankerList.bind(this)),EventManage.addButtonEvent(this,this.btnCardType,egret.TouchEvent.TOUCH_TAP,this.onTouchCardType.bind(this)),EventManage.addButtonEvent(this,this.btnCardHistroy,egret.TouchEvent.TOUCH_TAP,this.onTouchCardHistory.bind(this)),EventManage.addButtonEvent(this,this.secondClose,egret.TouchEvent.TOUCH_TAP,this.onTouchCloseSecondPanel.bind(this)),EventManage.addEvent(this,this.btnRedBox,egret.TouchEvent.TOUCH_TAP,this.onTouchRedBox.bind(this));for(var t=0;8>t;t++)6>t&&(EventManage.addEvent(this,this["btnBet"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchBet.bind(this,t)),this["labBet"+t].touchEnabled=!1),4>t&&(EventManage.addEvent(this,this["effectTouch"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchSelectIndex.bind(this,t)),this["labBetsPool"+t].text="0",this["labBetsSelf"+t].text="0"),EventManage.addButtonEvent(this,this["grpHead"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchSeat.bind(this,t)),this["imghead"+t].source="",this["labelHead"+t].text="";EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.OPERTE_REDBOX_COMPLETE,this.operateBoxComplete.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_MAIN,this.updateDataGold.bind(this))},e.prototype.setSelfInfo=function(){this.titleHead.source=GlobalData.user.headurl;var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(55,52,40),t.graphics.endFill(),this.addChild(t),this.titleHead.mask=t,this.titleName.text=GlobalData.user.nickname,this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.setHandsel=function(t){this.labHandsel.text=QuickManage.moneyStr(t)},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum%7==0&&this.getBets(),this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0),this.cdNum<10?(this.labCountdown0.text="0",this.labCountdown1.text=this.cdNum+""):(this.labCountdown0.text=(this.cdNum+"").split("")[0],this.labCountdown1.text=(this.cdNum+"").split("")[1])},e.prototype.joinCallback=function(t){if(200==t.code){this.curRate=t.data.rate;for(var e=t.data,i=t.data.seats,n=0;n<i.length;n++)this["imghead"+i[n].seat].source=i[n].headurl,this["labelHead"+i[n].seat].text=i[n].name,this["imghead"+i[n].seat].height=this["imghead"+i[n].seat].width=70;this.limitGold=e.limitGold,this.limitVip=e.limitVip,this.setHandsel(e.caijin),this.setBankerInfo(e.zhuang),this.cdNum=e.time,this.cdTimer.start(),1==t.state?this.isCanBets=!1:2==t.state?this.isCanBets=!0:3==t.state&&(this.isCanBets=!1),console.log("join_game: "+e.state)}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onMsgListen=function(t){var e=t.msg;switch(console.log("onMsgListen: "+e.type,"_niuniuMsgListen_"),e.type){case 0:this.cdNum=parseInt(e.time)+3,this.cdTimer.start();break;case 1:this.isCanBets=!1,this.showGameTips(3);break;case 2:this.setGameResult(e.data);break;case 3:this.changeBankerObj=e.zhuang,this.isChangeBanker=!0;break;case 4:this.updataSeat(1,e.data);break;case 5:this.updataSeat(2,e.seat);break;case 6:this.updateHandsel(e);break;case 7:this.updateBankerRank(e)}},e.prototype.setGameResult=function(t){this.grpCountdown.visible=!1,this.cardResult=t},e.prototype.updataSeat=function(t,e){1==t?(this["imghead"+e.seat].source=e.headurl,this["imghead"+e.seat].height=this["imghead"+e.seat].width=70,this["labelHead"+e.seat].text=e.nick):(this["imghead"+e].source="",this["labelHead"+e].text="")},e.prototype.updateHandsel=function(t){if(null!=this.cardResult){this.resultCaijin=parseInt(t.data.gift),this.totalCaijin=parseInt(t.data.caijin),this.maxUserData=t.data.max,this.banker_total_gold=t.data.bankerTotalGold;for(var e=0;4>e;e++)this["labTipsClick"+e].visible=!1;this.cardEffect()}},e.prototype.updateBankerRank=function(t){if(this.isApplyBanker){var e=GlobalData.openid+"@"+GlobalData.platform;t.id==e?this.curBankerRanking=t.pos:(t.pos<this.curBankerRanking||t.pos==this.curBankerRanking)&&this.curBankerRanking++,this.labBankerRank.text="排庄"+this.curBankerRanking}},e.prototype.getBankerList=function(t){(!t.target||"btnUpBanker"!=t.target.name&&"btnDownBanker"!=t.target.name)&&Net.send(Protocol.NIUNIU_BANKER_LIST,{},this.bankerListCallback.bind(this))},e.prototype.bankerListCallback=function(t){if(200==t.code){this.grpBankerList.visible=!0;for(var e=0;10>e;e++)e<t.list.length?(this["bankerListItem"+e].visible=!0,this["itemRank"+e].text=e+1+"",this["itemName"+e].text=t.list[e].name,this["itemMoney"+e].text=QuickManage.moneyStr(t.list[e].gold),this["itemVip"+e].text="v"+t.list[e].vip):3>e?(this["bankerListItem"+e].visible=!0,this["itemRank"+e].text=e+1+"",this["itemName"+e].text="",this["itemMoney"+e].text="",this["itemVip"+e].text=""):this["bankerListItem"+e].visible=!1}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchCloseBankerList=function(){this.grpBankerList.visible=!1},e.prototype.getBets=function(){Net.send(Protocol.NIUNIU_GET_BETS,{},this.getBetsCallback.bind(this))},e.prototype.getBetsCallback=function(t){if(200==t.code)for(var e=t.list,i=1;5>i;i++)if(0!=e[i].score){if(e[i].score==this.poolBetArray[i])continue;this.isCanBets&&this.showCoins(e[i].score-this.poolBetArray[i],i),parseInt(this["labBetsPool"+(i-1)].text)<e[i].score/1e4&&(this["labBetsPool"+(i-1)].text=QuickManage.moneyStr(e[i].score),this.poolBetArray[i]=e[i].score)}},e.prototype.onTouchClose=function(){return this.isBanker?void TipsManage.showTips("您是庄家，下庄后方可离开！"):this.isBets?void TipsManage.showTips("您已经下注，这局结束后方可离开！"):void Net.send(Protocol.NIUNIU_LEAVE_GAME,{},function(t){200==t.code?this.dispose():TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.onTouchCharge=function(){PanelManage.openShop(3)},e.prototype.updatePayData=function(t){GlobalData.user.gold=t.param.msg.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)),this.labTitleVip.text="v"+GlobalData.user.vip},e.prototype.onTouchUpBank=function(){return parseInt(GlobalData.user.vip)<this.limitVip?void TipsManage.showTips("您的VIP等级未满"+this.limitVip+"级,不能上庄！"):parseInt(GlobalData.user.gold)<this.limitGold?void TipsManage.showTips("您的金币未满"+QuickManage.moneyStr(this.limitGold)+",不能上庄！"):void Net.send(Protocol.NIUNIU_UP_BANKER,{},this.upBankerCallback.bind(this))},e.prototype.upBankerCallback=function(t){200==t.code&&(TipsManage.showTips("申请上庄成功！"),this.btnDownBanker.visible=!0,this.btnUpBanker.visible=!1,this.isApplyBanker=!0)},e.prototype.onTouchDownBank=function(){Net.send(Protocol.NIUNIU_DOWN_BANKER,{},this.downBankerCallback.bind(this))},e.prototype.downBankerCallback=function(t){200==t.code&&(TipsManage.showTips("申请下庄成功！"),this.btnDownBanker.visible=!1,this.btnUpBanker.visible=!0,this.isApplyBanker=!1,this.curBankerRanking=-1)},e.prototype.onTouchSeat=function(t){return this.isBanker?void TipsManage.showTips("当前您是庄，不能坐下！"):void Net.send(Protocol.NIUNIU_SEAT_DOWN,{seat:t},function(t){200!=t.code&&TipsManage.showTips(ErrorMessage.errorMsg(t.msg))}.bind(this))},e.prototype.onTouchBet=function(t){return this.isBanker?void TipsManage.showTips("您是庄家，不能下注！"):this.isCoinsReturn?void(this.lastTouchBetIndex!=t&&(-1!=this.lastTouchBetIndex&&(this["btnBet"+this.lastTouchBetIndex].scaleX=this["btnBet"+this.lastTouchBetIndex].scaleY=1),this.lastTouchBetIndex=t,this["btnBet"+t].scaleX=this["btnBet"+t].scaleY=1.2,this.betsNum=NiuNiuUtil.getInstance().getBetNumber(t),this.labCurChip.text="注码："+this["labBet"+t].text)):(console.log("touche  Bet++++++++++++++"),void TipsManage.showTips("操作过于频繁，请稍等！"))},e.prototype.onTouchSelectIndex=function(t){if(!this.isCardEffectShow){var e=(new Date).getTime();if(!(e-this.lastTouchBetTime<400))return this.lastTouchBetTime=e,this.isBanker?void TipsManage.showTips("您是庄家，不能下注！"):this.isCoinsReturn?void(this.isCanBets&&(this.betsPostion=t+1,this.isCoinsReturn=!1,Net.send(Protocol.NIUNIU_BET_GOLD,{betId:this.betsPostion,gold:this.betsNum},this.betGlodCallback.bind(this),!1))):void TipsManage.showTips("操作过于频繁，请稍等！")}},e.prototype.betGlodCallback=function(t){if(this.isCoinsReturn=!0,200==t.code){this.isBets=!0,GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.betsNum+"",this.titleLabMoney.text=QuickManage.moneyStr(parseInt(GlobalData.user.gold)),this.selfbetsNum[this.betsPostion]=parseInt(this.selfbetsNum[this.betsPostion])+this.betsNum,this.poolBetArray[this.betsPostion]=parseInt(this.poolBetArray[this.betsPostion])+this.betsNum,this["labBetsPool"+(this.betsPostion-1)].text=QuickManage.moneyStr(this.poolBetArray[this.betsPostion]),this.showCoins(this.betsNum,this.betsPostion);for(var e=0;4>e;e++)this["labBetsSelf"+e].text=QuickManage.moneyStr(this.selfbetsNum[e+1])}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.setBankerInfo=function(t){1==t.sys?(this.bankerHead.source="nn.head",this.bankerHead.width=this.bankerHead.height=55,this.bankerName.text="萌萌哒",this.labBankerMoney.text=QuickManage.moneyStr(8888888e4),this.isSysBanker=!0,this.labBankerLastNum.text="剩余"+parseInt(t.num)+"次",this.lastGameBankerNum=t.num,this.isBanker=!1,this.labBankerVip.text="v10"):(t.id==GlobalData.openid+"@"+GlobalData.platform?(this.isBanker=!0,this.labBankerRank.text=""):(this.isApplyBanker?t.pos<this.curBankerRanking&&(this.curBankerRanking--,this.labBankerRank.text="排庄"+this.curBankerRanking):(this.labBankerRank.text="",this.btnDownBanker.visible=!1,this.btnUpBanker.visible=!0),this.isBanker=!1),"萌萌哒"!=this.bankerName.text&&(this.isFirstSetBanker||PanelManage.chat.sendGameChat(this.bankerName.text+"下庄了")),this.bankerHead.source=t.headurl,this.bankerHead.width=this.bankerHead.height=55,this.bankerName.text=t.nick,this.labBankerMoney.text=QuickManage.moneyStr(t.gold),this.labBankerLastNum.text="剩余"+parseInt(t.num)+"次",this.lastGameBankerNum=t.num,this.isSysBanker=!1,this.labBankerVip.text="v"+t.vip,this.isFirstSetBanker||PanelManage.chat.sendGameChat(this.bankerName.text+"上庄了")),this.isFirstSetBanker=!1
},e.prototype.setHistory=function(){for(var t=0;10>t;t++){this["grpHistory"+t].visible=!1;for(var e=0;4>e;e++)this["grpHistory"+e+"_"+t].source=""}},e.prototype.updateGold=function(){Net.send(Protocol.NIUNIU_GET_GOLD,{},this.getGoldCallback.bind(this))},e.prototype.getGoldCallback=function(t){200==t.code&&(GlobalData.user.gold=t.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN)))},e.prototype.showGameTips=function(t){this.grpTipsInfo.source=NiuNiuUtil.getInstance().getMsgSource(t),this.grpTips.visible=!0,this.grpTipsbg.alpha=0,this.grpTipsInfo.x=640,MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(t)),egret.Tween.get(this.grpTipsbg).to({alpha:1},400).wait(400).call(function(){egret.Tween.get(this).to({alpha:0},400)},this.grpTipsbg),egret.Tween.get(this.grpTipsInfo).to({x:0},400).wait(400).call(function(){egret.Tween.get(this).to({x:-640},400)},this.grpTipsInfo)},e.prototype.showCoins=function(t,e){var i=!1;MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(8),.5);var n=NiuNiuUtil.getInstance().getCoinsPos(e),a=NiuNiuUtil.getInstance().coinsType(t);this.coinsNumArr[e]<50?(this.coinsNumArr[e]=parseInt(this.coinsNumArr[e])+a.length,i=!1):i=!0;for(var s=0;s<a.length;s++){var o=n.x+50*Math.random(),r=n.y+50*Math.random();this.grpCoins.addChild(a[s]),egret.Tween.get(a[s]).to({x:o,y:r},200).call(function(){this[0]&&this[1].parent.removeChild(this[1])},[i,a[s]])}},e.prototype.cardEffect=function(){this.isCardEffectShow=!0,this.flyIntval=setInterval(this.playCardFly.bind(this),200)},e.prototype.playCardFly=function(){var t=this["grpCard_"+this.flyIndex0+"_"+this.flyIndex1];t.source="nn.card_100",t.x=296,t.y=340,t.anchorOffsetX=t.width/2,t.x+=t.width/2;var e=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},300),4==this.flyIndex1?3==this.flyIndex0?(this.flyIndex0=0,this.flyIndex1=0,clearInterval(this.flyIntval),this.flyBankerIndex=0,this.flyIntval=setInterval(this.bankerCardFly.bind(this),200)):(this.flyIndex1=0,this.flyIndex0++):this.flyIndex1++},e.prototype.bankerCardFly=function(){if(5==this.flyBankerIndex)return this.flyBankerIndex=0,clearInterval(this.flyIntval),void(this.interval=setInterval(this.playerCardRotation.bind(this),800));var t=this["bankerCard_"+this.flyBankerIndex];t.x=296,t.y=340,t.source="nn.card_100",t.anchorOffsetX=t.width/2,t.x+=t.width/2,this.orginBankerCardPos;var e=this.orginBankerCardPos[this.flyBankerIndex];MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},400),this.flyBankerIndex++},e.prototype.playerCardRotation=function(){if(4==this.effectPlayerIndex)return clearInterval(this.interval),this.effectPlayerIndex=0,void this.bankerCardRotation();MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes,e=this.effectPlayerIndex,i=0;5>i;i++){var n=this["grpCard_"+e+"_"+i];n.source="nn.card_100",egret.Tween.get(n).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[n,t[e+1].value[i]])}if(this["labCardType"+e].source=NiuNiuUtil.getInstance().getCardType(t[e+1].type),MusicManage.playMuisc(NiuNiuUtil.getInstance().getCardMusicType(t[e+1].type)),this["labCardType"+e].visible=!0,this["labCardType"+e].width=98,this["labCardType"+e].height=44,this["labCardResult"+e].text="",0!=t[e+1].type)for(var i=0;5>i;i++){var n=this["grpCard_"+e+"_"+i];3>i?egret.Tween.get(n).wait(700).to({x:n.x-10},100):egret.Tween.get(n).wait(700).to({x:n.x+10},100)}this.effectPlayerIndex++},e.prototype.bankerCardRotation=function(){MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes[0],e=0;5>e;e++){var i=this["bankerCard_"+e];i.source="nn.card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]])}if(this.labCardTypeBanker.source=NiuNiuUtil.getInstance().getCardType(t.type),MusicManage.playMuisc(NiuNiuUtil.getInstance().getCardMusicType(t.type)),this.labCardTypeBanker.visible=!0,this.labCardTypeBanker.width=98,this.labCardTypeBanker.height=44,0!=t.type)for(var e=0;5>e;e++){var i=this["bankerCard_"+e];3>e?egret.Tween.get(i).wait(700).to({x:i.x-10},100):egret.Tween.get(i).wait(700).to({x:i.x+10},100)}this.interval=setInterval(this.blinkEffect.bind(this),500)},e.prototype.blinkEffect=function(){clearInterval(this.interval);for(var t=this.cardResult.result,e=0;4>e;e++)1==t[e]&&(this["effectSelect"+e].visible=!0,EffectUtils.blinkEffect(this["effectSelect"+e],200));this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval);var t=this.cardResult,e=!1;1==t.result[0]&&1==t.result[1]&&1==t.result[2]&&1==t.result[3]&&(this.showGameTips(5),e=!0),0==t.result[0]&&0==t.result[1]&&0==t.result[2]&&0==t.result[3]&&(this.showGameTips(4),e=!0),e?this.interval=setInterval(this.showGameResult.bind(this),1e3):this.showGameResult()},e.prototype.showGameResult=function(){clearInterval(this.interval),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.CHAT_GAME_RESULT));var t=this.cardResult;this.grpResult.visible=!0,null!=this.maxUserData?(this.grpMax.visible=!0,this.grpMaxHead.source=this.maxUserData.headurl,this.grpMaxHead.width=this.grpMaxHead.height=70,this.grpMaxGold.text="赢 "+QuickManage.moneyStr(this.maxUserData.gold),this.grpMaxName.text=this.maxUserData.name,this.maxUserData.name==GlobalData.user.nickname&&MusicManage.playMuisc(NiuNiuUtil.getInstance().getSoundEffect(1))):this.grpMax.visible=!1,this.grpBankerHead.source=this.bankerHead.source,this.grpBankerName.text=this.bankerName.text,this.grpBankerBeishu.text=t.pokes[0].num+"倍",this.grpBankerType.source="",this.labelBankerType.text=NiuNiuUtil.getInstance().getCardType2(t.pokes[0].type),parseInt(t.bankerWin)<0?(this.grpBankerGold.text="输 "+QuickManage.moneyStr(Math.abs(t.bankerWin)),PanelManage.chat.sendGameChat("庄家输了 "+QuickManage.moneyStr(Math.abs(t.bankerWin)))):(this.grpBankerGold.text="赢 "+QuickManage.moneyStr(t.bankerWin),0!=t.bankerWin&&PanelManage.chat.sendGameChat("庄家赢了 "+QuickManage.moneyStr(Math.abs(t.bankerWin))));for(var e=0,i=0;4>i;i++){var n=parseInt(t.pokes[i+1].num);this["resultType"+i].text=NiuNiuUtil.getInstance().getCardType2(t.pokes[i+1].type),this["labResult0_"+i].text=n+"倍",this["labResult1_"+i].text=QuickManage.moneyStr(this.selfbetsNum[i+1]);var a=this.selfbetsNum[i+1];if(0!=a)if(this["labResult2_"+i].text="",1==t.result[i]){var s=0;s=this.isBanker?parseInt(t.pokes[0].num):parseInt(t.pokes[i+1].num),e+=parseInt(a)*(s+1)}else{var o=0;o=this.isBanker?parseInt(t.pokes[i+1].num):parseInt(t.pokes[0].num),1==o||(e-=parseInt(a)*(o-1))}else this["labResult2_"+i].text=0}for(var r=0,i=1;5>i;i++)r+=this.selfbetsNum[i];(e>0||0==e)&&(e*=1-this.curRate),e-=r,e>0||0==e?this.labResultValue.text="结算："+QuickManage.moneyStr(e):this.labResultValue.text="结算：-"+QuickManage.moneyStr(Math.abs(e)),e>0&&EffectUtils.coinsFly(this,320,500),this.updateGold(),this.isSysBanker||(this.labBankerMoney.text=QuickManage.moneyStr(this.banker_total_gold)),this.setHandsel(this.totalCaijin),e>0&&this.resultCaijin>0?this.interval=setInterval(this.caijinShow.bind(this),3e3):0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3)},e.prototype.boomShow=function(){this.grpCaijin.visible=!1,this.imgBaoZhuang.visible=!0,clearInterval(this.interval),this.interval=setInterval(this.setStartBet.bind(this),4e3)},e.prototype.caijinShow=function(t){PanelManage.chat.sendGameChat("恭喜你获得彩金 "+this.resultCaijin),this.grpCaijinLabel.text="恭喜你获得"+this.resultCaijin+"彩金",this.grpCaijin.visible=!0,clearInterval(this.interval),0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3)},e.prototype.setStartBet=function(){this.resetGame(),this.grpResult.visible=!1,clearInterval(this.interval),this.showGameTips(2),this.grpCountdown.visible=!0,this.isSysBanker||this.isChangeBanker||(this.lastGameBankerNum--,this.labBankerLastNum.text="剩余"+Math.round(this.lastGameBankerNum)+"次"),this.isChangeBanker&&(this.isChangeBanker=!1,this.setBankerInfo(this.changeBankerObj),this.grpBankerList.visible=!1)},e.prototype.resetGame=function(){for(var t=0;4>t;t++)this["labBetsPool"+t].text="0",this["labBetsSelf"+t].text="0",egret.Tween.removeTweens(this["effectSelect"+t]);for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",egret.Tween.removeTweens(e)}for(var i=0;4>i;i++){this["labCardResult"+i].text="",this["labCardType"+i].visible=!1,this.labCardTypeBanker.visible=!1;for(var n=0;5>n;n++){var e=this["grpCard_"+i+"_"+n];e.source="",egret.Tween.removeTweens(e)}}for(this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0};this.grpCoins.numChildren>0;)this.grpCoins.removeChildAt(0);for(var t=0;4>t;t++)this["effectSelect"+t].visible=!1;for(var a=0;4>a;a++)this["labTipsClick"+a].visible=!0;this.isCanBets=!0,this.isBets=!1,this.imgBaoZhuang.visible=!1,this.resultCaijin=0,this.grpCaijin.visible=!1,this.isCoinsReturn=!0,this.isCardEffectShow=!1},e.prototype.onTouchCardType=function(){this.grpSecondPanel.visible=!0,this.grpCardType.visible=!0,this.grpHistory.visible=!1},e.prototype.onTouchCardHistory=function(){Net.send(Protocol.NIUNIU_GAME_RECORD,{},this.getHistoryCallback.bind(this))},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],a=0;4>a;a++)this["grpHistroy"+a+"_"+i].source=1==n[a]?"nn.a8":"nn.a7"}else this["grpHistroy"+i].visible=!1;this.grpSecondPanel.visible=!0,this.grpCardType.visible=!1,this.grpHistory.visible=!0},e.prototype.onTouchCloseSecondPanel=function(){this.grpSecondPanel.visible=!1},e.prototype.onTouchRedBox=function(){PanelManage.openRedBox(2,1)},e.prototype.operateBoxComplete=function(){lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))},e.prototype.updateDataGold=function(){EffectUtils.numEffect(this.titleLabMoney,parseInt(GlobalData.user.gold))},e.prototype.dispose=function(){MusicManage.closeMuisc(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(NiuNiuPanel.prototype,"NiuNiuPanel",["fany.IDispose"]);var NiuNiuUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 5*Math.pow(10,7);case 5:return Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="nn.d2";break;case 3:e="nn.d3";break;case 4:e="nn.d4";break;case 5:e="nn.d5"}return e},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=195,e.y=523;break;case 2:e.x=383,e.y=523;break;case 3:e.x=195,e.y=633;break;case 4:e.x=383,e.y=633}return e},t.prototype.getCardType2=function(t){switch(t){case 0:return"无牛";case 1:return"牛一";case 2:return"牛二";case 3:return"牛三";case 4:return"牛四";case 5:return"牛五";case 6:return"牛六";case 7:return"牛七";case 8:return"牛八";case 9:return"牛九";case 10:return"牛牛";case 11:return"四炸";case 12:return"五花牛";case 13:return"五小牛"}},t.prototype.getCardType=function(t){switch(t){case 0:return"nn.n1";case 1:return"nn.n2";case 2:return"nn.n3";case 3:return"nn.n4";case 4:return"nn.n5";case 5:return"nn.n6";case 6:return"nn.n7";case 7:return"nn.n8";case 8:return"nn.n9";case 9:return"nn.n10";case 10:return"nn.n11";case 11:return"nn.n13";case 12:return"nn.n14";case 13:return"nn.n12"}},t.prototype.getCardMusicType=function(t){switch(t){case 0:return"nn.niu0";case 1:return"nn.niu1";case 2:return"nn.niu2";case 3:return"nn.niu3";case 4:return"nn.niu4";case 5:return"nn.niu5";case 6:return"nn.niu6";case 7:return"nn.niu7";case 8:return"nn.niu8";case 9:return"nn.niu9";case 10:return"nn.niuniu";case 11:return"nn.playNiuZhadan";case 12:return"nn.playNiu5hua";case 13:return"nn.playNiuXiao5"}},t.prototype.coinsType=function(t){var e=[],i=0,n="";t=Math.round(t/1e4),t>0&&10>t?(i=t,n="nn.b1a"):t>9&&100>t?(i=t/10,n="nn.b2a"):t>99&&1e3>t?(i=t/100,n="nn.b3a"):t>999&&5e3>t?(i=t/1e3,n="nn.b4a"):t>4999&&1e4>t?(i=t/5e3,n="nn.b5a"):(i=t/1e4,n="nn.b6a");for(var a=0;a<Math.round(i);a++){var s=new eui.Image(n),o=this.coinPos();s.x=o.x,s.y=o.y,e.push(s)}return e},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"nn.jackpot";case 2:return"nn.start";case 3:return"nn.end";case 4:return"nn.ts";case 5:return"nn.tp";case 6:return"nn.dealCard";case 7:return"nn.openCard";case 8:return"nn.stake"}},t}();NiuNiuUtil.instance=null,__reflect(NiuNiuUtil.prototype,"NiuNiuUtil");var GameResultPanel=function(t){function e(e,i){var n=t.call(this)||this;return n.data=null,n.cb=null,n.tt=0,n.skinName="resource/skins/other/GameResultPanelSkin.exml",n.data=e,n.cb=i,n}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.bg.source=GlobalData.cdnResUrl+"resource/assets/noload/noloding.gameresult.png",this.imgGold.source=GlobalData.cdnResUrl+"resource/assets/noload/noloding.gamegold.png",this.guang.source=GlobalData.cdnResUrl+"resource/assets/noload/noloading.guang.png",this.tt=setTimeout(this.dispose.bind(this),3e3),this.guang.anchorOffsetX=250,this.guang.anchorOffsetY=250,this.guang.x+=250,this.guang.y+=250,TimerManager.getInstance().setFrame("GameResultPanel.gogo",this.gogo.bind(this),this),this.setData(),EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.gogo=function(){this.guang.rotation+=5},e.prototype.setData=function(){var t=this.data;this.imgResult.source=t.res,this.txtYing.text="+"+t.win,this.txtCaiJing.text="本局获得彩金为: "+t.caijing,""!=t.max.name?(this.txtTips.visible=!1,this.maxWin.visible=!0,this.txtVip.text="VIP"+t.max.vip,this.txtName.text=t.max.name,this.txtMaxGold.text=t.max.maxGold,this.head.source=t.max.headurl):(this.txtTips.visible=!0,this.maxWin.visible=!1),parseInt(t.win+"")>0?(MusicManage.playMuisc("fruit_win"),this.imgTishi.source=GlobalData.cdnResUrl+"resource/assets/noload/noloading.txt2.png"):(MusicManage.playMuisc("fruit_fail"),this.imgTishi.source=GlobalData.cdnResUrl+"resource/assets/noload/noloading.txt3.png")},e.prototype.dispose=function(){this.cb&&this.cb(),TimerManager.getInstance().remove("GameResultPanel.gogo"),clearTimeout(this.tt),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(GameResultPanel.prototype,"GameResultPanel",["fany.IDispose"]);var NoticePanel=function(t){function e(e){var i=t.call(this)||this;return i.gudingGroup=e,i.createNotice(),TimerManager.getInstance().setFrame("NoticePanel.noticeMoveHandler",i.noticeMoveHandler.bind(i),i),i}return __extends(e,t),e.prototype.gonggao=function(t){""!=t.msg.name?this.noticeData.push("<font color=#00e500>["+t.msg.name+']:</font><font color="#ffffff" >'+t.msg.msg+"</font>"):this.noticeData.push(ChatManage.getInstance().transition(t.msg.msg,!1))},e.prototype.setGuding=function(){this.gudingGroup=new eui.Group,this.gudingGroup.x=0,this.gudingGroup.y=118,this.addChild(this.gudingGroup);var t=new eui.Image("gonggao.bgg");t.touchEnabled=!1,this.gudingGroup.addChild(t);var e=new eui.Label;e.height=26,e.width=700,e.size=22,e.textColor=GameConfig.TextColors.milkWhite,e.text="欢迎进入游戏，全新上线欢乐小丑和老虎机，欢迎体验！",this.gudingGroup.addChild(e)},e.prototype.noticeMoveHandler=function(){this.label_notice.x<-600?(this.setNotice(),this.label_notice.x=600):this.label_notice.x-=4},e.prototype.setNotice=function(){var t="";0==this.noticeData.length?(egret.Tween.get(this.bgg).to({alpha:0},800),this.gudingGroup.visible=!0,t=""):(egret.Tween.get(this.bgg).to({alpha:1},800),this.gudingGroup.visible=!1,t=this.noticeData.shift()),this.label_notice.textFlow=(new egret.HtmlTextParser).parser(t)},e.prototype.createNotice=function(){this.noticeData=[],this.bgg=new eui.Image("gonggao.bgg"),this.bgg.touchEnabled=!1,this.bgg.x=0,this.bgg.y=118,this.bgg.alpha=0,this.addChild(this.bgg),this.label_notice=new eui.Label,this.label_notice.height=26,this.label_notice.width=700,this.label_notice.size=22,this.label_notice.x=75,this.label_notice.y=124,this.label_notice.textColor=GameConfig.TextColors.milkWhite,this.label_notice.text="",this.addChild(this.label_notice),this.label_notice.touchEnabled=!1,this.maskNotice=new eui.Rect,this.maskNotice.width=619,this.maskNotice.height=28,this.maskNotice.x=75,this.maskNotice.y=124,this.addChild(this.maskNotice),this.label_notice.mask=this.maskNotice,this.maskNotice.touchEnabled=!1},e.prototype.dispose=function(){TimerManager.getInstance().remove("NoticePanel.noticeMoveHandler"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(egret.Sprite);__reflect(NoticePanel.prototype,"NoticePanel");var ResLoading=function(t){function e(){var e=t.call(this)||this;return e.r=null,e.skinName="resource/skins/other/ResLoadingPanelSkin.exml",e}return __extends(e,t),e.prototype.init=function(t){switch(this.res=t,t){case"jinsha":GlobalData.isLodingComJinSha?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"jinhua":GlobalData.isLodingComJinHua?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"niuniu":GlobalData.isLodingComNiuNiu?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"blackjack":GlobalData.isLodingComBlackJack?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"pk":GlobalData.isLodingComPK?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"ddz":GlobalData.isLodingComDDZ?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"clown":GlobalData.isLodingComClown?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t));break;case"fruit":GlobalData.isLodingComFruit?this.callback(t):ResManage.init(t,!0,this.callback.bind(this,t))}},e.prototype.netcallback=function(t){this.r=t,this.openPanel(),this.dispose()},e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.txtStr.text="正在加载界面资源...",this.zhuan.anchorOffsetX=25,this.zhuan.anchorOffsetY=25,EnterFrameManage.add(this.gogo.bind(this),"ResLoading.gogo"),EventManage.addOnceEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.gogo=function(){this.zhuan.rotation+=8},e.prototype.setProgress=function(t,e){this.txtStr.text="正在加载资源...",this.txtTips.text=Math.floor(t/e*100)+"%"},e.prototype.callback=function(t){switch(this.txtStr.text="正在加载数据...",t){case"jinsha":Net.send(Protocol.JOIN_JINSHA_GAME,{},this.netcallback.bind(this));break;case"jinhua":Net.send(Protocol.JOIN_GOLDEN_GAME,{},this.netcallback.bind(this));break;case"niuniu":Net.send(Protocol.JOIN_NIUNIU_GAME,{},this.netcallback.bind(this));break;case"blackjack":Net.send(Protocol.BLACK_JACK_JOIN,{},this.netcallback.bind(this));break;case"pk":this.netcallback({code:"200"});break;case"ddz":this.netcallback({code:"200"});break;case"clown":Net.send(Protocol.CLOWN_CLOWNHANDLER_JOINGAME,{},this.netcallback.bind(this));break;case"fruit":Net.send(Protocol.FRUIT_JOIN_GAME,{},this.netcallback.bind(this))}},e.prototype.openPanel=function(){if(null==this.r)return void TipsManage.showTips("数据异常！请重新操作！");if(200!=this.r.code)return void TipsManage.showTips("数据异常！请重新操作！"+JSON.stringify(this.r));switch(this.res){case"jinsha":PanelManage.openJinSha(this.r),GlobalData.isLodingComJinSha=!0;break;case"jinhua":PanelManage.openZhaJinHua(this.r),GlobalData.isLodingComJinHua=!0;break;case"niuniu":PanelManage.openNiuNiu(this.r),GlobalData.isLodingComNiuNiu=!0;break;case"blackjack":PanelManage.openBlackJack(this.r),GlobalData.isLodingComBlackJack=!0;break;case"pk":PanelManage.openPk(this.r),GlobalData.isLodingComPK=!0;break;case"ddz":MusicManage.closeBgMuisc(),MusicManage.playGameBgMuisc("hallBgm",.5,-1),PanelManage.openDdz(this.r),GlobalData.isLodingComDDZ=!0;break;case"clown":PanelManage.openClown(this.r),GlobalData.isLodingComClown=!0;break;case"fruit":PanelManage.openFruit(this.r),GlobalData.isLodingComFruit=!0}},e.prototype.dispose=function(){EnterFrameManage.remove("ResLoading.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ResLoading.prototype,"ResLoading",["fany.IDispose"]);var ResLoading2=function(t){function e(e){var i=t.call(this)||this;return i.skinName="resource/skins/other/ResLoadingPanelSkin.exml",i.param=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.txtStr.text="正在加载界面资源...",this.zhuan.anchorOffsetX=25,this.zhuan.anchorOffsetY=25,TimerManager.getInstance().setFrame("ResLoading.gogo",this.gogo.bind(this),this),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UI_LOADING_COM,this.dispose.bind(this)),EventManage.addEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose2.bind(this))},e.prototype.setProgress=function(t,e){this.txtTips.text=Math.floor(t/e*100)+"%"},e.prototype.gogo=function(){this.zhuan.rotation+=8},e.prototype.dispose2=function(){this.visible=!1},e.prototype.dispose=function(){TimerManager.getInstance().remove("ResLoading.gogo"),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren(),PanelManage.resloading2=null},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ResLoading2.prototype,"ResLoading2",["fany.IDispose"]);var ServerErrorPanel=function(t){function e(e){var i=t.call(this)||this;return i.skinName="resource/skins/other/ServerErrorPanelSkin.exml",i.notice=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){egret.Tween.removeAllTweens(),this.setTouchEnabled(),this.txtNotice.text=this.notice,EventManage.addEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.btnSureHandle.bind(this))},e.prototype.btnSureHandle=function(){this.dispose(),window.location.reload()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ServerErrorPanel.prototype,"ServerErrorPanel",["fany.IDispose"]);var TipsShowPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/other/TipsShowPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.touchChildren=!1,this.touchEnabled=!1},e.prototype.setStr=function(t){this.txtNotice.text=t},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),this.removeChildren()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(TipsShowPanel.prototype,"TipsShowPanel",["fany.IDispose"]);var PkPanel=function(t){function e(e){var i=t.call(this)||this;return i.r=null,i.isCanTouch=!0,i.intVal=-1,i.isJoin=!1,i.skinName="resource/skins/pk/PkSkin.exml",i}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnType0,egret.TouchEvent.TOUCH_TAP,this.onTouchType.bind(this,0)),EventManage.addButtonEvent(this,this.btnType1,egret.TouchEvent.TOUCH_TAP,this.onTouchType.bind(this,1)),EventManage.addButtonEvent(this,this.btnType2,egret.TouchEvent.TOUCH_TAP,this.onTouchType.bind(this,2)),EventManage.addButtonEvent(this,this.btnJoin,egret.TouchEvent.TOUCH_TAP,this.onTouchJoin.bind(this)),EventManage.addButtonEvent(this,this.btnCreate,egret.TouchEvent.TOUCH_TAP,this.onTouchCreate.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.overToEnter.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.exit.bind(this)),this.initEnter()},e.prototype.onTouchType=function(t){this.isCanTouch&&(Net.send(Protocol.PK_SETHAND,{type:t},this.typeCallback.bind(this)),this.isCanTouch=!1)},e.prototype.typeCallback=function(t){200==t.code?(this.btnType0.visible=!1,this.btnType1.visible=!1,this.btnType2.visible=!1,TipsManage.showTips("请等待对方出拳！")):TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.isCanTouch=!0},e.prototype.onTouchJoin=function(){var t=this.editRoom.text;if(""==t)return void TipsManage.showTips("抱歉，房间号不能为空！");var e=this.editPwdJoin.text;return""==e?void TipsManage.showTips("抱歉，密码不能为空！"):void Net.send(Protocol.PK_JOIN,{room:t,password:e},this.joinCallback.bind(this))},e.prototype.joinCallback=function(t){200==t.code?(this.isJoin=!0,this.initGameOther(t.data)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.onTouchCreate=function(){var t=this.editMoney.text;if(""==t)return void TipsManage.showTips("抱歉，金额不能为空！");var e=this.editPwd.text;return""==e?void TipsManage.showTips("抱歉，密码不能为空！"):void Net.send(Protocol.PK_CREATE,{money:1e4*parseInt(t),password:e},this.createCallback.bind(this))},e.prototype.createCallback=function(t){200==t.code?(this.isJoin=!1,this.initGame(t.data)):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.initEnter=function(){this.grpEnter.visible=!0,this.grpGame.visible=!1,this.grpOver.visible=!1,this.editMoney.text="",this.editPwd.text="",this.editRoom.text="",this.editPwdJoin.text="",this.labPwd.text=""},e.prototype.initGame=function(t){this.btnType0.visible=!0,this.btnType1.visible=!0,this.btnType2.visible=!0,this.grpEnter.visible=!1,this.grpGame.visible=!0,this.grpOver.visible=!1,this.otherHead.source="",this.labOtherName.text="",this.labMoney.text="金额： "+QuickManage.moneyStr(t.money),this.curMoney=t.money,this.labRoom.text="房间号："+t.room,this.labPwd.text="密码："+t.password,this.setOtherReslut(-1),this.setSelfReslut(-1)},e.prototype.initGameOther=function(t){this.btnType0.visible=!0,this.btnType1.visible=!0,this.btnType2.visible=!0,this.grpEnter.visible=!1,this.grpGame.visible=!0,this.grpOver.visible=!1,this.otherHead.source="",this.labOtherName.text="",this.labMoney.text="金额： "+QuickManage.moneyStr(t.money),this.curMoney=t.money,this.labRoom.text="",this.labPwd.text="",this.setOtherReslut(-1),this.setSelfReslut(-1)},e.prototype.messageOn=function(t){switch(t.msg.type){case 1:this.setOtherPeople(t.msg.data);break;case 2:this.setResult(t.msg);break;case 3:this.setOtherLeave(t.msg)}},e.prototype.setOtherLeave=function(t){this.labOtherName.text="",this.otherHead.source=""},e.prototype.setResult=function(t){this.isJoin?this.setJoinResult(t):this.setCreateResult(t),this.intVal=setInterval(this.setOver.bind(this),4e3)},e.prototype.setJoinResult=function(t){this.setSelfReslut(t.hands[1]),this.setOtherReslut(t.hands[0]),1==t.result?(this.labOverTitle.text="恭喜 您赢了"+QuickManage.moneyStr(this.curMoney),GlobalData.user.gold=parseInt(GlobalData.user.gold)+parseInt(this.curMoney)+""):0==t.result?(this.labOverTitle.text="非常遗憾 您输了"+QuickManage.moneyStr(this.curMoney),GlobalData.user.gold=parseInt(GlobalData.user.gold)-parseInt(this.curMoney)+""):this.labOverTitle.text="平局",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))},e.prototype.setCreateResult=function(t){this.setSelfReslut(t.hands[0]),this.setOtherReslut(t.hands[1]),0==t.result?(this.labOverTitle.text="恭喜 您赢了"+QuickManage.moneyStr(this.curMoney),GlobalData.user.gold=parseInt(GlobalData.user.gold)+parseInt(this.curMoney)+""):1==t.result?(this.labOverTitle.text="非常遗憾 您输了"+QuickManage.moneyStr(this.curMoney),GlobalData.user.gold=parseInt(GlobalData.user.gold)-parseInt(this.curMoney)+""):this.labOverTitle.text="平局",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))},e.prototype.setOver=function(){clearInterval(this.intVal),this.grpEnter.visible=!1,this.grpGame.visible=!1,this.grpOver.visible=!0},e.prototype.setSelfReslut=function(t){for(var e=0;3>e;e++)t==e?this["resultSelf"+e].visible=!0:this["resultSelf"+e].visible=!1},e.prototype.setOtherReslut=function(t){for(var e=0;3>e;e++)t==e?this["resultOther"+e].visible=!0:this["resultOther"+e].visible=!1},e.prototype.setOtherPeople=function(t){if(1==t.lenght)return this.labOtherName.text="",void(this.otherHead.source="");for(var e=0;e<t.length;e++){var i=t[e];GlobalData.user.nickname==i.name||(this.labOtherName.text=i.name,this.otherHead.source=i.headurl,this.otherHead.width=this.otherHead.height=74)}},e.prototype.overToEnter=function(){this.initEnter()},e.prototype.exit=function(){Net.send(Protocol.PK_LEAVE,{},this.exitCallback.bind(this))},e.prototype.exitCallback=function(t){200==t.code&&this.dispose()},e.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(PkPanel.prototype,"PkPanel",["fany.IDispose"]);var RankItemPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rank/RankItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t){this.head.source=t.headurl,t.rank>3?(this.txtRank.visible=!0,this.txtRank.text=t.rank,this.num.visible=!1):(this.num.source="rank.num"+t.rank,this.num.visible=!0),this.txtGold.text=QuickManage.moneyStr(t.gold),this.txtName.text=t.name,this.txtVip.text="v"+t.vip},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(RankItemPanel.prototype,"RankItemPanel",["fany.IDispose"]);var RankPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rank/RankPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.GET_RANK_LIST,{},this.ranklistcallback.bind(this)),EventManage.addButtonEvent(this,this.btnCaifu,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,1)),EventManage.addButtonEvent(this,this.btnShu,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,2)),EventManage.addButtonEvent(this,this.btnYing,egret.TouchEvent.TOUCH_TAP,this.clickBtn.bind(this,3))},e.prototype.clickBtn=function(t){switch(this.btnShu.source="rank.btnShuan",this.btnYing.source="rank.btnYingan",this.btnCaifu.source="rank.btnCaifuan",t){case 1:this.btnCaifu.source="rank.btnCaifu",Net.send(Protocol.GET_RANK_LIST,{},this.ranklistcallback.bind(this));break;case 2:this.btnShu.source="rank.btnShu",Net.send(Protocol.GET_RANK_LIST2,{win:"0"},this.ranklistcallback.bind(this));break;case 3:this.btnYing.source="rank.btnYing",Net.send(Protocol.GET_RANK_LIST2,{win:"1"},this.ranklistcallback.bind(this))}},e.prototype.ranklistcallback=function(t){if(200==t.code){this.clearItems();for(var e=t.list,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("RankItemPanel");a.y=100*n,this.itemGroup.addChild(a),a.setData({name:e[n].name,vip:e[n].vip,gold:e[n].gold,rank:n+1,headurl:e[n].headurl}),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("RankItemPanel",this.arr[e]));
this.arr=[]},e.prototype.dispose=function(){this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(RankPanel.prototype,"RankPanel",["fany.IDispose"]);var RedBoxPanel=function(t){function e(e,i,n){var a=t.call(this)||this;return a.game=-1,a.type=-1,a.data=null,a.isTouch=!1,a.level=0,a.levelArr=[1,5,10],a.select=0,a.selectArr=[1e3,2e3,3e3,5e3],a.rid="",a.intval=-1,a.sendTotalGold=0,a.skinName="resource/skins/other/RedBoxPanelSkin.exml",a.game=e,a.type=i,a.data=n,a}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnPlus,egret.TouchEvent.TOUCH_TAP,this.onTouchPlus.bind(this)),EventManage.addButtonEvent(this,this.btnReduce,egret.TouchEvent.TOUCH_TAP,this.onTouchReduce.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.onTouchSureSend.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.imgRedBox,egret.TouchEvent.TOUCH_TAP,this.onTouchRedBox.bind(this));for(var t=0;4>t;t++)EventManage.addEvent(this,this["grpMoney"+t],egret.TouchEvent.TOUCH_TAP,this.onTouchMoney.bind(this,t));if(this.level=0,this.labNum.text=this.levelArr[this.level]+"份",this.select=0,this["imgSelect"+this.select].source="c.labbg1",this.labName.text="",this.labInfo.text="",this.labName.touchEnabled=!1,this.labInfo.touchEnabled=!1,0==this.type?(this.grpRobRed.visible=!0,this.grpSendRed.visible=!1,this.labTips.text="",this.intval=setInterval(this.dispose.bind(this),5e3)):(this.grpSendRed.visible=!0,this.grpRobRed.visible=!1),null!=this.data){if(this.data.name==GlobalData.user.nickname)return;this.rid=this.data.rid,this.labName.text="土豪"+this.data.name,this.labInfo.text="发了"+QuickManage.moneyStr(this.data.total)+"的红包"}},e.prototype.setRid=function(t){t.name!=GlobalData.user.nickname&&(this.rid=t.rid,this.labName.text="土豪"+t.name,this.labInfo.text="发了"+QuickManage.moneyStr(t.total)+"的红包")},e.prototype.onTouchRedBox=function(){this.isTouch||(this.isTouch=!0,Net.send(Protocol.GAME_GET_REDBOX,{rid:this.rid},this.getRedBoxCallback.bind(this)))},e.prototype.getRedBoxCallback=function(t){if(200==t.code){var e="";0==t.gold?e="抱歉您这次没有抢到红包！":(e="恭喜您抢到"+QuickManage.moneyStr(t.gold),PanelManage.hall.updateGold(),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.OPERTE_REDBOX_COMPLETE))),this.labTips.text=e}else TipsManage.showTips(t.msg);clearInterval(this.intval),this.intval=setInterval(this.dispose.bind(this),3e3)},e.prototype.onTouchPlus=function(){2!=this.level&&(this.level++,this.labNum.text=this.levelArr[this.level]+"份")},e.prototype.onTouchReduce=function(){0!=this.level&&(this.level--,this.labNum.text=this.levelArr[this.level]+"份")},e.prototype.onTouchMoney=function(t){this.select!=t&&(this["imgSelect"+this.select].source="c.labbg0",this.select=t,this["imgSelect"+this.select].source="c.labbg1")},e.prototype.onTouchSureSend=function(){this.sendTotalGold=1e4*this.selectArr[this.select];var t=this.levelArr[this.level];0==this.game?Net.send(Protocol.GAME_ANIMAL_REDBOX,{total:this.sendTotalGold,count:t},this.sendCallback.bind(this)):1==this.game?Net.send(Protocol.GAME_GOLD_REDBOX,{total:this.sendTotalGold,count:t},this.sendCallback.bind(this)):2==this.game?Net.send(Protocol.GAME_NIUNIU_REDBOX,{total:this.sendTotalGold,count:t},this.sendCallback.bind(this)):3==this.game&&Net.send(Protocol.GAME_CLOWN_REDBOX,{total:this.sendTotalGold,count:t},this.sendCallback.bind(this))},e.prototype.sendCallback=function(t){200==t.code?(GlobalData.user.gold=parseInt(GlobalData.user.gold)-this.sendTotalGold+"",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.OPERTE_REDBOX_COMPLETE)),TipsManage.showTips("发送红包成功!"),this.dispose()):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){clearInterval(this.intval),EventManage.removeEvent(this),this.visible=!1,this.labTips.text="",this.isTouch=!1,PopUpManager.removePopUp(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(RedBoxPanel.prototype,"RedBoxPanel",["fany.IDispose"]);var SetPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/set/SetPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.btnCloseFn.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnOpenVoice,egret.TouchEvent.TOUCH_TAP,this.onTouchVoiceOpen.bind(this)),EventManage.addButtonEvent(this,this.btnCloseVoice,egret.TouchEvent.TOUCH_TAP,this.onTouchVoiceClose.bind(this)),EventManage.addButtonEvent(this,this.btnSubmit,egret.TouchEvent.TOUCH_TAP,this.onTouchSubmitAdvice.bind(this)),EventManage.addEvent(this,this.txtVerson,egret.TouchEvent.TOUCH_TAP,this.onTouchtxtVerson.bind(this)),this.txtVerson.text="V:"+GlobalData.version,GlobalData.isMusic?(this.btnOpenVoice.visible=!1,this.btnCloseVoice.visible=!0):(this.btnOpenVoice.visible=!0,this.btnCloseVoice.visible=!1)},e.prototype.onTouchtxtVerson=function(){localStorage.clear()},e.prototype.onTouchVoiceOpen=function(){this.btnOpenVoice.visible=!1,this.btnCloseVoice.visible=!0,GlobalData.isMusic=!0,MusicManage.playBgMuisc()},e.prototype.onTouchVoiceClose=function(){this.btnOpenVoice.visible=!0,this.btnCloseVoice.visible=!1,GlobalData.isMusic=!1,MusicManage.closeBgMuisc(),MusicManage.closeMuisc()},e.prototype.onTouchSubmitAdvice=function(){""==this.labelAdvice.text?TipsManage.showTips("提交的文字不能为空！"):Net.send(Protocol.HALL_SET_PROPOSAL,{proposal:this.labelAdvice.text},this.adviceCB.bind(this))},e.prototype.adviceCB=function(t){200==t.code?TipsManage.showTips("感谢您的建议！"):TipsManage.showTips(ErrorMessage.errorMsg(t.msg)),this.labelAdvice.text=""},e.prototype.btnCloseFn=function(){this.dispose()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(SetPanel.prototype,"SetPanel",["fany.IDispose"]);var ShopItemPanel=function(t){function e(){var e=t.call(this)||this;return e.price="",e.skinName="resource/skins/shop/ShopItemPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnChong,egret.TouchEvent.TOUCH_TAP,this.btnChongHandle.bind(this))},e.prototype.btnChongHandle=function(){PayManage.getInstance().pay(this.shopid,this.txtName.text,this.price)},e.prototype.setData=function(t){this.shopid=t.id+"",this.txtPrice.text=t.price+"元",this.txtName.text=t.name,this.txtDesc.text=t.desc,this.icon.source=t.icon,this.price=t.price2+""},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ShopItemPanel.prototype,"ShopItemPanel",["fany.IDispose"]);var ShopPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shop/ShopPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.arr=[],EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnVip,egret.TouchEvent.TOUCH_TAP,this.onTouchVip.bind(this)),Net.sendNeedSave(Protocol.GET_SHOP_LIST,{},this.shoplistcallback.bind(this),"shoplist")},e.prototype.gogo=function(){this.zhuan.rotation+=8},e.prototype.shoplistcallback=function(t){if(200==t.code){this.clearItems();for(var e=t.list,i=e.length,n=0;i>n;n++){var a=ObjManage.getObj("ShopItemPanel");a.y=95*n,this.itemGroup.addChild(a),a.setData({id:e[n]._id,name:e[n].name,desc:e[n].desc,price:parseInt(e[n].rmb)/100,icon:"shop.item"+n,price2:e[n].rmb}),this.arr.push(a)}}},e.prototype.clearItems=function(){for(var t=this.arr.length,e=0;t>e;e++)this.arr[e]&&(this.arr[e].parent&&this.arr[e].parent.removeChild(this.arr[e]),ObjManage.addObj("ShopItemPanel",this.arr[e]));this.arr=[]},e.prototype.onTouchVip=function(){PanelManage.openVip()},e.prototype.dispose=function(){GlobalData.isHasShowActive||PanelManage.openActive(),this.clearItems(),this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(ShopPanel.prototype,"ShopPanel",["fany.IDispose"]);var SignPanel=function(t){function e(){var e=t.call(this)||this;return e.curNum=0,e.rate=0,e.coinArr=[1e4,2e4,3e4,4e4,5e4,6e4,7e4],e.isPlayMusic=!1,e.skinName="resource/skins/sign/SignPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.isPlayMusic=!1;for(var t=1;8>t;t++)this["labMoney"+t].text=this.coinArr[t-1],this["sign"+t].visible=!1;EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),EventManage.addButtonEvent(this,this.btnget,egret.TouchEvent.TOUCH_TAP,this.onTouchGet.bind(this)),EventManage.addButtonEvent(this,this.btnup,egret.TouchEvent.TOUCH_TAP,this.onTouchUp.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),this.labVipInfo.text="",this.labVipMoney0.text="",this.labVipMoney1.text="",Net.send(Protocol.HALL_SIGN_GET,{},this.signCallback.bind(this))},e.prototype.signCallback=function(t){if(200==t.code){this.curNum=t.count;for(var e=1;8>e;e++)e<this.curNum+1?this["sign"+e].visible=!0:this["sign"+e].visible=!1;this.rate=100+parseInt(t.percent),0==parseInt(GlobalData.user.vip)?this.labVipInfo.text="请您领取您今日的签到奖励":this.labVipInfo.text="尊贵的vip"+GlobalData.user.vip+"玩家，请您领取您今日的签到奖励",this.labVipMoney0.text=this.coinArr[this.curNum]+"",this.labVipMoney1.text="x"+this.rate+"%",this.setBtnGet(!t.hasSign)}},e.prototype.setBtnGet=function(t){t?(this.btnget.touchEnabled=!0,this.btnget.source="sign.btnget"):(this.btnget.touchEnabled=!1,this.btnget.source="sign.btnget2")},e.prototype.onTouchGet=function(){0==this.isPlayMusic&&(GlobalData.isDebug||MusicManage.playBgMuisc(),this.isPlayMusic=!0),Net.send(Protocol.HALL_SIGN_SIGN,{},this.daySignCallback.bind(this))},e.prototype.onTouchUp=function(){0==this.isPlayMusic&&(GlobalData.isDebug||MusicManage.playBgMuisc(),this.isPlayMusic=!0),PanelManage.openShop()},e.prototype.daySignCallback=function(t){if(200==t.code){this.setBtnGet(!1),GlobalData.user.gold=t.gold,this["sign"+(this.curNum+1)].visible=!0;var e=120+190*(this.curNum%3),i=260+140*(this.curNum/3);EffectUtils.coinsFly(this,e,i),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))}},e.prototype.onTouchClose=function(){0==this.isPlayMusic&&(GlobalData.isDebug||MusicManage.playBgMuisc(),this.isPlayMusic=!0),this.dispose()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),GlobalData.isFirstShowSign&&(PanelManage.openActive(),GlobalData.isFirstShowSign=!1)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(SignPanel.prototype,"SignPanel",["fany.IDispose"]);var TaskItem=function(t){function e(){var e=t.call(this)||this;return e.taskId=0,e.curType=0,e.index=0,e.isTouchBtn=!1,e.skinName="resource/skins/task/taskItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnTouch,egret.TouchEvent.TOUCH_TAP,this.onTouchBtn.bind(this))},e.prototype.onTouchBtn=function(){this.isTouchBtn||(this.isTouchBtn=!0,Net.send(Protocol.HALL_TASK_GET,{taskId:this.taskId},this.onTouchBtnCallback.bind(this)))},e.prototype.onTouchBtnCallback=function(t){this.isTouchBtn=!1,200==t.code?(this.btnTouch.visible=!1,this.imgSign.visible=!0,this.imgSign.source="task.complete",lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.TASK_AFTER_COMPLETE,{index:this.index}))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.setInfo=function(t,e){this.index=e,this.taskId=t._id,this.imgLoad.width=220*(t.cur/t.max),this.labLoad.text=t.cur+"/"+t.max,this.labName.text=t.title,this.labInfo.text=t.desc,this.labGold.text=QuickManage.moneyStr(t.num),0==t.status?(this.btnTouch.visible=!1,this.imgSign.visible=!0,this.imgSign.source="task.nocomplete"):1==t.status?(this.btnTouch.visible=!0,this.imgSign.visible=!1):2==t.status&&(this.btnTouch.visible=!1,this.imgSign.visible=!0,this.imgSign.source="task.complete"),0==t.withVip?this.labGoldDouble.visible=!1:1==t.withVip&&(this.labGoldDouble.visible=!0,this.labGoldDouble.text="x"+(parseInt(GlobalData.user.vip)+1))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(TaskItem.prototype,"TaskItem",["fany.IDispose"]);var TaskPanel=function(t){function e(){var e=t.call(this)||this;return e.clacTaskHasComplete=0,e.interval=0,e.coinsNum=0,e.coinArr=[],e.flyIndex=0,e.skinName="resource/skins/task/TaskPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onTouchClose.bind(this)),Net.send(Protocol.HALL_TASK_LIST,{},this.taskList.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.TASK_AFTER_COMPLETE,this.updateGold.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.onTouchClose=function(){this.dispose()},e.prototype.taskList=function(t){this.clearItems();for(var e=!1,i=0;i<t.data.length;i++){var n=ObjManage.getObj("TaskItem");n.x=0,n.y=i*n.height,n.setInfo(t.data[i],i),1==t.data[i].status&&(e=!0,this.clacTaskHasComplete++),this.grpContent.addChild(n)}e||PanelManage.hall.redNotice({type:1},!1)},e.prototype.clearItems=function(){for(;this.grpContent.numChildren>0;)ObjManage.addObj("TaskPanel",this.grpContent.removeChildAt(0))},e.prototype.updateGold=function(t){this.clacTaskHasComplete--,0==this.clacTaskHasComplete&&PanelManage.hall.redNotice({type:1},!1),this.flyIndex=t.param.index,Net.send(Protocol.HALL_GET_GOLD,{},this.flyCoins.bind(this))},e.prototype.flyCoins=function(t){if(200==t.code){GlobalData.user.gold=t.data.gold,lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN));var e=300,i=275+this.grpContent.getChildAt(this.flyIndex).y-Math.round(this.grpContent.scrollV);EffectUtils.coinsFly(this,e,i)}else TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(TaskPanel.prototype,"TaskPanel",["fany.IDispose"]);var TeHuiPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/tehui/TeHuiPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.bg.source=GlobalData.cdnResUrl+"resource/assets/noload/noload.tehui.jpg",EventManage.addButtonEvent(this,this,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this),PanelManage.openShop()},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(TeHuiPanel.prototype,"TeHuiPanel",["fany.IDispose"]);var UserPanel=function(t){function e(){var e=t.call(this)||this;return e.selectImg="",e.sex="",e.skinName="resource/skins/user/UserSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnSure,egret.TouchEvent.TOUCH_TAP,this.btnSureHandle.bind(this));for(var t=1;5>t;t++)EventManage.addButtonEvent(this,this["nan_"+t],egret.TouchEvent.TOUCH_TAP,this.imgClick.bind(this,"nan_"+t)),EventManage.addButtonEvent(this,this["nv_"+t],egret.TouchEvent.TOUCH_TAP,this.imgClick.bind(this,"nv_"+t)),this["nan_"+t].source=GlobalData.configData.data.headurl+"nan_"+t+".png",this["nv_"+t].source=GlobalData.configData.data.headurl+"nv_"+t+".png"},e.prototype.imgClick=function(t){for(var e=1;5>e;e++)this["nan_"+e].scaleX=1,this["nan_"+e].scaleY=1,this["nv_"+e].scaleX=1,this["nv_"+e].scaleY=1;this[t].scaleX=1.1,this[t].scaleY=1.1,this.selectImg=t,"nan"==t.split("_")[0]?this.sex="1":this.sex="2"},e.prototype.btnSureHandle=function(){return""==this.txtUserName.text?void TipsManage.showTips("昵称不能为空!"):this.txtUserName.text.length>6?void TipsManage.showTips("昵称太长!"):""==this.selectImg?void TipsManage.showTips("请选择一个头像!"):void Net.send(Protocol.UPDATE_NAME,{sex:this.sex,name:this.txtUserName.text,headurl:this.selectImg},this.updateCallBack.bind(this))},e.prototype.updateCallBack=function(t){200==t.code?(TipsManage.showTips("修改成功!"),GlobalData.user.nickname=this.txtUserName.text,GlobalData.user.sex=this.sex,GlobalData.user.headurl=GlobalData.configData.data.headurl+this.selectImg+".png",PanelManage.hall.updateHeadurl()):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(UserPanel.prototype,"UserPanel",["fany.IDispose"]);var VipItem=function(t){function e(){var e=t.call(this)||this;return e.baseRate=100,e.baseMoney=15,e.skinName="resource/skins/vip/VipItemSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setVipMoney=function(t){parseInt(GlobalData.user.vip)+1>=parseInt(t.id+"")?this.labTitle.text="累计充值"+t.money/100+"元":this.labTitle.text="累计充值???元",this.imgVip.source="vip.v"+t.id,this.labInfo0.text="签到奖励多送"+t.id+"倍金币",this.labInfo1.text="救济金每日每次领取"+QuickManage.moneyStr(t.jjg)+"金币",1==parseInt(t.id+"")?this.labInfo2.text="金鲨银鲨游戏可以上庄":5==parseInt(t.id+"")?this.labInfo2.text="百人牛牛和百人金花尊享VIP专属座位":6==parseInt(t.id+"")?this.labInfo2.text="百人牛牛游戏可以上庄":8==parseInt(t.id+"")?this.labInfo2.text="百人金花游戏可以上庄":10==parseInt(t.id+"")&&(this.labInfo2.text="大厅可以发布全服公告")},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(VipItem.prototype,"VipItem",["fany.IDispose"]);var VipPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/vip/VipSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnVip,egret.TouchEvent.TOUCH_TAP,this.onTouchVipUp.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),Net.send(Protocol.GET_VIPS,{},this.vipInfo.bind(this))},e.prototype.vipInfo=function(t){if(200==t.code){var e=t.data,i=e.vip;this.labVip.text="VIP "+i,this.clearItems();for(var n=0;15>n;n++){var a=ObjManage.getObj("VipItem");a.x=-5,a.y=n*a.height,a.setVipMoney(e.vips[n]),this.grpContent.addChild(a)}15==i?(this.labLoading.text=e.totalMoney/100+"/"+e.vips[14].money/100,this.imgBar.width=400):(this.labLoading.text=e.totalMoney/100+"/"+e.vips[i].money/100,this.imgBar.width=400*(e.totalMoney/e.vips[i].money))}},e.prototype.clearItems=function(){for(var t=this.grpContent.numChildren,e=0;t>e;e++)ObjManage.addObj("VipItem",this.grpContent.removeChildAt(e))},e.prototype.onTouchVipUp=function(){this.dispose(),PanelManage.openShop()},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(VipPanel.prototype,"VipPanel",["fany.IDispose"]);var YaoQingPanel=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/yaoqing/YaoQingPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.tuiguang.source=GlobalData.cdnResUrl+"resource/assets/noload/noloading.haibao.jpg",EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),this.erweima.source=GlobalData.configData.data.erweimaapi+GlobalData.configData.data.erweimaurl+"?yid="+GlobalData.account,Net.send(Protocol.YAO_QING,{},this.yaoqingHandle.bind(this)),EventManage.addButtonEvent(this,this.btnTiXian,egret.TouchEvent.TOUCH_TAP,this.btnTiXianHandle.bind(this)),EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addEvent(this,this.tuiguangGroup,egret.TouchEvent.TOUCH_TAP,this.tuiguangHide.bind(this))},e.prototype.tuiguangHide=function(){this.tuiguangGroup.visible=!1},e.prototype.btnTiXianHandle=function(){this.tuiguangGroup.visible=!0},e.prototype.yaoqingHandle=function(t){200==t.code&&(this.txtHongBao.text="已获得点券:"+parseInt(t.data.backRmb+"")/100,this.txtYaoNum.text="已邀请:"+t.data.count)},e.prototype.updateData=function(t){var e=parseInt(this.txtHongBao.text),i=parseInt(t.backRmb+"")/100,n=e-i;1>n&&(n=0),this.txtHongBao.text="已获得点券:"+n},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(YaoQingPanel.prototype,"YaoQingPanel",["fany.IDispose"]);var YuePanel=function(t){function e(){var e=t.call(this)||this;return e.count=0,e.yueeveryday="",e.zhongeveryday="",e.skinName="resource/skins/yue/YueKaPanelSkin.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.setTouchEnabled(),this.quan1.touchEnabled=!1,this.quan2.touchEnabled=!1,EventManage.addEvent(this,this.closeRect,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.dispose.bind(this)),EventManage.addButtonEvent(this,this.zhongshenka,egret.TouchEvent.TOUCH_TAP,this.btnZhongshenHandle.bind(this)),EventManage.addButtonEvent(this,this.yueka,egret.TouchEvent.TOUCH_TAP,this.btnYueKaHandle.bind(this)),EventManage.addButtonEvent(this,this.btnJiHuo,egret.TouchEvent.TOUCH_TAP,this.btnJiHuoHandle.bind(this)),EventManage.addButtonEvent(this,this.btnget,egret.TouchEvent.TOUCH_TAP,this.btngetHandle.bind(this)),Net.send(Protocol.YUE_KA,{},this.yueHandle.bind(this)),EventManage.addEvent(this,lcp.LListener.getInstance(),EventData.UPDATE_PAY,this.updatePayData.bind(this))},e.prototype.updatePayData=function(t){var e=t.param;2==e.msg.type&&(e.msg.id==this.yue.id?(this.yueisbuy.source="yue.yesbuy",this.txtYueTime.visible=!0,this.txtYueTime.text="剩余"+e.msg.lastDay+"天"):(this.zhongisbuy.source="yue.yesbuy",this.txtZhongTime.text="终身",this.txtZhongTime.visible=!0))},e.prototype.btngetHandle=function(){0==this.count?Net.send(Protocol.GET_YUE,{shopId:this.yue.id},this.getyueHandle.bind(this)):Net.send(Protocol.GET_YUE,{shopId:this.zhong.id},this.getyueHandle.bind(this))},e.prototype.getyueHandle=function(t){200==t.code?(0==this.count?(GlobalData.user.gold=t.gold+"",TipsManage.showTips("领取成功! +"+this.yueeveryday)):(GlobalData.user.gold=t.gold+"",TipsManage.showTips("领取成功! +"+this.zhongeveryday)),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(EventData.UPDATE_MAIN))):TipsManage.showTips(ErrorMessage.errorMsg(t.msg))},e.prototype.yueHandle=function(t){200==t.code&&(this.txtYueTime.visible=!0,this.txtZhongTime.visible=!0,"月卡"==t.list[0].name?(this.yue=t.list[0],this.zhong=t.list[1]):(this.yue=t.list[1],this.zhong=t.list[0]),this.yueeveryday=QuickManage.moneyStr(parseInt(this.yue.everyDay+"")),this.zhongeveryday=QuickManage.moneyStr(parseInt(this.zhong.everyDay+"")),this.txtYueStr1.text="每日领取"+this.yueeveryday,this.txtYueStr2.text="充值立送"+QuickManage.moneyStr(parseInt(this.yue.gold+"")),this.txtZhongStr1.text="每日领取"+this.zhongeveryday,this.txtZhongStr2.text="充值立送"+QuickManage.moneyStr(parseInt(this.zhong.gold+"")),this.txtYueRate.text="系统手续费减少到"+100*parseFloat(this.yue.rate)+"%",this.txtZhongRate.text="系统手续费减少到"+100*parseFloat(this.zhong.rate)+"%","0"==this.yue.state?(this.yueisbuy.source="yue.nobuy",this.txtYueTime.visible=!1):"1"==this.yue.state?(this.yueisbuy.source="yue.yesbuy",this.txtYueTime.text="剩余"+this.yue.lastDay+"天"):(this.yueisbuy.source="yue.yilingqu",this.txtYueTime.text="剩余"+this.yue.lastDay+"天"),"0"==this.zhong.state?(this.zhongisbuy.source="yue.nobuy",this.txtZhongTime.visible=!1):"1"==this.yue.state?(this.zhongisbuy.source="yue.yesbuy",this.txtZhongTime.text="终身"):(this.zhongisbuy.source="yue.yilingqu",this.txtZhongTime.text="终身"))},e.prototype.btnJiHuoHandle=function(){1==this.count?PayManage.getInstance().pay(this.zhong.id,"终身卡",this.zhong.rmb):PayManage.getInstance().pay(this.yue.id,"月卡",this.yue.rmb)},e.prototype.btnZhongshenHandle=function(){this.count=1,this.quan1.visible=!1,this.quan2.visible=!0},e.prototype.btnYueKaHandle=function(){this.count=0,this.quan2.visible=!1,this.quan1.visible=!0},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),EventManage.removeEvent(this)},e.prototype.setTouchEnabled=function(){QuickManage.setTouchEnabled(this)},e}(eui.Component);__reflect(YuePanel.prototype,"YuePanel",["fany.IDispose"]);/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/main.min.js*//*! jQuery v@1.8.0 jquery.com | jquery.org/license | Downloads By veryhuo.com */
(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(I,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a){if(b==="data"&&p.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a))return;var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function bE(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function bF(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bX(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bV.length;while(e--){b=bV[e]+c;if(b in a)return b}return d}function bY(a,b){return a=b||a,p.css(a,"display")==="none"||!p.contains(a.ownerDocument,a)}function bZ(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=p._data(c,"olddisplay"),b?(!e[f]&&c.style.display==="none"&&(c.style.display=""),c.style.display===""&&bY(c)&&(e[f]=p._data(c,"olddisplay",cb(c.nodeName)))):(d=bH(c,"display"),!e[f]&&d!=="none"&&p._data(c,"olddisplay",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display==="none"||c.style.display==="")c.style.display=b?e[f]||"":"none"}return a}function b$(a,b,c){var d=bO.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function b_(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2)c==="margin"&&(f+=p.css(a,c+bU[e],!0)),d?(c==="content"&&(f-=parseFloat(bH(a,"padding"+bU[e]))||0),c!=="margin"&&(f-=parseFloat(bH(a,"border"+bU[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bU[e]))||0,c!=="padding"&&(f+=parseFloat(bH(a,"border"+bU[e]+"Width"))||0));return f}function ca(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,"boxSizing")==="border-box";if(d<=0){d=bH(a,b);if(d<0||d==null)d=a.style[b];if(bP.test(d))return d;e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+b_(a,b,c||(f?"border":"content"),e)+"px"}function cb(a){if(bR[a])return bR[a];var b=p("<"+a+">").appendTo(e.body),c=b.css("display");b.remove();if(c==="none"||c===""){bI=e.body.appendChild(bI||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement)bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write("<!doctype html><html><body>"),bJ.close();b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI)}return bR[a]=c,c}function ch(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||cd.test(a)?d(a,e):ch(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&p.type(b)==="object")for(e in b)ch(a+"["+e+"]",b[e],c,d);else d(a,b)}function cy(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function cz(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cu;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof h=="string"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cz(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=cz(a,c,d,e,"*",g)),h}function cA(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function cB(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);while(j[0]==="*")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function cC(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c)for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function cK(){try{return new a.XMLHttpRequest}catch(b){}}function cL(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cT(){return setTimeout(function(){cM=b},0),cM=p.now()}function cU(a,b){p.each(b,function(b,c){var d=(cS[b]||[]).concat(cS["*"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function cV(a,b,c){var d,e=0,f=0,g=cR.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=cM||cT(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++)j.tweens[e].run(d);return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cM||cT(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;cW(k,j.opts.specialEasing);for(;e<g;e++){d=cR[e].call(j,a,k,j.opts);if(d)return d}return cU(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cW(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function cX(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bY(a);c.queue||(j=p._queueHooks(a,"fx"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,"display")==="inline"&&p.css(a,"float")==="none"&&(!p.support.inlineBlockNeedsLayout||cb(a.nodeName)==="inline"?m.display="inline-block":m.zoom=1)),c.overflow&&(m.overflow="hidden",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(cO.exec(f)){delete b[d];if(f===(q?"hide":"show"))continue;o.push(d)}}g=o.length;if(g){h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n)p.style(a,b,n[b])});for(d=0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e==="width"||e==="height"?1:0))}}function cY(a,b,c,d,e){return new cY.prototype.init(a,b,c,d,e)}function cZ(a,b){var c,d={height:a},e=0;for(;e<4;e+=2-b)c=bU[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function c_(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=r.test(" ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):e.readyState==="complete"&&(e.detachEvent("onreadystatechange",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c],e=a[c];if(h===e)continue;k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady)return;if(!e.body)return setTimeout(p.ready,1);p.isReady=!0;if(a!==!0&&--p.readyWait>0)return;d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready")},isFunction:function(a){return p.type(a)==="function"},isArray:Array.isArray||function(a){return p.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||"object"},isPlainObject:function(a){if(!a||p.type(a)!=="object"||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!="string")return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(w.test(b.replace(y,"@").replace(z,"]").replace(x,"")))return(new Function("return "+b))();p.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||typeof c!="string")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;f<g;)if(c.call(a[f],f,a[f++])===!1)break;return a},trim:o?function(a){return a==null?"":o.call(a)}:function(a){return a==null?"":a.toString().replace(t,"")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l)return l.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number")for(;f<d;f++)a[e++]=c[f];else while(c[f]!==b)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i=="number"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),e!=null&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=="string"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d=="object"){for(k in d)p.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState==="complete"||e.readyState!=="loading"&&e.addEventListener)setTimeout(p.ready,1);else if(e.addEventListener)e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1);else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}}()}}return d.promise(b)},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a=="string"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){p.isFunction(c)&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&d(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1)i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return typeof a=="object"?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length||!d)return{};f=e.createElement("select"),g=f.appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:n.className!=="t",enctype:!!e.createElement("form").enctype,html5Clone:e.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:e.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),h=e.createElement("input"),h.value="t",h.setAttribute("type","radio"),b.radioValue=h.value==="t",h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j="on"+k,l=j in n,l||(n.setAttribute(j,"return;"),l=typeof n[j]=="function"),b[k+"Bubbles"]=l;return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];if(!i)return;c=e.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",l=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px",g=e.createElement("div"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!="undefined"&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/^(?:\{.*\}|\[.*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a))return;var f,g,h=p.expando,i=typeof c=="string",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c=="object"||typeof c=="function")e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a))return;var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?K:p.isEmptyObject)(d))return}}if(!c){delete h[i].data;if(!K(h[i]))return}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf("data-")===0&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,"parsedAttrs",!0)}}return k}return typeof a=="object"?this.each(function(){p.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){if(c===b)return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.shift(),e=p._queueHooks(a,b),f=function(){p.dequeue(a,b)};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),delete e.stop,d.call(a,f,e)),!c.length&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a==="fx"&&b[0]!=="inprogress"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!="string"&&(c=a,a=b),a=a||"fx";while(h--)(d=p._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=p.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(O," ");for(f=0,g=c.length;f<g;f++)while(d.indexOf(" "+c[f]+" ")>-1)d=d.replace(" "+c[f]+" "," ");e.className=a?p.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&p._data(this,"__className__",this.className),this.className=this.className||a===!1?"":p._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(P,""):d==null?"":d);return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f="":typeof f=="number"?f+="":p.isArray(f)&&(f=p.map(f,function(a){return a==null?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,f,"value")===b)this.value=f})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){b=p(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&p.isFunction(p.fn[c]))return p(a)[c](d);if(typeof a.getAttribute=="undefined")return p.prop(a,c,d);h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d)}return g&&"get"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++)e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");else if(!p.support.radioValue&&b==="radio"&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,"button"))return L.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!=="":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===""&&(b="false"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=p.inArray(p(a).val(),b)>=0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!="undefined"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(" ");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events))return;b=p.trim(_(b||"")).split(" ");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m)p.event.remove(a,h+b[f],c,d,!0);continue}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered))return;s.indexOf("!")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(".")>=0&&(t=s.split("."),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s])return;c=typeof c=="object"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"";if(!f){h=p.cache;for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1)return;q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply(k,d)===!1&&c.preventDefault();return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!=="click"||!p.nodeName(f,"a"))&&p.acceptData(f)&&m&&f[s]&&(s!=="focus"&&s!=="blur"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n,o=(p._data(this,"events")||{})[c.type]||[],q=o.delegateCount,r=[].slice.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1)return;if(q&&(!c.button||c.type!=="click")){g=p(this),g.context=this;for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!=="click"){i={},k=[],g[0]=f;for(d=0;d<q;d++)l=o[d],m=l.selector,i[m]===b&&(i[m]=g.is(m)),i[m]&&k.push(l);k.length&&u.push({elem:f,matches:k})}}o.length>q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.isPropagationStopped();d++){j=u[d],c.currentTarget=j.elem;for(e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++){l=j.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleObj=l,h=((p.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,r),h!==b&&(c.result=h,h===!1&&(c.preventDefault(),c.stopPropagation()))}}return t.postDispatch&&t.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{ready:{setup:p.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]=="undefined"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this instanceof p.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;else return new p.Event(a,b)},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),p._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")p.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0)});return!1}p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0)},teardown:function(){--c===0&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=ba;else if(!e)return this;return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if(typeof a=="object"){for(f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bd(a,b,c,d){var e=0,f=b.length;for(;e<f;e++)Z(a,b[e],c,d)}function be(a,b,c,d,e,f){var g,h=$.setFilters[b.toLowerCase()];return h||Z.error(b),(a||!(g=e))&&bd(a||"*",d,g=[],e),g.length>0?h(g,c,f):[]}function bf(a,c,d,e,f){var g,h,i,j,k,l,m,n,p=0,q=f.length,s=L.POS,t=new RegExp("^"+s.source+"(?!"+r+")","i"),u=function(){var a=1,c=arguments.length-2;for(;a<c;a++)arguments[a]===b&&(g[a]=b)};for(;p<q;p++){s.exec(""),a=f[p],j=[],i=0,k=e;while(g=s.exec(a)){n=s.lastIndex=g.index+g[0].length;if(n>i){m=a.slice(i,g.index),i=n,l=[c],B.test(m)&&(k&&(l=k),k=e);if(h=H.test(m))m=m.slice(0,-5).replace(B,"$&*");g.length>1&&g[0].replace(t,u),k=be(m,g[1],g[2],l,k,h)}}k?(j=j.concat(k),(m=a.slice(i))&&m!==")"?B.test(m)?bd(m,j,d,e):Z(m,c,d,e?e.concat(k):k):o.apply(d,j)):Z(a,c,d,e)}return q===1?d:Z.uniqueSort(d)}function bg(a,b,c){var d,e,f,g=[],i=0,j=D.exec(a),k=!j.pop()&&!j.pop(),l=k&&a.match(C)||[""],m=$.preFilter,n=$.filter,o=!c&&b!==h;for(;(e=l[i])!=null&&k;i++){g.push(d=[]),o&&(e=" "+e);while(e){k=!1;if(j=B.exec(e))e=e.slice(j[0].length),k=d.push({part:j.pop().replace(A," "),captures:j});for(f in n)(j=L[f].exec(e))&&(!m[f]||(j=m[f](j,b,c)))&&(e=e.slice(j.shift().length),k=d.push({part:f,captures:j}));if(!k)break}}return k||Z.error(a),g}function bh(a,b,e){var f=b.dir,g=m++;return a||(a=function(a){return a===e}),b.first?function(b,c){while(b=b[f])if(b.nodeType===1)return a(b,c)&&b}:function(b,e){var h,i=g+"."+d,j=i+"."+c;while(b=b[f])if(b.nodeType===1){if((h=b[q])===j)return b.sizset;if(typeof h=="string"&&h.indexOf(i)===0){if(b.sizset)return b}else{b[q]=j;if(a(b,e))return b.sizset=!0,b;b.sizset=!1}}}}function bi(a,b){return a?function(c,d){var e=b(c,d);return e&&a(e===!0?c:e,d)}:b}function bj(a,b,c){var d,e,f=0;for(;d=a[f];f++)$.relative[d.part]?e=bh(e,$.relative[d.part],b):(d.captures.push(b,c),e=bi(e,$.filter[d.part].apply(null,d.captures)));return e}function bk(a){return function(b,c){var d,e=0;for(;d=a[e];e++)if(d(b,c))return!0;return!1}}var c,d,e,f,g,h=a.document,i=h.documentElement,j="undefined",k=!1,l=!0,m=0,n=[].slice,o=[].push,q=("sizcache"+Math.random()).replace(".",""),r="[\\x20\\t\\r\\n\\f]",s="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",t=s.replace("w","w#"),u="([*^$|!~]?=)",v="\\["+r+"*("+s+")"+r+"*(?:"+u+r+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+t+")|)|)"+r+"*\\]",w=":("+s+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",x=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",y=r+"*([\\x20\\t\\r\\n\\f>+~])"+r+"*",z="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+v+"|"+w.replace(2,7)+"|[^\\\\(),])+",A=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),B=new RegExp("^"+y),C=new RegExp(z+"?(?="+r+"*,|$)","g"),D=new RegExp("^(?:(?!,)(?:(?:^|,)"+r+"*"+z+")*?|"+r+"*(.*?))(\\)|$)"),E=new RegExp(z.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+y,"g"),F=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,G=/[\x20\t\r\n\f]*[+~]/,H=/:not\($/,I=/h\d/i,J=/input|select|textarea|button/i,K=/\\(?!\\)/g,L={ID:new RegExp("^#("+s+")"),CLASS:new RegExp("^\\.("+s+")"),NAME:new RegExp("^\\[name=['\"]?("+s+")['\"]?\\]"),TAG:new RegExp("^("+s.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+v),PSEUDO:new RegExp("^"+w),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),POS:new RegExp(x,"ig"),needsContext:new RegExp("^"+r+"*[>+~]|"+x,"i")},M={},N=[],O={},P=[],Q=function(a){return a.sizzleFilter=!0,a},R=function(a){return function(b){return b.nodeName.toLowerCase()==="input"&&b.type===a}},S=function(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}},T=function(a){var b=!1,c=h.createElement("div");try{b=a(c)}catch(d){}return c=null,b},U=T(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string"}),V=T(function(a){a.id=q+0,a.innerHTML="<a name='"+q+"'></a><div name='"+q+"'></div>",i.insertBefore(a,i.firstChild);var b=h.getElementsByName&&h.getElementsByName(q).length===2+h.getElementsByName(q+0).length;return g=!h.getElementById(q),i.removeChild(a),b}),W=T(function(a){return a.appendChild(h.createComment("")),a.getElementsByTagName("*").length===0}),X=T(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==j&&a.firstChild.getAttribute("href")==="#"}),Y=T(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||a.getElementsByClassName("e").length===0?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length!==1)}),Z=function(a,b,c,d){c=c||[],b=b||h;var e,f,g,i,j=b.nodeType;if(j!==1&&j!==9)return[];if(!a||typeof a!="string")return c;g=ba(b);if(!g&&!d)if(e=F.exec(a))if(i=e[1]){if(j===9){f=b.getElementById(i);if(!f||!f.parentNode)return c;if(f.id===i)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(i))&&bb(b,f)&&f.id===i)return c.push(f),c}else{if(e[2])return o.apply(c,n.call(b.getElementsByTagName(a),0)),c;if((i=e[3])&&Y&&b.getElementsByClassName)return o.apply(c,n.call(b.getElementsByClassName(i),0)),c}return bm(a,b,c,d,g)},$=Z.selectors={cacheLength:50,match:L,order:["ID","TAG"],attrHandle:{},createPseudo:Q,find:{ID:g?function(a,b,c){if(typeof b.getElementById!==j&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==j&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==j&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:W?function(a,b){if(typeof b.getElementsByTagName!==j)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a==="*"){var d,e=[],f=0;for(;d=c[f];f++)d.nodeType===1&&e.push(d);return e}return c}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(K,""),a[3]=(a[4]||a[5]||"").replace(K,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||Z.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&Z.error(a[0]),a},PSEUDO:function(a){var b,c=a[4];return L.CHILD.test(a[0])?null:(c&&(b=D.exec(c))&&b.pop()&&(a[0]=a[0].slice(0,b[0].length-c.length-1),c=b[0].slice(0,-1)),a.splice(2,3,c||a[3]),a)}},filter:{ID:g?function(a){return a=a.replace(K,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(K,""),function(b){var c=typeof b.getAttributeNode!==j&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return a==="*"?function(){return!0}:(a=a.replace(K,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=M[a];return b||(b=M[a]=new RegExp("(^|"+r+")"+a+"("+r+"|$)"),N.push(a),N.length>$.cacheLength&&delete M[N.shift()]),function(a){return b.test(a.className||typeof a.getAttribute!==j&&a.getAttribute("class")||"")}},ATTR:function(a,b,c){return b?function(d){var e=Z.attr(d,a),f=e+"";if(e==null)return b==="!=";switch(b){case"=":return f===c;case"!=":return f!==c;case"^=":return c&&f.indexOf(c)===0;case"*=":return c&&f.indexOf(c)>-1;case"$=":return c&&f.substr(f.length-c.length)===c;case"~=":return(" "+f+" ").indexOf(c)>-1;case"|=":return f===c||f.substr(0,c.length+1)===c+"-"}}:function(b){return Z.attr(b,a)!=null}},CHILD:function(a,b,c,d){if(a==="nth"){var e=m++;return function(a){var b,f,g=0,h=a;if(c===1&&d===0)return!0;b=a.parentNode;if(b&&(b[q]!==e||!a.sizset)){for(h=b.firstChild;h;h=h.nextSibling)if(h.nodeType===1){h.sizset=++g;if(h===a)break}b[q]=e}return f=a.sizset-d,c===0?f===0:f%c===0&&f/c>=0}}return function(b){var c=b;switch(a){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a==="first")return!0;c=b;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b,c,d){var e=$.pseudos[a]||$.pseudos[a.toLowerCase()];return e||Z.error("unsupported pseudo: "+a),e.sizzleFilter?e(b,c,d):e}},pseudos:{not:Q(function(a,b,c){var d=bl(a.replace(A,"$1"),b,c);return function(a){return!d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!$.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},contains:Q(function(a){return function(b){return(b.textContent||b.innerText||bc(b)).indexOf(a)>-1}}),has:Q(function(a){return function(b){return Z(a,b).length>0}}),header:function(a){return I.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b)},radio:R("radio"),checkbox:R("checkbox"),file:R("file"),password:R("password"),image:R("image"),submit:S("submit"),reset:S("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},input:function(a){return J.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){var d=[],e=c?1:0,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},odd:function(a,b,c){var d=[],e=c?0:1,f=a.length;for(;e<f;e=e+2)d.push(a[e]);return d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var d=a.splice(+b,1);return c?a:d}}};$.setFilters.nth=$.setFilters.eq,$.filters=$.pseudos,X||($.attrHandle={href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}}),V&&($.order.push("NAME"),$.find.NAME=function(a,b){if(typeof b.getElementsByName!==j)return b.getElementsByName(a)}),Y&&($.order.splice(1,0,"CLASS"),$.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!==j&&!c)return b.getElementsByClassName(a)});try{n.call(i.childNodes,0)[0].nodeType}catch(_){n=function(a){var b,c=[];for(;b=this[a];a++)c.push(b);return c}}var ba=Z.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},bb=Z.contains=i.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:i.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},bc=Z.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=bc(a)}else if(e===3||e===4)return a.nodeValue}else for(;b=a[d];d++)c+=bc(b);return c};Z.attr=function(a,b){var c,d=ba(a);return d||(b=b.toLowerCase()),$.attrHandle[b]?$.attrHandle[b](a):U||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null)},Z.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},[0,0].sort(function(){return l=0}),i.compareDocumentPosition?e=function(a,b){return a===b?(k=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:(e=function(a,b){if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return f(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)g.unshift(j),j=j.parentNode;c=e.length,d=g.length;for(var l=0;l<c&&l<d;l++)if(e[l]!==g[l])return f(e[l],g[l]);return l===c?f(a,g[l],-1):f(e[l],b,1)},f=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),Z.uniqueSort=function(a){var b,c=1;if(e){k=l,a.sort(e);if(k)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1)}return a};var bl=Z.compile=function(a,b,c){var d,e,f,g=O[a];if(g&&g.context===b)return g;e=bg(a,b,c);for(f=0;d=e[f];f++)e[f]=bj(d,b,c);return g=O[a]=bk(e),g.context=b,g.runs=g.dirruns=0,P.push(a),P.length>$.cacheLength&&delete O[P.shift()],g};Z.matches=function(a,b){return Z(a,null,null,b)},Z.matchesSelector=function(a,b){return Z(b,null,null,[a]).length>0};var bm=function(a,b,e,f,g){a=a.replace(A,"$1");var h,i,j,k,l,m,p,q,r,s=a.match(C),t=a.match(E),u=b.nodeType;if(L.POS.test(a))return bf(a,b,e,f,s);if(f)h=n.call(f,0);else if(s&&s.length===1){if(t.length>1&&u===9&&!g&&(s=L.ID.exec(t[0]))){b=$.find.ID(s[1],b,g)[0];if(!b)return e;a=a.slice(t.shift().length)}q=(s=G.exec(t[0]))&&!s.index&&b.parentNode||b,r=t.pop(),m=r.split(":not")[0];for(j=0,k=$.order.length;j<k;j++){p=$.order[j];if(s=L[p].exec(m)){h=$.find[p]((s[1]||"").replace(K,""),q,g);if(h==null)continue;m===r&&(a=a.slice(0,a.length-r.length)+m.replace(L[p],""),a||o.apply(e,n.call(h,0)));break}}}if(a){i=bl(a,b,g),d=i.dirruns++,h==null&&(h=$.find.TAG("*",G.test(a)&&b.parentNode||b));for(j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l)}return e};h.querySelectorAll&&function(){var a,b=bm,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[],f=[":active"],g=i.matchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;T(function(a){a.innerHTML="<select><option selected></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+r+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),T(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+r+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=e.length&&new RegExp(e.join("|")),bm=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a)))if(d.nodeType===9)try{return o.apply(f,n.call(d.querySelectorAll(a),0)),f}catch(i){}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j=d.getAttribute("id"),k=j||q,l=G.test(a)&&d.parentNode||d;j?k=k.replace(c,"\\$&"):d.setAttribute("id",k);try{return o.apply(f,n.call(l.querySelectorAll(a.replace(C,"[id='"+k+"'] $&")),0)),f}catch(i){}finally{j||d.removeAttribute("id")}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,"div");try{g.call(b,"[test!='']:sizzle"),f.push($.match.PSEUDO)}catch(c){}}),f=new RegExp(f.join("|")),Z.matchesSelector=function(b,c){c=c.replace(d,"='$1']");if(!ba(b)&&!f.test(c)&&(!e||!e.test(c)))try{var h=g.call(b,c);if(h||a||b.document&&b.document.nodeType!==11)return h}catch(i){}return Z(c,null,null,[b]).length>0})}(),Z.attr=p.attr,p.find=Z,p.expr=Z.selectors,p.expr[":"]=p.expr.pseudos,p.unique=Z.uniqueSort,p.text=Z.getText,p.isXMLDoc=Z.isXML,p.contains=Z.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!="string")return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(bj(this,a,!1),"not",a)},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!="string"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?typeof a=="string"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return bi(a,"nextSibling")},prev:function(a){return bi(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d=="string"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(","))}}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||p.filter(a,[c]).length)!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName("*"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bm,""):b;if(typeof a=="string"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bo,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j=="string"&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=(c[0]||c).ownerDocument||c[0]||c,typeof c.createDocumentFragment=="undefined"&&(c=e),a.length===1&&typeof i=="string"&&i.length<512&&c===e&&i.charAt(0)==="<"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f)e[f]&&bE(d[f],e[f])}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f)bD(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=0,t=[];if(!b||typeof b.createDocumentFragment=="undefined")b=e;for(g=b===e&&bA;(h=a[s])!=null;s++){typeof h=="number"&&(h+="");if(!h)continue;if(typeof h=="string")if(!br.test(h))h=b.createTextNode(h);else{g=g||bk(b),l=l||g.appendChild(b.createElement("div")),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--)l=l.lastChild;if(!p.support.tbody){m=bq.test(h),n=i==="table"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]==="<table>"&&!m?l.childNodes:[];for(f=n.length-1;f>=0;--f)p.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f])}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l=g.lastChild}h.nodeType?t.push(h):t=p.merge(t,h)}l&&(g.removeChild(l),h=l=g=null);if(!p.support.appendChecked)for(s=0;(h=t[s])!=null;s++)p.nodeName(h,"input")?bG(h):typeof h.getElementsByTagName!="undefined"&&p.grep(h.getElementsByTagName("input"),bG);if(c){q=function(a){if(!a.type||bx.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(s=0;(h=t[s])!=null;s++)if(!p.nodeName(h,"script")||!q(h))c.appendChild(h),typeof h.getElementsByTagName!="undefined"&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[s+1,0].concat(r)),s+=r.length)}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++)if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^margin/,bO=new RegExp("^("+q+")(.*)$","i"),bP=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bQ=new RegExp("^([-+])=("+q+")","i"),bR={},bS={position:"absolute",visibility:"hidden",display:"block"},bT={letterSpacing:0,fontWeight:400,lineHeight:1},bU=["Top","Right","Bottom","Left"],bV=["Webkit","O","Moz","ms"],bW=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return bZ(this,!0)},hide:function(){return bZ(this)},toggle:function(a,b){var c=typeof a=="boolean";return p.isFunction(a)&&p.isFunction(b)?bW.apply(this,arguments):this.each(function(){(c?a:bY(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return c===""?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bX(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g==="string"&&(f=bQ.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!p.cssNumber[i]&&(d+="px");if(!h||!("set"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bX(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f==="normal"&&c in bT&&(f=bT[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(a,b){var c,d,e,f,g=getComputedStyle(a,null),h=a.style;return g&&(c=g[b],c===""&&!p.contains(a.ownerDocument.documentElement,a)&&(c=p.style(a,b)),bP.test(c)&&bN.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bP.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),e===""?"auto":e}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0||bH(a,"display")!=="none"?ca(a,b,d):p.swap(a,bS,function(){return ca(a,b,d)})},set:function(a,c,d){return b$(a,c,d?b_(a,b,d,p.support.boxSizing&&p.css(a,"boxSizing")==="border-box"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bK.test(f)?f.replace(bK,e):f+" "+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b)return bH(a,"marginRight")})}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bP.test(d)?p(a).position()[b]+"px":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,"display"))==="none"},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bU[d]+b]=e[d]||e[d-2]||e[0];return f}},bN.test(a)||(p.cssHooks[a+b].set=b$)});var cc=/%20/g,cd=/\[\]$/,ce=/\r?\n/g,cf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,cg=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cg.test(this.nodeName)||cf.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(ce,"\r\n")}}):{name:b.name,value:c.replace(ce,"\r\n")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)ch(d,a[d],c,f);return e.join("&").replace(cc,"+")};var ci,cj,ck=/#.*$/,cl=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,cm=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,cn=/^(?:GET|HEAD)$/,co=/^\/\//,cp=/\?/,cq=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cr=/([?&])_=[^&]*/,cs=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,ct=p.fn.load,cu={},cv={},cw=["*/"]+["*"];try{ci=f.href}catch(cx){ci=e.createElement("a"),ci.href="",ci=ci.href}cj=cs.exec(ci.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!="string"&&ct)return ct.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):typeof c=="object"&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cq,"")).find(e):a)}),this},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?cA(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cA(a,b),a},ajaxSettings:{url:ci,isLocal:cm.test(cj[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cw},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cy(cu),ajaxTransport:cy(cv),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2)return;v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=a>0?4:0,f&&(u=cB(l,x,f));if(a>=200&&a<300||a===304)l.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(p.lastModified[d]=w),w=x.getResponseHeader("Etag"),w&&(p.etag[d]=w)),a===304?(y="notmodified",k=!0):(k=cC(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y="error",a<0&&(a=0)}x.status=a,x.statusText=""+(c||y),k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cl.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this},l.url=((a||l.url)+"").replace(ck,"").replace(co,cj[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),l.crossDomain==null&&(i=cs.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==cj[1]&&i[2]==cj[2]&&(i[3]||(i[1]==="http:"?80:443))==(cj[3]||(cj[1]==="http:"?80:443)))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),cz(cu,l,c,x);if(v===2)return x;j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!cn.test(l.type),j&&p.active++===0&&p.event.trigger("ajaxStart");if(!l.hasContent){l.data&&(l.url+=(cp.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cr,"$1_="+z);l.url=A+(A===l.url?(cp.test(l.url)?"&":"?")+"_="+z:"")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+cw+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)x.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w="abort";for(k in{success:1,error:1,complete:1})x[k](l[k]);g=cz(cv,l,c,x);if(!g)y(-1,"No Transport");else{x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort("timeout")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2)y(-1,B);else throw B}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var cD=[],cE=/\?/,cF=/(=)\?(?=&|$)|\?\?/,cG=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cD.pop()||p.expando+"_"+cG++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cF.test(j),m=k&&!l&&typeof i=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cF.test(i);if(c.dataTypes[0]==="jsonp"||l||m)return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cF,"$1"+f):m?c.data=i.replace(cF,"$1"+f):k&&(c.url+=(cE.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cD.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),"script"}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cH,cI=a.ActiveXObject?function(){for(var a in cH)cH[a](0,1)}:!1,cJ=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cK()||cL()}:cK,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cI&&delete cH[g]);if(e)i.readyState!==4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cJ,cI&&(cH||(cH={},p(a).unload(cI)),cH[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cM,cN,cO=/^(?:toggle|show|hide)$/,cP=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cQ=/queueHooks$/,cR=[cX],cS={"*":[function(a,b){var c,d,e,f=this.createTween(a,b),g=cP.exec(b),h=f.cur(),i=+h||0,j=1;if(g){c=+g[2],d=g[3]||(p.cssNumber[a]?"":"px");if(d!=="px"&&i){i=p.css(f.elem,a,!0)||c||1;do e=j=j||".5",i=i/j,p.style(f.elem,a,i+d),j=f.cur()/h;while(j!==1&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return f}]};p.Animation=p.extend(cV,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],cS[c]=cS[c]||[],cS[c].unshift(b)},prefilter:function(a,b){b?cR.unshift(a):cR.push(a)}}),p.Tween=cY,cY.prototype={constructor:cY,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=cY.propHooks[this.prop];return a&&a.get?a.get(this):cY.propHooks._default.get(this)},run:function(a){var b,c=cY.propHooks[this.prop];return this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration),this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cY.propHooks._default.set(this),this}},cY.prototype.init.prototype=cY.prototype,cY.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cY.propHooks.scrollTop=cY.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d=="boolean"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(cZ(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bY).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cV(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cQ.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:cZ("show"),slideUp:cZ("hide"),slideToggle:cZ("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&typeof a=="object"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cY.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cN&&(cN=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cN),cN=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c$=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j,k,l,m=this[0],n=m&&m.ownerDocument;if(!n)return;return(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=c_(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");d==="static"&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=(d==="absolute"||d==="fixed")&&p.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0])return;var a=this[0],b=this.offsetParent(),c=this.offset(),d=c$.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c$.test(a.nodeName)&&p.css(a,"position")==="static")a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=c_(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g)}})}),a.jQuery=a.$=p,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/resource/js/jquery-1.8.0.min.js*/var jsonData = "test";
var isLoadJs = "";
window.load = isNewVerson();
function setWxConfig(signPackage) {
    wx.config({
        debug: false,
        appId: signPackage.appId,  //必填,公众号的唯一标识
        timestamp: signPackage.timestamp,             //必填,生成签名的时间戳
        nonceStr: signPackage.nonceStr,             //必填,生成签名的随机串
        signature: signPackage.signature,             //必填,签名,见 http://t.cn/RL24Fgw
        jsApiList: [
            "getNetworkType",
            "getLocation",
            "onMenuShareTimeline",
            "onMenuShareAppMessage",
            "onMenuShareQQ",
            "onMenuShareWeibo",
            "onMenuShareQZone"//如业务需求，可继续加入其他微信JS接口
        ]
    });
}
function setShare(title, desc, imgurl, link) {
    wx.ready(function () {
        var shareData64 = {
            title: title,                         //必填,分享标题
            desc: desc,                          //选填,分享描述
            imgUrl: imgurl,                        //选填,分享图片
            link: link, //必填,可跟get参数,禁止直接使用location.href
            success: function () {
                // 用户确认分享后执行的回调函数
                //GameManage.shareSucc();
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        };
        wx.onMenuShareTimeline(shareData64);
        wx.onMenuShareAppMessage(shareData64);
    });
}
function isWeiXin() {
    var ua = window.navigator.userAgent.toLowerCase();
    return /MicroMessenger/i.test(ua);
}
function isNewVerson() {
    $.getJSON("resource/config/config.json?time=" + (Date.parse(new Date())), function (data) {
        GlobalData.configData = data;
        GlobalData.platform = data.data.platform;
        GlobalData.userfrom = data.data.userfrom;
        GlobalData.version = data.data.version;
        $.get(data.data.versonurl + "?type=1&time=" + (Date.parse(new Date())), {}, function (r) {
            var version = r;
            console.log("当前版本号是:" + version)
            if (GlobalData.isDebug) {
                login(data);
            } else {
                GlobalData.cdnResUrl = data.data.cdnurl;
                if (GlobalData.userfrom == "platform") {
                    login(data);
                } else {
                    var arr = window.location.href.split("/");
                    if (version + "" == arr[arr.length - 2]) {
                        login(data);
                    } else {
                        document.location.href = data.data.versonurl + window.location.search;
                    }
                }
            }
        });
    });
}
function regLogin(url, data, cb) {
    $.get(url, data, cb);
}
function start() {
    egret.runEgret({ renderMode: "canvas", audioType: 2 });
}
function login(data) {
    if (isWeiXin() == true) {
        if (GlobalData.userfrom == "weixin") {
            var ss = localStorage.getItem('wxopeniddata');
            if (ss) {
                jsonData = ss;
                start();
            } else {
                wxLogin(data);
            }
        } else {
            guestlogin();
        }
    } else {
        guestlogin();
    }
}
function wxLogin(data) {
    var code = getStr("code");
    if (code != "") {
        $.get(data.data.getinfourl + code, function (data) {
            if (data.indexOf("openid") > 0) {
                localStorage.setItem('wxopeniddata', data);
                jsonData = data;
                start();
            } else {
                console.log("进入异常显示:" + data);
                document.getElementById('fonttext').innerHTML = '缓存异常,请清空微信缓存（微信设置->退出账号<br>重新登录微信）再试!';
            }
        });
    }
    else {
        window.location.href = data.data.turnurl + "?callbackurl=" + window.location.href.split("?")[0];
    }
}
function hideDiv() {
    document.getElementById('div-a').style.display = 'none';
}
function guestlogin() {
    try {
        // localStorage.clear();
        var openid = localStorage.getItem('uuid');
        if (openid == null) {
            openid = uuid();
            localStorage.setItem('uuid', openid);
        }
        GlobalData.openid = openid;
        start();
    } catch (e) {
        alert("请关闭浏览器的无痕浏览!")
    }
}
function uuid() {
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }

    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
        s4() + '-' + s4() + s4() + s4();
}
function getUid() {
    var uuid = localStorage.getItem('uuid');
    if (uuid == null) {
        uuid = uuid();
        localStorage.setItem('uuid', uuid);
    }
    return uuid;
}
function getJsonData() {
    return jsonData;
}
function fahongbao(url, cb) {
    $.get(url, {}, cb);
}
function getStr(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = location.search.substr(1).match(reg);
    if (r != null) return decodeURI(decodeURIComponent(decodeURI(r[2]))); return "";
}

function getPayInfo(url, data, cb) {
    $.get(url, data, cb);
}

function getShareInfo(url, data, cb) {
    $.get(url, data, cb);
}

function pay(url, data, cb) {
    $.post(url, data, cb);
}/*e:\pro\other\pengxiao\dianwancheng2/bin-release/web/170612203331/resource/js/my.js*/